{"version":3,"file":"draw-modify-trace-snap.js","mappings":"4MAWA,MAAMA,EAAS,IAAI,IAAU,CAC3BC,OAAQ,IAAI,IAAU,CACpBC,IAAK,gGACLC,QAAS,OAKPC,EAAa,IAAI,IAAY,CACjCH,OAAQ,IAAI,IAAa,CACvBI,OAAQ,IAAI,IACZH,IAAK,2BAEPI,MAAO,CACL,aAAc,uBACd,eAAgB,uBAChB,eAAgB,MAKdC,EAAa,IAAI,IAAY,CACjCN,OAAQ,IAAI,IACZK,MAAO,CACL,eAAgB,uBAChB,eAAgB,EAChB,aAAc,4BAIZE,EAAM,IAAI,IAAI,CAClBC,OAAQ,CAACT,EAAQI,EAAYG,GAC7BG,OAAQ,MACRC,KAAM,IAAI,KAAK,CACbC,OAAQ,EAAE,SAAU,SACpBC,KAAM,GACNV,QAAS,OAIb,IAAIW,EAEJ,MAAMC,EAAkB,IAAI,IAAK,CAC/Bd,OAAQG,EAAWY,cAGfC,EAAoB,IAAI,IAAO,CACnChB,OAAQM,EAAWS,YACnBE,OAAO,EACPC,YAAaf,EAAWY,cAGpBI,EAAaC,SAASC,eAAe,QAE3C,SAASC,IACP,MAAMC,EAAQJ,EAAWI,MACzBhB,EAAIe,eAAeN,GACL,SAAVO,IACFV,EAAkB,IAAI,KAAK,CACzBW,KAAMD,EACNvB,OAAQM,EAAWS,YACnBE,OAAO,EACPC,YAAaf,EAAWY,YACxBV,MAAO,CACL,eAAgB,2BAChB,eAAgB,IAChB,aAAc,4BACd,gBAAiB,EACjB,oBAAqB,8BAGzBQ,EAAgBY,KAAK,WAAW,KAC9BN,EAAWI,MAAQ,OACnBG,WAAWC,EAAgB,EAAE,IAE/BpB,EAAIe,eAAeT,IAErBN,EAAIe,eAAeR,EACrB,CAEA,SAASa,IACHd,IACFN,EAAIqB,kBAAkBf,GACtBA,EAAkB,MAEpBN,EAAIqB,kBAAkBZ,GACtBT,EAAIqB,kBAAkBd,GACtBQ,GACF,CACAH,EAAWU,SAAWF,EACtBL,G","sources":["webpack:///./draw-modify-trace-snap.js"],"sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport GeoJSON from '../src/ol/format/GeoJSON.js';\nimport Draw from '../src/ol/interaction/Draw.js';\nimport Modify from '../src/ol/interaction/Modify.js';\nimport Snap from '../src/ol/interaction/Snap.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport ImageTile from '../src/ol/source/ImageTile.js';\nimport VectorSource from '../src/ol/source/Vector.js';\n\nconst raster = new TileLayer({\n  source: new ImageTile({\n    url: 'https://api.maptiler.com/maps/satellite/{z}/{x}/{y}.jpg?key=get_your_own_D6rA4zTHduk6KOKTXzGB',\n    maxZoom: 20,\n  }),\n});\n\n// features in this layer will be snapped to\nconst baseVector = new VectorLayer({\n  source: new VectorSource({\n    format: new GeoJSON(),\n    url: 'data/geojson/fire.json',\n  }),\n  style: {\n    'fill-color': 'rgba(255, 0, 0, 0.3)',\n    'stroke-color': 'rgba(255, 0, 0, 0.9)',\n    'stroke-width': 0.5,\n  },\n});\n\n// this is where the drawn features go\nconst drawVector = new VectorLayer({\n  source: new VectorSource(),\n  style: {\n    'stroke-color': 'rgba(100, 255, 0, 1)',\n    'stroke-width': 2,\n    'fill-color': 'rgba(100, 255, 0, 0.3)',\n  },\n});\n\nconst map = new Map({\n  layers: [raster, baseVector, drawVector],\n  target: 'map',\n  view: new View({\n    center: [-13378949, 5943751],\n    zoom: 11,\n    maxZoom: 23,\n  }),\n});\n\nlet drawInteraction;\n\nconst snapInteraction = new Snap({\n  source: baseVector.getSource(),\n});\n\nconst modifyInteraction = new Modify({\n  source: drawVector.getSource(),\n  trace: true,\n  traceSource: baseVector.getSource(),\n});\n\nconst typeSelect = document.getElementById('type');\n\nfunction addInteraction() {\n  const value = typeSelect.value;\n  map.addInteraction(modifyInteraction);\n  if (value !== 'None') {\n    drawInteraction = new Draw({\n      type: value,\n      source: drawVector.getSource(),\n      trace: true,\n      traceSource: baseVector.getSource(),\n      style: {\n        'stroke-color': 'rgba(255, 255, 100, 0.5)',\n        'stroke-width': 1.5,\n        'fill-color': 'rgba(255, 255, 100, 0.25)',\n        'circle-radius': 6,\n        'circle-fill-color': 'rgba(255, 255, 100, 0.5)',\n      },\n    });\n    drawInteraction.once('drawend', () => {\n      typeSelect.value = 'None';\n      setTimeout(changeDrawMode, 0);\n    });\n    map.addInteraction(drawInteraction);\n  }\n  map.addInteraction(snapInteraction);\n}\n\nfunction changeDrawMode() {\n  if (drawInteraction) {\n    map.removeInteraction(drawInteraction);\n    drawInteraction = null;\n  }\n  map.removeInteraction(modifyInteraction);\n  map.removeInteraction(snapInteraction);\n  addInteraction();\n}\ntypeSelect.onchange = changeDrawMode;\naddInteraction();\n"],"names":["raster","source","url","maxZoom","baseVector","format","style","drawVector","map","layers","target","view","center","zoom","drawInteraction","snapInteraction","getSource","modifyInteraction","trace","traceSource","typeSelect","document","getElementById","addInteraction","value","type","once","setTimeout","changeDrawMode","removeInteraction","onchange"],"sourceRoot":""}