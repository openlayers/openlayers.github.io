import Map from"ol/Map.js";import View from"ol/View.js";import TileLayer from"ol/layer/Tile.js";import OSM from"ol/source/OSM.js";import{createXYZ}from"ol/tilegrid.js";const worker=self,tileGrid=createXYZ({tileSize:[512,512]}),canvas=new OffscreenCanvas(512,512),map=new Map({target:canvas,layers:[new TileLayer({source:new OSM({transition:0})})]});worker.addEventListener("message",(async({data:{action:e,tile:r}})=>{if("render"!==e)return;const t=new View({center:tileGrid.getTileCoordCenter(r),resolution:tileGrid.getResolution(r[0])});map.setView(t),map.once("rendercomplete",(()=>{const e=canvas.transferToImageBitmap();worker.postMessage({action:"rendered",imageData:e},[e])}))}));