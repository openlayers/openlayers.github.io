!function(){var t,e,n,i,r={280:function(t,e){"use strict";e.A={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"}},426:function(t,e,n){"use strict";function i(t){return Math.pow(t,3)}function r(t){return 1-i(1-t)}function s(t){return 3*t*t-2*t*t*t}function o(t){return t}function a(t){return t<.5?s(2*t):1-s(2*(t-.5))}n.d(e,{T9:function(){return s},a6:function(){return i},sn:function(){return o},t8:function(){return a},vT:function(){return r}})},536:function(t,e,n){"use strict";var i=n(44090),r=n(67024),s=n(69791),o=n(22685),a=n(95702),l=n(73988);class h extends l.A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=void 0===t.collapsed||t.collapsed,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=void 0!==t.collapsible,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=void 0!==t.className?t.className:"ol-attribution",n=void 0!==t.tipLabel?t.tipLabel:"Attributions",i=void 0!==t.expandClassName?t.expandClassName:e+"-expand",s=void 0!==t.collapseLabel?t.collapseLabel:"›",a=void 0!==t.collapseClassName?t.collapseClassName:e+"-collapse";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=a):this.collapseLabel_=s;const l=void 0!==t.label?t.label:"i";"string"==typeof l?(this.label_=document.createElement("span"),this.label_.textContent=l,this.label_.className=i):this.label_=l;const h=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=n,this.toggleButton_.appendChild(h),this.toggleButton_.addEventListener(o.A.CLICK,this.handleClick_.bind(this),!1);const u=e+" "+r.XI+" "+r.$N+(this.collapsed_&&this.collapsible_?" "+r.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),c=this.element;c.className=u,c.appendChild(this.toggleButton_),c.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),n=new Set(e.flatMap((e=>e.getAttributions(t))));if(void 0!==this.attributions_&&(Array.isArray(this.attributions_)?this.attributions_.forEach((t=>n.add(t))):n.add(this.attributions_)),!this.overrideCollapsible_){const t=!e.some((t=>!1===t.getSource()?.getAttributionsCollapsible()));this.setCollapsible(t)}return Array.from(n)}async updateElement_(t){if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=await Promise.all(this.collectSourceAttributions_(t).map((t=>(0,a.hq)((()=>t))))),n=e.length>0;if(this.renderedVisible_!=n&&(this.element.style.display=n?"":"none",this.renderedVisible_=n),!(0,i.aI)(e,this.renderedAttributions_)){(0,s.gS)(this.ulElement_);for(let t=0,n=e.length;t<n;++t){const n=document.createElement("li");n.innerHTML=e[t],this.ulElement_.appendChild(n)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(r.nT),this.collapsed_?(0,s.fo)(this.collapseLabel_,this.label_):(0,s.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}e.A=h},684:function(t,e,n){"use strict";var i=n(37751),r=n(30942);class s extends i.A{constructor(t,e,n,i,r,s){super(t,e,s),this.extent=null,this.format_=i,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=r,this.url_=n,this.key=n}getTileUrl(){return this.url_}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==r.A.IDLE&&(this.setState(r.A.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(r.A.ERROR)}setFeatures(t){this.features_=t,this.setState(r.A.LOADED)}setLoader(t){this.loader_=t}}e.A=s},880:function(t,e,n){"use strict";var i=n(36804),r=n(74568);class s extends i.A{constructor(t){t=t||{};const e=Object.assign({},t),n=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=n,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(r.A.PRELOAD)}setPreload(t){this.set(r.A.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(r.A.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(r.A.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}e.A=s},1097:function(t,e,n){"use strict";n.d(e,{C:function(){return r}});var i=n(16235);function r(t,e,n,r){const s=[];let o=(0,i.S5)();for(let a=0,l=n.length;a<l;++a){const l=n[a];o=(0,i.Vy)(t,e,l[0],r),s.push((o[0]+o[2])/2,(o[1]+o[3])/2),e=l[l.length-1]}return s}},1749:function(t,e,n){"use strict";var i=n(20703),r=n(14390),s=n(24366),o=n(30942),a=n(44090),l=n(16235),h=n(25231),u=n(91460),c=n(3974),d=n(38993),f=n(62994),p=n(12911),g=n(37759),m=n(17881);function y(t,e,n,i){return`${t},${(0,f.dp)(e,n,i)}`}function _(t,e,n){if(!(n in t))return t[n]=new Set([e]),!0;const i=t[n],r=i.has(e);return r||i.add(e),!r}function v(t,e,n){const i=t[n];return!!i&&i.delete(e)}function x(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=(0,l._N)(e,(0,h.SD)(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(t.viewState.projection).getExtent();n&&(e=(0,l._N)(e,n))}return e}class b extends m.A{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=(0,l.S5)(),this.tempTileRange_=new s.A(0,0,0,0),this.tempTileCoord_=(0,f.N)(0,0,0);const n=void 0!==e.cacheSize?e.cacheSize:512;this.tileCache_=new d.A(n),this.maxStaleKeys=.5*n}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,n,i){const r=this.tileCache_,s=this.getLayer().getSource(),o=y(s.getKey(),t,e,n);let a;if(r.containsKey(o))a=r.get(o);else{if(a=s.getTile(t,e,n,i.pixelRatio,i.viewState.projection),!a)return null;r.set(o,a)}return a}getTile(t,e,n,i){const r=this.getOrCreateTile(t,e,n,i);return r||null}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),s=(0,p.Bb)(e.pixelToCoordinateTransform,t.slice()),a=n.getExtent();if(a&&!(0,l.Ym)(a,s))return null;const h=e.viewState,d=n.getRenderSource(),f=d.getTileGridForProjection(h.projection),g=d.getTilePixelRatio(e.pixelRatio);for(let t=f.getZForResolution(h.resolution);t>=f.getMinZoom();--t){const n=f.getTileCoordForCoordAndZ(s,t),a=this.getTile(t,n[1],n[2],e);if(!a||a.getState()!==o.A.LOADED)continue;const l=f.getOrigin(t),p=(0,c.xq)(f.getTileSize(t)),m=f.getResolution(t);let y;if(a instanceof r.A||a instanceof u.A)y=a.getImage();else{if(!(a instanceof i.Ay))continue;if(y=(0,i.xo)(a.getData()),!y)continue}const _=Math.floor(g*((s[0]-l[0])/m-n[1]*p[0])),v=Math.floor(g*((l[1]-s[1])/m-n[2]*p[1])),x=Math.round(g*d.getGutterForProjection(h.projection));return this.getImageData(y,_+x,v+x)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const n=e.getRevision();return this.renderedRevision_?this.renderedRevision_!==n&&(this.renderedRevision_=n,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedRevision_=n,!0}enqueueTiles(t,e,n,i,r){const s=t.viewState,a=this.getLayer(),h=a.getRenderSource(),u=h.getTileGridForProjection(s.projection),c=(0,g.v6)(h);c in t.wantedTiles||(t.wantedTiles[c]={});const d=t.wantedTiles[c],p=a.getMapInternal(),m=Math.max(n-r,u.getMinZoom(),u.getZForResolution(Math.min(a.getMaxResolution(),p?p.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):u.getResolution(0)),h.zDirection)),y=s.rotation,v=y?(0,l.Yw)(s.center,s.resolution,y,t.size):void 0;for(let r=n;r>=m;--r){const n=u.getTileRangeForExtentAndZ(e,r,this.tempTileRange_),s=u.getResolution(r);for(let e=n.minX;e<=n.maxX;++e)for(let a=n.minY;a<=n.maxY;++a){if(y&&!u.tileCoordIntersectsViewport([r,e,a],v))continue;const n=this.getTile(r,e,a,t);if(!n)continue;if(!_(i,n,r))continue;const l=n.getKey();if(d[l]=!0,n.getState()===o.A.IDLE&&!t.tileQueue.isKeyQueued(l)){const i=(0,f.N)(r,e,a,this.tempTileCoord_);t.tileQueue.enqueue([n,c,u.getTileCoordCenter(i),s])}}}}findStaleTile_(t,e){const n=this.tileCache_,i=t[0],r=t[1],s=t[2],a=this.getStaleKeys();for(let t=0;t<a.length;++t){const l=y(a[t],i,r,s);if(n.containsKey(l)){const t=n.peek(l);if(t.getState()===o.A.LOADED)return t.endTransition((0,g.v6)(this)),_(e,t,i),!0}}return!1}findAltTiles_(t,e,n,i){const r=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!r)return!1;let s=!0;const a=this.tileCache_,l=this.getLayer().getRenderSource().getKey();for(let t=r.minX;t<=r.maxX;++t)for(let e=r.minY;e<=r.maxY;++e){const r=y(l,n,t,e);let h=!1;if(a.containsKey(r)){const t=a.peek(r);t.getState()===o.A.LOADED&&(_(i,t,n),h=!0)}h||(s=!1)}return s}renderFrame(t,e){this.renderComplete=!0;const n=t.layerStatesArray[t.layerIndex],i=t.viewState,r=i.projection,s=i.resolution,u=i.center,c=t.pixelRatio,d=this.getLayer(),f=d.getSource(),m=f.getTileGridForProjection(r),y=m.getZForResolution(s,f.zDirection),_=m.getResolution(y),b=f.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==b&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=b):this.renderedSourceKey_=b;let w=t.extent;const A=f.getTilePixelRatio(c);this.prepareContainer(t,e);const S=this.context.canvas.width,E=this.context.canvas.height,T=n.extent&&(0,h.SD)(n.extent,r);T&&(w=(0,l._N)(w,(0,h.SD)(n.extent,r)));const C=_*S/2/A,M=_*E/2/A,L=[u[0]-C,u[1]-M,u[0]+C,u[1]+M],P={};this.renderedTiles.length=0;const R=d.getPreload();if(t.nextExtent){const e=m.getZForResolution(i.nextResolution,f.zDirection),n=x(t,t.nextExtent);this.enqueueTiles(t,n,e,P,R)}const I=x(t,w);if(this.enqueueTiles(t,I,y,P,0),R>0&&setTimeout((()=>{this.enqueueTiles(t,I,y-1,P,R-1)}),0),!(y in P))return this.container;const N=(0,g.v6)(this),F=t.time;for(const e of P[y]){const n=e.getState();if(n===o.A.EMPTY)continue;const i=e.tileCoord;if(n===o.A.LOADED){if(1===e.getAlpha(N,F)){e.endTransition(N);continue}}n!==o.A.ERROR&&(this.renderComplete=!1);if(this.findStaleTile_(i,P)){v(P,e,y),t.animate=!0;continue}if(this.findAltTiles_(m,i,y+1,P))continue;const r=m.getMinZoom();for(let t=y-1;t>=r;--t){if(this.findAltTiles_(m,i,t,P))break}}const k=_/s*c/A,D=this.getRenderContext(t);(0,p.Zz)(this.tempTransform,S/2,E/2,k,k,0,-S/2,-E/2),n.extent&&this.clipUnrotated(D,t,T),f.getInterpolate()||(D.imageSmoothingEnabled=!1),this.preRender(D,t);const O=Object.keys(P).map(Number);let j;O.sort(a.V_);const G=[],B=[];for(let e=O.length-1;e>=0;--e){const n=O[e],i=f.getTilePixelSize(n,c,r),s=m.getResolution(n)/_,a=i[0]*s*k,h=i[1]*s*k,u=m.getTileCoordForCoordAndZ((0,l.Py)(L),n),d=m.getTileCoordExtent(u),g=(0,p.Bb)(this.tempTransform,[A*(d[0]-L[0])/_,A*(L[3]-d[3])/_]),y=A*f.getGutterForProjection(r);for(const e of P[n]){if(e.getState()!==o.A.LOADED)continue;const i=e.tileCoord,r=u[1]-i[1],s=Math.round(g[0]-(r-1)*a),c=u[2]-i[2],d=Math.round(g[1]-(c-1)*h),p=Math.round(g[0]-r*a),m=Math.round(g[1]-c*h),_=s-p,v=d-m,x=1===O.length;let b=!1;j=[p,m,p+_,m,p+_,m+v,p,m+v];for(let t=0,e=G.length;t<e;++t)if(!x&&n<B[t]){const e=G[t];(0,l.HY)([p,m,p+_,m+v],[e[0],e[3],e[4],e[7]])&&(b||(D.save(),b=!0),D.beginPath(),D.moveTo(j[0],j[1]),D.lineTo(j[2],j[3]),D.lineTo(j[4],j[5]),D.lineTo(j[6],j[7]),D.moveTo(e[6],e[7]),D.lineTo(e[4],e[5]),D.lineTo(e[2],e[3]),D.lineTo(e[0],e[1]),D.clip())}G.push(j),B.push(n),this.drawTile(e,t,p,m,_,v,y,x),b&&D.restore(),this.renderedTiles.unshift(e),this.updateUsedTiles(t.usedTiles,f,e)}}if(this.renderedResolution=_,this.extentChanged=!this.renderedExtent_||!(0,l.aI)(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=c,this.postRender(this.context,t),n.extent&&D.restore(),D.imageSmoothingEnabled=!0,this.renderComplete){const e=(t,e)=>{const n=(0,g.v6)(f),i=e.wantedTiles[n],r=i?Object.keys(i).length:0;this.updateCacheSize(r),this.tileCache_.expireCache()};t.postRenderFunctions.push(e)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,2*t)}drawTile(t,e,n,r,s,o,a,l){let h;if(t instanceof i.Ay){if(h=(0,i.xo)(t.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(t);if(!h)return;const u=this.getRenderContext(e),c=(0,g.v6)(this),d=e.layerStatesArray[e.layerIndex],f=d.opacity*(l?t.getAlpha(c,e.time):1),p=f!==u.globalAlpha;p&&(u.save(),u.globalAlpha=f),u.drawImage(h,a,a,h.width-2*a,h.height-2*a,n,r,s,o),p&&u.restore(),f!==d.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,n){const i=(0,g.v6)(e);i in t||(t[i]={}),t[i][n.getKey()]=!0}}e.A=b},2091:function(t,e,n){"use strict";var i=n(36634),r=n(25231),s=n(96081),o=n(73465),a=n(64740);class l extends o.Ay{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions}),this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null,this.url_=t.url,this.imageLoadFunction_=void 0!==t.imageLoadFunction?t.imageLoadFunction:o.VV,this.params_=Object.assign({},t.params),this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5,this.loaderProjection_=null}getFeatureInfoUrl(t,e,n,i){const o=(0,r.Jt)(n),l=this.getProjection();l&&l!==o&&(e=(0,s.KQ)(l,o,t,e),t=(0,r.pd)(t,o,l));const h={url:this.url_,params:{...this.params_,...i},projection:l||o};return(0,a.y4)(h,t,e)}getLegendUrl(t,e){return(0,a.$q)({url:this.url_,params:{...this.params_,...e}},t)}getParams(){return this.params_}getImageInternal(t,e,n,r){return void 0===this.url_?null:(this.loader&&this.loaderProjection_===r||(this.loaderProjection_=r,this.loader=(0,a.Eq)({crossOrigin:this.crossOrigin_,params:this.params_,projection:r,serverType:this.serverType_,hidpi:this.hidpi_,url:this.url_,ratio:this.ratio_,load:(t,e)=>(this.image.setImage(t),this.imageLoadFunction_(this.image,e),(0,i.D4)(t))})),super.getImageInternal(t,e,n,r))}getImageLoadFunction(){return this.imageLoadFunction_}getUrl(){return this.url_}setImageLoadFunction(t){this.imageLoadFunction_=t,this.changed()}setUrl(t){t!=this.url_&&(this.url_=t,this.loader=null,this.changed())}setParams(t){this.params_=Object.assign({},t),this.changed()}updateParams(t){Object.assign(this.params_,t),this.changed()}changed(){this.image=null,super.changed()}}e.A=l},2337:function(t,e,n){"use strict";function i(t,e,n,i,r){r=void 0!==r?r:[];let s=0;for(let o=e;o<n;o+=i)r[s++]=t.slice(o,o+i);return r.length=s,r}function r(t,e,n,r,s){s=void 0!==s?s:[];let o=0;for(let a=0,l=n.length;a<l;++a){const l=n[a];s[o++]=i(t,e,l,r,s[o]),e=l}return s.length=o,s}function s(t,e,n,i,s){s=void 0!==s?s:[];let o=0;for(let a=0,l=n.length;a<l;++a){const l=n[a];s[o++]=1===l.length&&l[0]===e?[]:r(t,e,l,i,s[o]),e=l[l.length-1]}return s.length=o,s}n.d(e,{Dz:function(){return s},cD:function(){return r},n2:function(){return i}})},2365:function(t,e,n){"use strict";n.d(e,{A:function(){return a},j:function(){return l}});var i=n(58273);function r(t){return function(){this.style.removeProperty(t)}}function s(t,e,n){return function(){this.style.setProperty(t,e,n)}}function o(t,e,n){return function(){var i=e.apply(this,arguments);null==i?this.style.removeProperty(t):this.style.setProperty(t,i,n)}}function a(t,e,n){return arguments.length>1?this.each((null==e?r:"function"==typeof e?o:s)(t,e,null==n?"":n)):l(this.node(),t)}function l(t,e){return t.style.getPropertyValue(e)||(0,i.A)(t).getComputedStyle(t,null).getPropertyValue(e)}},2732:function(t,e,n){"use strict";var i=n(44090);const r=new Uint8Array(4);e.A=class{constructor(t,e){this.helper_=t;const n=t.getGL();this.texture_=n.createTexture(),this.framebuffer_=n.createFramebuffer(),this.depthbuffer_=n.createRenderbuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){(0,i.aI)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){const t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return r[0]=0,r[1]=0,r[2]=0,r[3]=0,r;this.readAll();const n=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return r[0]=this.data_[4*n],r[1]=this.data_[4*n+1],r[2]=this.data_[4*n+2],r[3]=this.data_[4*n+3],r}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){const t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),e.bindRenderbuffer(e.RENDERBUFFER,this.depthbuffer_),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t[0],t[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}},3974:function(t,e,n){"use strict";function i(t){return t[0]>0&&t[1]>0}function r(t,e,n){return void 0===n&&(n=[0,0]),n[0]=t[0]*e+.5|0,n[1]=t[1]*e+.5|0,n}function s(t,e){return Array.isArray(t)?t:(void 0===e?e=[t,t]:(e[0]=t,e[1]=t),e)}n.d(e,{Ie:function(){return i},hs:function(){return r},xq:function(){return s}})},4472:function(t,e,n){"use strict";n.d(e,{uE:function(){return j}});var i=n(40694),r=n(74977),s=function(){return"undefined"!=typeof window?window:void 0!==n.g?n.g:"undefined"!=typeof self?self:this}();function o(){s.console&&"function"==typeof s.console.log&&s.console.log.apply(s.console,arguments)}var a={log:o,warn:function(t){s.console&&("function"==typeof s.console.warn?s.console.warn.apply(s.console,arguments):o.call(null,arguments))},error:function(t){s.console&&("function"==typeof s.console.error?s.console.error.apply(s.console,arguments):o(t))}};function l(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){f(i.response,e,n)},i.onerror=function(){a.error("could not download file")},i.send()}function h(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function u(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var c,d,f=s.saveAs||("object"!==("undefined"==typeof window?"undefined":(0,i.A)(window))||window!==s?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=s.URL||s.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener","string"==typeof t?(r.href=t,r.origin!==location.origin?h(r.href)?l(t,e,n):u(r,r.target="_blank"):u(r)):(r.href=i.createObjectURL(t),setTimeout((function(){i.revokeObjectURL(r.href)}),4e4),setTimeout((function(){u(r)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download","string"==typeof t)if(h(t))l(t,e,n);else{var r=document.createElement("a");r.href=t,r.target="_blank",setTimeout((function(){u(r)}))}else navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!==(0,i.A)(e)&&(a.warn("Deprecated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t}(t,n),e)}:function(t,e,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),"string"==typeof t)return l(t,e,n);var o="application/octet-stream"===t.type,a=/constructor/i.test(s.HTMLElement)||s.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||o&&a)&&"object"===("undefined"==typeof FileReader?"undefined":(0,i.A)(FileReader))){var u=new FileReader;u.onloadend=function(){var t=u.result;t=h?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=t:location=t,r=null},u.readAsDataURL(t)}else{var c=s.URL||s.webkitURL,d=c.createObjectURL(t);r?r.location=d:location.href=d,r=null,setTimeout((function(){c.revokeObjectURL(d)}),4e4)}});
/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function p(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,s=n[i].process,o=r.exec(t);o&&(e=s(o),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),n=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==n.length&&(n="0"+n),"#"+t+e+n
/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */}}function g(t,e){var n=t[0],i=t[1],r=t[2],s=t[3];n=y(n,i,r,s,e[0],7,-680876936),s=y(s,n,i,r,e[1],12,-389564586),r=y(r,s,n,i,e[2],17,606105819),i=y(i,r,s,n,e[3],22,-1044525330),n=y(n,i,r,s,e[4],7,-176418897),s=y(s,n,i,r,e[5],12,1200080426),r=y(r,s,n,i,e[6],17,-1473231341),i=y(i,r,s,n,e[7],22,-45705983),n=y(n,i,r,s,e[8],7,1770035416),s=y(s,n,i,r,e[9],12,-1958414417),r=y(r,s,n,i,e[10],17,-42063),i=y(i,r,s,n,e[11],22,-1990404162),n=y(n,i,r,s,e[12],7,1804603682),s=y(s,n,i,r,e[13],12,-40341101),r=y(r,s,n,i,e[14],17,-1502002290),n=_(n,i=y(i,r,s,n,e[15],22,1236535329),r,s,e[1],5,-165796510),s=_(s,n,i,r,e[6],9,-1069501632),r=_(r,s,n,i,e[11],14,643717713),i=_(i,r,s,n,e[0],20,-373897302),n=_(n,i,r,s,e[5],5,-701558691),s=_(s,n,i,r,e[10],9,38016083),r=_(r,s,n,i,e[15],14,-660478335),i=_(i,r,s,n,e[4],20,-405537848),n=_(n,i,r,s,e[9],5,568446438),s=_(s,n,i,r,e[14],9,-1019803690),r=_(r,s,n,i,e[3],14,-187363961),i=_(i,r,s,n,e[8],20,1163531501),n=_(n,i,r,s,e[13],5,-1444681467),s=_(s,n,i,r,e[2],9,-51403784),r=_(r,s,n,i,e[7],14,1735328473),n=v(n,i=_(i,r,s,n,e[12],20,-1926607734),r,s,e[5],4,-378558),s=v(s,n,i,r,e[8],11,-2022574463),r=v(r,s,n,i,e[11],16,1839030562),i=v(i,r,s,n,e[14],23,-35309556),n=v(n,i,r,s,e[1],4,-1530992060),s=v(s,n,i,r,e[4],11,1272893353),r=v(r,s,n,i,e[7],16,-155497632),i=v(i,r,s,n,e[10],23,-1094730640),n=v(n,i,r,s,e[13],4,681279174),s=v(s,n,i,r,e[0],11,-358537222),r=v(r,s,n,i,e[3],16,-722521979),i=v(i,r,s,n,e[6],23,76029189),n=v(n,i,r,s,e[9],4,-640364487),s=v(s,n,i,r,e[12],11,-421815835),r=v(r,s,n,i,e[15],16,530742520),n=x(n,i=v(i,r,s,n,e[2],23,-995338651),r,s,e[0],6,-198630844),s=x(s,n,i,r,e[7],10,1126891415),r=x(r,s,n,i,e[14],15,-1416354905),i=x(i,r,s,n,e[5],21,-57434055),n=x(n,i,r,s,e[12],6,1700485571),s=x(s,n,i,r,e[3],10,-1894986606),r=x(r,s,n,i,e[10],15,-1051523),i=x(i,r,s,n,e[1],21,-2054922799),n=x(n,i,r,s,e[8],6,1873313359),s=x(s,n,i,r,e[15],10,-30611744),r=x(r,s,n,i,e[6],15,-1560198380),i=x(i,r,s,n,e[13],21,1309151649),n=x(n,i,r,s,e[4],6,-145523070),s=x(s,n,i,r,e[11],10,-1120210379),r=x(r,s,n,i,e[2],15,718787259),i=x(i,r,s,n,e[9],21,-343485551),t[0]=M(n,t[0]),t[1]=M(i,t[1]),t[2]=M(r,t[2]),t[3]=M(s,t[3])}function m(t,e,n,i,r,s){return e=M(M(e,t),M(i,s)),M(e<<r|e>>>32-r,n)}function y(t,e,n,i,r,s,o){return m(e&n|~e&i,t,e,r,s,o)}function _(t,e,n,i,r,s,o){return m(e&i|n&~i,t,e,r,s,o)}function v(t,e,n,i,r,s,o){return m(e^n^i,t,e,r,s,o)}function x(t,e,n,i,r,s,o){return m(n^(e|~i),t,e,r,s,o)}function b(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)g(i,w(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(g(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,g(i,r),i}function w(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}c=s.atob.bind(s),d=s.btoa.bind(s);var A="0123456789abcdef".split("");function S(t){for(var e="",n=0;n<4;n++)e+=A[t>>8*n+4&15]+A[t>>8*n&15];return e}function E(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function T(t){return b(t).map(E).join("")}var C="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=S(t[e]);return t.join("")}(b("hello"));function M(t,e){if(C){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}
/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function L(t,e){var n,i,r,s;if(t!==n){for(var o=(r=t,s=1+(256/t.length|0),new Array(s+1).join(r)),a=[],l=0;l<256;l++)a[l]=l;var h=0;for(l=0;l<256;l++){var u=a[l];h=(h+u+o.charCodeAt(l))%256,a[l]=a[h],a[h]=u}n=t,i=a}else a=i;var c=e.length,d=0,f=0,p="";for(l=0;l<c;l++)f=(f+(u=a[d=(d+1)%256]))%256,a[d]=a[f],a[f]=u,o=a[(a[d]+a[f])%256],p+=String.fromCharCode(e.charCodeAt(l)^o);return p}
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var P={print:4,modify:8,copy:16,"annot-forms":32};function R(t,e,n,i){this.v=1,this.r=2;var r=192;t.forEach((function(t){if(void 0!==P.perm)throw new Error("Invalid permission: "+t);r+=P[t]})),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var s=(e+this.padding).substr(0,32),o=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(s,o),this.P=-(1+(255^r)),this.encryptionKey=T(s+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=L(this.encryptionKey,this.padding)}function I(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var r=t.charCodeAt(i);e+=r<33||35===r||37===r||40===r||41===r||47===r||60===r||62===r||91===r||93===r||123===r||125===r||r>126?"#"+("0"+r.toString(16)).slice(-2):t[i]}return e}function N(t){if("object"!==(0,i.A)(t))throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,n,i){if(i=i||!1,"string"!=typeof t||"function"!=typeof n||"boolean"!=typeof i)throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var r=Math.random().toString(35);return e[t][r]=[n,!!i],r},this.unsubscribe=function(t){for(var n in e)if(e[n][t])return delete e[n][t],0===Object.keys(e[n]).length&&delete e[n],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var o in e[n]){var l=e[n][o];try{l[0].apply(t,i)}catch(n){s.console&&a.error("jsPDF PubSub Error",n.message,n)}l[1]&&r.push(o)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function F(t){if(!(this instanceof F))return new F(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function k(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function D(t,e,n,i,r){if(!(this instanceof D))return new D(t,e,n,i,r);this.type="axial"===t?2:3,this.coords=e,this.colors=n,k.call(this,i,r)}function O(t,e,n,i,r){if(!(this instanceof O))return new O(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,k.call(this,i,r)}function j(t){var e,n="string"==typeof arguments[0]?arguments[0]:"p",r=arguments[1],o=arguments[2],l=arguments[3],h=[],u=1,c=16,g="S",m=null;"object"===(0,i.A)(t=t||{})&&(n=t.orientation,r=t.unit||r,o=t.format||o,l=t.compress||t.compressPdf||l,null!==(m=t.encryption||null)&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),u="number"==typeof t.userUnit?Math.abs(t.userUnit):1,void 0!==t.precision&&(e=t.precision),void 0!==t.floatPrecision&&(c=t.floatPrecision),g=t.defaultPathOperation||"S"),h=t.filters||(!0===l?["FlateEncode"]:h),r=r||"mm",n=(""+(n||"P")).toLowerCase();var y=t.putOnlyUsedFonts||!1,_={},v={internal:{},__private__:{}};v.__private__.PubSub=N;var x="1.3",b=v.__private__.getPdfVersion=function(){return x};v.__private__.setPdfVersion=function(t){x=t};var w={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};v.__private__.getPageFormats=function(){return w};var A=v.__private__.getPageFormat=function(t){return w[t]};o=o||"a4";var S="compat",E="advanced",T=S;function C(){this.saveGraphicsState(),ut(new Wt(Et,0,0,-Et,0,An()*Et).toString()+" cm"),this.setFontSize(this.getFontSize()/Et),g="n",T=E}function M(){this.restoreGraphicsState(),g="S",T=S}var L=v.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw new Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};v.advancedAPI=function(t){var e=T===S;return e&&C.call(this),"function"!=typeof t||(t(this),e&&M.call(this)),this},v.compatAPI=function(t){var e=T===E;return e&&M.call(this),"function"!=typeof t||(t(this),e&&C.call(this)),this},v.isAdvancedAPI=function(){return T===E};var P,k=function(t){if(T!==E)throw new Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=v.roundToPrecision=v.__private__.roundToPrecision=function(t,n){var i=e||n;if(isNaN(t)||isNaN(i))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(i).replace(/0+$/,"")};P=v.hpf=v.__private__.hpf="number"==typeof c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return G(t,c)}:"smart"===c?function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return G(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.hpf");return G(t,16)};var B=v.f2=v.__private__.f2=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f2");return G(t,2)},z=v.__private__.f3=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.f3");return G(t,3)},q=v.scale=v.__private__.scale=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.scale");return T===S?t*Et:T===E?t:void 0},U=function(t){return q(function(t){return T===S?An()-t:T===E?t:void 0}(t))};v.__private__.setPrecision=v.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(e=parseInt(t,10))};var W,$="00000000000000000000000000000000",V=v.__private__.getFileId=function(){return $},X=v.__private__.setFileId=function(t){return $=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():$.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),null!==m&&(Ie=new R(m.userPermissions,m.userPassword,m.ownerPassword,$)),$};v.setFileId=function(t){return X(t),this},v.getFileId=function(){return V()};var H=v.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),n=e<0?"+":"-",i=Math.floor(Math.abs(e/60)),r=Math.abs(e%60),s=[n,Q(i),"'",Q(r),"'"].join("");return["D:",t.getFullYear(),Q(t.getMonth()+1),Q(t.getDate()),Q(t.getHours()),Q(t.getMinutes()),Q(t.getSeconds()),s].join("")},Y=v.__private__.convertPDFDateToDate=function(t){var e=parseInt(t.substr(2,4),10),n=parseInt(t.substr(6,2),10)-1,i=parseInt(t.substr(8,2),10),r=parseInt(t.substr(10,2),10),s=parseInt(t.substr(12,2),10),o=parseInt(t.substr(14,2),10);return new Date(e,n,i,r,s,o,0)},Z=v.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=H(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw new Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return W=e},K=v.__private__.getCreationDate=function(t){var e=W;return"jsDate"===t&&(e=Y(W)),e};v.setCreationDate=function(t){return Z(t),this},v.getCreationDate=function(t){return K(t)};var J,Q=v.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},tt=v.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},et=0,nt=[],it=[],rt=0,st=[],ot=[],at=!1,lt=it;v.__private__.setCustomOutputDestination=function(t){at=!0,lt=t};var ht=function(t){at||(lt=t)};v.__private__.resetCustomOutputDestination=function(){at=!1,lt=it};var ut=v.__private__.out=function(t){return t=t.toString(),rt+=t.length+1,lt.push(t),lt},ct=v.__private__.write=function(t){return ut(1===arguments.length?t.toString():Array.prototype.join.call(arguments," "))},dt=v.__private__.getArrayBuffer=function(t){for(var e=t.length,n=new ArrayBuffer(e),i=new Uint8Array(n);e--;)i[e]=t.charCodeAt(e);return n},ft=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];v.__private__.getStandardFonts=function(){return ft};var pt=t.fontSize||16;v.__private__.setFontSize=v.setFontSize=function(t){return pt=T===E?t/Et:t,this};var gt,mt=v.__private__.getFontSize=v.getFontSize=function(){return T===S?pt:pt*Et},yt=t.R2L||!1;v.__private__.setR2L=v.setR2L=function(t){return yt=t,this},v.__private__.getR2L=v.getR2L=function(){return yt};var _t,vt=v.__private__.setZoomMode=function(t){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))gt=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');gt=t}else gt=parseInt(t,10)};v.__private__.getZoomMode=function(){return gt};var xt,bt=v.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');_t=t};v.__private__.getPageMode=function(){return _t};var wt=v.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');xt=t};v.__private__.getLayoutMode=function(){return xt},v.__private__.setDisplayMode=v.setDisplayMode=function(t,e,n){return vt(t),wt(e),bt(n),this};var At={title:"",subject:"",author:"",keywords:"",creator:""};v.__private__.getDocumentProperty=function(t){if(-1===Object.keys(At).indexOf(t))throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return At[t]},v.__private__.getDocumentProperties=function(){return At},v.__private__.setDocumentProperties=v.setProperties=v.setDocumentProperties=function(t){for(var e in At)At.hasOwnProperty(e)&&t[e]&&(At[e]=t[e]);return this},v.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(At).indexOf(t))throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return At[t]=e};var St,Et,Tt,Ct,Mt,Lt={},Pt={},Rt=[],It={},Nt={},Ft={},kt={},Dt=null,Ot=0,jt=[],Gt=new N(v),Bt=t.hotfixes||[],zt={},qt={},Ut=[],Wt=function t(e,n,i,r,s,o){if(!(this instanceof t))return new t(e,n,i,r,s,o);isNaN(e)&&(e=1),isNaN(n)&&(n=0),isNaN(i)&&(i=0),isNaN(r)&&(r=1),isNaN(s)&&(s=0),isNaN(o)&&(o=0),this._matrix=[e,n,i,r,s,o]};Object.defineProperty(Wt.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Wt.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Wt.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Wt.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Wt.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Wt.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Wt.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(Wt.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(Wt.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(Wt.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(Wt.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(Wt.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(Wt.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(Wt.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(Wt.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(Wt.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),Wt.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(P).join(t)},Wt.prototype.multiply=function(t){var e=t.sx*this.sx+t.shy*this.shx,n=t.sx*this.shy+t.shy*this.sy,i=t.shx*this.sx+t.sy*this.shx,r=t.shx*this.shy+t.sy*this.sy,s=t.tx*this.sx+t.ty*this.shx+this.tx,o=t.tx*this.shy+t.ty*this.sy+this.ty;return new Wt(e,n,i,r,s,o)},Wt.prototype.decompose=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,s=this.ty,o=Math.sqrt(t*t+e*e),a=(t/=o)*n+(e/=o)*i;n-=t*a,i-=e*a;var l=Math.sqrt(n*n+i*i);return a/=l,t*(i/=l)<e*(n/=l)&&(t=-t,e=-e,a=-a,o=-o),{scale:new Wt(o,0,0,l,0,0),translate:new Wt(1,0,0,1,r,s),rotate:new Wt(t,e,-e,t,0,0),skew:new Wt(1,0,a,1,0,0)}},Wt.prototype.toString=function(t){return this.join(" ")},Wt.prototype.inversed=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,s=this.ty,o=1/(t*i-e*n),a=i*o,l=-e*o,h=-n*o,u=t*o;return new Wt(a,l,h,u,-a*r-h*s,-l*r-u*s)},Wt.prototype.applyToPoint=function(t){var e=t.x*this.sx+t.y*this.shx+this.tx,n=t.x*this.shy+t.y*this.sy+this.ty;return new mn(e,n)},Wt.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),n=this.applyToPoint(new mn(t.x+t.w,t.y+t.h));return new yn(e.x,e.y,n.x-e.x,n.y-e.y)},Wt.prototype.clone=function(){var t=this.sx,e=this.shy,n=this.shx,i=this.sy,r=this.tx,s=this.ty;return new Wt(t,e,n,i,r,s)},v.Matrix=Wt;var $t=v.matrixMult=function(t,e){return e.multiply(t)},Vt=new Wt(1,0,0,1,0,0);v.unitMatrix=v.identityMatrix=Vt;var Xt=function(t,e){if(!Nt[t]){var n=(e instanceof D?"Sh":"P")+(Object.keys(It).length+1).toString(10);e.id=n,Nt[t]=n,It[n]=e,Gt.publish("addPattern",e)}};v.ShadingPattern=D,v.TilingPattern=O,v.addShadingPattern=function(t,e){return k("addShadingPattern()"),Xt(t,e),this},v.beginTilingPattern=function(t){k("beginTilingPattern()"),vn(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},v.endTilingPattern=function(t,e){k("endTilingPattern()"),e.stream=ot[J].join("\n"),Xt(t,e),Gt.publish("endTilingPattern",e),Ut.pop().restore()};var Ht,Yt=v.__private__.newObject=function(){var t=Zt();return Kt(t,!0),t},Zt=v.__private__.newObjectDeferred=function(){return et++,nt[et]=function(){return rt},et},Kt=function(t,e){return e="boolean"==typeof e&&e,nt[t]=rt,e&&ut(t+" 0 obj"),t},Jt=v.__private__.newAdditionalObject=function(){var t={objId:Zt(),content:""};return st.push(t),t},Qt=Zt(),te=Zt(),ee=v.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5!==e.length||"k"!==e[4]&&"K"!==e[4]||(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var n=parseFloat(e[0]);e=[n,n,n,"r"]}for(var i="#",r=0;r<3;r++)i+=("0"+Math.floor(255*parseFloat(e[r])).toString(16)).slice(-2);return i},ne=v.__private__.encodeColorString=function(t){var e;"string"==typeof t&&(t={ch1:t});var n=t.ch1,r=t.ch2,s=t.ch3,o=t.ch4,a="draw"===t.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof n&&"#"!==n.charAt(0)){var l=new p(n);if(l.ok)n=l.toHex();else if(!/^\d*\.?\d*$/.test(n))throw new Error('Invalid color "'+n+'" passed to jsPDF.encodeColorString.')}if("string"==typeof n&&/^#[0-9A-Fa-f]{3}$/.test(n)&&(n="#"+n[1]+n[1]+n[2]+n[2]+n[3]+n[3]),"string"==typeof n&&/^#[0-9A-Fa-f]{6}$/.test(n)){var h=parseInt(n.substr(1),16);n=h>>16&255,r=h>>8&255,s=255&h}if(void 0===r||void 0===o&&n===r&&r===s)if("string"==typeof n)e=n+" "+a[0];else if(2===t.precision)e=B(n/255)+" "+a[0];else e=z(n/255)+" "+a[0];else if(void 0===o||"object"===(0,i.A)(o)){if(o&&!isNaN(o.a)&&0===o.a)return["1.","1.","1.",a[1]].join(" ");if("string"==typeof n)e=[n,r,s,a[1]].join(" ");else if(2===t.precision)e=[B(n/255),B(r/255),B(s/255),a[1]].join(" ");else e=[z(n/255),z(r/255),z(s/255),a[1]].join(" ")}else if("string"==typeof n)e=[n,r,s,o,a[2]].join(" ");else if(2===t.precision)e=[B(n),B(r),B(s),B(o),a[2]].join(" ");else e=[z(n),z(r),z(s),z(o),a[2]].join(" ");return e},ie=v.__private__.getFilters=function(){return h},re=v.__private__.putStream=function(t){var e=(t=t||{}).data||"",n=t.filters||ie(),i=t.alreadyAppliedFilters||[],r=t.addLength1||!1,s=e.length,o=t.objectId,a=function(t){return t};if(null!==m&&void 0===o)throw new Error("ObjectId must be passed to putStream for file encryption");null!==m&&(a=Ie.encryptor(o,0));var l={};!0===n&&(n=["FlateEncode"]);var h=t.additionalKeyValues||[],u=(l=void 0!==j.API.processDataByFilters?j.API.processDataByFilters(e,n):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(i)?i.join(" "):i.toString());if(0!==l.data.length&&(h.push({key:"Length",value:l.data.length}),!0===r&&h.push({key:"Length1",value:s})),0!=u.length)if(u.split("/").length-1==1)h.push({key:"Filter",value:u});else{h.push({key:"Filter",value:"["+u+"]"});for(var c=0;c<h.length;c+=1)if("DecodeParms"===h[c].key){for(var d=[],f=0;f<l.reverseChain.split("/").length-1;f+=1)d.push("null");d.push(h[c].value),h[c].value="["+d.join(" ")+"]"}}ut("<<");for(var p=0;p<h.length;p++)ut("/"+h[p].key+" "+h[p].value);ut(">>"),0!==l.data.length&&(ut("stream"),ut(a(l.data)),ut("endstream"))},se=v.__private__.putPage=function(t){var e=t.number,n=t.data,i=t.objId,r=t.contentsObjId;Kt(i,!0),ut("<</Type /Page"),ut("/Parent "+t.rootDictionaryObjId+" 0 R"),ut("/Resources "+t.resourceDictionaryObjId+" 0 R"),ut("/MediaBox ["+parseFloat(P(t.mediaBox.bottomLeftX))+" "+parseFloat(P(t.mediaBox.bottomLeftY))+" "+P(t.mediaBox.topRightX)+" "+P(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&ut("/CropBox ["+P(t.cropBox.bottomLeftX)+" "+P(t.cropBox.bottomLeftY)+" "+P(t.cropBox.topRightX)+" "+P(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&ut("/BleedBox ["+P(t.bleedBox.bottomLeftX)+" "+P(t.bleedBox.bottomLeftY)+" "+P(t.bleedBox.topRightX)+" "+P(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&ut("/TrimBox ["+P(t.trimBox.bottomLeftX)+" "+P(t.trimBox.bottomLeftY)+" "+P(t.trimBox.topRightX)+" "+P(t.trimBox.topRightY)+"]"),null!==t.artBox&&ut("/ArtBox ["+P(t.artBox.bottomLeftX)+" "+P(t.artBox.bottomLeftY)+" "+P(t.artBox.topRightX)+" "+P(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&ut("/UserUnit "+t.userUnit),Gt.publish("putPage",{objId:i,pageContext:jt[e],pageNumber:e,page:n}),ut("/Contents "+r+" 0 R"),ut(">>"),ut("endobj");var s=n.join("\n");return T===E&&(s+="\nQ"),Kt(r,!0),re({data:s,filters:ie(),objectId:r}),ut("endobj"),i},oe=v.__private__.putPages=function(){var t,e,n=[];for(t=1;t<=Ot;t++)jt[t].objId=Zt(),jt[t].contentsObjId=Zt();for(t=1;t<=Ot;t++)n.push(se({number:t,data:ot[t],objId:jt[t].objId,contentsObjId:jt[t].contentsObjId,mediaBox:jt[t].mediaBox,cropBox:jt[t].cropBox,bleedBox:jt[t].bleedBox,trimBox:jt[t].trimBox,artBox:jt[t].artBox,userUnit:jt[t].userUnit,rootDictionaryObjId:Qt,resourceDictionaryObjId:te}));Kt(Qt,!0),ut("<</Type /Pages");var i="/Kids [";for(e=0;e<Ot;e++)i+=n[e]+" 0 R ";ut(i+"]"),ut("/Count "+Ot),ut(">>"),ut("endobj"),Gt.publish("postPutPages")},ae=function(t){Gt.publish("putFont",{font:t,out:ut,newObject:Yt,putStream:re}),!0!==t.isAlreadyPutted&&(t.objectNumber=Yt(),ut("<<"),ut("/Type /Font"),ut("/BaseFont /"+I(t.postScriptName)),ut("/Subtype /Type1"),"string"==typeof t.encoding&&ut("/Encoding /"+t.encoding),ut("/FirstChar 32"),ut("/LastChar 255"),ut(">>"),ut("endobj"))},le=function(t){t.objectNumber=Yt();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[P(t.x),P(t.y),P(t.x+t.width),P(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"});var n=t.pages[1].join("\n");re({data:n,additionalKeyValues:e,objectId:t.objectNumber}),ut("endobj")},he=function(t,e){e||(e=21);var n=Yt(),i=function(t,e){var n,i=[],r=1/(e-1);for(n=0;n<1;n+=r)i.push(n);if(i.push(1),0!=t[0].offset){var s={offset:0,color:t[0].color};t.unshift(s)}if(1!=t[t.length-1].offset){var o={offset:1,color:t[t.length-1].color};t.push(o)}for(var a="",l=0,h=0;h<i.length;h++){for(n=i[h];n>t[l+1].offset;)l++;var u=t[l].offset,c=(n-u)/(t[l+1].offset-u),d=t[l].color,f=t[l+1].color;a+=tt(Math.round((1-c)*d[0]+c*f[0]).toString(16))+tt(Math.round((1-c)*d[1]+c*f[1]).toString(16))+tt(Math.round((1-c)*d[2]+c*f[2]).toString(16))}return a.trim()}(t.colors,e),r=[];r.push({key:"FunctionType",value:"0"}),r.push({key:"Domain",value:"[0.0 1.0]"}),r.push({key:"Size",value:"["+e+"]"}),r.push({key:"BitsPerSample",value:"8"}),r.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),r.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),re({data:i,additionalKeyValues:r,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:n}),ut("endobj"),t.objectNumber=Yt(),ut("<< /ShadingType "+t.type),ut("/ColorSpace /DeviceRGB");var s="/Coords ["+P(parseFloat(t.coords[0]))+" "+P(parseFloat(t.coords[1]))+" ";2===t.type?s+=P(parseFloat(t.coords[2]))+" "+P(parseFloat(t.coords[3])):s+=P(parseFloat(t.coords[2]))+" "+P(parseFloat(t.coords[3]))+" "+P(parseFloat(t.coords[4]))+" "+P(parseFloat(t.coords[5])),ut(s+="]"),t.matrix&&ut("/Matrix ["+t.matrix.toString()+"]"),ut("/Function "+n+" 0 R"),ut("/Extend [true true]"),ut(">>"),ut("endobj")},ue=function(t,e){var n=Zt(),i=Yt();e.push({resourcesOid:n,objectOid:i}),t.objectNumber=i;var r=[];r.push({key:"Type",value:"/Pattern"}),r.push({key:"PatternType",value:"1"}),r.push({key:"PaintType",value:"1"}),r.push({key:"TilingType",value:"1"}),r.push({key:"BBox",value:"["+t.boundingBox.map(P).join(" ")+"]"}),r.push({key:"XStep",value:P(t.xStep)}),r.push({key:"YStep",value:P(t.yStep)}),r.push({key:"Resources",value:n+" 0 R"}),t.matrix&&r.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),re({data:t.stream,additionalKeyValues:r,objectId:t.objectNumber}),ut("endobj")},ce=function(t){for(var e in t.objectNumber=Yt(),ut("<<"),t)switch(e){case"opacity":ut("/ca "+B(t[e]));break;case"stroke-opacity":ut("/CA "+B(t[e]))}ut(">>"),ut("endobj")},de=function(t){Kt(t.resourcesOid,!0),ut("<<"),ut("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),function(){for(var t in ut("/Font <<"),Lt)Lt.hasOwnProperty(t)&&(!1===y||!0===y&&_.hasOwnProperty(t))&&ut("/"+t+" "+Lt[t].objectNumber+" 0 R");ut(">>")}(),function(){if(Object.keys(It).length>0){for(var t in ut("/Shading <<"),It)It.hasOwnProperty(t)&&It[t]instanceof D&&It[t].objectNumber>=0&&ut("/"+t+" "+It[t].objectNumber+" 0 R");Gt.publish("putShadingPatternDict"),ut(">>")}}(),function(t){if(Object.keys(It).length>0){for(var e in ut("/Pattern <<"),It)It.hasOwnProperty(e)&&It[e]instanceof v.TilingPattern&&It[e].objectNumber>=0&&It[e].objectNumber<t&&ut("/"+e+" "+It[e].objectNumber+" 0 R");Gt.publish("putTilingPatternDict"),ut(">>")}}(t.objectOid),function(){if(Object.keys(Ft).length>0){var t;for(t in ut("/ExtGState <<"),Ft)Ft.hasOwnProperty(t)&&Ft[t].objectNumber>=0&&ut("/"+t+" "+Ft[t].objectNumber+" 0 R");Gt.publish("putGStateDict"),ut(">>")}}(),function(){for(var t in ut("/XObject <<"),zt)zt.hasOwnProperty(t)&&zt[t].objectNumber>=0&&ut("/"+t+" "+zt[t].objectNumber+" 0 R");Gt.publish("putXobjectDict"),ut(">>")}(),ut(">>"),ut("endobj")},fe=function(){var t=[];(function(){for(var t in Lt)Lt.hasOwnProperty(t)&&(!1===y||!0===y&&_.hasOwnProperty(t))&&ae(Lt[t])})(),function(){var t;for(t in Ft)Ft.hasOwnProperty(t)&&ce(Ft[t])}(),function(){for(var t in zt)zt.hasOwnProperty(t)&&le(zt[t])}(),function(t){var e;for(e in It)It.hasOwnProperty(e)&&(It[e]instanceof D?he(It[e]):It[e]instanceof O&&ue(It[e],t))}(t),Gt.publish("putResources"),t.forEach(de),de({resourcesOid:te,objectOid:Number.MAX_SAFE_INTEGER}),Gt.publish("postPutResources")},pe=function(t){Pt[t.fontName]=Pt[t.fontName]||{},Pt[t.fontName][t.fontStyle]=t.id},ge=function(t,e,n,i,r){var s={id:"F"+(Object.keys(Lt).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:n,encoding:i,isStandardFont:r||!1,metadata:{}};return Gt.publish("addFont",{font:s,instance:this}),Lt[s.id]=s,pe(s),s.id},me=v.__private__.pdfEscape=v.pdfEscape=function(t,e){return function(t,e){var n,i,r,s,o,a,l,h,u;if(r=(e=e||{}).sourceEncoding||"Unicode",o=e.outputEncoding,(e.autoencode||o)&&Lt[St].metadata&&Lt[St].metadata[r]&&Lt[St].metadata[r].encoding&&(s=Lt[St].metadata[r].encoding,!o&&Lt[St].encoding&&(o=Lt[St].encoding),!o&&s.codePages&&(o=s.codePages[0]),"string"==typeof o&&(o=s[o]),o)){for(l=!1,a=[],n=0,i=t.length;n<i;n++)(h=o[t.charCodeAt(n)])?a.push(String.fromCharCode(h)):a.push(t[n]),a[n].charCodeAt(0)>>8&&(l=!0);t=a.join("")}for(n=t.length;void 0===l&&0!==n;)t.charCodeAt(n-1)>>8&&(l=!0),n--;if(!l)return t;for(a=e.noBOM?[]:[254,255],n=0,i=t.length;n<i;n++){if((u=(h=t.charCodeAt(n))>>8)>>8)throw new Error("Character at position "+n+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");a.push(u),a.push(h-(u<<8))}return String.fromCharCode.apply(void 0,a)}(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},ye=v.__private__.beginPage=function(t){ot[++Ot]=[],jt[Ot]={objId:0,contentsObjId:0,userUnit:Number(u),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},xe(Ot),ht(ot[J])},_e=function(t,e){var i,r,s;switch(n=e||n,"string"==typeof t&&(i=A(t.toLowerCase()),Array.isArray(i)&&(r=i[0],s=i[1])),Array.isArray(t)&&(r=t[0]*Et,s=t[1]*Et),isNaN(r)&&(r=o[0],s=o[1]),(r>14400||s>14400)&&(a.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),r=Math.min(14400,r),s=Math.min(14400,s)),o=[r,s],n.substr(0,1)){case"l":s>r&&(o=[s,r]);break;case"p":r>s&&(o=[s,r])}ye(o),Je(Ze),ut(an),0!==fn&&ut(fn+" J"),0!==pn&&ut(pn+" j"),Gt.publish("addPage",{pageNumber:Ot})},ve=function(t){t>0&&t<=Ot&&(ot.splice(t,1),jt.splice(t,1),Ot--,J>Ot&&(J=Ot),this.setPage(J))},xe=function(t){t>0&&t<=Ot&&(J=t)},be=v.__private__.getNumberOfPages=v.getNumberOfPages=function(){return ot.length-1},we=function(t,e,n){var i,r=void 0;return n=n||{},t=void 0!==t?t:Lt[St].fontName,e=void 0!==e?e:Lt[St].fontStyle,i=t.toLowerCase(),void 0!==Pt[i]&&void 0!==Pt[i][e]?r=Pt[i][e]:void 0!==Pt[t]&&void 0!==Pt[t][e]?r=Pt[t][e]:!1===n.disableWarning&&a.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),r||n.noFallback||null==(r=Pt.times[e])&&(r=Pt.times.normal),r},Ae=v.__private__.putInfo=function(){var t=Yt(),e=function(t){return t};for(var n in null!==m&&(e=Ie.encryptor(t,0)),ut("<<"),ut("/Producer ("+me(e("jsPDF "+j.version))+")"),At)At.hasOwnProperty(n)&&At[n]&&ut("/"+n.substr(0,1).toUpperCase()+n.substr(1)+" ("+me(e(At[n]))+")");ut("/CreationDate ("+me(e(W))+")"),ut(">>"),ut("endobj")},Se=v.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||Qt;switch(Yt(),ut("<<"),ut("/Type /Catalog"),ut("/Pages "+e+" 0 R"),gt||(gt="fullwidth"),gt){case"fullwidth":ut("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ut("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ut("/OpenAction [3 0 R /Fit]");break;case"original":ut("/OpenAction [3 0 R /XYZ null null 1]");break;default:var n=""+gt;"%"===n.substr(n.length-1)&&(gt=parseInt(gt)/100),"number"==typeof gt&&ut("/OpenAction [3 0 R /XYZ null null "+B(gt)+"]")}switch(xt||(xt="continuous"),xt){case"continuous":ut("/PageLayout /OneColumn");break;case"single":ut("/PageLayout /SinglePage");break;case"two":case"twoleft":ut("/PageLayout /TwoColumnLeft");break;case"tworight":ut("/PageLayout /TwoColumnRight")}_t&&ut("/PageMode /"+_t),Gt.publish("putCatalog"),ut(">>"),ut("endobj")},Ee=v.__private__.putTrailer=function(){ut("trailer"),ut("<<"),ut("/Size "+(et+1)),ut("/Root "+et+" 0 R"),ut("/Info "+(et-1)+" 0 R"),null!==m&&ut("/Encrypt "+Ie.oid+" 0 R"),ut("/ID [ <"+$+"> <"+$+"> ]"),ut(">>")},Te=v.__private__.putHeader=function(){ut("%PDF-"+x),ut("%ºß¬à")},Ce=v.__private__.putXRef=function(){var t="0000000000";ut("xref"),ut("0 "+(et+1)),ut("0000000000 65535 f ");for(var e=1;e<=et;e++)"function"==typeof nt[e]?ut((t+nt[e]()).slice(-10)+" 00000 n "):void 0!==nt[e]?ut((t+nt[e]).slice(-10)+" 00000 n "):ut("0000000000 00000 n ")},Me=v.__private__.buildDocument=function(){et=0,rt=0,it=[],nt=[],st=[],Qt=Zt(),te=Zt(),ht(it),Gt.publish("buildDocument"),Te(),oe(),function(){Gt.publish("putAdditionalObjects");for(var t=0;t<st.length;t++){var e=st[t];Kt(e.objId,!0),ut(e.content),ut("endobj")}Gt.publish("postPutAdditionalObjects")}(),fe(),null!==m&&(Ie.oid=Yt(),ut("<<"),ut("/Filter /Standard"),ut("/V "+Ie.v),ut("/R "+Ie.r),ut("/U <"+Ie.toHexString(Ie.U)+">"),ut("/O <"+Ie.toHexString(Ie.O)+">"),ut("/P "+Ie.P),ut(">>"),ut("endobj")),Ae(),Se();var t=rt;return Ce(),Ee(),ut("startxref"),ut(""+t),ut("%%EOF"),ht(ot[J]),it.join("\n")},Le=v.__private__.getBlob=function(t){return new Blob([dt(t)],{type:"application/pdf"})},Pe=v.output=v.__private__.output=(Ht=function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return Me();case"save":v.save(e.filename);break;case"arraybuffer":return dt(Me());case"blob":return Le(Me());case"bloburi":case"bloburl":if(void 0!==s.URL&&"function"==typeof s.URL.createObjectURL)return s.URL&&s.URL.createObjectURL(Le(Me()))||void 0;a.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var n="",i=Me();try{n=d(i)}catch(t){n=d(unescape(encodeURIComponent(i)))}return"data:application/pdf;filename="+e.filename+";base64,"+n;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(s)){var r="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",o=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(r=e.pdfObjectUrl,o="");var l='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+r+'"'+o+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");<\/script></body></html>",h=s.open();return null!==h&&h.document.write(l),h}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(s)){var u='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',c=s.open();if(null!==c){c.document.write(u);var f=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=e.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(f.output("bloburl"))}}return c}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(s))throw new Error("The option dataurlnewwindow just works in a browser-environment.");var p='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',g=s.open();if(null!==g&&(g.document.write(p),g.document.title=e.filename),g||"undefined"==typeof safari)return g;break;case"datauri":case"dataurl":return s.document.location.href=this.output("datauristring",e);default:return null}},Ht.foo=function(){try{return Ht.apply(this,arguments)}catch(n){var t=n.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var e="Error in function "+t.split("\n")[0].split("<")[0]+": "+n.message;if(!s.console)throw new Error(e);s.console.error(e,n),s.alert&&alert(e)}},Ht.foo.bar=Ht,Ht.foo),Re=function(t){return!0===Array.isArray(Bt)&&Bt.indexOf(t)>-1};switch(r){case"pt":Et=1;break;case"mm":Et=72/25.4;break;case"cm":Et=72/2.54;break;case"in":Et=72;break;case"px":Et=1==Re("px_scaling")?.75:96/72;break;case"pc":case"em":Et=12;break;case"ex":Et=6;break;default:if("number"!=typeof r)throw new Error("Invalid unit: "+r);Et=r}var Ie=null;Z(),X();var Ne=v.__private__.getPageInfo=v.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:jt[t].objId,pageNumber:t,pageContext:jt[t]}},Fe=v.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in jt)if(jt[e].objId===t)break;return Ne(e)},ke=v.__private__.getCurrentPageInfo=v.getCurrentPageInfo=function(){return{objId:jt[J].objId,pageNumber:J,pageContext:jt[J]}};v.addPage=function(){return _e.apply(this,arguments),this},v.setPage=function(){return xe.apply(this,arguments),ht.call(this,ot[J]),this},v.insertPage=function(t){return this.addPage(),this.movePage(J,t),this},v.movePage=function(t,e){var n,i;if(t>e){n=ot[t],i=jt[t];for(var r=t;r>e;r--)ot[r]=ot[r-1],jt[r]=jt[r-1];ot[e]=n,jt[e]=i,this.setPage(e)}else if(t<e){n=ot[t],i=jt[t];for(var s=t;s<e;s++)ot[s]=ot[s+1],jt[s]=jt[s+1];ot[e]=n,jt[e]=i,this.setPage(e)}return this},v.deletePage=function(){return ve.apply(this,arguments),this},v.__private__.text=v.text=function(t,e,n,r,s){var o,a,l,h,u,c,d,f,p,g=(r=r||{}).scope||this;if("number"==typeof t&&"number"==typeof e&&("string"==typeof n||Array.isArray(n))){var m=n;n=e,e=t,t=m}if(arguments[3]instanceof Wt==0?(l=arguments[4],h=arguments[5],"object"===(0,i.A)(d=arguments[3])&&null!==d||("string"==typeof l&&(h=l,l=null),"string"==typeof d&&(h=d,d=null),"number"==typeof d&&(l=d,d=null),r={flags:d,angle:l,align:h})):(k("The transform parameter of text() with a Matrix value"),p=s),isNaN(e)||isNaN(n)||null==t)throw new Error("Invalid arguments passed to jsPDF.text");if(0===t.length)return g;var y,v="",x="number"==typeof r.lineHeightFactor?r.lineHeightFactor:Ye,b=g.internal.scaleFactor;function w(t){return t=t.split("\t").join(Array(r.TabLen||9).join(" ")),me(t,d)}function A(t){for(var e,n=t.concat(),i=[],r=n.length;r--;)"string"==typeof(e=n.shift())?i.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?i.push(e[0]):i.push([e[0],e[1],e[2]]);return i}function S(t,e){var n;if("string"==typeof t)n=e(t)[0];else if(Array.isArray(t)){for(var i,r,s=t.concat(),o=[],a=s.length;a--;)"string"==typeof(i=s.shift())?o.push(e(i)[0]):Array.isArray(i)&&"string"==typeof i[0]&&(r=e(i[0],i[1],i[2]),o.push([r[0],r[1],r[2]]));n=o}return n}var C=!1,M=!0;if("string"==typeof t)C=!0;else if(Array.isArray(t)){var L=t.concat();a=[];for(var R,I=L.length;I--;)("string"!=typeof(R=L.shift())||Array.isArray(R)&&"string"!=typeof R[0])&&(M=!1);C=M}if(!1===C)throw new Error('Type of text must be string or Array. "'+t+'" is not recognized.');"string"==typeof t&&(t=t.match(/[\r?\n]/)?t.split(/\r\n|\r|\n/g):[t]);var N=pt/g.internal.scaleFactor,F=N*(x-1);switch(r.baseline){case"bottom":n-=F;break;case"top":n+=N-F;break;case"hanging":n+=N-2*F;break;case"middle":n+=N/2-F}if((c=r.maxWidth||0)>0&&("string"==typeof t?t=g.splitTextToSize(t,c):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(g.splitTextToSize(e,c))}),[]))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:me,activeFontKey:St,fonts:Lt,activeFontSize:pt}},Gt.publish("preProcessText",o),t=o.text,l=(r=o.options).angle,p instanceof Wt==0&&l&&"number"==typeof l){l*=Math.PI/180,0===r.rotationDirection&&(l=-l),T===E&&(l=-l);var D=Math.cos(l),O=Math.sin(l);p=new Wt(D,O,-O,D,0,0)}else l&&l instanceof Wt&&(p=l);T!==E||p||(p=Vt),void 0!==(u=r.charSpace||cn)&&(v+=P(q(u))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(f=r.horizontalScale)&&(v+=P(100*f)+" Tz\n"),r.lang;var j=-1,G=void 0!==r.renderingMode?r.renderingMode:r.stroke,B=g.internal.getCurrentPageInfo().pageContext;switch(G){case 0:case!1:case"fill":j=0;break;case 1:case!0:case"stroke":j=1;break;case 2:case"fillThenStroke":j=2;break;case 3:case"invisible":j=3;break;case 4:case"fillAndAddForClipping":j=4;break;case 5:case"strokeAndAddPathForClipping":j=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":j=6;break;case 7:case"addToPathForClipping":j=7}var z=void 0!==B.usedRenderingMode?B.usedRenderingMode:-1;-1!==j?v+=j+" Tr\n":-1!==z&&(v+="0 Tr\n"),-1!==j&&(B.usedRenderingMode=j),h=r.align||"left";var U,W=pt*x,$=g.internal.pageSize.getWidth(),V=Lt[St];u=r.charSpace||cn,c=r.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},r.flags);var X=[],H=function(t){return g.getStringUnitWidth(t,{font:V,charSpace:u,fontSize:pt,doKerning:!1})*pt/b};if("[object Array]"===Object.prototype.toString.call(t)){var Y;a=A(t),"left"!==h&&(U=a.map(H));var Z,K=0;if("right"===h){e-=U[0],t=[],I=a.length;for(var J=0;J<I;J++)0===J?(Z=nn(e),Y=rn(n)):(Z=q(K-U[J]),Y=-W),t.push([a[J],Z,Y]),K=U[J]}else if("center"===h){e-=U[0]/2,t=[],I=a.length;for(var Q=0;Q<I;Q++)0===Q?(Z=nn(e),Y=rn(n)):(Z=q((K-U[Q])/2),Y=-W),t.push([a[Q],Z,Y]),K=U[Q]}else if("left"===h){t=[],I=a.length;for(var tt=0;tt<I;tt++)t.push(a[tt])}else if("justify"===h&&"Identity-H"===V.encoding){t=[],I=a.length,c=0!==c?c:$;for(var et=0,nt=0;nt<I;nt++)if(Y=0===nt?rn(n):-W,Z=0===nt?nn(e):et,nt<I-1){var it=q((c-U[nt])/(a[nt].split(" ").length-1)),rt=a[nt].split(" ");t.push([rt[0]+" ",Z,Y]),et=0;for(var st=1;st<rt.length;st++){var ot=(H(rt[st-1]+" "+rt[st])-H(rt[st]))*b+it;st==rt.length-1?t.push([rt[st],ot,0]):t.push([rt[st]+" ",ot,0]),et-=ot}}else t.push([a[nt],Z,Y]);t.push(["",et,0])}else{if("justify"!==h)throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(t=[],I=a.length,c=0!==c?c:$,nt=0;nt<I;nt++)Y=0===nt?rn(n):-W,Z=0===nt?nn(e):0,nt<I-1?X.push(P(q((c-U[nt])/(a[nt].split(" ").length-1)))):X.push(0),t.push([a[nt],Z,Y])}}!0===("boolean"==typeof r.R2L?r.R2L:yt)&&(t=S(t,(function(t,e,n){return[t.split("").reverse().join(""),e,n]}))),o={text:t,x:e,y:n,options:r,mutex:{pdfEscape:me,activeFontKey:St,fonts:Lt,activeFontSize:pt}},Gt.publish("postProcessText",o),t=o.text,y=o.mutex.isHex||!1;var at=Lt[St].encoding;"WinAnsiEncoding"!==at&&"StandardEncoding"!==at||(t=S(t,(function(t,e,n){return[w(t),e,n]}))),a=A(t),t=[];for(var lt,ht,ct,dt=Array.isArray(a[0])?1:0,ft="",gt=function(t,e,n){var i="";return n instanceof Wt?(n="number"==typeof r.angle?$t(n,new Wt(1,0,0,1,t,e)):$t(new Wt(1,0,0,1,t,e),n),T===E&&(n=$t(new Wt(1,0,0,-1,0,0),n)),i=n.join(" ")+" Tm\n"):i=P(t)+" "+P(e)+" Td\n",i},mt=0;mt<a.length;mt++){switch(ft="",dt){case 1:ct=(y?"<":"(")+a[mt][0]+(y?">":")"),lt=parseFloat(a[mt][1]),ht=parseFloat(a[mt][2]);break;case 0:ct=(y?"<":"(")+a[mt]+(y?">":")"),lt=nn(e),ht=rn(n)}void 0!==X&&void 0!==X[mt]&&(ft=X[mt]+" Tw\n"),0===mt?t.push(ft+gt(lt,ht,p)+ct):0===dt?t.push(ft+ct):1===dt&&t.push(ft+gt(lt,ht,p)+ct)}t=0===dt?t.join(" Tj\nT* "):t.join(" Tj\n"),t+=" Tj\n";var _t="BT\n/";return _t+=St+" "+pt+" Tf\n",_t+=P(pt*x)+" TL\n",_t+=hn+"\n",_t+=v,_t+=t,ut(_t+="ET"),_[St]=!0,g};var De=v.__private__.clip=v.clip=function(t){return ut("evenodd"===t?"W*":"W"),this};v.clipEvenOdd=function(){return De("evenodd")},v.__private__.discardPath=v.discardPath=function(){return ut("n"),this};var Oe=v.__private__.isValidStyle=function(t){var e=!1;return-1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};v.__private__.setDefaultPathOperation=v.setDefaultPathOperation=function(t){return Oe(t)&&(g=t),this};var je=v.__private__.getStyle=v.getStyle=function(t){var e=g;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},Ge=v.close=function(){return ut("h"),this};v.stroke=function(){return ut("S"),this},v.fill=function(t){return Be("f",t),this},v.fillEvenOdd=function(t){return Be("f*",t),this},v.fillStroke=function(t){return Be("B",t),this},v.fillStrokeEvenOdd=function(t){return Be("B*",t),this};var Be=function(t,e){"object"===(0,i.A)(e)?Ue(e,t):ut(t)},ze=function(t){null===t||T===E&&void 0===t||(t=je(t),ut(t))};function qe(t,e,n,i,r){var s=new O(e||this.boundingBox,n||this.xStep,i||this.yStep,this.gState,r||this.matrix);s.stream=this.stream;var o=t+"$$"+this.cloneIndex+++"$$";return Xt(o,s),s}var Ue=function(t,e){var n=Nt[t.key],i=It[n];if(i instanceof D)ut("q"),ut(We(e)),i.gState&&v.setGState(i.gState),ut(t.matrix.toString()+" cm"),ut("/"+n+" sh"),ut("Q");else if(i instanceof O){var r=new Wt(1,0,0,-1,0,An());t.matrix&&(r=r.multiply(t.matrix||Vt),n=qe.call(i,t.key,t.boundingBox,t.xStep,t.yStep,r).id),ut("q"),ut("/Pattern cs"),ut("/"+n+" scn"),i.gState&&v.setGState(i.gState),ut(e),ut("Q")}},We=function(t){switch(t){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},$e=v.moveTo=function(t,e){return ut(P(q(t))+" "+P(U(e))+" m"),this},Ve=v.lineTo=function(t,e){return ut(P(q(t))+" "+P(U(e))+" l"),this},Xe=v.curveTo=function(t,e,n,i,r,s){return ut([P(q(t)),P(U(e)),P(q(n)),P(U(i)),P(q(r)),P(U(s)),"c"].join(" ")),this};v.__private__.line=v.line=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Oe(r))throw new Error("Invalid arguments passed to jsPDF.line");return T===S?this.lines([[n-t,i-e]],t,e,[1,1],r||"S"):this.lines([[n-t,i-e]],t,e,[1,1]).stroke()},v.__private__.lines=v.lines=function(t,e,n,i,r,s){var o,a,l,h,u,c,d,f,p,g,m,y;if("number"==typeof t&&(y=n,n=e,e=t,t=y),i=i||[1,1],s=s||!1,isNaN(e)||isNaN(n)||!Array.isArray(t)||!Array.isArray(i)||!Oe(r)||"boolean"!=typeof s)throw new Error("Invalid arguments passed to jsPDF.lines");for($e(e,n),o=i[0],a=i[1],h=t.length,g=e,m=n,l=0;l<h;l++)2===(u=t[l]).length?(g=u[0]*o+g,m=u[1]*a+m,Ve(g,m)):(c=u[0]*o+g,d=u[1]*a+m,f=u[2]*o+g,p=u[3]*a+m,g=u[4]*o+g,m=u[5]*a+m,Xe(c,d,f,p,g,m));return s&&Ge(),ze(r),this},v.path=function(t){for(var e=0;e<t.length;e++){var n=t[e],i=n.c;switch(n.op){case"m":$e(i[0],i[1]);break;case"l":Ve(i[0],i[1]);break;case"c":Xe.apply(this,i);break;case"h":Ge()}}return this},v.__private__.rect=v.rect=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Oe(r))throw new Error("Invalid arguments passed to jsPDF.rect");return T===S&&(i=-i),ut([P(q(t)),P(U(e)),P(q(n)),P(q(i)),"re"].join(" ")),ze(r),this},v.__private__.triangle=v.triangle=function(t,e,n,i,r,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(s)||!Oe(o))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[n-t,i-e],[r-n,s-i],[t-r,e-s]],t,e,[1,1],o,!0),this},v.__private__.roundedRect=v.roundedRect=function(t,e,n,i,r,s,o){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(s)||!Oe(o))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var a=4/3*(Math.SQRT2-1);return r=Math.min(r,.5*n),s=Math.min(s,.5*i),this.lines([[n-2*r,0],[r*a,0,r,s-s*a,r,s],[0,i-2*s],[0,s*a,-r*a,s,-r,s],[2*r-n,0],[-r*a,0,-r,-s*a,-r,-s],[0,2*s-i],[0,-s*a,r*a,-s,r,-s]],t+r,e,[1,1],o,!0),this},v.__private__.ellipse=v.ellipse=function(t,e,n,i,r){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||!Oe(r))throw new Error("Invalid arguments passed to jsPDF.ellipse");var s=4/3*(Math.SQRT2-1)*n,o=4/3*(Math.SQRT2-1)*i;return $e(t+n,e),Xe(t+n,e-o,t+s,e-i,t,e-i),Xe(t-s,e-i,t-n,e-o,t-n,e),Xe(t-n,e+o,t-s,e+i,t,e+i),Xe(t+s,e+i,t+n,e+o,t+n,e),ze(r),this},v.__private__.circle=v.circle=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||!Oe(i))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,n,n,i)},v.setFont=function(t,e,n){return n&&(e=L(e,n)),St=we(t,e,{disableWarning:!1}),this};var He=v.__private__.getFont=v.getFont=function(){return Lt[we.apply(v,arguments)]};v.__private__.getFontList=v.getFontList=function(){var t,e,n={};for(t in Pt)if(Pt.hasOwnProperty(t))for(e in n[t]=[],Pt[t])Pt[t].hasOwnProperty(e)&&n[t].push(e);return n},v.addFont=function(t,e,n,i,r){var s=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==s.indexOf(arguments[3])?r=arguments[3]:arguments[3]&&-1==s.indexOf(arguments[3])&&(n=L(n,i)),ge.call(this,t,e,n,r=r||"Identity-H")};var Ye,Ze=t.lineWidth||.200025,Ke=v.__private__.getLineWidth=v.getLineWidth=function(){return Ze},Je=v.__private__.setLineWidth=v.setLineWidth=function(t){return Ze=t,ut(P(q(t))+" w"),this};v.__private__.setLineDash=j.API.setLineDash=j.API.setLineDashPattern=function(t,e){if(t=t||[],e=e||0,isNaN(e)||!Array.isArray(t))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return t=t.map((function(t){return P(q(t))})).join(" "),e=P(q(e)),ut("["+t+"] "+e+" d"),this};var Qe=v.__private__.getLineHeight=v.getLineHeight=function(){return pt*Ye};v.__private__.getLineHeight=v.getLineHeight=function(){return pt*Ye};var tn=v.__private__.setLineHeightFactor=v.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(Ye=t),this},en=v.__private__.getLineHeightFactor=v.getLineHeightFactor=function(){return Ye};tn(t.lineHeight);var nn=v.__private__.getHorizontalCoordinate=function(t){return q(t)},rn=v.__private__.getVerticalCoordinate=function(t){return T===E?t:jt[J].mediaBox.topRightY-jt[J].mediaBox.bottomLeftY-q(t)},sn=v.__private__.getHorizontalCoordinateString=v.getHorizontalCoordinateString=function(t){return P(nn(t))},on=v.__private__.getVerticalCoordinateString=v.getVerticalCoordinateString=function(t){return P(rn(t))},an=t.strokeColor||"0 G";v.__private__.getStrokeColor=v.getDrawColor=function(){return ee(an)},v.__private__.setStrokeColor=v.setDrawColor=function(t,e,n,i){return an=ne({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"draw",precision:2}),ut(an),this};var ln=t.fillColor||"0 g";v.__private__.getFillColor=v.getFillColor=function(){return ee(ln)},v.__private__.setFillColor=v.setFillColor=function(t,e,n,i){return ln=ne({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"fill",precision:2}),ut(ln),this};var hn=t.textColor||"0 g",un=v.__private__.getTextColor=v.getTextColor=function(){return ee(hn)};v.__private__.setTextColor=v.setTextColor=function(t,e,n,i){return hn=ne({ch1:t,ch2:e,ch3:n,ch4:i,pdfColorType:"text",precision:3}),this};var cn=t.charSpace,dn=v.__private__.getCharSpace=v.getCharSpace=function(){return parseFloat(cn||0)};v.__private__.setCharSpace=v.setCharSpace=function(t){if(isNaN(t))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return cn=t,this};var fn=0;v.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},v.__private__.setLineCap=v.setLineCap=function(t){var e=v.CapJoinStyles[t];if(void 0===e)throw new Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return fn=e,ut(e+" J"),this};var pn=0;v.__private__.setLineJoin=v.setLineJoin=function(t){var e=v.CapJoinStyles[t];if(void 0===e)throw new Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return pn=e,ut(e+" j"),this},v.__private__.setLineMiterLimit=v.__private__.setMiterLimit=v.setLineMiterLimit=v.setMiterLimit=function(t){if(t=t||0,isNaN(t))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ut(P(q(t))+" M"),this},v.GState=F,v.setGState=function(t){(t="string"==typeof t?Ft[kt[t]]:gn(null,t)).equals(Dt)||(ut("/"+t.id+" gs"),Dt=t)};var gn=function(t,e){if(!t||!kt[t]){var n=!1;for(var i in Ft)if(Ft.hasOwnProperty(i)&&Ft[i].equals(e)){n=!0;break}if(n)e=Ft[i];else{var r="GS"+(Object.keys(Ft).length+1).toString(10);Ft[r]=e,e.id=r}return t&&(kt[t]=e.id),Gt.publish("addGState",e),e}};v.addGState=function(t,e){return gn(t,e),this},v.saveGraphicsState=function(){return ut("q"),Rt.push({key:St,size:pt,color:hn}),this},v.restoreGraphicsState=function(){ut("Q");var t=Rt.pop();return St=t.key,pt=t.size,hn=t.color,Dt=null,this},v.setCurrentTransformationMatrix=function(t){return ut(t.toString()+" cm"),this},v.comment=function(t){return ut("#"+t),this};var mn=function(t,e){var n=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}});var i=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var r="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return r},set:function(t){r=t.toString()}}),this},yn=function(t,e,n,i){mn.call(this,t,e),this.type="rect";var r=n||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var s=i||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return s},set:function(t){isNaN(t)||(s=parseFloat(t))}}),this},_n=function(){this.page=Ot,this.currentPage=J,this.pages=ot.slice(0),this.pagesContext=jt.slice(0),this.x=Tt,this.y=Ct,this.matrix=Mt,this.width=bn(J),this.height=An(J),this.outputDestination=lt,this.id="",this.objectNumber=-1};_n.prototype.restore=function(){Ot=this.page,J=this.currentPage,jt=this.pagesContext,ot=this.pages,Tt=this.x,Ct=this.y,Mt=this.matrix,wn(J,this.width),Sn(J,this.height),lt=this.outputDestination};var vn=function(t,e,n,i,r){Ut.push(new _n),Ot=J=0,ot=[],Tt=t,Ct=e,Mt=r,ye([n,i])};for(var xn in v.beginFormObject=function(t,e,n,i,r){return vn(t,e,n,i,r),this},v.endFormObject=function(t){return function(t){if(qt[t])Ut.pop().restore();else{var e=new _n,n="Xo"+(Object.keys(zt).length+1).toString(10);e.id=n,qt[t]=n,zt[n]=e,Gt.publish("addFormObject",e),Ut.pop().restore()}}(t),this},v.doFormObject=function(t,e){var n=zt[qt[t]];return ut("q"),ut(e.toString()+" cm"),ut("/"+n.id+" Do"),ut("Q"),this},v.getFormObject=function(t){var e=zt[qt[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},v.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(f(Le(Me()),t),"function"==typeof f.unload&&s.setTimeout&&setTimeout(f.unload,911),this):new Promise((function(e,n){try{var i=f(Le(Me()),t);"function"==typeof f.unload&&s.setTimeout&&setTimeout(f.unload,911),e(i)}catch(t){n(t.message)}}))},j.API)j.API.hasOwnProperty(xn)&&("events"===xn&&j.API.events.length?function(t,e){var n,i,r;for(r=e.length-1;-1!==r;r--)n=e[r][0],i=e[r][1],t.subscribe.apply(t,[n].concat("function"==typeof i?[i]:i))}(Gt,j.API.events):v[xn]=j.API[xn]);var bn=v.getPageWidth=function(t){return(jt[t=t||J].mediaBox.topRightX-jt[t].mediaBox.bottomLeftX)/Et},wn=v.setPageWidth=function(t,e){jt[t].mediaBox.topRightX=e*Et+jt[t].mediaBox.bottomLeftX},An=v.getPageHeight=function(t){return(jt[t=t||J].mediaBox.topRightY-jt[t].mediaBox.bottomLeftY)/Et},Sn=v.setPageHeight=function(t,e){jt[t].mediaBox.topRightY=e*Et+jt[t].mediaBox.bottomLeftY};return v.internal={pdfEscape:me,getStyle:je,getFont:He,getFontSize:mt,getCharSpace:dn,getTextColor:un,getLineHeight:Qe,getLineHeightFactor:en,getLineWidth:Ke,write:ct,getHorizontalCoordinate:nn,getVerticalCoordinate:rn,getCoordinateString:sn,getVerticalCoordinateString:on,collections:{},newObject:Yt,newAdditionalObject:Jt,newObjectDeferred:Zt,newObjectDeferredBegin:Kt,getFilters:ie,putStream:re,events:Gt,scaleFactor:Et,pageSize:{getWidth:function(){return bn(J)},setWidth:function(t){wn(J,t)},getHeight:function(){return An(J)},setHeight:function(t){Sn(J,t)}},encryptionOptions:m,encryption:Ie,getEncryptor:function(t){return null!==m?Ie.encryptor(t,0):function(t){return t}},output:Pe,getNumberOfPages:be,pages:ot,out:ut,f2:B,f3:z,getPageInfo:Ne,getPageInfoByObjId:Fe,getCurrentPageInfo:ke,getPDFVersion:b,Point:mn,Rectangle:yn,Matrix:Wt,hasHotfix:Re},Object.defineProperty(v.internal.pageSize,"width",{get:function(){return bn(J)},set:function(t){wn(J,t)},enumerable:!0,configurable:!0}),Object.defineProperty(v.internal.pageSize,"height",{get:function(){return An(J)},set:function(t){Sn(J,t)},enumerable:!0,configurable:!0}),function(t){for(var e=0,n=ft.length;e<n;e++){var i=ge.call(this,t[e][0],t[e][1],t[e][2],ft[e][3],!0);!1===y&&(_[i]=!0);var r=t[e][0].split("-");pe({id:i,fontName:r[0],fontStyle:r[1]||""})}Gt.publish("addFonts",{fonts:Lt,dictionary:Pt})}.call(v,ft),St="F1",_e(o,n),Gt.publish("initialized"),v}R.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},R.prototype.toHexString=function(t){return t.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},R.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},R.prototype.processOwnerPassword=function(t,e){return L(T(e).substr(0,5),t)},R.prototype.encryptor=function(t,e){var n=T(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return L(n,t)}},F.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||(0,i.A)(t)!==(0,i.A)(this))return!1;var r=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e))return!1;if(this[e]!==t[e])return!1;r++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&r--;return 0===r},j.API={events:[]},j.version="3.0.1";var G=j.API,B=1,z=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},q=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},U=function(t){return t.toFixed(2)},W=function(t){return t.toFixed(5)};G.__acroform__={};var $=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},V=function(t){return t*B},X=function(t){var e=new ut,n=St.internal.getHeight(t)||0,i=St.internal.getWidth(t)||0;return e.BBox=[0,0,Number(U(i)),Number(U(n))],e},H=G.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},Y=G.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},Z=G.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},K=G.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return Z(t,e-1)},J=G.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return H(t,e-1)},Q=G.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return Y(t,e-1)},tt=G.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=t[0],s=t[1],o=t[2],a=t[3],l={};return l.lowerLeft_X=n(r)||0,l.lowerLeft_Y=i(s+a)||0,l.upperRight_X=n(r+o)||0,l.upperRight_Y=i(s)||0,[Number(U(l.lowerLeft_X)),Number(U(l.lowerLeft_Y)),Number(U(l.upperRight_X)),Number(U(l.upperRight_Y))]},et=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=nt(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+U(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var s=X(t);return s.scope=t.scope,s.stream=e.join("\n"),s}},nt=function(t,e){var n=0===t.fontSize?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map((function(t){return t.split("\n")})):r.map((function(t){return[t]}));var s=n,o=St.internal.getHeight(t)||0;o=o<0?-o:o;var a=St.internal.getWidth(t)||0;a=a<0?-a:a;var l=function(e,n,i){if(e+1<r.length){var s=n+" "+r[e+1][0];return it(s,t,i).width<=a-4}return!1};s++;t:for(;s>0;){e="",s--;var h,u,c=it("3",t,s).height,d=t.multiline?o-s:(o-c)/2,f=d+=2,p=0,g=0,m=0;if(s<=0){e="(...) Tj\n",e+="% Width of Text: "+it(e,t,s=12).width+", FieldWidth:"+a+"\n";break}for(var y="",_=0,v=0;v<r.length;v++)if(r.hasOwnProperty(v)){var x=!1;if(1!==r[v].length&&m!==r[v].length-1){if((c+2)*(_+2)+2>o)continue t;y+=r[v][m],x=!0,g=v,v--}else{y=" "==(y+=r[v][m]+" ").substr(y.length-1)?y.substr(0,y.length-1):y;var b=parseInt(v),w=l(b,y,s),A=v>=r.length-1;if(w&&!A){y+=" ",m=0;continue}if(w||A){if(A)g=b;else if(t.multiline&&(c+2)*(_+2)+2>o)continue t}else{if(!t.multiline)continue t;if((c+2)*(_+2)+2>o)continue t;g=b}}for(var S="",E=p;E<=g;E++){var T=r[E];if(t.multiline){if(E===g){S+=T[m]+" ",m=(m+1)%T.length;continue}if(E===p){S+=T[T.length-1]+" ";continue}}S+=T[0]+" "}switch(S=" "==S.substr(S.length-1)?S.substr(0,S.length-1):S,u=it(S,t,s).width,t.textAlign){case"right":h=a-u-2;break;case"center":h=(a-u)/2;break;default:h=2}e+=U(h)+" "+U(f)+" Td\n",e+="("+z(S)+") Tj\n",e+=-U(h)+" 0 Td\n",f=-(s+2),u=0,p=x?g:g+1,_++,y=""}break}return i.text=e,i.fontSize=s,i},it=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},rt={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},st=function(t,e){var n={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find((function(t){return t.type===n.type&&t.object===n.object}))&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},ot=function(t,e){if(e.scope=t,void 0!==t.internal&&(void 0===t.internal.acroformPlugin||!1===t.internal.acroformPlugin.isInitialized)){if(dt.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(rt)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");B=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new ct,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",(function(){var e;(e=t).internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0})),t.internal.events.subscribe("buildDocument",(function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];i.objId=void 0,i.hasAnnotation&&st(i,t)}}(t)})),t.internal.events.subscribe("putCatalog",(function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(t)})),t.internal.events.subscribe("postPutPages",(function(e){!function(t,e){var n=!t;for(var r in t||(e.internal.newObjectDeferredBegin(e.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),e.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),t=t||e.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(t.hasOwnProperty(r)){var s=t[r],o=[],a=s.Rect;if(s.Rect&&(s.Rect=tt(s.Rect,e)),e.internal.newObjectDeferredBegin(s.objId,!0),s.DA=St.createDefaultAppearanceStream(s),"object"===(0,i.A)(s)&&"function"==typeof s.getKeyValueListForStream&&(o=s.getKeyValueListForStream()),s.Rect=a,s.hasAppearanceStream&&!s.appearanceStreamContent){var l=et(s);o.push({key:"AP",value:"<</N "+l+">>"}),e.internal.acroformPlugin.xForms.push(l)}if(s.appearanceStreamContent){var h="";for(var u in s.appearanceStreamContent)if(s.appearanceStreamContent.hasOwnProperty(u)){var c=s.appearanceStreamContent[u];if(h+="/"+u+" ",h+="<<",Object.keys(c).length>=1||Array.isArray(c)){for(var r in c)if(c.hasOwnProperty(r)){var d=c[r];"function"==typeof d&&(d=d.call(e,s)),h+="/"+r+" "+d+" ",e.internal.acroformPlugin.xForms.indexOf(d)>=0||e.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=c)&&(d=d.call(e,s)),h+="/"+r+" "+d,e.internal.acroformPlugin.xForms.indexOf(d)>=0||e.internal.acroformPlugin.xForms.push(d);h+=">>"}o.push({key:"AP",value:"<<\n"+h+">>"})}e.internal.putStream({additionalKeyValues:o,objectId:s.objId}),e.internal.out("endobj")}n&&function(t,e){for(var n in t)if(t.hasOwnProperty(n)){var r=n,s=t[n];e.internal.newObjectDeferredBegin(s.objId,!0),"object"===(0,i.A)(s)&&"function"==typeof s.putStream&&s.putStream(),delete t[r]}}(e.internal.acroformPlugin.xForms,e)}(e,t)})),t.internal.acroformPlugin.isInitialized=!0}},at=G.__acroform__.arrayToPdfArray=function(t,e,n){var r=function(t){return t};if(Array.isArray(t)){for(var s="[",o=0;o<t.length;o++)switch(0!==o&&(s+=" "),(0,i.A)(t[o])){case"boolean":case"number":case"object":s+=t[o].toString();break;case"string":"/"!==t[o].substr(0,1)?(void 0!==e&&n&&(r=n.internal.getEncryptor(e)),s+="("+z(r(t[o].toString()))+")"):s+=t[o].toString()}return s+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},lt=function(t,e,n){var i=function(t){return t};return void 0!==e&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+z(i(t))+")"},ht=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ht.prototype.toString=function(){return this.objId+" 0 R"},ht.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ht.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter((function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)}));for(var n in e)if(!1===Object.getOwnPropertyDescriptor(this,e[n]).configurable){var i=e[n],r=this[i];r&&(Array.isArray(r)?t.push({key:i,value:at(r,this.objId,this.scope)}):r instanceof ht?(r.scope=this.scope,t.push({key:i,value:r.objId+" 0 R"})):"function"!=typeof r&&t.push({key:i,value:r}))}return t};var ut=function(){ht.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};$(ut,ht);var ct=function(){ht.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+z(e(t))+")"}},set:function(e){t=e}})};$(ct,ht);var dt=function t(){ht.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(e,3))},set:function(t){!0===Boolean(t)?this.F=J(e,3):this.F=Q(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){if(isNaN(t))throw new Error('Invalid value "'+t+'" for attribute Ff supplied.');n=t}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==i.length)return i},set:function(t){i=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(t){i[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(t){i[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(t){i[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(t){i[3]=t}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=t;break;default:throw new Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var s=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!s||s.length<1){if(this instanceof xt)return;s="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+z(e(s))+")"},set:function(t){s=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return s},set:function(t){s=t}});var o="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return o},set:function(t){o=t}});var a="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===h?50/B:h},set:function(t){h=t}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!c||this instanceof xt||this instanceof wt))return lt(c,this.objId,this.scope)},set:function(t){t=t.toString(),c=t}});var d=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof yt==0?lt(d,this.objId,this.scope):d},set:function(t){t=t.toString(),d=this instanceof yt==0?"("===t.substr(0,1)?q(t.substr(1,t.length-2)):q(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof yt==1?q(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof yt==1?"/"+t:t}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof yt==0?lt(f,this.objId,this.scope):f},set:function(t){t=t.toString(),f=this instanceof yt==0?"("===t.substr(0,1)?q(t.substr(1,t.length-2)):q(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof yt==1?q(f.substr(1,f.length-1)):f},set:function(t){t=t.toString(),f=this instanceof yt==1?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(t){t=Boolean(t),g=t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(t){p=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,1))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,1):this.Ff=Q(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,2))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,2):this.Ff=Q(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,3))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,3):this.Ff=Q(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(t){if(-1===[0,1,2].indexOf(t))throw new Error('Invalid value "'+t+'" for attribute Q supplied.');m=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(m){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};$(dt,ht);var ft=function(){dt.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return at(e,this.objId,this.scope)},set:function(t){var n,i;i=[],"string"==typeof(n=t)&&(i=function(t,e,n){n||(n=1);for(var i,r=[];i=e.exec(t);)r.push(i[n]);return r}(n,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,n){for(n=n||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==n););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,18))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,18):this.Ff=Q(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,19))},set:function(t){!0===this.combo&&(!0===Boolean(t)?this.Ff=J(this.Ff,19):this.Ff=Q(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,20))},set:function(t){!0===Boolean(t)?(this.Ff=J(this.Ff,20),e.sort()):this.Ff=Q(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,22))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,22):this.Ff=Q(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,23):this.Ff=Q(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,27))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,27):this.Ff=Q(this.Ff,27)}}),this.hasAppearanceStream=!1};$(ft,dt);var pt=function(){ft.call(this),this.fontName="helvetica",this.combo=!1};$(pt,ft);var gt=function(){pt.call(this),this.combo=!0};$(gt,pt);var mt=function(){gt.call(this),this.edit=!0};$(mt,gt);var yt=function(){dt.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,15))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,15):this.Ff=Q(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,16))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,16):this.Ff=Q(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,17))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,17):this.Ff=Q(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,26):this.Ff=Q(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(e).length){var n,i=[];for(n in i.push("<<"),e)i.push("/"+n+" ("+z(t(e[n]))+")");return i.push(">>"),i.join("\n")}},set:function(t){"object"===(0,i.A)(t)&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){"string"==typeof t&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(e){t="/"+e}})};$(yt,dt);var _t=function(){yt.call(this),this.pushButton=!0};$(_t,yt);var vt=function(){yt.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};$(vt,yt);var xt=function(){var t,e;dt.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(t){e=t}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,n=[];for(e in n.push("<<"),r)n.push("/"+e+" ("+z(t(r[e]))+")");return n.push(">>"),n.join("\n")},set:function(t){"object"===(0,i.A)(t)&&(r=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(t){"string"==typeof t&&(r.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=St.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};$(xt,dt),vt.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},vt.prototype.createOption=function(t){var e=new xt;return e.Parent=this,e.optionName=t,this.Kids.push(e),Et.call(this.scope,e),e};var bt=function(){yt.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=St.CheckBox.createAppearanceStream()};$(bt,yt);var wt=function(){dt.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,13))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,13):this.Ff=Q(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,21))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,21):this.Ff=Q(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,23))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,23):this.Ff=Q(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,24))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,24):this.Ff=Q(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,25))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,25):this.Ff=Q(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,26))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,26):this.Ff=Q(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};$(wt,dt);var At=function(){wt.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return Boolean(K(this.Ff,14))},set:function(t){!0===Boolean(t)?this.Ff=J(this.Ff,14):this.Ff=Q(this.Ff,14)}}),this.password=!0};$(At,wt);var St={CheckBox:{createAppearanceStream:function(){return{N:{On:St.CheckBox.YesNormal},D:{On:St.CheckBox.YesPushDown,Off:St.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=X(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),s=nt(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+U(St.internal.getWidth(t))+" "+U(St.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+U(s.fontSize)+" Tf "+r),n.push("BT"),n.push(s.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join("\n"),e},YesNormal:function(t){var e=X(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),r=[],s=St.internal.getHeight(t),o=St.internal.getWidth(t),a=nt(t,t.caption);return r.push("1 g"),r.push("0 0 "+U(o)+" "+U(s)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+U(o-1)+" "+U(s-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+U(a.fontSize)+" Tf "+i),r.push(a.text),r.push("ET"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=X(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+U(St.internal.getWidth(t))+" "+U(St.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:St.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=St.RadioButton.Circle.YesNormal,e.D[t]=St.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=X(t);e.scope=t.scope;var n=[],i=St.internal.getWidth(t)<=St.internal.getHeight(t)?St.internal.getWidth(t)/4:St.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=St.internal.Bezier_C,s=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+W(St.internal.getWidth(t)/2)+" "+W(St.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+s+" "+s+" "+i+" 0 "+i+" c"),n.push("-"+s+" "+i+" -"+i+" "+s+" -"+i+" 0 c"),n.push("-"+i+" -"+s+" -"+s+" -"+i+" 0 -"+i+" c"),n.push(s+" -"+i+" "+i+" -"+s+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=X(t);e.scope=t.scope;var n=[],i=St.internal.getWidth(t)<=St.internal.getHeight(t)?St.internal.getWidth(t)/4:St.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*St.internal.Bezier_C).toFixed(5)),o=Number((i*St.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+W(St.internal.getWidth(t)/2)+" "+W(St.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+W(St.internal.getWidth(t)/2)+" "+W(St.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+o+" "+o+" "+i+" 0 "+i+" c"),n.push("-"+o+" "+i+" -"+i+" "+o+" -"+i+" 0 c"),n.push("-"+i+" -"+o+" -"+o+" -"+i+" 0 -"+i+" c"),n.push(o+" -"+i+" "+i+" -"+o+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e},OffPushDown:function(t){var e=X(t);e.scope=t.scope;var n=[],i=St.internal.getWidth(t)<=St.internal.getHeight(t)?St.internal.getWidth(t)/4:St.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),s=Number((r*St.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+W(St.internal.getWidth(t)/2)+" "+W(St.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+s+" "+s+" "+r+" 0 "+r+" c"),n.push("-"+s+" "+r+" -"+r+" "+s+" -"+r+" 0 c"),n.push("-"+r+" -"+s+" -"+s+" -"+r+" 0 -"+r+" c"),n.push(s+" -"+r+" "+r+" -"+s+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:St.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=St.RadioButton.Cross.YesNormal,e.D[t]=St.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=X(t);e.scope=t.scope;var n=[],i=St.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+U(St.internal.getWidth(t)-2)+" "+U(St.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(U(i.x1.x)+" "+U(i.x1.y)+" m"),n.push(U(i.x2.x)+" "+U(i.x2.y)+" l"),n.push(U(i.x4.x)+" "+U(i.x4.y)+" m"),n.push(U(i.x3.x)+" "+U(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join("\n"),e},YesPushDown:function(t){var e=X(t);e.scope=t.scope;var n=St.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+U(St.internal.getWidth(t))+" "+U(St.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+U(St.internal.getWidth(t)-2)+" "+U(St.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(U(n.x1.x)+" "+U(n.x1.y)+" m"),i.push(U(n.x2.x)+" "+U(n.x2.y)+" l"),i.push(U(n.x4.x)+" "+U(n.x4.y)+" m"),i.push(U(n.x3.x)+" "+U(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=X(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+U(St.internal.getWidth(t))+" "+U(St.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};St.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=St.internal.getWidth(t),n=St.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},St.internal.getWidth=function(t){var e=0;return"object"===(0,i.A)(t)&&(e=V(t.Rect[2])),e},St.internal.getHeight=function(t){var e=0;return"object"===(0,i.A)(t)&&(e=V(t.Rect[3])),e};var Et=G.addField=function(t){if(ot(this,t),!(t instanceof dt))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};G.AcroFormChoiceField=ft,G.AcroFormListBox=pt,G.AcroFormComboBox=gt,G.AcroFormEditBox=mt,G.AcroFormButton=yt,G.AcroFormPushButton=_t,G.AcroFormRadioButton=vt,G.AcroFormCheckBox=bt,G.AcroFormTextField=wt,G.AcroFormPasswordField=At,G.AcroFormAppearance=St,G.AcroForm={ChoiceField:ft,ListBox:pt,ComboBox:gt,EditBox:mt,Button:yt,PushButton:_t,RadioButton:vt,CheckBox:bt,TextField:wt,PasswordField:At,Appearance:St},j.AcroForm={ChoiceField:ft,ListBox:pt,ComboBox:gt,EditBox:mt,Button:yt,PushButton:_t,RadioButton:vt,CheckBox:bt,TextField:wt,PasswordField:At,Appearance:St};var Tt,Ct;j.AcroForm;function Mt(t){return t.reduce((function(t,e,n){return t[e]=n,t}),{})}!function(t){t.__addimage__={};var e="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(t,i){var r,s,o,a,l,h=e;if("RGBA"===(i=i||e)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(S(t))for(l in n)for(o=n[l],r=0;r<o.length;r+=1){for(a=!0,s=0;s<o[r].length;s+=1)if(void 0!==o[r][s]&&o[r][s]!==t[s]){a=!1;break}if(!0===a){h=l;break}}else for(l in n)for(o=n[l],r=0;r<o.length;r+=1){for(a=!0,s=0;s<o[r].length;s+=1)if(void 0!==o[r][s]&&o[r][s]!==t.charCodeAt(s)){a=!1;break}if(!0===a){h=l;break}}return h===e&&i!==e&&(h=i),h},s=function t(e){for(var n=this.internal.write,i=this.internal.putStream,r=(0,this.internal.getFilters)();-1!==r.indexOf("FlateEncode");)r.splice(r.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var s=[];if(s.push({key:"Type",value:"/XObject"}),s.push({key:"Subtype",value:"/Image"}),s.push({key:"Width",value:e.width}),s.push({key:"Height",value:e.height}),e.colorSpace===_.INDEXED?s.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(s.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===_.DEVICE_CMYK&&s.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),s.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&s.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var o="",a=0,l=e.transparency.length;a<l;a++)o+=e.transparency[a]+" "+e.transparency[a]+" ";s.push({key:"Mask",value:"["+o+"]"})}void 0!==e.sMask&&s.push({key:"SMask",value:e.objectId+1+" 0 R"});var h=void 0!==e.filter?["/"+e.filter]:void 0;if(i({data:e.data,additionalKeyValues:s,alreadyAppliedFilters:h,objectId:e.objectId}),n("endobj"),"sMask"in e&&void 0!==e.sMask){var u="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,c={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:u,data:e.sMask};"filter"in e&&(c.filter=e.filter),t.call(this,c)}if(e.colorSpace===_.INDEXED){var d=this.internal.newObject();i({data:T(new Uint8Array(e.palette)),objectId:d}),n("endobj")}},o=function(){var t=this.internal.collections.addImage_images;for(var e in t)s.call(this,t[e])},a=function(){var t,e=this.internal.collections.addImage_images,n=this.internal.write;for(var i in e)n("/I"+(t=e[i]).index,t.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",o),this.internal.events.subscribe("putXobjectDict",a))},h=function(){var t=this.internal.collections.addImage_images;return l.call(this),t},u=function(){return Object.keys(this.internal.collections.addImage_images).length},d=function(e){return"function"==typeof t["process"+e.toUpperCase()]},f=function(t){return"object"===(0,i.A)(t)&&1===t.nodeType},p=function(e,n){if("IMG"===e.nodeName&&e.hasAttribute("src")){var i=""+e.getAttribute("src");if(0===i.indexOf("data:image/"))return c(unescape(i).split("base64,").pop());var r=t.loadFile(i,!0);if(void 0!==r)return r}if("CANVAS"===e.nodeName){if(0===e.width||0===e.height)throw new Error("Given canvas must have data. Canvas width: "+e.width+", height: "+e.height);var s;switch(n){case"PNG":s="image/png";break;case"WEBP":s="image/webp";break;default:s="image/jpeg"}return c(e.toDataURL(s,1).split("base64,").pop())}},g=function(t){var e=this.internal.collections.addImage_images;if(e)for(var n in e)if(t===e[n].alias)return e[n]},m=function(t,e,n){return t||e||(t=-96,e=-96),t<0&&(t=-1*n.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*n.height*72/e/this.internal.scaleFactor),0===t&&(t=e*n.width/n.height),0===e&&(e=t*n.height/n.width),[t,e]},y=function(t,e,n,i,r,s){var o=m.call(this,n,i,r),a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,u=h.call(this);if(n=o[0],i=o[1],u[r.index]=r,s){s*=Math.PI/180;var c=Math.cos(s),d=Math.sin(s),f=function(t){return t.toFixed(4)},p=[f(c),f(d),f(-1*d),f(c),0,0,"cm"]}this.internal.write("q"),s?(this.internal.write([1,"0","0",1,a(t),l(e+i),"cm"].join(" ")),this.internal.write(p.join(" ")),this.internal.write([a(n),"0","0",a(i),"0","0","cm"].join(" "))):this.internal.write([a(n),"0","0",a(i),a(t),l(e+i),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+r.index+" Do"),this.internal.write("Q")},_=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var v=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},x=t.__addimage__.sHashCode=function(t){var e,n,i=0;if("string"==typeof t)for(n=t.length,e=0;e<n;e++)i=(i<<5)-i+t.charCodeAt(e),i|=0;else if(S(t))for(n=t.byteLength/2,e=0;e<n;e++)i=(i<<5)-i+t[e],i|=0;return i},b=t.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},w=t.__addimage__.extractImageFromDataUrl=function(t){if(null==t)return null;if(!(t=t.trim()).startsWith("data:"))return null;var e=t.indexOf(",");return e<0?null:t.substring(0,e).trim().endsWith("base64")?t.substring(e+1):null},A=t.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array};t.__addimage__.isArrayBuffer=function(t){return A()&&t instanceof ArrayBuffer};var S=t.__addimage__.isArrayBufferView=function(t){return A()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},E=t.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n},T=t.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",n=S(t)?t:new Uint8Array(t),i=0;i<n.length;i+=8192)e+=String.fromCharCode.apply(null,n.subarray(i,i+8192));return e};t.addImage=function(){var t,n,r,s,o,a,h,u,c;if("number"==typeof arguments[1]?(n=e,r=arguments[1],s=arguments[2],o=arguments[3],a=arguments[4],h=arguments[5],u=arguments[6],c=arguments[7]):(n=arguments[1],r=arguments[2],s=arguments[3],o=arguments[4],a=arguments[5],h=arguments[6],u=arguments[7],c=arguments[8]),"object"===(0,i.A)(t=arguments[0])&&!f(t)&&"imageData"in t){var d=t;t=d.imageData,n=d.format||n||e,r=d.x||r||0,s=d.y||s||0,o=d.w||d.width||o,a=d.h||d.height||a,h=d.alias||h,u=d.compression||u,c=d.rotation||d.angle||c}var p=this.internal.getFilters();if(void 0===u&&-1!==p.indexOf("FlateEncode")&&(u="SLOW"),isNaN(r)||isNaN(s))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var g=C.call(this,t,n,h,u);return y.call(this,r,s,o,a,g,c),this};var C=function(n,i,s,o){var a,l,h;if("string"==typeof n&&r(n)===e){n=unescape(n);var c=M(n,!1);(""!==c||void 0!==(c=t.loadFile(n,!0)))&&(n=c)}if(f(n)&&(n=p(n,i)),i=r(n,i),!d(i))throw new Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if((null==(h=s)||0===h.length)&&(s=function(t){return"string"==typeof t||S(t)?x(t):S(t.data)?x(t.data):null}(n)),(a=g.call(this,s))||(A()&&(n instanceof Uint8Array||"RGBA"===i||(l=n,n=E(n))),a=this["process"+i.toUpperCase()](n,u.call(this),s,function(e){return e&&"string"==typeof e&&(e=e.toUpperCase()),e in t.image_compression?e:v.NONE}(o),l)),!a)throw new Error("An unknown error occurred whilst processing the image.");return a},M=t.__addimage__.convertBase64ToBinaryString=function(t,e){e="boolean"!=typeof e||e;var n,i="";if("string"==typeof t){var r;n=null!==(r=w(t))&&void 0!==r?r:t;try{i=c(n)}catch(t){if(e)throw b(n)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return i};t.getImageProperties=function(n){var i,s,o="";if(f(n)&&(n=p(n)),"string"==typeof n&&r(n)===e&&(""===(o=M(n,!1))&&(o=t.loadFile(n)||""),n=o),s=r(n),!d(s))throw new Error("addImage does not support files of type '"+s+"', please ensure that a plugin for '"+s+"' support is added.");if(!A()||n instanceof Uint8Array||(n=E(n)),!(i=this["process"+s.toUpperCase()](n)))throw new Error("An unknown error occurred whilst processing the image");return i.fileType=s,i}}(j.API),
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
Tt=j.API,Ct=function(t){if(void 0!==t&&""!=t)return!0},j.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),Tt.events.push(["putPage",function(t){for(var e,n,i,r=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString,o=this.internal.getPageInfoByObjId(t.objId),a=t.pageContext.annotations,l=!1,h=0;h<a.length&&!l;h++)switch((e=a[h]).type){case"link":(Ct(e.options.url)||Ct(e.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(0!=l){this.internal.write("/Annots [");for(var u=0;u<a.length;u++){e=a[u];var c=this.internal.pdfEscape,d=this.internal.getEncryptor(t.objId);switch(e.type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var f=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(f.objId),m=e.title||"Note";i="<</Type /Annot /Subtype /Text "+(n="/Rect ["+r(e.bounds.x)+" "+s(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w)+" "+s(e.bounds.y)+"] ")+"/Contents ("+c(g(e.contents))+")",i+=" /Popup "+p.objId+" 0 R",i+=" /P "+o.objId+" 0 R",i+=" /T ("+c(g(m))+") >>",f.content=i;var y=f.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(n="/Rect ["+r(e.bounds.x+30)+" "+s(e.bounds.y+e.bounds.h)+" "+r(e.bounds.x+e.bounds.w+30)+" "+s(e.bounds.y)+"] ")+" /Parent "+y,e.open&&(i+=" /Open true"),i+=" >>",p.content=i,this.internal.write(f.objId,"0 R",p.objId,"0 R");break;case"freetext":n="/Rect ["+r(e.bounds.x)+" "+s(e.bounds.y)+" "+r(e.bounds.x+e.bounds.w)+" "+s(e.bounds.y+e.bounds.h)+"] ";var _=e.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+n+"/Contents ("+c(d(e.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+_+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(e.options.name){var v=this.annotations._nameMap[e.options.name];e.options.pageNumber=v.page,e.options.top=v.y}else e.options.top||(e.options.top=0);if(n="/Rect ["+e.finalBounds.x+" "+e.finalBounds.y+" "+e.finalBounds.w+" "+e.finalBounds.h+"] ",i="",e.options.url)i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /A <</S /URI /URI ("+c(d(e.options.url))+") >>";else if(e.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+n+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,i+=" /FitV "+e.options.left+"]";break;default:var x=s(e.options.top);e.options.left=e.options.left||0,void 0===e.options.zoom&&(e.options.zoom=0),i+=" /XYZ "+e.options.left+" "+x+" "+e.options.zoom+"]"}""!=i&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),Tt.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},Tt.link=function(t,e,n,i,r){var s=this.internal.getCurrentPageInfo(),o=this.internal.getCoordinateString,a=this.internal.getVerticalCoordinateString;s.pageContext.annotations.push({finalBounds:{x:o(t),y:a(e),w:o(t+n),h:a(e+i)},options:r,type:"link"})},Tt.textWithLink=function(t,e,n,i){var r,s,o=this.getTextWidth(t),a=this.internal.getLineHeight()/this.internal.scaleFactor;if(void 0!==i.maxWidth){s=i.maxWidth;var l=this.splitTextToSize(t,s).length;r=Math.ceil(a*l)}else s=o,r=a;return this.text(t,e,n,i),n+=.2*a,"center"===i.align&&(e-=o/2),"right"===i.align&&(e-=o),this.link(e,n-a,s,r,i),o},Tt.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var s=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},o=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},a=t.__arabicParser__.isArabicEndLetter=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return o(t)&&r.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return o(t)&&s(t)&&e[t.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return o(t)&&s(t)&&4==e[t.charCodeAt(0)].length},c=t.__arabicParser__.resolveLigatures=function(t){var e=0,i=n,r="",s=0;for(e=0;e<t.length;e+=1)void 0!==i[t.charCodeAt(e)]?(s++,"number"==typeof(i=i[t.charCodeAt(e)])&&(r+=String.fromCharCode(i),i=n,s=0),e===t.length-1&&(i=n,r+=t.charAt(e-(s-1)),e-=s-1,s=0)):(i=n,r+=t.charAt(e-s),e-=s,s=0);return r};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==i[t.charCodeAt(0)]};var d=t.__arabicParser__.getCorrectForm=function(t,e,n){return o(t)?!1===s(t)?-1:!h(t)||!o(e)&&!o(n)||!o(n)&&a(e)||a(t)&&!o(e)||a(t)&&l(e)||a(t)&&a(e)?0:u(t)&&o(e)&&!a(e)&&o(n)&&h(n)?3:a(t)||!o(n)?1:2:-1},f=function(t){var n=0,i=0,r=0,s="",a="",l="",h=(t=t||"").split("\\s+"),u=[];for(n=0;n<h.length;n+=1){for(u.push(""),i=0;i<h[n].length;i+=1)s=h[n][i],a=h[n][i-1],l=h[n][i+1],o(s)?(r=d(s,a,l),u[n]+=-1!==r?String.fromCharCode(e[s.charCodeAt(0)][r]):s):u[n]+=s;u[n]=c(u[n])}return u.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,n=[];if(Array.isArray(e)){var i=0;for(n=[],i=0;i<e.length;i+=1)Array.isArray(e[i])?n.push([f(e[i][0]),e[i][1],e[i][2]]):n.push([f(e[i])]);t=n}else t=f(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",p])}(j.API),j.API.autoPrint=function(t){var e;if("javascript"===((t=t||{}).variant=t.variant||"non-conform",t.variant))this.addJS("print({});");else this.internal.events.subscribe("postPutResources",(function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+e+" 0 R")}));return this},
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var n=300;Object.defineProperty(this,"height",{get:function(){return n},set:function(t){n=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=n+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(t){i=t}});var r={};Object.defineProperty(this,"style",{get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,e){var n;if("2d"!==(t=t||"2d"))return null;for(n in e)this.pdf.context2d.hasOwnProperty(n)&&(this.pdf.context2d[n]=e[n]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(j.API),function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,r=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new o,this.internal.__cell__.pages=1},o=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var n=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var i=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var r=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var s=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return s},set:function(t){s=t}});var o=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return o},set:function(t){o=t}}),this};o.prototype.clone=function(){return new o(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},o.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(t){return r.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},t.getTextDimensions=function(t,e){r.call(this);var n=(e=e||{}).fontSize||this.getFontSize(),i=e.font||this.getFont(),s=e.scaleFactor||this.internal.scaleFactor,o=0,a=0,l=0,h=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var u=e.maxWidth;u>0?"string"==typeof t?t=this.splitTextToSize(t,u):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce((function(t,e){return t.concat(h.splitTextToSize(e,u))}),[])):t=Array.isArray(t)?t:[t];for(var c=0;c<t.length;c++)o<(l=this.getStringUnitWidth(t[c],{font:i})*n)&&(o=l);return 0!==o&&(a=t.length),{w:o/=s,h:Math.max((a*n*this.getLineHeightFactor()-n*(this.getLineHeightFactor()-1))/s,0)}},t.cellAddPage=function(){r.call(this),this.addPage();var t=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new o(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=t.cell=function(){var t;t=arguments[0]instanceof o?arguments[0]:new o(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var i=this.internal.__cell__.lastCell,s=this.internal.__cell__.padding,a=this.internal.__cell__.margins||e,l=this.internal.__cell__.tableHeaderRow,h=this.internal.__cell__.printHeaders;return void 0!==i.lineNumber&&(i.lineNumber===t.lineNumber?(t.x=(i.x||0)+(i.width||0),t.y=i.y||0):i.y+i.height+t.height+a.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=a.top,h&&l&&(this.printHeaderRow(t.lineNumber,!0),t.y+=l[0].height)):t.y=i.y+i.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===n?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-s,t.y+s,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+s,{align:"center",baseline:"top",maxWidth:t.width-s-s}):this.text(t.text,t.x+s,t.y+s,{align:"left",baseline:"top",maxWidth:t.width-s-s})),this.internal.__cell__.lastCell=t,this};t.table=function(t,n,h,u,c){if(r.call(this),!h)throw new Error("No data for PDF table.");var d,f,p,g,m=[],y=[],_=[],v={},x={},b=[],w=[],A=(c=c||{}).autoSize||!1,S=!1!==c.printHeaders,E=c.css&&void 0!==c.css["font-size"]?16*c.css["font-size"]:c.fontSize||12,T=c.margins||Object.assign({width:this.getPageWidth()},e),C="number"==typeof c.padding?c.padding:3,M=c.headerBackgroundColor||"#c8c8c8",L=c.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=S,this.internal.__cell__.margins=T,this.internal.__cell__.table_font_size=E,this.internal.__cell__.padding=C,this.internal.__cell__.headerBackgroundColor=M,this.internal.__cell__.headerTextColor=L,this.setFontSize(E),null==u)y=m=Object.keys(h[0]),_=m.map((function(){return"left"}));else if(Array.isArray(u)&&"object"===(0,i.A)(u[0]))for(m=u.map((function(t){return t.name})),y=u.map((function(t){return t.prompt||t.name||""})),_=u.map((function(t){return t.align||"left"})),d=0;d<u.length;d+=1)x[u[d].name]=u[d].width*(19.049976/25.4);else Array.isArray(u)&&"string"==typeof u[0]&&(y=m=u,_=m.map((function(){return"left"})));if(A||Array.isArray(u)&&"string"==typeof u[0])for(d=0;d<m.length;d+=1){for(v[g=m[d]]=h.map((function(t){return t[g]})),this.setFont(void 0,"bold"),b.push(this.getTextDimensions(y[d],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),f=v[g],this.setFont(void 0,"normal"),p=0;p<f.length;p+=1)b.push(this.getTextDimensions(f[p],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);x[g]=Math.max.apply(null,b)+C+C,b=[]}if(S){var P={};for(d=0;d<m.length;d+=1)P[m[d]]={},P[m[d]].text=y[d],P[m[d]].align=_[d];var R=l.call(this,P,x);w=m.map((function(e){return new o(t,n,x[e],R,P[e].text,void 0,P[e].align)})),this.setTableHeaderRow(w),this.printHeaderRow(1,!1)}var I=u.reduce((function(t,e){return t[e.name]=e.align,t}),{});for(d=0;d<h.length;d+=1){"rowStart"in c&&c.rowStart instanceof Function&&c.rowStart({row:d,data:h[d]},this);var N=l.call(this,h[d],x);for(p=0;p<m.length;p+=1){var F=h[d][m[p]];"cellStart"in c&&c.cellStart instanceof Function&&c.cellStart({row:d,col:p,data:F},this),a.call(this,new o(t,n,x[m[p]],N,F,d+2,I[m[p]]))}}return this.internal.__cell__.table_x=t,this.internal.__cell__.table_y=n,this};var l=function(t,e){var n=this.internal.__cell__.padding,i=this.internal.__cell__.table_font_size,r=this.internal.scaleFactor;return Object.keys(t).map((function(i){var r=t[i];return this.splitTextToSize(r.hasOwnProperty("text")?r.text:r,e[i]-n-n)}),this).map((function(t){return this.getLineHeightFactor()*t.length*i/r+n+n}),this).reduce((function(t,e){return Math.max(t,e)}),0)};t.setTableHeaderRow=function(t){r.call(this),this.internal.__cell__.tableHeaderRow=t},t.printHeaderRow=function(t,e){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var i;if(n=!0,"function"==typeof this.internal.__cell__.headerFunction){var s=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new o(s[0],s[1],s[2],s[3],void 0,-1)}this.setFont(void 0,"bold");for(var l=[],h=0;h<this.internal.__cell__.tableHeaderRow.length;h+=1){i=this.internal.__cell__.tableHeaderRow[h].clone(),e&&(i.y=this.internal.__cell__.margins.top||0,l.push(i)),i.lineNumber=t;var u=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,i),this.setTextColor(u)}l.length>0&&this.setTableHeaderRow(l),this.setFont(void 0,"normal"),n=!1}}(j.API);var Lt={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Pt=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],Rt=Mt(Pt),It=[100,200,300,400,500,600,700,800,900],Nt=Mt(It);function Ft(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=function(t){return Lt[t=t||"normal"]?t:"normal"}(t.style),i=function(t){return t?"number"==typeof t?t>=100&&t<=900&&t%100==0?t:400:/^\d00$/.test(t)?parseInt(t):"bold"===t?700:400:400}(t.weight),r=function(t){return"number"==typeof Rt[t=t||"normal"]?t:"normal"}(t.stretch);return{family:e,style:n,weight:i,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,i].join(" ")}}}function kt(t,e,n,i){var r;for(r=n;r>=0&&r<e.length;r+=i)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=i)if(t[e[r]])return t[e[r]]}var Dt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},Ot={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function jt(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function Gt(t){return t.trimLeft()}function Bt(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function zt(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}var qt,Ut,Wt,$t=["times"];!function(t){var e,n,r,s,o,l,h,u,c,d=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new u,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new l,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new l,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new f(this),e=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,o=this.internal.getVerticalCoordinate,l=this.internal.Point,h=this.internal.Rectangle,u=this.internal.Matrix,c=new d}]);var f=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var e=t;Object.defineProperty(this,"pdf",{get:function(){return e}});var n=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return n},set:function(t){n=Boolean(t)}});var i=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return i},set:function(t){i=Boolean(t)}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(t){isNaN(t)||(r=t)}});var s=0;Object.defineProperty(this,"posY",{get:function(){return s},set:function(t){isNaN(t)||(s=t)}}),Object.defineProperty(this,"margin",{get:function(){return c.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=new Array(4))[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),c.margin=e}});var o=!1;Object.defineProperty(this,"autoPaging",{get:function(){return o},set:function(t){o=t}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(t){a=t}});var l=[];Object.defineProperty(this,"pageBreaks",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"ctx",{get:function(){return c},set:function(t){t instanceof d&&(c=t)}}),Object.defineProperty(this,"path",{get:function(){return c.path},set:function(t){c.path=t}});var h=[];Object.defineProperty(this,"ctxStack",{get:function(){return h},set:function(t){h=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=g(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=g(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var u=null;function f(t,e){if(null===u){var n=function(t){var e=[];return Object.keys(t).forEach((function(n){t[n].forEach((function(t){var i=null;switch(t){case"bold":i={family:n,weight:"bold"};break;case"italic":i={family:n,style:"italic"};break;case"bolditalic":i={family:n,weight:"bold",style:"italic"};break;case"":case"normal":i={family:n}}null!==i&&(i.ref={name:n,style:t},e.push(i))}))})),e}(t.getFontList());u=function(t){for(var e={},n=0;n<t.length;++n){var i=Ft(t[n]),r=i.family,s=i.stretch,o=i.style,a=i.weight;e[r]=e[r]||{},e[r][s]=e[r][s]||{},e[r][s][o]=e[r][s][o]||{},e[r][s][o][a]=i}return e}(n.concat(e))}return u}var p=null;Object.defineProperty(this,"fontFaces",{get:function(){return p},set:function(t){u=null,p=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var n=e[1];e[2];var i=e[3],r=e[4];e[5];var s=e[6],o=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(r)[2];r="px"===o?Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor):"em"===o?Math.floor(parseFloat(r)*this.pdf.getFontSize()):Math.floor(parseFloat(r)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(r);var a=function(t){var e,n,i=[],r=t.trim();if(""===r)return $t;if(r in Ot)return[Ot[r]];for(;""!==r;){switch(n=null,e=(r=Gt(r)).charAt(0)){case'"':case"'":n=Bt(r.substring(1),e);break;default:n=zt(r)}if(null===n)return $t;if(i.push(n[0]),""!==(r=Gt(n[1]))&&","!==r.charAt(0))return $t;r=r.replace(/^,/,"")}return i}(s);if(this.fontFaces){var l=function(t,e,n){for(var i=(n=n||{}).defaultFontFamily||"times",r=Object.assign({},Dt,n.genericFontFamilies||{}),s=null,o=null,a=0;a<e.length;++a)if(r[(s=Ft(e[a])).family]&&(s.family=r[s.family]),t.hasOwnProperty(s.family)){o=t[s.family];break}if(!(o=o||t[i]))throw new Error("Could not find a font-family for the rule '"+jt(s)+"' and default family '"+i+"'.");if(o=function(t,e){if(e[t])return e[t];var n=Rt[t],i=n<=Rt.normal?-1:1,r=kt(e,Pt,n,i);if(!r)throw new Error("Could not find a matching font-stretch value for "+t);return r}(s.stretch,o),o=function(t,e){if(e[t])return e[t];for(var n=Lt[t],i=0;i<n.length;++i)if(e[n[i]])return e[n[i]];throw new Error("Could not find a matching font-style for "+t)}(s.style,o),!(o=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var n=Nt[t],i=kt(e,It,n,t<400?-1:1);if(!i)throw new Error("Could not find a matching font-weight for value "+t);return i}(s.weight,o)))throw new Error("Failed to resolve a font for the rule '"+jt(s)+"'.");return o}(f(this.pdf,this.fontFaces),a.map((function(t){return{family:t,stretch:"normal",weight:i,style:n}})));this.pdf.setFont(l.ref.name,l.ref.style)}else{var h="";("bold"===i||parseInt(i,10)>=700||"bold"===n)&&(h="bold"),"italic"===n&&(h+="italic"),0===h.length&&(h="normal");for(var u="",c={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<a.length;d++){if(void 0!==this.pdf.internal.getFont(a[d],h,{noFallback:!0,disableWarning:!0})){u=a[d];break}if("bolditalic"===h&&void 0!==this.pdf.internal.getFont(a[d],"bold",{noFallback:!0,disableWarning:!0}))u=a[d],h="bold";else if(void 0!==this.pdf.internal.getFont(a[d],"normal",{noFallback:!0,disableWarning:!0})){u=a[d],h="normal";break}}if(""===u)for(var p=0;p<a.length;p++)if(c[a[p]]){u=c[a[p]];break}u=""===u?"Times":u,this.pdf.setFont(u,h)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,B.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,B.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=Boolean(t)}})};f.prototype.setLineDash=function(t){this.lineDash=t},f.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},f.prototype.fill=function(){A.call(this,"fill",!1)},f.prototype.stroke=function(){A.call(this,"stroke",!1)},f.prototype.beginPath=function(){this.path=[{type:"begin"}]},f.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw a.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var n=this.ctx.transform.applyToPoint(new l(t,e));this.path.push({type:"mt",x:n.x,y:n.y}),this.ctx.lastPoint=new l(t,e)},f.prototype.closePath=function(){var t=new l(0,0),e=0;for(e=this.path.length-1;-1!==e;e--)if("begin"===this.path[e].type&&"object"===(0,i.A)(this.path[e+1])&&"number"==typeof this.path[e+1].x){t=new l(this.path[e+1].x,this.path[e+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(t.x,t.y)},f.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw a.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var n=this.ctx.transform.applyToPoint(new l(t,e));this.path.push({type:"lt",x:n.x,y:n.y}),this.ctx.lastPoint=new l(n.x,n.y)},f.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),A.call(this,null,!0)},f.prototype.quadraticCurveTo=function(t,e,n,i){if(isNaN(n)||isNaN(i)||isNaN(t)||isNaN(e))throw a.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var r=this.ctx.transform.applyToPoint(new l(n,i)),s=this.ctx.transform.applyToPoint(new l(t,e));this.path.push({type:"qct",x1:s.x,y1:s.y,x:r.x,y:r.y}),this.ctx.lastPoint=new l(r.x,r.y)},f.prototype.bezierCurveTo=function(t,e,n,i,r,s){if(isNaN(r)||isNaN(s)||isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw a.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var o=this.ctx.transform.applyToPoint(new l(r,s)),h=this.ctx.transform.applyToPoint(new l(t,e)),u=this.ctx.transform.applyToPoint(new l(n,i));this.path.push({type:"bct",x1:h.x,y1:h.y,x2:u.x,y2:u.y,x:o.x,y:o.y}),this.ctx.lastPoint=new l(o.x,o.y)},f.prototype.arc=function(t,e,n,i,r,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r))throw a.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(s=Boolean(s),!this.ctx.transform.isIdentity){var o=this.ctx.transform.applyToPoint(new l(t,e));t=o.x,e=o.y;var h=this.ctx.transform.applyToPoint(new l(0,n)),u=this.ctx.transform.applyToPoint(new l(0,0));n=Math.sqrt(Math.pow(h.x-u.x,2)+Math.pow(h.y-u.y,2))}Math.abs(r-i)>=2*Math.PI&&(i=0,r=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:n,startAngle:i,endAngle:r,counterclockwise:s})},f.prototype.arcTo=function(t,e,n,i,r){throw new Error("arcTo not implemented.")},f.prototype.rect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw a.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+n,e),this.lineTo(t+n,e+i),this.lineTo(t,e+i),this.lineTo(t,e),this.lineTo(t+n,e),this.lineTo(t,e)},f.prototype.fillRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw a.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var r={};"butt"!==this.lineCap&&(r.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(r.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,n,i),this.fill(),r.hasOwnProperty("lineCap")&&(this.lineCap=r.lineCap),r.hasOwnProperty("lineJoin")&&(this.lineJoin=r.lineJoin)}},f.prototype.strokeRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw a.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(t,e,n,i),this.stroke())},f.prototype.clearRect=function(t,e,n,i){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i))throw a.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,n,i))},f.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var i=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=i}},f.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,n=0;n<this.pdf.internal.getNumberOfPages();n++)this.pdf.setPage(n+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},f.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var g=function(t){var e,n,i,r;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,n=0,i=0,r=0;else{var s=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==s)e=parseInt(s[1]),n=parseInt(s[2]),i=parseInt(s[3]),r=1;else if(null!==(s=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(s[1]),n=parseInt(s[2]),i=parseInt(s[3]),r=parseFloat(s[4]);else{if(r=1,"string"==typeof t&&"#"!==t.charAt(0)){var o=new p(t);t=o.ok?o.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,n=t.substring(2,3),n+=n,i=t.substring(3,4),i+=i):(e=t.substring(1,3),n=t.substring(3,5),i=t.substring(5,7)),e=parseInt(e,16),n=parseInt(n,16),i=parseInt(i,16)}}return{r:e,g:n,b:i,a:r,style:t}},m=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},y=function(){return Boolean(this.ctx.isStrokeTransparent||0==this.globalAlpha)};f.prototype.fillText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw a.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(i=isNaN(i)?void 0:i,!m.call(this)){var r=O(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;R.call(this,{text:t,x:e,y:n,scale:s,angle:r,align:this.textAlign,maxWidth:i})}},f.prototype.strokeText=function(t,e,n,i){if(isNaN(e)||isNaN(n)||"string"!=typeof t)throw a.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){i=isNaN(i)?void 0:i;var r=O(this.ctx.transform.rotation),s=this.ctx.transform.scaleX;R.call(this,{text:t,x:e,y:n,scale:s,renderingMode:"stroke",angle:r,align:this.textAlign,maxWidth:i})}},f.prototype.measureText=function(t){if("string"!=typeof t)throw a.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,n=this.pdf.internal.scaleFactor,i=e.internal.getFontSize(),r=e.getStringUnitWidth(t)*i/e.internal.scaleFactor;return new function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this}({width:r*=Math.round(96*n/72*1e4)/1e4})},f.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw a.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var n=new u(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(n)},f.prototype.rotate=function(t){if(isNaN(t))throw a.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new u(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},f.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw a.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var n=new u(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(n)},f.prototype.transform=function(t,e,n,i,r,s){if(isNaN(t)||isNaN(e)||isNaN(n)||isNaN(i)||isNaN(r)||isNaN(s))throw a.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var o=new u(t,e,n,i,r,s);this.ctx.transform=this.ctx.transform.multiply(o)},f.prototype.setTransform=function(t,e,n,i,r,s){t=isNaN(t)?1:t,e=isNaN(e)?0:e,n=isNaN(n)?0:n,i=isNaN(i)?1:i,r=isNaN(r)?0:r,s=isNaN(s)?0:s,this.ctx.transform=new u(t,e,n,i,r,s)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};f.prototype.drawImage=function(t,e,n,i,r,s,o,a,l){var c=this.pdf.getImageProperties(t),d=1,f=1,p=1,g=1;void 0!==i&&void 0!==a&&(p=a/i,g=l/r,d=c.width/i*a/i,f=c.height/r*l/r),void 0===s&&(s=e,o=n,e=0,n=0),void 0!==i&&void 0===a&&(a=i,l=r),void 0===i&&void 0===a&&(a=c.width,l=c.height);for(var m,y=this.ctx.transform.decompose(),x=O(y.rotate.shx),A=new u,E=(A=(A=(A=A.multiply(y.translate)).multiply(y.skew)).multiply(y.scale)).applyToRectangle(new h(s-e*p,o-n*g,i*d,r*f)),T=v.call(this,E),C=[],M=0;M<T.length;M+=1)-1===C.indexOf(T[M])&&C.push(T[M]);if(w(C),this.autoPaging)for(var L=C[0],P=C[C.length-1],R=L;R<P+1;R++){this.pdf.setPage(R);var I=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],N=1===R?this.posY+this.margin[0]:this.margin[0],F=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],k=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],D=1===R?0:F+(R-2)*k;if(0!==this.ctx.clip_path.length){var j=this.path;m=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(m,this.posX+this.margin[3],-D+N+this.ctx.prevPageLastElemOffset),S.call(this,"fill",!0),this.path=j}var G=JSON.parse(JSON.stringify(E));G=b([G],this.posX+this.margin[3],-D+N+this.ctx.prevPageLastElemOffset)[0];var B=(R>L||R<P)&&_.call(this);B&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],I,k,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",G.x,G.y,G.w,G.h,null,null,x),B&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",E.x,E.y,E.w,E.h,null,null,x)};var v=function(t,e,n){var i=[];e=e||this.pdf.internal.pageSize.width,n=n||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var r=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":i.push(Math.floor((t.y+r)/n)+1);break;case"arc":i.push(Math.floor((t.y+r-t.radius)/n)+1),i.push(Math.floor((t.y+r+t.radius)/n)+1);break;case"qct":var s=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);i.push(Math.floor((s.y+r)/n)+1),i.push(Math.floor((s.y+s.h+r)/n)+1);break;case"bct":var o=G(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);i.push(Math.floor((o.y+r)/n)+1),i.push(Math.floor((o.y+o.h+r)/n)+1);break;case"rect":i.push(Math.floor((t.y+r)/n)+1),i.push(Math.floor((t.y+t.h+r)/n)+1)}for(var a=0;a<i.length;a+=1)for(;this.pdf.internal.getNumberOfPages()<i[a];)x.call(this);return i},x=function(){var t=this.fillStyle,e=this.strokeStyle,n=this.font,i=this.lineCap,r=this.lineWidth,s=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=n,this.lineCap=i,this.lineWidth=r,this.lineJoin=s},b=function(t,e,n){for(var i=0;i<t.length;i++)switch(t[i].type){case"bct":t[i].x2+=e,t[i].y2+=n;case"qct":t[i].x1+=e,t[i].y1+=n;default:t[i].x+=e,t[i].y+=n}return t},w=function(t){return t.sort((function(t,e){return t-e}))},A=function(t,e){for(var n,i,r=this.fillStyle,s=this.strokeStyle,o=this.lineCap,a=this.lineWidth,l=Math.abs(a*this.ctx.transform.scaleX),h=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),c=JSON.parse(JSON.stringify(this.path)),d=[],f=0;f<c.length;f++)if(void 0!==c[f].x)for(var p=v.call(this,c[f]),g=0;g<p.length;g+=1)-1===d.indexOf(p[g])&&d.push(p[g]);for(var m=0;m<d.length;m++)for(;this.pdf.internal.getNumberOfPages()<d[m];)x.call(this);if(w(d),this.autoPaging)for(var y=d[0],A=d[d.length-1],E=y;E<A+1;E++){this.pdf.setPage(E),this.fillStyle=r,this.strokeStyle=s,this.lineCap=o,this.lineWidth=l,this.lineJoin=h;var T=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],C=1===E?this.posY+this.margin[0]:this.margin[0],M=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],L=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],P=1===E?0:M+(E-2)*L;if(0!==this.ctx.clip_path.length){var R=this.path;n=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(n,this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset),S.call(this,t,!0),this.path=R}if(i=JSON.parse(JSON.stringify(u)),this.path=b(i,this.posX+this.margin[3],-P+C+this.ctx.prevPageLastElemOffset),!1===e||0===E){var I=(E>y||E<A)&&_.call(this);I&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],T,L,null).clip().discardPath()),S.call(this,t,e),I&&this.pdf.restoreGraphicsState()}this.lineWidth=a}else this.lineWidth=l,S.call(this,t,e),this.lineWidth=a;this.path=u},S=function(t,e){if(("stroke"!==t||e||!y.call(this))&&("stroke"===t||e||!m.call(this))){for(var n,i,r=[],s=this.path,o=0;o<s.length;o++){var a=s[o];switch(a.type){case"begin":r.push({begin:!0});break;case"close":r.push({close:!0});break;case"mt":r.push({start:a,deltas:[],abs:[]});break;case"lt":var l=r.length;if(s[o-1]&&!isNaN(s[o-1].x)&&(n=[a.x-s[o-1].x,a.y-s[o-1].y],l>0))for(;l>=0;l--)if(!0!==r[l-1].close&&!0!==r[l-1].begin){r[l-1].deltas.push(n),r[l-1].abs.push(a);break}break;case"bct":n=[a.x1-s[o-1].x,a.y1-s[o-1].y,a.x2-s[o-1].x,a.y2-s[o-1].y,a.x-s[o-1].x,a.y-s[o-1].y],r[r.length-1].deltas.push(n);break;case"qct":var h=s[o-1].x+2/3*(a.x1-s[o-1].x),u=s[o-1].y+2/3*(a.y1-s[o-1].y),c=a.x+2/3*(a.x1-a.x),d=a.y+2/3*(a.y1-a.y),f=a.x,p=a.y;n=[h-s[o-1].x,u-s[o-1].y,c-s[o-1].x,d-s[o-1].y,f-s[o-1].x,p-s[o-1].y],r[r.length-1].deltas.push(n);break;case"arc":r.push({deltas:[],abs:[],arc:!0}),Array.isArray(r[r.length-1].abs)&&r[r.length-1].abs.push(a)}}i=e?null:"stroke"===t?"stroke":"fill";for(var g=!1,_=0;_<r.length;_++)if(r[_].arc)for(var v=r[_].abs,x=0;x<v.length;x++){var b=v[x];"arc"===b.type?C.call(this,b.x,b.y,b.radius,b.startAngle,b.endAngle,b.counterclockwise,void 0,e,!g):I.call(this,b.x,b.y),g=!0}else if(!0===r[_].close)this.pdf.internal.out("h"),g=!1;else if(!0!==r[_].begin){var w=r[_].start.x,A=r[_].start.y;N.call(this,r[_].deltas,w,A),g=!0}i&&M.call(this,i),e&&L.call(this)}},E=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,n=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-n;case"top":return t+e-n;case"hanging":return t+e-2*n;case"middle":return t+e/2-n;default:return t}},T=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};f.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},f.prototype.createPattern=function(){return this.createLinearGradient()},f.prototype.createRadialGradient=function(){return this.createLinearGradient()};var C=function(t,e,n,i,r,s,o,a,l){for(var h=k.call(this,n,i,r,s),u=0;u<h.length;u++){var c=h[u];0===u&&(l?P.call(this,c.x1+t,c.y1+e):I.call(this,c.x1+t,c.y1+e)),F.call(this,t,e,c.x2,c.y2,c.x3,c.y3,c.x4,c.y4)}a?L.call(this):M.call(this,o)},M=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},L=function(){this.pdf.clip(),this.pdf.discardPath()},P=function(t,e){this.pdf.internal.out(n(t)+" "+r(e)+" m")},R=function(t){var e;switch(t.align){case"right":case"end":e="right";break;case"center":e="center";break;default:e="left"}var n=this.pdf.getTextDimensions(t.text),i=E.call(this,t.y),r=T.call(this,i)-n.h,s=this.ctx.transform.applyToPoint(new l(t.x,i)),o=this.ctx.transform.decompose(),a=new u;a=(a=(a=a.multiply(o.translate)).multiply(o.skew)).multiply(o.scale);for(var c,d,f,p=this.ctx.transform.applyToRectangle(new h(t.x,i,n.w,n.h)),g=a.applyToRectangle(new h(t.x,r,n.w,n.h)),m=v.call(this,g),y=[],x=0;x<m.length;x+=1)-1===y.indexOf(m[x])&&y.push(m[x]);if(w(y),this.autoPaging)for(var A=y[0],C=y[y.length-1],M=A;M<C+1;M++){this.pdf.setPage(M);var L=1===M?this.posY+this.margin[0]:this.margin[0],P=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],R=this.pdf.internal.pageSize.height-this.margin[2],I=R-this.margin[0],N=this.pdf.internal.pageSize.width-this.margin[1],F=N-this.margin[3],k=1===M?0:P+(M-2)*I;if(0!==this.ctx.clip_path.length){var D=this.path;c=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=b(c,this.posX+this.margin[3],-1*k+L),S.call(this,"fill",!0),this.path=D}var O=b([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-k+L+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale);var j="text"!==this.autoPaging;if(j||O.y+O.h<=R){if(j||O.y>=L&&O.x<=N){var G=j?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||N-O.x)[0],B=b([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-k+L+this.ctx.prevPageLastElemOffset)[0],z=j&&(M>A||M<C)&&_.call(this);z&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],F,I,null).clip().discardPath()),this.pdf.text(G,B.x,B.y,{angle:t.angle,align:e,renderingMode:t.renderingMode}),z&&this.pdf.restoreGraphicsState()}}else O.y<R&&(this.ctx.prevPageLastElemOffset+=R-O.y);t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)}else t.scale>=.01&&(d=this.pdf.internal.getFontSize(),this.pdf.setFontSize(d*t.scale),f=this.lineWidth,this.lineWidth=f*t.scale),this.pdf.text(t.text,s.x+this.posX,s.y+this.posY,{angle:t.angle,align:e,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(d),this.lineWidth=f)},I=function(t,e,i,s){i=i||0,s=s||0,this.pdf.internal.out(n(t+i)+" "+r(e+s)+" l")},N=function(t,e,n){return this.pdf.lines(t,e,n,null,null)},F=function(t,n,i,r,a,l,h,u){this.pdf.internal.out([e(s(i+t)),e(o(r+n)),e(s(a+t)),e(o(l+n)),e(s(h+t)),e(o(u+n)),"c"].join(" "))},k=function(t,e,n,i){for(var r=2*Math.PI,s=Math.PI/2;e>n;)e-=r;var o=Math.abs(n-e);o<r&&i&&(o=r-o);for(var a=[],l=i?-1:1,h=e;o>1e-5;){var u=h+l*Math.min(o,s);a.push(D.call(this,t,h,u)),o-=Math.abs(u-h),h=u}return a},D=function(t,e,n){var i=(n-e)/2,r=t*Math.cos(i),s=t*Math.sin(i),o=r,a=-s,l=o*o+a*a,h=l+o*r+a*s,u=4/3*(Math.sqrt(2*l*h)-h)/(o*s-a*r),c=o-u*a,d=a+u*o,f=c,p=-d,g=i+e,m=Math.cos(g),y=Math.sin(g);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:c*m-d*y,y2:c*y+d*m,x3:f*m-p*y,y3:f*y+p*m,x4:t*Math.cos(n),y4:t*Math.sin(n)}},O=function(t){return 180*t/Math.PI},j=function(t,e,n,i,r,s){var o=t+.5*(n-t),a=e+.5*(i-e),l=r+.5*(n-r),u=s+.5*(i-s),c=Math.min(t,r,o,l),d=Math.max(t,r,o,l),f=Math.min(e,s,a,u),p=Math.max(e,s,a,u);return new h(c,f,d-c,p-f)},G=function(t,e,n,i,r,s,o,a){var l,u,c,d,f,p,g,m,y,_,v,x,b,w,A=n-t,S=i-e,E=r-n,T=s-i,C=o-r,M=a-s;for(u=0;u<41;u++)y=(g=(c=t+(l=u/40)*A)+l*((f=n+l*E)-c))+l*(f+l*(r+l*C-f)-g),_=(m=(d=e+l*S)+l*((p=i+l*T)-d))+l*(p+l*(s+l*M-p)-m),0==u?(v=y,x=_,b=y,w=_):(v=Math.min(v,y),x=Math.min(x,_),b=Math.max(b,y),w=Math.max(w,_));return new h(Math.round(v),Math.round(x),Math.round(b-v),Math.round(w-x))},B=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t,e,n=(t=this.ctx.lineDash,e=this.ctx.lineDashOffset,JSON.stringify({lineDash:t,lineDashOffset:e}));this.prevLineDash!==n&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=n)}}}(j.API),
/**
 * @license
 * jsPDF filters PlugIn
 * Copyright (c) 2014 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){var e,n,i,r,s,o,a,l,h,u;for(/[^\x00-\xFF]/.test(t),n=[],i=0,r=(t+=e="\0\0\0\0".slice(t.length%4||4)).length;r>i;i+=4)0!==(s=(t.charCodeAt(i)<<24)+(t.charCodeAt(i+1)<<16)+(t.charCodeAt(i+2)<<8)+t.charCodeAt(i+3))?(o=(s=((s=((s=((s=(s-(u=s%85))/85)-(h=s%85))/85)-(l=s%85))/85)-(a=s%85))/85)%85,n.push(o+33,a+33,l+33,h+33,u+33)):n.push(122);return function(t,e){for(var n=e;n>0;n--)t.pop()}(n,e.length),String.fromCharCode.apply(String,n)+"~>"},n=function(t){var e,n,i,r,s,o=String,a="length",l=255,h="charCodeAt",u="slice",c="replace";for(t[u](-2),t=t[u](0,-2)[c](/\s/g,"")[c]("z","!!!!!"),i=[],r=0,s=(t+=e="uuuuu"[u](t[a]%5||5))[a];s>r;r+=5)n=52200625*(t[h](r)-33)+614125*(t[h](r+1)-33)+7225*(t[h](r+2)-33)+85*(t[h](r+3)-33)+(t[h](r+4)-33),i.push(l&n>>24,l&n>>16,l&n>>8,l&n);return function(t,e){for(var n=e;n>0;n--)t.pop()}(i,e[a]),o.fromCharCode.apply(o,i)},i=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var n="",i=0;i<t.length;i+=2)n+=String.fromCharCode("0x"+(t[i]+t[i+1]));return n},s=function(t){for(var e=new Uint8Array(t.length),n=t.length;n--;)e[n]=t.charCodeAt(n);return(e=(0,r.$)(e)).reduce((function(t,e){return t+String.fromCharCode(e)}),"")};t.processDataByFilters=function(t,r){var o=0,a=t||"",l=[];for("string"==typeof(r=r||[])&&(r=[r]),o=0;o<r.length;o+=1)switch(r[o]){case"ASCII85Decode":case"/ASCII85Decode":a=n(a),l.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":a=e(a),l.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":a=i(a),l.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":a=a.split("").map((function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)})).join("")+">",l.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":a=s(a),l.push("/FlateDecode");break;default:throw new Error('The filter: "'+r[o]+'" is not implemented')}return{data:a,reverseChain:l.reverse().join(" ")}}}(j.API),
/**
 * @license
 * jsPDF fileloading PlugIn
 * Copyright (c) 2018 Aras Abbasi (aras.abbasi@gmail.com)
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.loadFile=function(t,e,n){return function(t,e,n){e=!1!==e,n="function"==typeof n?n:function(){};var i=void 0;try{i=function(t,e,n){var i=new XMLHttpRequest,r=0,s=function(t){var e=t.length,n=[],i=String.fromCharCode;for(r=0;r<e;r+=1)n.push(i(255&t.charCodeAt(r)));return n.join("")};if(i.open("GET",t,!e),i.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(i.onload=function(){200===i.status?n(s(this.responseText)):n(void 0)}),i.send(null),e&&200===i.status)return s(i.responseText)}(t,e,n)}catch(t){}return i}(t,e,n)},t.loadImageFile=t.loadFile}(j.API),function(t){function e(){return(s.html2canvas?Promise.resolve(s.html2canvas):n.e(3694).then(n.t.bind(n,3694,23))).catch((function(t){return Promise.reject(new Error("Could not load html2canvas: "+t))})).then((function(t){return t.default?t.default:t}))}function r(){return(s.DOMPurify?Promise.resolve(s.DOMPurify):n.e(1264).then(n.bind(n,91264))).catch((function(t){return Promise.reject(new Error("Could not load dompurify: "+t))})).then((function(t){return t.default?t.default:t}))}var o=function(t){var e=(0,i.A)(t);return"undefined"===e?"undefined":"string"===e||t instanceof String?"string":"number"===e||t instanceof Number?"number":"function"===e||t instanceof Function?"function":t&&t.constructor===Array?"array":t&&1===t.nodeType?"element":"object"===e?"object":"unknown"},a=function(t,e){var n=document.createElement(t);for(var i in e.className&&(n.className=e.className),e.innerHTML&&e.dompurify&&(n.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)n.style[i]=e.style[i];return n},l=function t(e){var n=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),i=t.convert(Promise.resolve(),n);return(i=i.setProgress(1,t,1,[t])).set(e)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(t,e){return t.__proto__=e||l.prototype,t},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(t,e){return this.then((function(){switch(e=e||function(t){switch(o(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(r).then((function(e){return this.set({src:a("div",{innerHTML:t,dompurify:e})})}));case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}}))},l.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,n){for(var i=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),r=e.firstChild;r;r=r.nextSibling)!0!==n&&1===r.nodeType&&"SCRIPT"===r.nodeName||i.appendChild(t(r,n));return 1===e.nodeType&&("CANVAS"===e.nodeName?(i.width=e.width,i.height=e.height,i.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(i.value=e.value),i.addEventListener("load",(function(){i.scrollTop=e.scrollTop,i.scrollLeft=e.scrollLeft}),!0)),i}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=a("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=a("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(a("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},l.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)})).then((function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},l.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(e).then((function(t){var e=this.opt.jsPDF,n=this.opt.fontFaces,i="number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,r=Object.assign({async:!0,allowTaint:!0,scale:i,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=n,n)for(var s=0;s<n.length;++s){var o=n[s],a=o.src.find((function(t){return"truetype"===t.format}));a&&e.addFont(a.url,o.ref.name,o.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,e.context2d.save(!0),t(this.prop.container,r)})).then((function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)}))},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t}))},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},l.prototype.output=function(t,e,n){return"img"===(n=n||"pdf").toLowerCase()||"image"===n.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},l.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(t,e)}))},l.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}}))},l.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},l.prototype.set=function(t){if("object"!==o(t))return this;var e=Object.keys(t||{}).map((function(e){if(e in l.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}}),this);return this.then((function(){return this.thenList(e)}))},l.prototype.get=function(t,e){return this.then((function(){var n=t in l.template.prop?this.prop[t]:this.opt[t];return e?e(n):n}))},l.prototype.setMargin=function(t){return this.then((function(){switch(o(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t})).then(this.setPageSize)},l.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then((function(){(t=t||j.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t}))},l.prototype.setProgress=function(t,e,n,i){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=n&&(this.progress.n=n),null!=i&&(this.progress.stack=i),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(t,e,n,i){return this.setProgress(t?this.progress.val+t:null,e||null,n?this.progress.n+n:null,i?this.progress.stack.concat(i):null)},l.prototype.then=function(t,e){var n=this;return this.thenCore(t,e,(function(t,e){return n.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,(function(e){return n.updateProgress(null,t),e})).then(t,e).then((function(t){return n.updateProgress(1),t}))}))},l.prototype.thenCore=function(t,e,n){n=n||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var i=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:l.convert(Object.assign({},this),Promise.prototype),r=n.call(i,t,e);return l.convert(r,this.__proto__)},l.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},l.prototype.thenList=function(t){var e=this;return t.forEach((function(t){e=e.thenCore(t)})),e},l.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return l.convert(e,this)},l.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},l.prototype.error=function(t){return this.then((function(){throw new Error(t)}))},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,j.getPageSize=function(t,e,n){if("object"===(0,i.A)(t)){var r=t;t=r.orientation,e=r.unit||e,n=r.format||n}e=e||"mm",n=n||"a4",t=(""+(t||"P")).toLowerCase();var s,o=(""+n).toLowerCase(),a={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(e){case"pt":s=1;break;case"mm":s=72/25.4;break;case"cm":s=72/2.54;break;case"in":s=72;break;case"px":s=.75;break;case"pc":case"em":s=12;break;case"ex":s=6;break;default:throw"Invalid unit: "+e}var l,h=0,u=0;if(a.hasOwnProperty(o))h=a[o][1]/s,u=a[o][0]/s;else try{h=n[1],u=n[0]}catch(t){throw new Error("Invalid format: "+n)}if("p"===t||"portrait"===t)t="p",u>h&&(l=u,u=h,h=l);else{if("l"!==t&&"landscape"!==t)throw"Invalid orientation: "+t;t="l",h>u&&(l=u,u=h,h=l)}return{width:u,height:h,unit:e,k:s,orientation:t}},t.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(Ft):null;var n=new l(e);return e.worker?n:n.from(t).doCallback()}}(j.API),j.API.addJS=function(t){return Wt=t,this.internal.events.subscribe("postPutResources",(function(){qt=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(qt+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),Ut=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Wt+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){void 0!==qt&&void 0!==Ut&&this.internal.out("/Names <</JavaScript "+qt+" 0 R>>")})),this
/**
 * @license
 * Copyright (c) 2014 Steven Spungin (TwelveTone LLC)  steven@twelvetone.tv
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */},function(t){var e;t.events.push(["postPutResources",function(){var t=this,n=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var i=t.outline.render().split(/\r\n/),r=0;r<i.length;r++){var s=i[r],o=n.exec(s);if(null!=o){var a=o[1];t.internal.newObjectDeferredBegin(a,!1)}t.internal.write(s)}if(this.outline.createNamedDestinations){var l=this.internal.pages.length,h=[];for(r=0;r<l;r++){var u=t.internal.newObject();h.push(u);var c=t.internal.getPageInfo(r+1);t.internal.write("<< /D["+c.objId+" 0 R /XYZ null null null]>> endobj")}var d=t.internal.newObject();for(t.internal.write("<< /Names [ "),r=0;r<h.length;r++)t.internal.write("(page_"+(r+1)+")"+h[r]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+d+" 0 R"),t.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,n){var i={title:e,options:n,children:[]};return null==t&&(t=this.root),t.children.push(i),i},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var n=0;n<e.children.length;n++)this.genIds_r(e.children[n])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var n=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<e.children.length;i++){var r=e.children[i];this.objStart(r),this.line("/Title "+this.makeString(r.title)),this.line("/Parent "+this.makeRef(e)),i>0&&this.line("/Prev "+this.makeRef(e.children[i-1])),i<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[i+1])),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1])));var s=this.count=this.count_r({count:0},r);if(s>0&&this.line("/Count "+s),r.options&&r.options.pageNumber){var o=t.internal.getPageInfo(r.options.pageNumber);this.line("/Dest ["+o.objId+" 0 R /XYZ 0 "+n(0)+" 0]")}this.objEnd()}for(var a=0;a<e.children.length;a++)this.renderItems(e.children[a])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var n=0;n<e.children.length;n++)t.count++,this.count_r(t,e.children[n]);return t.count}}])}(j.API),
/**
 * @license
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(t,n,i,r,s,o){var a,l=this.decode.DCT_DECODE,h=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=s||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(a=function(t){for(var n,i=256*t.charCodeAt(4)+t.charCodeAt(5),r=t.length,s={width:0,height:0,numcomponents:1},o=4;o<r;o+=2){if(o+=i,-1!==e.indexOf(t.charCodeAt(o+1))){n=256*t.charCodeAt(o+5)+t.charCodeAt(o+6),s={width:256*t.charCodeAt(o+7)+t.charCodeAt(o+8),height:n,numcomponents:t.charCodeAt(o+9)};break}i=256*t.charCodeAt(o+2)+t.charCodeAt(o+3)}return s}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:o=this.color_spaces.DEVICE_GRAY;break;case 4:o=this.color_spaces.DEVICE_CMYK;break;case 3:o=this.color_spaces.DEVICE_RGB}h={data:t,width:a.width,height:a.height,colorSpace:o,bitsPerComponent:8,filter:l,index:n,alias:i}}return h}}(j.API);var Vt,Xt,Ht,Yt,Zt,Kt=function(){var t,e,n;function i(t){var e,n,i,r,s,o,a,l,h,u,c,d,f,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},o=null;;){switch(e=this.readUInt32(),h=function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":o&&this.animation.frames.push(o),this.pos+=4,o={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},s=this.readUInt16(),r=this.readUInt16()||100,o.delay=1e3*s/r,o.disposeOp=this.data[this.pos++],o.blendOp=this.data[this.pos++],o.data=[];break;case"IDAT":case"fdAT":for("fdAT"===h&&(this.pos+=4,e-=4),t=(null!=o?o.data:void 0)||this.imgData,d=0;0<=e?d<e:d>e;0<=e?++d:--d)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(i=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>i)throw new Error("More transparent colors than palette size");if((u=i-this.transparency.indexed.length)>0)for(f=0;0<=u?f<u:f>u;0<=u?++f:--f)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":a=(c=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,c.slice(0,a)),this.text[l]=String.fromCharCode.apply(String,c.slice(a+1));break;case"IEND":return o&&this.animation.frames.push(o),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,n=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*n,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)n.push(this.data[this.pos++]);return n},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,n=new Uint8Array(this.width*this.height*e),i=0,s=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function o(r,o,a,l){var h,u,c,d,f,p,g,m,y,_,v,x,b,w,A,S,E,T,C,M,L,P=Math.ceil((s.width-r)/a),R=Math.ceil((s.height-o)/l),I=s.width==P&&s.height==R;for(w=e*P,x=I?n:new Uint8Array(w*R),p=t.length,b=0,u=0;b<R&&i<p;){switch(t[i++]){case 0:for(d=E=0;E<w;d=E+=1)x[u++]=t[i++];break;case 1:for(d=T=0;T<w;d=T+=1)h=t[i++],f=d<e?0:x[u-e],x[u++]=(h+f)%256;break;case 2:for(d=C=0;C<w;d=C+=1)h=t[i++],c=(d-d%e)/e,A=b&&x[(b-1)*w+c*e+d%e],x[u++]=(A+h)%256;break;case 3:for(d=M=0;M<w;d=M+=1)h=t[i++],c=(d-d%e)/e,f=d<e?0:x[u-e],A=b&&x[(b-1)*w+c*e+d%e],x[u++]=(h+Math.floor((f+A)/2))%256;break;case 4:for(d=L=0;L<w;d=L+=1)h=t[i++],c=(d-d%e)/e,f=d<e?0:x[u-e],0===b?A=S=0:(A=x[(b-1)*w+c*e+d%e],S=c&&x[(b-1)*w+(c-1)*e+d%e]),g=f+A-S,m=Math.abs(g-f),_=Math.abs(g-A),v=Math.abs(g-S),y=m<=_&&m<=v?f:_<=v?A:S,x[u++]=(h+y)%256;break;default:throw new Error("Invalid filter algorithm: "+t[i-1])}if(!I){var N=((o+b*l)*s.width+r)*e,F=b*w;for(d=0;d<P;d+=1){for(var k=0;k<e;k+=1)n[N++]=x[F++];N+=(a-1)*e}}b++}}return t=(0,r.a8)(t),1==s.interlaceMethod?(o(0,0,8,8),o(4,0,8,8),o(0,4,4,8),o(2,0,4,4),o(0,2,2,4),o(1,0,2,2),o(0,1,1,2)):o(0,0,1,1),n},i.prototype.decodePalette=function(){var t,e,n,i,r,s,o,a,l;for(n=this.palette,s=this.transparency.indexed||[],r=new Uint8Array((s.length||0)+n.length),i=0,t=0,e=o=0,a=n.length;o<a;e=o+=3)r[i++]=n[e],r[i++]=n[e+1],r[i++]=n[e+2],r[i++]=null!=(l=s[t++])?l:255;return r},i.prototype.copyToImageData=function(t,e){var n,i,r,s,o,a,l,h,u,c,d;if(i=this.colors,u=null,n=this.hasAlphaChannel,this.palette.length&&(u=null!=(d=this._decodedPalette)?d:this._decodedPalette=this.decodePalette(),i=4,n=!0),h=(r=t.data||t).length,o=u||e,s=a=0,1===i)for(;s<h;)l=u?4*e[s/4]:a,c=o[l++],r[s++]=c,r[s++]=c,r[s++]=c,r[s++]=n?o[l++]:255,a=l;else for(;s<h;)l=u?4*e[s/4]:a,r[s++]=o[l++],r[s++]=o[l++],r[s++]=o[l++],r[s++]=n?o[l++]:255,a=l},i.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var o=function(){if("[object Window]"===Object.prototype.toString.call(s)){try{e=s.document.createElement("canvas"),n=e.getContext("2d")}catch(t){return!1}return!0}return!1};return o(),t=function(t){var i;if(!0===o())return n.width=t.width,n.height=t.height,n.clearRect(0,0,t.width,t.height),n.putImageData(t,0,0),(i=new Image).src=e.toDataURL(),i;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(e){var n,i,r,s,o,a,l,h;if(this.animation){for(h=[],i=o=0,a=(l=this.animation.frames).length;o<a;i=++o)n=l[i],r=e.createImageData(n.width,n.height),s=this.decodePixels(new Uint8Array(n.data)),this.copyToImageData(r,s),n.imageData=r,h.push(n.image=t(r));return h}},i.prototype.renderFrame=function(t,e){var n,i,r;return n=(i=this.animation.frames)[e],r=i[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=r?r.disposeOp:void 0)?t.clearRect(r.xOffset,r.yOffset,r.width,r.height):2===(null!=r?r.disposeOp:void 0)&&t.putImageData(r.imageData,r.xOffset,r.yOffset),0===n.blendOp&&t.clearRect(n.xOffset,n.yOffset,n.width,n.height),t.drawImage(n.image,n.xOffset,n.yOffset)},i.prototype.animate=function(t){var e,n,i,r,s,o,a=this;return n=0,o=this.animation,r=o.numFrames,i=o.frames,s=o.numPlays,(e=function(){var o,l;if(o=n++%r,l=i[o],a.renderFrame(t,o),r>1&&n/r<s)return a.animation._timeout=setTimeout(e,l.delay)})()},i.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},i.prototype.render=function(t){var e,n;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(n=e.createImageData(this.width,this.height),this.copyToImageData(n,this.decodePixels()),e.putImageData(n,0,0))},i}();
/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
/**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function Jt(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],s=r>>7,o=1<<1+(7&r);t[e++],t[e++];var a=null,l=null;s&&(a=e,l=o,e+=3*o);var h=!0,u=[],c=0,d=null,f=0,p=null;for(this.width=n,this.height=i;h&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,p=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;case 249:if(4!==t[e++]||0!==t[e+4])throw new Error("Invalid graphics extension block.");var g=t[e++];c=t[e++]|t[e++]<<8,d=t[e++],!(1&g)&&(d=null),f=g>>2&7,e++;break;case 254:for(;;){if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var m=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,_=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,x=t[e++],b=x>>6&1,w=1<<1+(7&x),A=a,S=l,E=!1;x>>7&&(E=!0,A=e,S=w,e+=3*w);var T=e;for(e++;;){var C;if(!((C=t[e++])>=0))throw Error("Invalid block size");if(0===C)break;e+=C}u.push({x:m,y:y,width:_,height:v,has_local_palette:E,palette_offset:A,palette_size:S,data_offset:T,data_length:e-T,transparent_index:d,interlaced:!!b,delay:c,disposal:f});break;case 59:h=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return u.length},this.loopCount=function(){return p},this.frameInfo=function(t){if(t<0||t>=u.length)throw new Error("Frame index out of range.");return u[t]},this.decodeAndBlitFrameBGRA=function(e,i){var r=this.frameInfo(e),s=r.width*r.height,o=new Uint8Array(s);Qt(t,r.data_offset,o,s);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var h=r.width,u=n-h,c=h,d=4*(r.y*n+r.x),f=4*((r.y+r.height)*n+r.x),p=d,g=4*u;!0===r.interlaced&&(g+=4*n*7);for(var m=8,y=0,_=o.length;y<_;++y){var v=o[y];if(0===c&&(c=h,(p+=g)>=f&&(g=4*u+4*n*(m-1),p=d+(h+u)*(m<<1),m>>=1)),v===l)p+=4;else{var x=t[a+3*v],b=t[a+3*v+1],w=t[a+3*v+2];i[p++]=w,i[p++]=b,i[p++]=x,i[p++]=255}--c}},this.decodeAndBlitFrameRGBA=function(e,i){var r=this.frameInfo(e),s=r.width*r.height,o=new Uint8Array(s);Qt(t,r.data_offset,o,s);var a=r.palette_offset,l=r.transparent_index;null===l&&(l=256);var h=r.width,u=n-h,c=h,d=4*(r.y*n+r.x),f=4*((r.y+r.height)*n+r.x),p=d,g=4*u;!0===r.interlaced&&(g+=4*n*7);for(var m=8,y=0,_=o.length;y<_;++y){var v=o[y];if(0===c&&(c=h,(p+=g)>=f&&(g=4*u+4*n*(m-1),p=d+(h+u)*(m<<1),m>>=1)),v===l)p+=4;else{var x=t[a+3*v],b=t[a+3*v+1],w=t[a+3*v+2];i[p++]=x,i[p++]=b,i[p++]=w,i[p++]=255}--c}}}function Qt(t,e,n,i){for(var r=t[e++],s=1<<r,o=s+1,l=o+1,h=r+1,u=(1<<h)-1,c=0,d=0,f=0,p=t[e++],g=new Int32Array(4096),m=null;;){for(;c<16&&0!==p;)d|=t[e++]<<c,c+=8,1===p?p=t[e++]:--p;if(c<h)break;var y=d&u;if(d>>=h,c-=h,y!==s){if(y===o)break;for(var _=y<l?y:m,v=0,x=_;x>s;)x=g[x]>>8,++v;var b=x;if(f+v+(_!==y?1:0)>i)return void a.log("Warning, gif stream longer than expected.");n[f++]=b;var w=f+=v;for(_!==y&&(n[f++]=b),x=_;v--;)x=g[x],n[--w]=255&x,x>>=8;null!==m&&l<4096&&(g[l++]=m<<8|b,l>=u+1&&h<12&&(++h,u=u<<1|1)),m=y}else l=o+1,u=(1<<(h=r+1))-1,m=null}return f!==i&&a.log("Warning, gif stream shorter than expected."),n}
/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function te(t){var e,n,i,r,s,o=Math.floor,a=new Array(64),l=new Array(64),h=new Array(64),u=new Array(64),c=new Array(65535),d=new Array(65535),f=new Array(64),p=new Array(64),g=[],m=0,y=7,_=new Array(64),v=new Array(64),x=new Array(64),b=new Array(256),w=new Array(2048),A=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],S=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],E=[0,1,2,3,4,5,6,7,8,9,10,11],T=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],C=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],L=[0,1,2,3,4,5,6,7,8,9,10,11],P=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],R=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function I(t,e){for(var n=0,i=0,r=new Array,s=1;s<=16;s++){for(var o=1;o<=t[s];o++)r[e[i]]=[],r[e[i]][0]=n,r[e[i]][1]=s,i++,n++;n*=2}return r}function N(t){for(var e=t[0],n=t[1]-1;n>=0;)e&1<<n&&(m|=1<<y),n--,--y<0&&(255==m?(F(255),F(0)):F(m),y=7,m=0)}function F(t){g.push(t)}function k(t){F(t>>8&255),F(255&t)}function D(t,e,n,i,r){for(var s,o=r[0],a=r[240],l=function(t,e){var n,i,r,s,o,a,l,h,u,c,d=0;for(u=0;u<8;++u){n=t[d],i=t[d+1],r=t[d+2],s=t[d+3],o=t[d+4],a=t[d+5],l=t[d+6];var p=n+(h=t[d+7]),g=n-h,m=i+l,y=i-l,_=r+a,v=r-a,x=s+o,b=s-o,w=p+x,A=p-x,S=m+_,E=m-_;t[d]=w+S,t[d+4]=w-S;var T=.707106781*(E+A);t[d+2]=A+T,t[d+6]=A-T;var C=.382683433*((w=b+v)-(E=y+g)),M=.5411961*w+C,L=1.306562965*E+C,P=.707106781*(S=v+y),R=g+P,I=g-P;t[d+5]=I+M,t[d+3]=I-M,t[d+1]=R+L,t[d+7]=R-L,d+=8}for(d=0,u=0;u<8;++u){n=t[d],i=t[d+8],r=t[d+16],s=t[d+24],o=t[d+32],a=t[d+40],l=t[d+48];var N=n+(h=t[d+56]),F=n-h,k=i+l,D=i-l,O=r+a,j=r-a,G=s+o,B=s-o,z=N+G,q=N-G,U=k+O,W=k-O;t[d]=z+U,t[d+32]=z-U;var $=.707106781*(W+q);t[d+16]=q+$,t[d+48]=q-$;var V=.382683433*((z=B+j)-(W=D+F)),X=.5411961*z+V,H=1.306562965*W+V,Y=.707106781*(U=j+D),Z=F+Y,K=F-Y;t[d+40]=K+X,t[d+24]=K-X,t[d+8]=Z+H,t[d+56]=Z-H,d++}for(u=0;u<64;++u)c=t[u]*e[u],f[u]=c>0?c+.5|0:c-.5|0;return f}(t,e),h=0;h<64;++h)p[A[h]]=l[h];var u=p[0]-n;n=p[0],0==u?N(i[0]):(N(i[d[s=32767+u]]),N(c[s]));for(var g=63;g>0&&0==p[g];)g--;if(0==g)return N(o),n;for(var m,y=1;y<=g;){for(var _=y;0==p[y]&&y<=g;)++y;var v=y-_;if(v>=16){m=v>>4;for(var x=1;x<=m;++x)N(a);v&=15}s=32767+p[y],N(r[(v<<4)+d[s]]),N(c[s]),y++}return 63!=g&&N(o),n}function O(t){t=Math.min(Math.max(t,1),100),s!=t&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],n=0;n<64;n++){var i=o((e[n]*t+50)/100);i=Math.min(Math.max(i,1),255),a[A[n]]=i}for(var r=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],s=0;s<64;s++){var c=o((r[s]*t+50)/100);c=Math.min(Math.max(c,1),255),l[A[s]]=c}for(var d=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],f=0,p=0;p<8;p++)for(var g=0;g<8;g++)h[f]=1/(a[A[f]]*d[p]*d[g]*8),u[f]=1/(l[A[f]]*d[p]*d[g]*8),f++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),s=t)}this.encode=function(t,s){s&&O(s),g=new Array,m=0,y=7,k(65496),k(65504),k(16),F(74),F(70),F(73),F(70),F(0),F(1),F(1),F(0),k(1),k(1),F(0),F(0),function(){k(65499),k(132),F(0);for(var t=0;t<64;t++)F(a[t]);F(1);for(var e=0;e<64;e++)F(l[e])}(),function(t,e){k(65472),k(17),F(8),k(e),k(t),F(3),F(1),F(17),F(0),F(2),F(17),F(1),F(3),F(17),F(1)}(t.width,t.height),function(){k(65476),k(418),F(0);for(var t=0;t<16;t++)F(S[t+1]);for(var e=0;e<=11;e++)F(E[e]);F(16);for(var n=0;n<16;n++)F(T[n+1]);for(var i=0;i<=161;i++)F(C[i]);F(1);for(var r=0;r<16;r++)F(M[r+1]);for(var s=0;s<=11;s++)F(L[s]);F(17);for(var o=0;o<16;o++)F(P[o+1]);for(var a=0;a<=161;a++)F(R[a])}(),k(65498),k(12),F(3),F(1),F(0),F(2),F(17),F(3),F(17),F(0),F(63),F(0);var o=0,c=0,d=0;m=0,y=7,this.encode.displayName="_encode_";for(var f,p,b,A,I,j,G,B,z,q=t.data,U=t.width,W=t.height,$=4*U,V=0;V<W;){for(f=0;f<$;){for(I=$*V+f,G=-1,B=0,z=0;z<64;z++)j=I+(B=z>>3)*$+(G=4*(7&z)),V+B>=W&&(j-=$*(V+1+B-W)),f+G>=$&&(j-=f+G-$+4),p=q[j++],b=q[j++],A=q[j++],_[z]=(w[p]+w[b+256|0]+w[A+512|0]>>16)-128,v[z]=(w[p+768|0]+w[b+1024|0]+w[A+1280|0]>>16)-128,x[z]=(w[p+1280|0]+w[b+1536|0]+w[A+1792|0]>>16)-128;o=D(_,h,o,e,i),c=D(v,u,c,n,r),d=D(x,u,d,n,r),f+=32}V+=8}if(y>=0){var X=[];X[1]=y+1,X[0]=(1<<y+1)-1,N(X)}return k(65497),new Uint8Array(g)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)b[e]=t(e)}(),e=I(S,E),n=I(M,L),i=I(T,C),r=I(P,R),function(){for(var t=1,e=2,n=1;n<=15;n++){for(var i=t;i<e;i++)d[32767+i]=n,c[32767+i]=[],c[32767+i][1]=n,c[32767+i][0]=i;for(var r=-(e-1);r<=-t;r++)d[32767+r]=n,c[32767+r]=[],c[32767+r][1]=n,c[32767+r][0]=e-1+r;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)w[t]=19595*t,w[t+256|0]=38470*t,w[t+512|0]=7471*t+32768,w[t+768|0]=-11059*t,w[t+1024|0]=-21709*t,w[t+1280|0]=32768*t+8421375,w[t+1536|0]=-27439*t,w[t+1792|0]=-5329*t}(),O(t)}
/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function ee(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ne(t){function e(t){if(!t)throw Error("assert :P")}function n(t,e,n){for(var i=0;4>i;i++)if(t[e+i]!=n.charCodeAt(i))return!0;return!1}function i(t,e,n,i,r){for(var s=0;s<r;s++)t[e+s]=n[i+s]}function r(t,e,n,i){for(var r=0;r<i;r++)t[e+r]=n}function s(t){return new Int32Array(t)}function o(t,e){for(var n=[],i=0;i<t;i++)n.push(new e);return n}function a(t,e){var n=[];return function t(n,i,r){for(var s=r[i],o=0;o<s&&(n.push(r.length>i+1?[]:new e),!(r.length<i+1));o++)t(n[o],i+1,r)}(n,0,t),n}var l=function(){var t=this;function l(t,e){for(var n=1<<e-1>>>0;t&n;)n>>>=1;return n?(t&n-1)+n:t}function h(t,n,i,r,s){e(!(r%i));do{t[n+(r-=i)]=s}while(0<r)}function u(t,n,i,r,o){if(e(2328>=o),512>=o)var a=s(512);else if(null==(a=s(o)))return 0;return function(t,n,i,r,o,a){var u,d,f=n,p=1<<i,g=s(16),m=s(16);for(e(0!=o),e(null!=r),e(null!=t),e(0<i),d=0;d<o;++d){if(15<r[d])return 0;++g[r[d]]}if(g[0]==o)return 0;for(m[1]=0,u=1;15>u;++u){if(g[u]>1<<u)return 0;m[u+1]=m[u]+g[u]}for(d=0;d<o;++d)u=r[d],0<r[d]&&(a[m[u]++]=d);if(1==m[15])return(r=new c).g=0,r.value=a[0],h(t,f,1,p,r),p;var y,_=-1,v=p-1,x=0,b=1,w=1,A=1<<i;for(d=0,u=1,o=2;u<=i;++u,o<<=1){if(b+=w<<=1,0>(w-=g[u]))return 0;for(;0<g[u];--g[u])(r=new c).g=u,r.value=a[d++],h(t,f+x,o,A,r),x=l(x,u)}for(u=i+1,o=2;15>=u;++u,o<<=1){if(b+=w<<=1,0>(w-=g[u]))return 0;for(;0<g[u];--g[u]){if(r=new c,(x&v)!=_){for(f+=A,y=1<<(_=u)-i;15>_&&!(0>=(y-=g[_]));)++_,y<<=1;p+=A=1<<(y=_-i),t[n+(_=x&v)].g=y+i,t[n+_].value=f-n-_}r.g=u-i,r.value=a[d++],h(t,f+(x>>i),o,A,r),x=l(x,u)}}return b!=2*m[15]-1?0:p}(t,n,i,r,o,a)}function c(){this.value=this.g=0}function d(){this.value=this.g=0}function f(){this.G=o(5,c),this.H=s(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=o(Gn,d)}function p(t,n,i,r){e(null!=t),e(null!=n),e(2147483648>r),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=n,t.pa=i,t.Jd=n,t.Yc=i+r,t.Zc=4<=r?i+r-4+1:i,T(t)}function g(t,e){for(var n=0;0<e--;)n|=M(t,128)<<e;return n}function m(t,e){var n=g(t,e);return C(t)?-n:n}function y(t,n,i,r){var s,o=0;for(e(null!=t),e(null!=n),e(4294967288>r),t.Sb=r,t.Ra=0,t.u=0,t.h=0,4<r&&(r=4),s=0;s<r;++s)o+=n[i+s]<<8*s;t.Ra=o,t.bb=r,t.oa=n,t.pa=i}function _(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<qn-8>>>0,++t.bb,t.u-=8;A(t)&&(t.h=1,t.u=0)}function v(t,n){if(e(0<=n),!t.h&&n<=zn){var i=w(t)&Bn[n];return t.u+=n,_(t),i}return t.h=1,t.u=0}function x(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function b(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function w(t){return t.Ra>>>(t.u&qn-1)>>>0}function A(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>qn}function S(t,e){t.u=e,t.h=A(t)}function E(t){t.u>=Un&&(e(t.u>=Un),_(t))}function T(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function C(t){return g(t,1)}function M(t,e){var n=t.Ca;0>t.b&&T(t);var i=t.b,r=n*e>>>8,s=(t.I>>>i>r)+0;for(s?(n-=r,t.I-=r+1<<i>>>0):n=r+1,i=n,r=0;256<=i;)r+=8,i>>=8;return i=7^r+Wn[i],t.b-=i,t.Ca=(n<<i)-1,s}function L(t,e,n){t[e+0]=n>>24&255,t[e+1]=n>>16&255,t[e+2]=n>>8&255,t[e+3]=255&n}function P(t,e){return t[e+0]|t[e+1]<<8}function R(t,e){return P(t,e)|t[e+2]<<16}function I(t,e){return P(t,e)|P(t,e+2)<<16}function N(t,n){var i=1<<n;return e(null!=t),e(0<n),t.X=s(i),null==t.X?0:(t.Mb=32-n,t.Xa=n,1)}function F(t,n){e(null!=t),e(null!=n),e(t.Xa==n.Xa),i(n.X,0,t.X,0,1<<n.Xa)}function k(){this.X=[],this.Xa=this.Mb=0}function D(t,n,i,r){e(null!=i),e(null!=r);var s=i[0],o=r[0];return 0==s&&(s=(t*o+n/2)/n),0==o&&(o=(n*s+t/2)/t),0>=s||0>=o?0:(i[0]=s,r[0]=o,1)}function O(t,e){return t+(1<<e)-1>>>e}function j(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function G(e,n){t[n]=function(n,i,r,s,o,a,l){var h;for(h=0;h<o;++h){var u=t[e](a[l+h-1],r,s+h);a[l+h]=j(n[i+h],u)}}}function B(){this.ud=this.hd=this.jd=0}function z(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function q(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function U(t,e){return q(t+(t-e+.5>>1))}function W(t,e,n){return Math.abs(e-n)-Math.abs(t-n)}function $(t,e,n,i,r,s,o){for(i=s[o-1],n=0;n<r;++n)s[o+n]=i=j(t[e+n],i)}function V(t,e,n,i,r){var s;for(s=0;s<n;++s){var o=t[e+s],a=o>>8&255,l=16711935&(l=(l=16711935&o)+((a<<16)+a));i[r+s]=(4278255360&o)+l>>>0}}function X(t,e){e.jd=255&t,e.hd=t>>8&255,e.ud=t>>16&255}function H(t,e,n,i,r,s){var o;for(o=0;o<i;++o){var a=e[n+o],l=a>>>8,h=a,u=255&(u=(u=a>>>16)+((t.jd<<24>>24)*(l<<24>>24)>>>5));h=255&(h=(h+=(t.hd<<24>>24)*(l<<24>>24)>>>5)+((t.ud<<24>>24)*(u<<24>>24)>>>5)),r[s+o]=(4278255360&a)+(u<<16)+h}}function Y(e,n,i,r,s){t[n]=function(t,e,n,i,o,a,l,h,u){for(i=l;i<h;++i)for(l=0;l<u;++l)o[a++]=s(n[r(t[e++])])},t[e]=function(e,n,o,a,l,h,u){var c=8>>e.b,d=e.Ea,f=e.K[0],p=e.w;if(8>c)for(e=(1<<e.b)-1,p=(1<<c)-1;n<o;++n){var g,m=0;for(g=0;g<d;++g)g&e||(m=r(a[l++])),h[u++]=s(f[m&p]),m>>=c}else t["VP8LMapColor"+i](a,l,f,p,h,u,n,o,d)}}function Z(t,e,n,i,r){for(n=e+n;e<n;){var s=t[e++];i[r++]=s>>16&255,i[r++]=s>>8&255,i[r++]=255&s}}function K(t,e,n,i,r){for(n=e+n;e<n;){var s=t[e++];i[r++]=s>>16&255,i[r++]=s>>8&255,i[r++]=255&s,i[r++]=s>>24&255}}function J(t,e,n,i,r){for(n=e+n;e<n;){var s=(o=t[e++])>>16&240|o>>12&15,o=240&o|o>>28&15;i[r++]=s,i[r++]=o}}function Q(t,e,n,i,r){for(n=e+n;e<n;){var s=(o=t[e++])>>16&248|o>>13&7,o=o>>5&224|o>>3&31;i[r++]=s,i[r++]=o}}function tt(t,e,n,i,r){for(n=e+n;e<n;){var s=t[e++];i[r++]=255&s,i[r++]=s>>8&255,i[r++]=s>>16&255}}function et(t,e,n,r,s,o){if(0==o)for(n=e+n;e<n;)L(r,((o=t[e++])[0]>>24|o[1]>>8&65280|o[2]<<8&16711680|o[3]<<24)>>>0),s+=32;else i(r,s,t,e,n)}function nt(e,n){t[n][0]=t[e+"0"],t[n][1]=t[e+"1"],t[n][2]=t[e+"2"],t[n][3]=t[e+"3"],t[n][4]=t[e+"4"],t[n][5]=t[e+"5"],t[n][6]=t[e+"6"],t[n][7]=t[e+"7"],t[n][8]=t[e+"8"],t[n][9]=t[e+"9"],t[n][10]=t[e+"10"],t[n][11]=t[e+"11"],t[n][12]=t[e+"12"],t[n][13]=t[e+"13"],t[n][14]=t[e+"0"],t[n][15]=t[e+"0"]}function it(t){return t==Ui||t==Wi||t==$i||t==Vi}function rt(){this.eb=[],this.size=this.A=this.fb=0}function st(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ot(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new rt,this.f.kb=new st,this.sd=null}function at(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function lt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ht(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function ut(t,e){var n=t.T,r=e.ba.f.RGBA,s=r.eb,o=r.fb+t.ka*r.A,a=yr[e.ba.S],l=t.y,h=t.O,u=t.f,c=t.N,d=t.ea,f=t.W,p=e.cc,g=e.dc,m=e.Mc,y=e.Nc,_=t.ka,v=t.ka+t.T,x=t.U,b=x+1>>1;for(0==_?a(l,h,null,null,u,c,d,f,u,c,d,f,s,o,null,null,x):(a(e.ec,e.fc,l,h,p,g,m,y,u,c,d,f,s,o-r.A,s,o,x),++n);_+2<v;_+=2)p=u,g=c,m=d,y=f,c+=t.Rc,f+=t.Rc,o+=2*r.A,a(l,(h+=2*t.fa)-t.fa,l,h,p,g,m,y,u,c,d,f,s,o-r.A,s,o,x);return h+=t.fa,t.j+v<t.o?(i(e.ec,e.fc,l,h,x),i(e.cc,e.dc,u,c,b),i(e.Mc,e.Nc,d,f,b),n--):1&v||a(l,h,null,null,u,c,d,f,u,c,d,f,s,o+r.A,null,null,x),n}function ct(t,n,i){var r=t.F,s=[t.J];if(null!=r){var o=t.U,a=n.ba.S,l=a==Bi||a==$i;n=n.ba.f.RGBA;var h=[0],u=t.ka;h[0]=t.T,t.Kb&&(0==u?--h[0]:(--u,s[0]-=t.width),t.j+t.ka+t.T==t.o&&(h[0]=t.o-t.j-u));var c=n.eb;u=n.fb+u*n.A,t=Ei(r,s[0],t.width,o,h,c,u+(l?0:3),n.A),e(i==h),t&&it(a)&&Ai(c,u,l,o,h,n.A)}return 0}function dt(t){var e=t.ma,n=e.ba.S,i=11>n,r=n==Oi||n==Gi||n==Bi||n==zi||12==n||it(n);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!Dn(e.Oa,t,r?11:12))return 0;if(r&&it(n)&&vn(),t.da)alert("todo:use_scaling");else{if(i){if(e.Ib=ht,t.Kb){if(n=t.U+1>>1,e.memory=s(t.U+2*n),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+n,e.Ib=ut,vn()}}else alert("todo:EmitYUV");r&&(e.Jb=ct,i&&yn())}if(i&&!Rr){for(t=0;256>t;++t)Ir[t]=89858*(t-128)+Tr>>Er,kr[t]=-22014*(t-128)+Tr,Fr[t]=-45773*(t-128),Nr[t]=113618*(t-128)+Tr>>Er;for(t=Cr;t<Mr;++t)e=76283*(t-16)+Tr>>Er,Dr[t-Cr]=$t(e,255),Or[t-Cr]=$t(e+8>>4,15);Rr=1}return 1}function ft(t){var n=t.ma,i=t.U,r=t.T;return e(!(1&t.ka)),0>=i||0>=r?0:(i=n.Ib(t,n),null!=n.Jb&&n.Jb(t,n,i),n.Dc+=i,1)}function pt(t){t.ma.memory=null}function gt(t,e,n,i){return 47!=v(t,8)?0:(e[0]=v(t,14)+1,n[0]=v(t,14)+1,i[0]=v(t,1),0!=v(t,3)?0:!t.h)}function mt(t,e){if(4>t)return t+1;var n=t-2>>1;return(2+(1&t)<<n)+v(e,n)+1}function yt(t,e){return 120<e?e-120:1<=(n=((n=Ji[e-1])>>4)*t+(8-(15&n)))?n:1;var n}function _t(t,e,n){var i=w(n),r=t[e+=255&i].g-8;return 0<r&&(S(n,n.u+8),i=w(n),e+=t[e].value,e+=i&(1<<r)-1),S(n,n.u+t[e].g),t[e].value}function vt(t,n,i){return i.g+=t.g,i.value+=t.value<<n>>>0,e(8>=i.g),t.g}function xt(t,n,i){var r=t.xc;return e((n=0==r?0:t.vc[t.md*(i>>r)+(n>>r)])<t.Wb),t.Ya[n]}function bt(t,n,r,s){var o=t.ab,a=t.c*n,l=t.C;n=l+n;var h=r,u=s;for(s=t.Ta,r=t.Ua;0<o--;){var c=t.gc[o],d=l,f=n,p=h,g=u,m=(u=s,h=r,c.Ea);switch(e(d<f),e(f<=c.nc),c.hc){case 2:Xn(p,g,(f-d)*m,u,h);break;case 0:var y=d,_=f,v=u,x=h,b=(T=c).Ea;0==y&&($n(p,g,null,null,1,v,x),$(p,g+1,0,0,b-1,v,x+1),g+=b,x+=b,++y);for(var w=1<<T.b,A=w-1,S=O(b,T.b),E=T.K,T=T.w+(y>>T.b)*S;y<_;){var C=E,M=T,L=1;for(Vn(p,g,v,x-b,1,v,x);L<b;){var P=(L&~A)+w;P>b&&(P=b),(0,Jn[C[M++]>>8&15])(p,g+ +L,v,x+L-b,P-L,v,x+L),L=P}g+=b,x+=b,++y&A||(T+=S)}f!=c.nc&&i(u,h-m,u,h+(f-d-1)*m,m);break;case 1:for(m=p,_=g,b=(p=c.Ea)-(x=p&~(v=(g=1<<c.b)-1)),y=O(p,c.b),w=c.K,c=c.w+(d>>c.b)*y;d<f;){for(A=w,S=c,E=new B,T=_+x,C=_+p;_<T;)X(A[S++],E),Qn(E,m,_,g,u,h),_+=g,h+=g;_<C&&(X(A[S++],E),Qn(E,m,_,b,u,h),_+=b,h+=b),++d&v||(c+=y)}break;case 3:if(p==u&&g==h&&0<c.b){for(_=u,p=m=h+(f-d)*m-(x=(f-d)*O(c.Ea,c.b)),g=u,v=h,y=[],x=(b=x)-1;0<=x;--x)y[x]=g[v+x];for(x=b-1;0<=x;--x)_[p+x]=y[x];Hn(c,d,f,u,m,u,h)}else Hn(c,d,f,p,g,u,h)}h=s,u=r}u!=r&&i(s,r,h,u,a)}function wt(t,n){var i=t.V,r=t.Ba+t.c*t.C,s=n-t.C;if(e(n<=t.l.o),e(16>=s),0<s){var o=t.l,a=t.Ta,l=t.Ua,h=o.width;if(bt(t,s,i,r),s=l=[l],e((i=t.C)<(r=n)),e(o.v<o.va),r>o.o&&(r=o.o),i<o.j){var u=o.j-i;i=o.j,s[0]+=u*h}if(i>=r?i=0:(s[0]+=4*o.v,o.ka=i-o.j,o.U=o.va-o.v,o.T=r-i,i=1),i){if(l=l[0],11>(i=t.ca).S){var c=i.f.RGBA,d=(r=i.S,s=o.U,o=o.T,u=c.eb,c.A),f=o;for(c=c.fb+t.Ma*c.A;0<f--;){var p=a,g=l,m=s,y=u,_=c;switch(r){case Di:ti(p,g,m,y,_);break;case Oi:ei(p,g,m,y,_);break;case Ui:ei(p,g,m,y,_),Ai(y,_,0,m,1,0);break;case ji:ri(p,g,m,y,_);break;case Gi:et(p,g,m,y,_,1);break;case Wi:et(p,g,m,y,_,1),Ai(y,_,0,m,1,0);break;case Bi:et(p,g,m,y,_,0);break;case $i:et(p,g,m,y,_,0),Ai(y,_,1,m,1,0);break;case zi:ni(p,g,m,y,_);break;case Vi:ni(p,g,m,y,_),Si(y,_,m,1,0);break;case qi:ii(p,g,m,y,_);break;default:e(0)}l+=h,c+=d}t.Ma+=o}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=i.height)}}t.C=n,e(t.C<=t.i)}function At(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var n=t.Ya[e].G,i=t.Ya[e].H;if(0<n[1][i[1]+0].g||0<n[2][i[2]+0].g||0<n[3][i[3]+0].g)return 0}return 1}function St(t,n,i,r,s,o){if(0!=t.Z){var a=t.qd,l=t.rd;for(e(null!=mr[t.Z]);n<i;++n)mr[t.Z](a,l,r,s,r,s,o),a=r,l=s,s+=o;t.qd=a,t.rd=l}}function Et(t,n){var i=t.l.ma,r=0==i.Z||1==i.Z?t.l.j:t.C;if(r=t.C<r?r:t.C,e(n<=t.l.o),n>r){var s=t.l.width,o=i.ca,a=i.tb+s*r,l=t.V,h=t.Ba+t.c*r,u=t.gc;e(1==t.ab),e(3==u[0].hc),Zn(u[0],r,n,l,h,o,a),St(i,r,n,o,a,s)}t.C=t.Ma=n}function Tt(t,n,i,r,s,o,a){var l=t.$/r,h=t.$%r,u=t.m,c=t.s,d=i+t.$,f=d;s=i+r*s;var p=i+r*o,g=280+c.ua,m=t.Pb?l:16777216,y=0<c.ua?c.Wa:null,_=c.wc,v=d<p?xt(c,h,l):null;e(t.C<o),e(p<=s);var x=!1;t:for(;;){for(;x||d<p;){var b=0;if(l>=m){var T=d-i;e((m=t).Pb),m.wd=m.m,m.xd=T,0<m.s.ua&&F(m.s.Wa,m.s.vb),m=l+tr}if(h&_||(v=xt(c,h,l)),e(null!=v),v.Qb&&(n[d]=v.qb,x=!0),!x)if(E(u),v.jc){b=u,T=n;var C=d,M=v.pd[w(b)&Gn-1];e(v.jc),256>M.g?(S(b,b.u+M.g),T[C]=M.value,b=0):(S(b,b.u+M.g-256),e(256<=M.value),b=M.value),0==b&&(x=!0)}else b=_t(v.G[0],v.H[0],u);if(u.h)break;if(x||256>b){if(!x)if(v.nd)n[d]=(v.qb|b<<8)>>>0;else{if(E(u),x=_t(v.G[1],v.H[1],u),E(u),T=_t(v.G[2],v.H[2],u),C=_t(v.G[3],v.H[3],u),u.h)break;n[d]=(C<<24|x<<16|b<<8|T)>>>0}if(x=!1,++d,++h>=r&&(h=0,++l,null!=a&&l<=o&&!(l%16)&&a(t,l),null!=y))for(;f<d;)b=n[f++],y.X[(506832829*b&4294967295)>>>y.Mb]=b}else if(280>b){if(b=mt(b-256,u),T=_t(v.G[4],v.H[4],u),E(u),T=yt(r,T=mt(T,u)),u.h)break;if(d-i<T||s-d<b)break t;for(C=0;C<b;++C)n[d+C]=n[d+C-T];for(d+=b,h+=b;h>=r;)h-=r,++l,null!=a&&l<=o&&!(l%16)&&a(t,l);if(e(d<=s),h&_&&(v=xt(c,h,l)),null!=y)for(;f<d;)b=n[f++],y.X[(506832829*b&4294967295)>>>y.Mb]=b}else{if(!(b<g))break t;for(x=b-280,e(null!=y);f<d;)b=n[f++],y.X[(506832829*b&4294967295)>>>y.Mb]=b;b=d,e(!(x>>>(T=y).Xa)),n[b]=T.X[x],x=!0}x||e(u.h==A(u))}if(t.Pb&&u.h&&d<s)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&F(t.s.vb,t.s.Wa);else{if(u.h)break t;null!=a&&a(t,l>o?o:l),t.a=0,t.$=d-i}return 1}return t.a=3,0}function Ct(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var n=t.Wa;null!=n&&(n.X=null),t.vb=null,e(null!=t)}function Mt(){var e=new an;return null==e?null:(e.a=0,e.xb=gr,nt("Predictor","VP8LPredictors"),nt("Predictor","VP8LPredictors_C"),nt("PredictorAdd","VP8LPredictorsAdd"),nt("PredictorAdd","VP8LPredictorsAdd_C"),Xn=V,Qn=H,ti=Z,ei=K,ni=J,ii=Q,ri=tt,t.VP8LMapColor32b=Yn,t.VP8LMapColor8b=Kn,e)}function Lt(t,n,i,a,l){var h=1,d=[t],p=[n],g=a.m,m=a.s,y=null,_=0;t:for(;;){if(i)for(;h&&v(g,1);){var x=d,b=p,A=a,T=1,C=A.m,M=A.gc[A.ab],L=v(C,2);if(A.Oc&1<<L)h=0;else{switch(A.Oc|=1<<L,M.hc=L,M.Ea=x[0],M.nc=b[0],M.K=[null],++A.ab,e(4>=A.ab),L){case 0:case 1:M.b=v(C,3)+2,T=Lt(O(M.Ea,M.b),O(M.nc,M.b),0,A,M.K),M.K=M.K[0];break;case 3:var P,R=v(C,8)+1,I=16<R?0:4<R?1:2<R?2:3;if(x[0]=O(M.Ea,I),M.b=I,P=T=Lt(R,1,0,A,M.K)){var F,k=R,D=M,G=1<<(8>>D.b),B=s(G);if(null==B)P=0;else{var z=D.K[0],q=D.w;for(B[0]=D.K[0][0],F=1;F<1*k;++F)B[F]=j(z[q+F],B[F-1]);for(;F<4*G;++F)B[F]=0;D.K[0]=null,D.K[0]=B,P=1}}T=P;break;case 2:break;default:e(0)}h=T}}if(d=d[0],p=p[0],h&&v(g,1)&&!(h=1<=(_=v(g,4))&&11>=_)){a.a=3;break t}var U;if(U=h)e:{var W,$,V,X=a,H=d,Y=p,Z=_,K=i,J=X.m,Q=X.s,tt=[null],et=1,nt=0,it=Qi[Z];n:for(;;){if(K&&v(J,1)){var rt=v(J,3)+2,st=O(H,rt),ot=O(Y,rt),at=st*ot;if(!Lt(st,ot,0,X,tt))break n;for(tt=tt[0],Q.xc=rt,W=0;W<at;++W){var lt=tt[W]>>8&65535;tt[W]=lt,lt>=et&&(et=lt+1)}}if(J.h)break n;for($=0;5>$;++$){var ht=Yi[$];!$&&0<Z&&(ht+=1<<Z),nt<ht&&(nt=ht)}var ut=o(et*it,c),ct=et,dt=o(ct,f);if(null==dt)var ft=null;else e(65536>=ct),ft=dt;var pt=s(nt);if(null==ft||null==pt||null==ut){X.a=1;break n}var gt=ut;for(W=V=0;W<et;++W){var mt=ft[W],yt=mt.G,_t=mt.H,xt=0,bt=1,wt=0;for($=0;5>$;++$){ht=Yi[$],yt[$]=gt,_t[$]=V,!$&&0<Z&&(ht+=1<<Z);i:{var At,St=ht,Et=X,Mt=pt,Pt=gt,Rt=V,It=0,Nt=Et.m,Ft=v(Nt,1);if(r(Mt,0,0,St),Ft){var kt=v(Nt,1)+1,Dt=v(Nt,1),Ot=v(Nt,0==Dt?1:8);Mt[Ot]=1,2==kt&&(Mt[Ot=v(Nt,8)]=1);var jt=1}else{var Gt=s(19),Bt=v(Nt,4)+4;if(19<Bt){Et.a=3;var zt=0;break i}for(At=0;At<Bt;++At)Gt[Ki[At]]=v(Nt,3);var qt=void 0,Ut=void 0,Wt=Et,$t=Gt,Vt=St,Xt=Mt,Ht=0,Yt=Wt.m,Zt=8,Kt=o(128,c);r:for(;u(Kt,0,7,$t,19);){if(v(Yt,1)){var Jt=2+2*v(Yt,3);if((qt=2+v(Yt,Jt))>Vt)break r}else qt=Vt;for(Ut=0;Ut<Vt&&qt--;){E(Yt);var Qt=Kt[0+(127&w(Yt))];S(Yt,Yt.u+Qt.g);var te=Qt.value;if(16>te)Xt[Ut++]=te,0!=te&&(Zt=te);else{var ee=16==te,ne=te-16,ie=Hi[ne],re=v(Yt,Xi[ne])+ie;if(Ut+re>Vt)break r;for(var se=ee?Zt:0;0<re--;)Xt[Ut++]=se}}Ht=1;break r}Ht||(Wt.a=3),jt=Ht}(jt=jt&&!Nt.h)&&(It=u(Pt,Rt,8,Mt,St)),jt&&0!=It?zt=It:(Et.a=3,zt=0)}if(0==zt)break n;if(bt&&1==Zi[$]&&(bt=0==gt[V].g),xt+=gt[V].g,V+=zt,3>=$){var oe,ae=pt[0];for(oe=1;oe<ht;++oe)pt[oe]>ae&&(ae=pt[oe]);wt+=ae}}if(mt.nd=bt,mt.Qb=0,bt&&(mt.qb=(yt[3][_t[3]+0].value<<24|yt[1][_t[1]+0].value<<16|yt[2][_t[2]+0].value)>>>0,0==xt&&256>yt[0][_t[0]+0].value&&(mt.Qb=1,mt.qb+=yt[0][_t[0]+0].value<<8)),mt.jc=!mt.Qb&&6>wt,mt.jc){var le,he=mt;for(le=0;le<Gn;++le){var ue=le,ce=he.pd[ue],de=he.G[0][he.H[0]+ue];256<=de.value?(ce.g=de.g+256,ce.value=de.value):(ce.g=0,ce.value=0,ue>>=vt(de,8,ce),ue>>=vt(he.G[1][he.H[1]+ue],16,ce),ue>>=vt(he.G[2][he.H[2]+ue],0,ce),vt(he.G[3][he.H[3]+ue],24,ce))}}}Q.vc=tt,Q.Wb=et,Q.Ya=ft,Q.yc=ut,U=1;break e}U=0}if(!(h=U)){a.a=3;break t}if(0<_){if(m.ua=1<<_,!N(m.Wa,_)){a.a=1,h=0;break t}}else m.ua=0;var fe=a,pe=d,ge=p,me=fe.s,ye=me.xc;if(fe.c=pe,fe.i=ge,me.md=O(pe,ye),me.wc=0==ye?-1:(1<<ye)-1,i){a.xb=pr;break t}if(null==(y=s(d*p))){a.a=1,h=0;break t}h=(h=Tt(a,y,0,d,p,p,null))&&!g.h;break t}return h?(null!=l?l[0]=y:(e(null==y),e(i)),a.$=0,i||Ct(m)):Ct(m),h}function Pt(t,n){var i=t.c*t.i,r=i+n+16*n;return e(t.c<=n),t.V=s(r),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+i+n,1)}function Rt(t,n){var i=t.C,r=n-i,s=t.V,o=t.Ba+t.c*i;for(e(n<=t.l.o);0<r;){var a=16<r?16:r,l=t.l.ma,h=t.l.width,u=h*a,c=l.ca,d=l.tb+h*i,f=t.Ta,p=t.Ua;bt(t,a,s,o),Ti(f,p,c,d,u),St(l,i,i+a,c,d,h),r-=a,s+=a*t.c,i+=a}e(i==n),t.C=t.Ma=n}function It(){this.ub=this.yd=this.td=this.Rb=0}function Nt(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ft(){this.Fb=this.Bb=this.Cb=0,this.Zb=s(4),this.Lb=s(4)}function kt(){this.Yb=function(){var t=[];return function t(e,n,i){for(var r=i[n],s=0;s<r&&(e.push(i.length>n+1?[]:0),!(i.length<n+1));s++)t(e[s],n+1,i)}(t,0,[3,11]),t}()}function Dt(){this.jb=s(3),this.Wc=a([4,8],kt),this.Xc=a([4,17],kt)}function Ot(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new s(4),this.od=new s(4)}function jt(){this.ld=this.La=this.dd=this.tc=0}function Gt(){this.Na=this.la=0}function Bt(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function zt(){this.ad=s(384),this.Za=0,this.Ob=s(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function qt(){this.uc=this.M=this.Nb=0,this.wa=Array(new jt),this.Y=0,this.ya=Array(new zt),this.aa=0,this.l=new Vt}function Ut(){this.y=s(16),this.f=s(8),this.ea=s(8)}function Wt(){this.cb=this.a=0,this.sc="",this.m=new x,this.Od=new It,this.Kc=new Nt,this.ed=new Ot,this.Qa=new Ft,this.Ic=this.$c=this.Aa=0,this.D=new qt,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=o(8,x),this.ia=0,this.pb=o(4,Bt),this.Pa=new Dt,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Ut),this.Hd=0,this.rb=Array(new Gt),this.sb=0,this.wa=Array(new jt),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new zt),this.L=this.aa=0,this.gd=a([4,2],jt),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function $t(t,e){return 0>t?0:t>e?e:t}function Vt(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Xt(){var t=new Wt;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,ir||(ir=Kt)),t}function Ht(t,e,n){return 0==t.a&&(t.a=e,t.sc=n,t.cb=0),0}function Yt(t,e,n){return 3<=n&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function Zt(t,n){if(null==t)return 0;if(t.a=0,t.sc="OK",null==n)return Ht(t,2,"null VP8Io passed to VP8GetHeaders()");var i=n.data,s=n.w,o=n.ha;if(4>o)return Ht(t,7,"Truncated header.");var a=i[s+0]|i[s+1]<<8|i[s+2]<<16,l=t.Od;if(l.Rb=!(1&a),l.td=a>>1&7,l.yd=a>>4&1,l.ub=a>>5,3<l.td)return Ht(t,3,"Incorrect keyframe parameters.");if(!l.yd)return Ht(t,4,"Frame not displayable.");s+=3,o-=3;var h=t.Kc;if(l.Rb){if(7>o)return Ht(t,7,"cannot parse picture header");if(!Yt(i,s,o))return Ht(t,3,"Bad code word");h.c=16383&(i[s+4]<<8|i[s+3]),h.Td=i[s+4]>>6,h.i=16383&(i[s+6]<<8|i[s+5]),h.Ud=i[s+6]>>6,s+=7,o-=7,t.za=h.c+15>>4,t.Ub=h.i+15>>4,n.width=h.c,n.height=h.i,n.Da=0,n.j=0,n.v=0,n.va=n.width,n.o=n.height,n.da=0,n.ib=n.width,n.hb=n.height,n.U=n.width,n.T=n.height,r((a=t.Pa).jb,0,255,a.jb.length),e(null!=(a=t.Qa)),a.Cb=0,a.Bb=0,a.Fb=1,r(a.Zb,0,0,a.Zb.length),r(a.Lb,0,0,a.Lb)}if(l.ub>o)return Ht(t,7,"bad partition length");p(a=t.m,i,s,l.ub),s+=l.ub,o-=l.ub,l.Rb&&(h.Ld=C(a),h.Kd=C(a)),h=t.Qa;var u,c=t.Pa;if(e(null!=a),e(null!=h),h.Cb=C(a),h.Cb){if(h.Bb=C(a),C(a)){for(h.Fb=C(a),u=0;4>u;++u)h.Zb[u]=C(a)?m(a,7):0;for(u=0;4>u;++u)h.Lb[u]=C(a)?m(a,6):0}if(h.Bb)for(u=0;3>u;++u)c.jb[u]=C(a)?g(a,8):255}else h.Bb=0;if(a.Ka)return Ht(t,3,"cannot parse segment header");if((h=t.ed).zd=C(a),h.Tb=g(a,6),h.wb=g(a,3),h.Pc=C(a),h.Pc&&C(a)){for(c=0;4>c;++c)C(a)&&(h.vd[c]=m(a,6));for(c=0;4>c;++c)C(a)&&(h.od[c]=m(a,6))}if(t.L=0==h.Tb?0:h.zd?1:2,a.Ka)return Ht(t,3,"cannot parse filter header");var d=o;if(o=u=s,s=u+d,h=d,t.Xb=(1<<g(t.m,2))-1,d<3*(c=t.Xb))i=7;else{for(u+=3*c,h-=3*c,d=0;d<c;++d){var f=i[o+0]|i[o+1]<<8|i[o+2]<<16;f>h&&(f=h),p(t.Jc[+d],i,u,f),u+=f,h-=f,o+=3}p(t.Jc[+c],i,u,h),i=u<s?0:5}if(0!=i)return Ht(t,i,"cannot parse partitions");for(i=g(u=t.m,7),o=C(u)?m(u,4):0,s=C(u)?m(u,4):0,h=C(u)?m(u,4):0,c=C(u)?m(u,4):0,u=C(u)?m(u,4):0,d=t.Qa,f=0;4>f;++f){if(d.Cb){var y=d.Zb[f];d.Fb||(y+=i)}else{if(0<f){t.pb[f]=t.pb[0];continue}y=i}var _=t.pb[f];_.Sc[0]=er[$t(y+o,127)],_.Sc[1]=nr[$t(y+0,127)],_.Eb[0]=2*er[$t(y+s,127)],_.Eb[1]=101581*nr[$t(y+h,127)]>>16,8>_.Eb[1]&&(_.Eb[1]=8),_.Qc[0]=er[$t(y+c,117)],_.Qc[1]=nr[$t(y+u,127)],_.lc=y+u}if(!l.Rb)return Ht(t,4,"Not a key frame.");for(C(a),l=t.Pa,i=0;4>i;++i){for(o=0;8>o;++o)for(s=0;3>s;++s)for(h=0;11>h;++h)c=M(a,hr[i][o][s][h])?g(a,8):ar[i][o][s][h],l.Wc[i][o].Yb[s][h]=c;for(o=0;17>o;++o)l.Xc[i][o]=l.Wc[i][ur[o]]}return t.kc=C(a),t.kc&&(t.Bd=g(a,8)),t.cb=1}function Kt(t,e,n,i,r,s,o){var a=e[r].Yb[n];for(n=0;16>r;++r){if(!M(t,a[n+0]))return r;for(;!M(t,a[n+1]);)if(a=e[++r].Yb[0],n=0,16==r)return 16;var l=e[r+1].Yb;if(M(t,a[n+2])){var h=t,u=0;if(M(h,(d=a)[(c=n)+3]))if(M(h,d[c+6])){for(a=0,c=2*(u=M(h,d[c+8]))+(d=M(h,d[c+9+u])),u=0,d=rr[c];d[a];++a)u+=u+M(h,d[a]);u+=3+(8<<c)}else M(h,d[c+7])?(u=7+2*M(h,165),u+=M(h,145)):u=5+M(h,159);else u=M(h,d[c+4])?3+M(h,d[c+5]):2;a=l[2]}else u=1,a=l[1];l=o+sr[r],0>(h=t).b&&T(h);var c,d=h.b,f=(c=h.Ca>>1)-(h.I>>d)>>31;--h.b,h.Ca+=f,h.Ca|=1,h.I-=(c+1&f)<<d,s[l]=((u^f)-f)*i[(0<r)+0]}return 16}function Jt(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,r(t.zc,0,0,t.zc.length),t.ja=0}function Qt(t,n){if(null==t)return 0;if(null==n)return Ht(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!Zt(t,n))return 0;if(e(t.cb),null==n.ac||n.ac(n)){n.ob&&(t.L=0);var a=Gr[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=n.v-a>>4,t.zb=n.j-a>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=n.o+15+a>>4,t.Hb=n.va+15+a>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var l=t.ed;for(a=0;4>a;++a){var h;if(t.Qa.Cb){var u=t.Qa.Lb[a];t.Qa.Fb||(u+=l.Tb)}else u=l.Tb;for(h=0;1>=h;++h){var c=t.gd[a][h],d=u;if(l.Pc&&(d+=l.vd[0],h&&(d+=l.od[0])),0<(d=0>d?0:63<d?63:d)){var f=d;0<l.wb&&(f=4<l.wb?f>>2:f>>1)>9-l.wb&&(f=9-l.wb),1>f&&(f=1),c.dd=f,c.tc=2*d+f,c.ld=40<=d?2:15<=d?1:0}else c.tc=0;c.La=h}}}a=0}else Ht(t,6,"Frame setup failed"),a=t.a;if(a=0==a){if(a){t.$c=0,0<t.Aa||(t.Ic=zr);t:{a=t.Ic,l=4*(f=t.za);var p=32*f,g=f+1,m=0<t.L?f*(0<t.Aa?2:1):0,y=(2==t.Aa?2:1)*f;if((c=l+832+(h=3*(16*a+Gr[t.L])/2*p)+(u=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=c)a=0;else{if(c>t.Vb){if(t.Vb=0,t.Ec=s(c),t.Fc=0,null==t.Ec){a=Ht(t,1,"no memory during frame initialization.");break t}t.Vb=c}c=t.Ec,d=t.Fc,t.Ac=c,t.Bc=d,d+=l,t.Gd=o(p,Ut),t.Hd=0,t.rb=o(g+1,Gt),t.sb=1,t.wa=m?o(m,jt):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=f),e(!0),t.oc=c,t.pc=d,d+=832,t.ya=o(y,zt),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=f),t.R=16*f,t.B=8*f,f=(p=Gr[t.L])*t.R,p=p/2*t.B,t.sa=c,t.ta=d+f,t.qa=t.sa,t.ra=t.ta+16*a*t.R+p,t.Ha=t.qa,t.Ia=t.ra+8*a*t.B+p,t.$c=0,d+=h,t.mb=u?c:null,t.nb=u?d:null,e(d+u<=t.Fc+t.Vb),Jt(t),r(t.Ac,t.Bc,0,l),a=1}}if(a){if(n.ka=0,n.y=t.sa,n.O=t.ta,n.f=t.qa,n.N=t.ra,n.ea=t.Ha,n.Vd=t.Ia,n.fa=t.R,n.Rc=t.B,n.F=null,n.J=0,!Ri){for(a=-255;255>=a;++a)Ci[255+a]=0>a?-a:a;for(a=-1020;1020>=a;++a)Mi[1020+a]=-128>a?-128:127<a?127:a;for(a=-112;112>=a;++a)Li[112+a]=-16>a?-16:15<a?15:a;for(a=-255;510>=a;++a)Pi[255+a]=0>a?0:255<a?255:a;Ri=1}si=he,oi=se,li=oe,hi=ae,ui=le,ai=re,ci=He,di=Ye,fi=Je,pi=Qe,gi=Ze,mi=Ke,yi=tn,_i=en,vi=qe,xi=Ue,bi=We,wi=$e,dr[0]=Se,dr[1]=ce,dr[2]=we,dr[3]=Ae,dr[4]=Ee,dr[5]=Ce,dr[6]=Te,dr[7]=Me,dr[8]=Pe,dr[9]=Le,cr[0]=ye,cr[1]=fe,cr[2]=pe,cr[3]=ge,cr[4]=_e,cr[5]=ve,cr[6]=xe,fr[0]=Fe,fr[1]=de,fr[2]=Re,fr[3]=Ie,fr[4]=De,fr[5]=ke,fr[6]=Oe,a=1}else a=0}a&&(a=function(t,n){for(t.M=0;t.M<t.Va;++t.M){var o,a=t.Jc[t.M&t.Xb],l=t.m,h=t;for(o=0;o<h.za;++o){var u=l,c=h,d=c.Ac,f=c.Bc+4*o,p=c.zc,g=c.ya[c.aa+o];if(c.Qa.Bb?g.$b=M(u,c.Pa.jb[0])?2+M(u,c.Pa.jb[2]):M(u,c.Pa.jb[1]):g.$b=0,c.kc&&(g.Ad=M(u,c.Bd)),g.Za=!M(u,145)+0,g.Za){var m=g.Ob,y=0;for(c=0;4>c;++c){var _,v=p[0+c];for(_=0;4>_;++_){v=lr[d[f+_]][v];for(var x=or[M(u,v[0])];0<x;)x=or[2*x+M(u,v[x])];v=-x,d[f+_]=v}i(m,y,d,f,4),y+=4,p[0+c]=v}}else v=M(u,156)?M(u,128)?1:3:M(u,163)?2:0,g.Ob[0]=v,r(d,f,v,4),r(p,0,v,4);g.Dd=M(u,142)?M(u,114)?M(u,183)?1:3:2:0}if(h.m.Ka)return Ht(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(h=a,u=(l=t).rb[l.sb-1],d=l.rb[l.sb+l.ja],o=l.ya[l.aa+l.ja],f=l.kc?o.Ad:0)u.la=d.la=0,o.Za||(u.Na=d.Na=0),o.Hc=0,o.Gc=0,o.ia=0;else{var b,w;if(u=d,d=h,f=l.Pa.Xc,p=l.ya[l.aa+l.ja],g=l.pb[p.$b],c=p.ad,m=0,y=l.rb[l.sb-1],v=_=0,r(c,m,0,384),p.Za)var A=0,S=f[3];else{x=s(16);var E=u.Na+y.Na;if(E=ir(d,f[1],E,g.Eb,0,x,0),u.Na=y.Na=(0<E)+0,1<E)si(x,0,c,m);else{var T=x[0]+3>>3;for(x=0;256>x;x+=16)c[m+x]=T}A=1,S=f[0]}var C=15&u.la,L=15&y.la;for(x=0;4>x;++x){var P=1&L;for(T=w=0;4>T;++T)C=C>>1|(P=(E=ir(d,S,E=P+(1&C),g.Sc,A,c,m))>A)<<7,w=w<<2|(3<E?3:1<E?2:0!=c[m+0]),m+=16;C>>=4,L=L>>1|P<<7,_=(_<<8|w)>>>0}for(S=C,A=L>>4,b=0;4>b;b+=2){for(w=0,C=u.la>>4+b,L=y.la>>4+b,x=0;2>x;++x){for(P=1&L,T=0;2>T;++T)E=P+(1&C),C=C>>1|(P=0<(E=ir(d,f[2],E,g.Qc,0,c,m)))<<3,w=w<<2|(3<E?3:1<E?2:0!=c[m+0]),m+=16;C>>=2,L=L>>1|P<<5}v|=w<<4*b,S|=C<<4<<b,A|=(240&L)<<b}u.la=S,y.la=A,p.Hc=_,p.Gc=v,p.ia=43690&v?0:g.ia,f=!(_|v)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[o.$b][o.Za],l.wa[l.Y+l.ja].La|=!f),h.Ka)return Ht(t,7,"Premature end-of-file encountered.")}if(Jt(t),l=n,h=1,o=(a=t).D,u=0<a.L&&a.M>=a.zb&&a.M<=a.Va,0==a.Aa)t:{if(o.M=a.M,o.uc=u,Fn(a,o),h=1,o=(w=a.D).Nb,u=(v=Gr[a.L])*a.R,d=v/2*a.B,x=16*o*a.R,T=8*o*a.B,f=a.sa,p=a.ta-u+x,g=a.qa,c=a.ra-d+T,m=a.Ha,y=a.Ia-d+T,L=0==(C=w.M),_=C>=a.Va-1,2==a.Aa&&Fn(a,w),w.uc)for(P=(E=a).D.M,e(E.D.uc),w=E.yb;w<E.Hb;++w){A=w,S=P;var R=(I=(z=E).D).Nb;b=z.R;var I=I.wa[I.Y+A],N=z.sa,F=z.ta+16*R*b+16*A,k=I.dd,D=I.tc;if(0!=D)if(e(3<=D),1==z.L)0<A&&xi(N,F,b,D+4),I.La&&wi(N,F,b,D),0<S&&vi(N,F,b,D+4),I.La&&bi(N,F,b,D);else{var O=z.B,j=z.qa,G=z.ra+8*R*O+8*A,B=z.Ha,z=z.Ia+8*R*O+8*A;R=I.ld,0<A&&(di(N,F,b,D+4,k,R),pi(j,G,B,z,O,D+4,k,R)),I.La&&(mi(N,F,b,D,k,R),_i(j,G,B,z,O,D,k,R)),0<S&&(ci(N,F,b,D+4,k,R),fi(j,G,B,z,O,D+4,k,R)),I.La&&(gi(N,F,b,D,k,R),yi(j,G,B,z,O,D,k,R))}}if(a.ia&&alert("todo:DitherRow"),null!=l.put){if(w=16*C,C=16*(C+1),L?(l.y=a.sa,l.O=a.ta+x,l.f=a.qa,l.N=a.ra+T,l.ea=a.Ha,l.W=a.Ia+T):(w-=v,l.y=f,l.O=p,l.f=g,l.N=c,l.ea=m,l.W=y),_||(C-=v),C>l.o&&(C=l.o),l.F=null,l.J=null,null!=a.Fa&&0<a.Fa.length&&w<C&&(l.J=dn(a,l,w,C-w),l.F=a.mb,null==l.F&&0==l.F.length)){h=Ht(a,3,"Could not decode alpha data.");break t}w<l.j&&(v=l.j-w,w=l.j,e(!(1&v)),l.O+=a.R*v,l.N+=a.B*(v>>1),l.W+=a.B*(v>>1),null!=l.F&&(l.J+=l.width*v)),w<C&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=w-l.j,l.U=l.va-l.v,l.T=C-w,h=l.put(l))}o+1!=a.Ic||_||(i(a.sa,a.ta-u,f,p+16*a.R,u),i(a.qa,a.ra-d,g,c+8*a.B,d),i(a.Ha,a.Ia-d,m,y+8*a.B,d))}if(!h)return Ht(t,6,"Output aborted.")}return 1}(t,n)),null!=n.bc&&n.bc(n),a&=1}return a?(t.cb=0,a):0}function te(t,e,n,i,r){r=t[e+n+32*i]+(r>>3),t[e+n+32*i]=-256&r?0>r?0:255:r}function ee(t,e,n,i,r,s){te(t,e,0,n,i+r),te(t,e,1,n,i+s),te(t,e,2,n,i-s),te(t,e,3,n,i-r)}function ne(t){return(20091*t>>16)+t}function ie(t,e,n,i){var r,o=0,a=s(16);for(r=0;4>r;++r){var l=t[e+0]+t[e+8],h=t[e+0]-t[e+8],u=(35468*t[e+4]>>16)-ne(t[e+12]),c=ne(t[e+4])+(35468*t[e+12]>>16);a[o+0]=l+c,a[o+1]=h+u,a[o+2]=h-u,a[o+3]=l-c,o+=4,e++}for(r=o=0;4>r;++r)l=(t=a[o+0]+4)+a[o+8],h=t-a[o+8],u=(35468*a[o+4]>>16)-ne(a[o+12]),te(n,i,0,0,l+(c=ne(a[o+4])+(35468*a[o+12]>>16))),te(n,i,1,0,h+u),te(n,i,2,0,h-u),te(n,i,3,0,l-c),o++,i+=32}function re(t,e,n,i){var r=t[e+0]+4,s=35468*t[e+4]>>16,o=ne(t[e+4]),a=35468*t[e+1]>>16;ee(n,i,0,r+o,t=ne(t[e+1]),a),ee(n,i,1,r+s,t,a),ee(n,i,2,r-s,t,a),ee(n,i,3,r-o,t,a)}function se(t,e,n,i,r){ie(t,e,n,i),r&&ie(t,e+16,n,i+4)}function oe(t,e,n,i){oi(t,e+0,n,i,1),oi(t,e+32,n,i+128,1)}function ae(t,e,n,i){var r;for(t=t[e+0]+4,r=0;4>r;++r)for(e=0;4>e;++e)te(n,i,e,r,t)}function le(t,e,n,i){t[e+0]&&hi(t,e+0,n,i),t[e+16]&&hi(t,e+16,n,i+4),t[e+32]&&hi(t,e+32,n,i+128),t[e+48]&&hi(t,e+48,n,i+128+4)}function he(t,e,n,i){var r,o=s(16);for(r=0;4>r;++r){var a=t[e+0+r]+t[e+12+r],l=t[e+4+r]+t[e+8+r],h=t[e+4+r]-t[e+8+r],u=t[e+0+r]-t[e+12+r];o[0+r]=a+l,o[8+r]=a-l,o[4+r]=u+h,o[12+r]=u-h}for(r=0;4>r;++r)a=(t=o[0+4*r]+3)+o[3+4*r],l=o[1+4*r]+o[2+4*r],h=o[1+4*r]-o[2+4*r],u=t-o[3+4*r],n[i+0]=a+l>>3,n[i+16]=u+h>>3,n[i+32]=a-l>>3,n[i+48]=u-h>>3,i+=64}function ue(t,e,n){var i,r=e-32,s=Fi,o=255-t[r-1];for(i=0;i<n;++i){var a,l=s,h=o+t[e-1];for(a=0;a<n;++a)t[e+a]=l[h+t[r+a]];e+=32}}function ce(t,e){ue(t,e,4)}function de(t,e){ue(t,e,8)}function fe(t,e){ue(t,e,16)}function pe(t,e){var n;for(n=0;16>n;++n)i(t,e+32*n,t,e-32,16)}function ge(t,e){var n;for(n=16;0<n;--n)r(t,e,t[e-1],16),e+=32}function me(t,e,n){var i;for(i=0;16>i;++i)r(e,n+32*i,t,16)}function ye(t,e){var n,i=16;for(n=0;16>n;++n)i+=t[e-1+32*n]+t[e+n-32];me(i>>5,t,e)}function _e(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e-1+32*n];me(i>>4,t,e)}function ve(t,e){var n,i=8;for(n=0;16>n;++n)i+=t[e+n-32];me(i>>4,t,e)}function xe(t,e){me(128,t,e)}function be(t,e,n){return t+2*e+n+2>>2}function we(t,e){var n,r=e-32;for(r=new Uint8Array([be(t[r-1],t[r+0],t[r+1]),be(t[r+0],t[r+1],t[r+2]),be(t[r+1],t[r+2],t[r+3]),be(t[r+2],t[r+3],t[r+4])]),n=0;4>n;++n)i(t,e+32*n,r,0,r.length)}function Ae(t,e){var n=t[e-1],i=t[e-1+32],r=t[e-1+64],s=t[e-1+96];L(t,e+0,16843009*be(t[e-1-32],n,i)),L(t,e+32,16843009*be(n,i,r)),L(t,e+64,16843009*be(i,r,s)),L(t,e+96,16843009*be(r,s,s))}function Se(t,e){var n,i=4;for(n=0;4>n;++n)i+=t[e+n-32]+t[e-1+32*n];for(i>>=3,n=0;4>n;++n)r(t,e+32*n,i,4)}function Ee(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],l=t[e+2-32],h=t[e+3-32];t[e+0+96]=be(i,r,t[e-1+96]),t[e+1+96]=t[e+0+64]=be(n,i,r),t[e+2+96]=t[e+1+64]=t[e+0+32]=be(s,n,i),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=be(o,s,n),t[e+3+64]=t[e+2+32]=t[e+1+0]=be(a,o,s),t[e+3+32]=t[e+2+0]=be(l,a,o),t[e+3+0]=be(h,l,a)}function Te(t,e){var n=t[e+1-32],i=t[e+2-32],r=t[e+3-32],s=t[e+4-32],o=t[e+5-32],a=t[e+6-32],l=t[e+7-32];t[e+0+0]=be(t[e+0-32],n,i),t[e+1+0]=t[e+0+32]=be(n,i,r),t[e+2+0]=t[e+1+32]=t[e+0+64]=be(i,r,s),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=be(r,s,o),t[e+3+32]=t[e+2+64]=t[e+1+96]=be(s,o,a),t[e+3+64]=t[e+2+96]=be(o,a,l),t[e+3+96]=be(a,l,l)}function Ce(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1-32],o=t[e+0-32],a=t[e+1-32],l=t[e+2-32],h=t[e+3-32];t[e+0+0]=t[e+1+64]=s+o+1>>1,t[e+1+0]=t[e+2+64]=o+a+1>>1,t[e+2+0]=t[e+3+64]=a+l+1>>1,t[e+3+0]=l+h+1>>1,t[e+0+96]=be(r,i,n),t[e+0+64]=be(i,n,s),t[e+0+32]=t[e+1+96]=be(n,s,o),t[e+1+32]=t[e+2+96]=be(s,o,a),t[e+2+32]=t[e+3+96]=be(o,a,l),t[e+3+32]=be(a,l,h)}function Me(t,e){var n=t[e+0-32],i=t[e+1-32],r=t[e+2-32],s=t[e+3-32],o=t[e+4-32],a=t[e+5-32],l=t[e+6-32],h=t[e+7-32];t[e+0+0]=n+i+1>>1,t[e+1+0]=t[e+0+64]=i+r+1>>1,t[e+2+0]=t[e+1+64]=r+s+1>>1,t[e+3+0]=t[e+2+64]=s+o+1>>1,t[e+0+32]=be(n,i,r),t[e+1+32]=t[e+0+96]=be(i,r,s),t[e+2+32]=t[e+1+96]=be(r,s,o),t[e+3+32]=t[e+2+96]=be(s,o,a),t[e+3+64]=be(o,a,l),t[e+3+96]=be(a,l,h)}function Le(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1+96];t[e+0+0]=n+i+1>>1,t[e+2+0]=t[e+0+32]=i+r+1>>1,t[e+2+32]=t[e+0+64]=r+s+1>>1,t[e+1+0]=be(n,i,r),t[e+3+0]=t[e+1+32]=be(i,r,s),t[e+3+32]=t[e+1+64]=be(r,s,s),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=s}function Pe(t,e){var n=t[e-1+0],i=t[e-1+32],r=t[e-1+64],s=t[e-1+96],o=t[e-1-32],a=t[e+0-32],l=t[e+1-32],h=t[e+2-32];t[e+0+0]=t[e+2+32]=n+o+1>>1,t[e+0+32]=t[e+2+64]=i+n+1>>1,t[e+0+64]=t[e+2+96]=r+i+1>>1,t[e+0+96]=s+r+1>>1,t[e+3+0]=be(a,l,h),t[e+2+0]=be(o,a,l),t[e+1+0]=t[e+3+32]=be(n,o,a),t[e+1+32]=t[e+3+64]=be(i,n,o),t[e+1+64]=t[e+3+96]=be(r,i,n),t[e+1+96]=be(s,r,i)}function Re(t,e){var n;for(n=0;8>n;++n)i(t,e+32*n,t,e-32,8)}function Ie(t,e){var n;for(n=0;8>n;++n)r(t,e,t[e-1],8),e+=32}function Ne(t,e,n){var i;for(i=0;8>i;++i)r(e,n+32*i,t,8)}function Fe(t,e){var n,i=8;for(n=0;8>n;++n)i+=t[e+n-32]+t[e-1+32*n];Ne(i>>4,t,e)}function ke(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e+n-32];Ne(i>>3,t,e)}function De(t,e){var n,i=4;for(n=0;8>n;++n)i+=t[e-1+32*n];Ne(i>>3,t,e)}function Oe(t,e){Ne(128,t,e)}function je(t,e,n){var i=t[e-n],r=t[e+0],s=3*(r-i)+Ii[1020+t[e-2*n]-t[e+n]],o=Ni[112+(s+4>>3)];t[e-n]=Fi[255+i+Ni[112+(s+3>>3)]],t[e+0]=Fi[255+r-o]}function Ge(t,e,n,i){var r=t[e+0],s=t[e+n];return ki[255+t[e-2*n]-t[e-n]]>i||ki[255+s-r]>i}function Be(t,e,n,i){return 4*ki[255+t[e-n]-t[e+0]]+ki[255+t[e-2*n]-t[e+n]]<=i}function ze(t,e,n,i,r){var s=t[e-3*n],o=t[e-2*n],a=t[e-n],l=t[e+0],h=t[e+n],u=t[e+2*n],c=t[e+3*n];return 4*ki[255+a-l]+ki[255+o-h]>i?0:ki[255+t[e-4*n]-s]<=r&&ki[255+s-o]<=r&&ki[255+o-a]<=r&&ki[255+c-u]<=r&&ki[255+u-h]<=r&&ki[255+h-l]<=r}function qe(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)Be(t,e+i,n,r)&&je(t,e+i,n)}function Ue(t,e,n,i){var r=2*i+1;for(i=0;16>i;++i)Be(t,e+i*n,1,r)&&je(t,e+i*n,1)}function We(t,e,n,i){var r;for(r=3;0<r;--r)qe(t,e+=4*n,n,i)}function $e(t,e,n,i){var r;for(r=3;0<r;--r)Ue(t,e+=4,n,i)}function Ve(t,e,n,i,r,s,o,a){for(s=2*s+1;0<r--;){if(ze(t,e,n,s,o))if(Ge(t,e,n,a))je(t,e,n);else{var l=t,h=e,u=n,c=l[h-2*u],d=l[h-u],f=l[h+0],p=l[h+u],g=l[h+2*u],m=27*(_=Ii[1020+3*(f-d)+Ii[1020+c-p]])+63>>7,y=18*_+63>>7,_=9*_+63>>7;l[h-3*u]=Fi[255+l[h-3*u]+_],l[h-2*u]=Fi[255+c+y],l[h-u]=Fi[255+d+m],l[h+0]=Fi[255+f-m],l[h+u]=Fi[255+p-y],l[h+2*u]=Fi[255+g-_]}e+=i}}function Xe(t,e,n,i,r,s,o,a){for(s=2*s+1;0<r--;){if(ze(t,e,n,s,o))if(Ge(t,e,n,a))je(t,e,n);else{var l=t,h=e,u=n,c=l[h-u],d=l[h+0],f=l[h+u],p=Ni[112+(4+(g=3*(d-c))>>3)],g=Ni[112+(g+3>>3)],m=p+1>>1;l[h-2*u]=Fi[255+l[h-2*u]+m],l[h-u]=Fi[255+c+g],l[h+0]=Fi[255+d-p],l[h+u]=Fi[255+f-m]}e+=i}}function He(t,e,n,i,r,s){Ve(t,e,n,1,16,i,r,s)}function Ye(t,e,n,i,r,s){Ve(t,e,1,n,16,i,r,s)}function Ze(t,e,n,i,r,s){var o;for(o=3;0<o;--o)Xe(t,e+=4*n,n,1,16,i,r,s)}function Ke(t,e,n,i,r,s){var o;for(o=3;0<o;--o)Xe(t,e+=4,1,n,16,i,r,s)}function Je(t,e,n,i,r,s,o,a){Ve(t,e,r,1,8,s,o,a),Ve(n,i,r,1,8,s,o,a)}function Qe(t,e,n,i,r,s,o,a){Ve(t,e,1,r,8,s,o,a),Ve(n,i,1,r,8,s,o,a)}function tn(t,e,n,i,r,s,o,a){Xe(t,e+4*r,r,1,8,s,o,a),Xe(n,i+4*r,r,1,8,s,o,a)}function en(t,e,n,i,r,s,o,a){Xe(t,e+4,1,r,8,s,o,a),Xe(n,i+4,1,r,8,s,o,a)}function nn(){this.ba=new ot,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new lt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function rn(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function sn(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function on(){this.ua=0,this.Wa=new k,this.vb=new k,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new f,this.yc=new c}function an(){this.xb=this.a=0,this.l=new Vt,this.ca=new ot,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new b,this.Pb=0,this.wd=new b,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new on,this.ab=0,this.gc=o(4,sn),this.Oc=0}function ln(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Vt,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function hn(t,e,n,i,r,s,o){for(t=null==t?0:t[e+0],e=0;e<o;++e)r[s+e]=t+n[i+e]&255,t=r[s+e]}function un(t,e,n,i,r,s,o){var a;if(null==t)hn(null,null,n,i,r,s,o);else for(a=0;a<o;++a)r[s+a]=t[e+a]+n[i+a]&255}function cn(t,e,n,i,r,s,o){if(null==t)hn(null,null,n,i,r,s,o);else{var a,l=t[e+0],h=l,u=l;for(a=0;a<o;++a)h=u+(l=t[e+a])-h,u=n[i+a]+(-256&h?0>h?0:255:h)&255,h=l,r[s+a]=u}}function dn(t,n,r,o){var a=n.width,l=n.o;if(e(null!=t&&null!=n),0>r||0>=o||r+o>l)return null;if(!t.Cc){if(null==t.ga){var h;if(t.ga=new ln,(h=null==t.ga)||(h=n.width*n.o,e(0==t.Gb.length),t.Gb=s(h),t.Uc=0,null==t.Gb?h=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,h=1),h=!h),!h){h=t.ga;var u=t.Fa,c=t.P,d=t.qc,f=t.mb,p=t.nb,g=c+1,m=d-1,_=h.l;if(e(null!=u&&null!=f&&null!=n),mr[0]=null,mr[1]=hn,mr[2]=un,mr[3]=cn,h.ca=f,h.tb=p,h.c=n.width,h.i=n.height,e(0<h.c&&0<h.i),1>=d)n=0;else if(h.$a=3&u[c+0],h.Z=u[c+0]>>2&3,h.Lc=u[c+0]>>4&3,c=u[c+0]>>6&3,0>h.$a||1<h.$a||4<=h.Z||1<h.Lc||c)n=0;else if(_.put=ft,_.ac=dt,_.bc=pt,_.ma=h,_.width=n.width,_.height=n.height,_.Da=n.Da,_.v=n.v,_.va=n.va,_.j=n.j,_.o=n.o,h.$a)t:{e(1==h.$a),n=Mt();e:for(;;){if(null==n){n=0;break t}if(e(null!=h),h.mc=n,n.c=h.c,n.i=h.i,n.l=h.l,n.l.ma=h,n.l.width=h.c,n.l.height=h.i,n.a=0,y(n.m,u,g,m),!Lt(h.c,h.i,1,n,null))break e;if(1==n.ab&&3==n.gc[0].hc&&At(n.s)?(h.ic=1,u=n.c*n.i,n.Ta=null,n.Ua=0,n.V=s(u),n.Ba=0,null==n.V?(n.a=1,n=0):n=1):(h.ic=0,n=Pt(n,h.c)),!n)break e;n=1;break t}h.mc=null,n=0}else n=m>=h.c*h.i;h=!n}if(h)return null;1!=t.ga.Lc?t.Ga=0:o=l-r}e(null!=t.ga),e(r+o<=l);t:{if(n=(u=t.ga).c,l=u.l.o,0==u.$a){if(g=t.rc,m=t.Vc,_=t.Fa,c=t.P+1+r*n,d=t.mb,f=t.nb+r*n,e(c<=t.P+t.qc),0!=u.Z)for(e(null!=mr[u.Z]),h=0;h<o;++h)mr[u.Z](g,m,_,c,d,f,n),g=d,m=f,f+=n,c+=n;else for(h=0;h<o;++h)i(d,f,_,c,n),g=d,m=f,f+=n,c+=n;t.rc=g,t.Vc=m}else{if(e(null!=u.mc),n=r+o,e(null!=(h=u.mc)),e(n<=h.i),h.C>=n)n=1;else if(u.ic||yn(),u.ic){u=h.V,g=h.Ba,m=h.c;var v=h.i,x=(_=1,c=h.$/m,d=h.$%m,f=h.m,p=h.s,h.$),b=m*v,w=m*n,S=p.wc,T=x<w?xt(p,d,c):null;e(x<=b),e(n<=v),e(At(p));e:for(;;){for(;!f.h&&x<w;){if(d&S||(T=xt(p,d,c)),e(null!=T),E(f),256>(v=_t(T.G[0],T.H[0],f)))u[g+x]=v,++x,++d>=m&&(d=0,++c<=n&&!(c%16)&&Et(h,c));else{if(!(280>v)){_=0;break e}v=mt(v-256,f);var C,M=_t(T.G[4],T.H[4],f);if(E(f),!(x>=(M=yt(m,M=mt(M,f)))&&b-x>=v)){_=0;break e}for(C=0;C<v;++C)u[g+x+C]=u[g+x+C-M];for(x+=v,d+=v;d>=m;)d-=m,++c<=n&&!(c%16)&&Et(h,c);x<w&&d&S&&(T=xt(p,d,c))}e(f.h==A(f))}Et(h,c>n?n:c);break e}!_||f.h&&x<b?(_=0,h.a=f.h?5:3):h.$=x,n=_}else n=Tt(h,h.V,h.Ba,h.c,h.i,n,Rt);if(!n){o=0;break t}}r+o>=l&&(t.Cc=1),o=1}if(!o)return null;if(t.Cc&&(null!=(o=t.ga)&&(o.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+r*a}function fn(t,e,n,i,r,s){for(;0<r--;){var o,a=t,l=e+(n?1:0),h=t,u=e+(n?0:3);for(o=0;o<i;++o){var c=h[u+4*o];255!=c&&(c*=32897,a[l+4*o+0]=a[l+4*o+0]*c>>23,a[l+4*o+1]=a[l+4*o+1]*c>>23,a[l+4*o+2]=a[l+4*o+2]*c>>23)}e+=s}}function pn(t,e,n,i,r){for(;0<i--;){var s;for(s=0;s<n;++s){var o=t[e+2*s+0],a=15&(h=t[e+2*s+1]),l=4369*a,h=(240&h|h>>4)*l>>16;t[e+2*s+0]=(240&o|o>>4)*l>>16&240|(15&o|o<<4)*l>>16>>4&15,t[e+2*s+1]=240&h|a}e+=r}}function gn(t,e,n,i,r,s,o,a){var l,h,u=255;for(h=0;h<r;++h){for(l=0;l<i;++l){var c=t[e+l];s[o+4*l]=c,u&=c}e+=n,o+=a}return 255!=u}function mn(t,e,n,i,r){var s;for(s=0;s<r;++s)n[i+s]=t[e+s]>>8}function yn(){Ai=fn,Si=pn,Ei=gn,Ti=mn}function _n(n,i,r){t[n]=function(t,n,s,o,a,l,h,u,c,d,f,p,g,m,y,_,v){var x,b=v-1>>1,w=a[l+0]|h[u+0]<<16,A=c[d+0]|f[p+0]<<16;e(null!=t);var S=3*w+A+131074>>2;for(i(t[n+0],255&S,S>>16,g,m),null!=s&&(S=3*A+w+131074>>2,i(s[o+0],255&S,S>>16,y,_)),x=1;x<=b;++x){var E=a[l+x]|h[u+x]<<16,T=c[d+x]|f[p+x]<<16,C=w+E+A+T+524296,M=C+2*(E+A)>>3;S=M+w>>1,w=(C=C+2*(w+T)>>3)+E>>1,i(t[n+2*x-1],255&S,S>>16,g,m+(2*x-1)*r),i(t[n+2*x-0],255&w,w>>16,g,m+(2*x-0)*r),null!=s&&(S=C+A>>1,w=M+T>>1,i(s[o+2*x-1],255&S,S>>16,y,_+(2*x-1)*r),i(s[o+2*x+0],255&w,w>>16,y,_+(2*x+0)*r)),w=E,A=T}1&v||(S=3*w+A+131074>>2,i(t[n+v-1],255&S,S>>16,g,m+(v-1)*r),null!=s&&(S=3*A+w+131074>>2,i(s[o+v-1],255&S,S>>16,y,_+(v-1)*r)))}}function vn(){yr[Di]=_r,yr[Oi]=xr,yr[ji]=vr,yr[Gi]=br,yr[Bi]=wr,yr[zi]=Ar,yr[qi]=Sr,yr[Ui]=xr,yr[Wi]=br,yr[$i]=wr,yr[Vi]=Ar}function xn(t){return t&~Pr?0>t?0:255:t>>Lr}function bn(t,e){return xn((19077*t>>8)+(26149*e>>8)-14234)}function wn(t,e,n){return xn((19077*t>>8)-(6419*e>>8)-(13320*n>>8)+8708)}function An(t,e){return xn((19077*t>>8)+(33050*e>>8)-17685)}function Sn(t,e,n,i,r){i[r+0]=bn(t,n),i[r+1]=wn(t,e,n),i[r+2]=An(t,e)}function En(t,e,n,i,r){i[r+0]=An(t,e),i[r+1]=wn(t,e,n),i[r+2]=bn(t,n)}function Tn(t,e,n,i,r){var s=wn(t,e,n);e=s<<3&224|An(t,e)>>3,i[r+0]=248&bn(t,n)|s>>5,i[r+1]=e}function Cn(t,e,n,i,r){var s=240&An(t,e)|15;i[r+0]=240&bn(t,n)|wn(t,e,n)>>4,i[r+1]=s}function Mn(t,e,n,i,r){i[r+0]=255,Sn(t,e,n,i,r+1)}function Ln(t,e,n,i,r){En(t,e,n,i,r),i[r+3]=255}function Pn(t,e,n,i,r){Sn(t,e,n,i,r),i[r+3]=255}function $t(t,e){return 0>t?0:t>e?e:t}function Rn(e,n,i){t[e]=function(t,e,r,s,o,a,l,h,u){for(var c=h+(-2&u)*i;h!=c;)n(t[e+0],r[s+0],o[a+0],l,h),n(t[e+1],r[s+0],o[a+0],l,h+i),e+=2,++s,++a,h+=2*i;1&u&&n(t[e+0],r[s+0],o[a+0],l,h)}}function In(t,e,n){return 0==n?0==t?0==e?6:5:0==e?4:0:n}function Nn(t,e,n,i,r){switch(t>>>30){case 3:oi(e,n,i,r,0);break;case 2:ai(e,n,i,r);break;case 1:hi(e,n,i,r)}}function Fn(t,e){var n,s,o=e.M,a=e.Nb,l=t.oc,h=t.pc+40,u=t.oc,c=t.pc+584,d=t.oc,f=t.pc+600;for(n=0;16>n;++n)l[h+32*n-1]=129;for(n=0;8>n;++n)u[c+32*n-1]=129,d[f+32*n-1]=129;for(0<o?l[h-1-32]=u[c-1-32]=d[f-1-32]=129:(r(l,h-32-1,127,21),r(u,c-32-1,127,9),r(d,f-32-1,127,9)),s=0;s<t.za;++s){var p=e.ya[e.aa+s];if(0<s){for(n=-1;16>n;++n)i(l,h+32*n-4,l,h+32*n+12,4);for(n=-1;8>n;++n)i(u,c+32*n-4,u,c+32*n+4,4),i(d,f+32*n-4,d,f+32*n+4,4)}var g=t.Gd,m=t.Hd+s,y=p.ad,_=p.Hc;if(0<o&&(i(l,h-32,g[m].y,0,16),i(u,c-32,g[m].f,0,8),i(d,f-32,g[m].ea,0,8)),p.Za){var v=l,x=h-32+16;for(0<o&&(s>=t.za-1?r(v,x,g[m].y[15],4):i(v,x,g[m+1].y,0,4)),n=0;4>n;n++)v[x+128+n]=v[x+256+n]=v[x+384+n]=v[x+0+n];for(n=0;16>n;++n,_<<=2)v=l,x=h+jr[n],dr[p.Ob[n]](v,x),Nn(_,y,16*+n,v,x)}else if(v=In(s,o,p.Ob[0]),cr[v](l,h),0!=_)for(n=0;16>n;++n,_<<=2)Nn(_,y,16*+n,l,h+jr[n]);for(n=p.Gc,v=In(s,o,p.Dd),fr[v](u,c),fr[v](d,f),_=y,v=u,x=c,255&(p=n|0)&&(170&p?li(_,256,v,x):ui(_,256,v,x)),p=d,_=f,255&(n>>=8)&&(170&n?li(y,320,p,_):ui(y,320,p,_)),o<t.Ub-1&&(i(g[m].y,0,l,h+480,16),i(g[m].f,0,u,c+224,8),i(g[m].ea,0,d,f+224,8)),n=8*a*t.B,g=t.sa,m=t.ta+16*s+16*a*t.R,y=t.qa,p=t.ra+8*s+n,_=t.Ha,v=t.Ia+8*s+n,n=0;16>n;++n)i(g,m+n*t.R,l,h+32*n,16);for(n=0;8>n;++n)i(y,p+n*t.B,u,c+32*n,8),i(_,v+n*t.B,d,f+32*n,8)}}function kn(t,i,r,s,o,a,l,h,u){var c=[0],d=[0],f=0,p=null!=u?u.kd:0,g=null!=u?u:new rn;if(null==t||12>r)return 7;g.data=t,g.w=i,g.ha=r,i=[i],r=[r],g.gb=[g.gb];t:{var m=i,_=r,v=g.gb;if(e(null!=t),e(null!=_),e(null!=v),v[0]=0,12<=_[0]&&!n(t,m[0],"RIFF")){if(n(t,m[0]+8,"WEBP")){v=3;break t}var x=I(t,m[0]+4);if(12>x||4294967286<x){v=3;break t}if(p&&x>_[0]-8){v=7;break t}v[0]=x,m[0]+=12,_[0]-=12}v=0}if(0!=v)return v;for(x=0<g.gb[0],r=r[0];;){t:{var w=t;_=i,v=r;var A=c,S=d,E=m=[0];if((M=f=[f])[0]=0,8>v[0])v=7;else{if(!n(w,_[0],"VP8X")){if(10!=I(w,_[0]+4)){v=3;break t}if(18>v[0]){v=7;break t}var T=I(w,_[0]+8),C=1+R(w,_[0]+12);if(2147483648<=C*(w=1+R(w,_[0]+15))){v=3;break t}null!=E&&(E[0]=T),null!=A&&(A[0]=C),null!=S&&(S[0]=w),_[0]+=18,v[0]-=18,M[0]=1}v=0}}if(f=f[0],m=m[0],0!=v)return v;if(_=!!(2&m),!x&&f)return 3;if(null!=a&&(a[0]=!!(16&m)),null!=l&&(l[0]=_),null!=h&&(h[0]=0),l=c[0],m=d[0],f&&_&&null==u){v=0;break}if(4>r){v=7;break}if(x&&f||!x&&!f&&!n(t,i[0],"ALPH")){r=[r],g.na=[g.na],g.P=[g.P],g.Sa=[g.Sa];t:{T=t,v=i,x=r;var M=g.gb;A=g.na,S=g.P,E=g.Sa,C=22,e(null!=T),e(null!=x),w=v[0];var L=x[0];for(e(null!=A),e(null!=E),A[0]=null,S[0]=null,E[0]=0;;){if(v[0]=w,x[0]=L,8>L){v=7;break t}var P=I(T,w+4);if(4294967286<P){v=3;break t}var N=8+P+1&-2;if(C+=N,0<M&&C>M){v=3;break t}if(!n(T,w,"VP8 ")||!n(T,w,"VP8L")){v=0;break t}if(L[0]<N){v=7;break t}n(T,w,"ALPH")||(A[0]=T,S[0]=w+8,E[0]=P),w+=N,L-=N}}if(r=r[0],g.na=g.na[0],g.P=g.P[0],g.Sa=g.Sa[0],0!=v)break}r=[r],g.Ja=[g.Ja],g.xa=[g.xa];t:if(M=t,v=i,x=r,A=g.gb[0],S=g.Ja,E=g.xa,T=v[0],w=!n(M,T,"VP8 "),C=!n(M,T,"VP8L"),e(null!=M),e(null!=x),e(null!=S),e(null!=E),8>x[0])v=7;else{if(w||C){if(M=I(M,T+4),12<=A&&M>A-12){v=3;break t}if(p&&M>x[0]-8){v=7;break t}S[0]=M,v[0]+=8,x[0]-=8,E[0]=C}else E[0]=5<=x[0]&&47==M[T+0]&&!(M[T+4]>>5),S[0]=x[0];v=0}if(r=r[0],g.Ja=g.Ja[0],g.xa=g.xa[0],i=i[0],0!=v)break;if(4294967286<g.Ja)return 3;if(null==h||_||(h[0]=g.xa?2:1),l=[l],m=[m],g.xa){if(5>r){v=7;break}h=l,p=m,_=a,null==t||5>r?t=0:5<=r&&47==t[i+0]&&!(t[i+4]>>5)?(x=[0],M=[0],A=[0],y(S=new b,t,i,r),gt(S,x,M,A)?(null!=h&&(h[0]=x[0]),null!=p&&(p[0]=M[0]),null!=_&&(_[0]=A[0]),t=1):t=0):t=0}else{if(10>r){v=7;break}h=m,null==t||10>r||!Yt(t,i+3,r-3)?t=0:(p=t[i+0]|t[i+1]<<8|t[i+2]<<16,_=16383&(t[i+7]<<8|t[i+6]),t=16383&(t[i+9]<<8|t[i+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=g.Ja||!_||!t?t=0:(l&&(l[0]=_),h&&(h[0]=t),t=1))}if(!t)return 3;if(l=l[0],m=m[0],f&&(c[0]!=l||d[0]!=m))return 3;null!=u&&(u[0]=g,u.offset=i-u.w,e(4294967286>i-u.w),e(u.offset==u.ha-r));break}return 0==v||7==v&&f&&null==u?(null!=a&&(a[0]|=null!=g.na&&0<g.na.length),null!=s&&(s[0]=l),null!=o&&(o[0]=m),0):v}function Dn(t,e,n){var i=e.width,r=e.height,s=0,o=0,a=i,l=r;if(e.Da=null!=t&&0<t.Da,e.Da&&(a=t.cd,l=t.bd,s=t.v,o=t.j,11>n||(s&=-2,o&=-2),0>s||0>o||0>=a||0>=l||s+a>i||o+l>r))return 0;if(e.v=s,e.j=o,e.va=s+a,e.o=o+l,e.U=a,e.T=l,e.da=null!=t&&0<t.da,e.da){if(!D(a,l,n=[t.ib],s=[t.hb]))return 0;e.ib=n[0],e.hb=s[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*i/4&&e.hb<3*r/4,e.Kb=0),1}function On(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function jn(t,e,n,i){if(null==i||0>=t||0>=e)return 2;if(null!=n){if(n.Da){var r=n.cd,o=n.bd,a=-2&n.v,l=-2&n.j;if(0>a||0>l||0>=r||0>=o||a+r>t||l+o>e)return 2;t=r,e=o}if(n.da){if(!D(t,e,r=[n.ib],o=[n.hb]))return 2;t=r[0],e=o[0]}}i.width=t,i.height=e;t:{var h=i.width,u=i.height;if(t=i.S,0>=h||0>=u||!(t>=Di&&13>t))t=2;else{if(0>=i.Rd&&null==i.sd){a=o=r=e=0;var c=(l=h*qr[t])*u;if(11>t||(o=(u+1)/2*(e=(h+1)/2),12==t&&(a=(r=h)*u)),null==(u=s(c+2*o+a))){t=1;break t}i.sd=u,11>t?((h=i.f.RGBA).eb=u,h.fb=0,h.A=l,h.size=c):((h=i.f.kb).y=u,h.O=0,h.fa=l,h.Fd=c,h.f=u,h.N=0+c,h.Ab=e,h.Cd=o,h.ea=u,h.W=0+c+o,h.Db=e,h.Ed=o,12==t&&(h.F=u,h.J=0+c+2*o),h.Tc=a,h.lb=r)}if(e=1,r=i.S,o=i.width,a=i.height,r>=Di&&13>r)if(11>r)t=i.f.RGBA,e&=(l=Math.abs(t.A))*(a-1)+o<=t.size,e&=l>=o*qr[r],e&=null!=t.eb;else{t=i.f.kb,l=(o+1)/2,c=(a+1)/2,h=Math.abs(t.fa),u=Math.abs(t.Ab);var d=Math.abs(t.Db),f=Math.abs(t.lb),p=f*(a-1)+o;e&=h*(a-1)+o<=t.Fd,e&=u*(c-1)+l<=t.Cd,e=(e&=d*(c-1)+l<=t.Ed)&h>=o&u>=l&d>=l,e&=null!=t.y,e&=null!=t.f,e&=null!=t.ea,12==r&&(e&=f>=o,e&=p<=t.Tc,e&=null!=t.F)}else e=0;t=e?0:2}}return 0!=t||null!=n&&n.fd&&(t=On(i)),t}var Gn=64,Bn=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],zn=24,qn=32,Un=8,Wn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];G("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,n){return e[n+0]},t.Predictor3=function(t,e,n){return e[n+1]},t.Predictor4=function(t,e,n){return e[n-1]},t.Predictor5=function(t,e,n){return z(z(t,e[n+1]),e[n+0])},t.Predictor6=function(t,e,n){return z(t,e[n-1])},t.Predictor7=function(t,e,n){return z(t,e[n+0])},t.Predictor8=function(t,e,n){return z(e[n-1],e[n+0])},t.Predictor9=function(t,e,n){return z(e[n+0],e[n+1])},t.Predictor10=function(t,e,n){return z(z(t,e[n-1]),z(e[n+0],e[n+1]))},t.Predictor11=function(t,e,n){var i=e[n+0];return 0>=W(i>>24&255,t>>24&255,(e=e[n-1])>>24&255)+W(i>>16&255,t>>16&255,e>>16&255)+W(i>>8&255,t>>8&255,e>>8&255)+W(255&i,255&t,255&e)?i:t},t.Predictor12=function(t,e,n){var i=e[n+0];return(q((t>>24&255)+(i>>24&255)-((e=e[n-1])>>24&255))<<24|q((t>>16&255)+(i>>16&255)-(e>>16&255))<<16|q((t>>8&255)+(i>>8&255)-(e>>8&255))<<8|q((255&t)+(255&i)-(255&e)))>>>0},t.Predictor13=function(t,e,n){var i=e[n-1];return(U((t=z(t,e[n+0]))>>24&255,i>>24&255)<<24|U(t>>16&255,i>>16&255)<<16|U(t>>8&255,i>>8&255)<<8|U(255&t,255&i))>>>0};var $n=t.PredictorAdd0;t.PredictorAdd1=$,G("Predictor2","PredictorAdd2"),G("Predictor3","PredictorAdd3"),G("Predictor4","PredictorAdd4"),G("Predictor5","PredictorAdd5"),G("Predictor6","PredictorAdd6"),G("Predictor7","PredictorAdd7"),G("Predictor8","PredictorAdd8"),G("Predictor9","PredictorAdd9"),G("Predictor10","PredictorAdd10"),G("Predictor11","PredictorAdd11"),G("Predictor12","PredictorAdd12"),G("Predictor13","PredictorAdd13");var Vn=t.PredictorAdd2;Y("ColorIndexInverseTransform","MapARGB","32b",(function(t){return t>>8&255}),(function(t){return t})),Y("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(t){return t}),(function(t){return t>>8&255}));var Xn,Hn=t.ColorIndexInverseTransform,Yn=t.MapARGB,Zn=t.VP8LColorIndexInverseTransformAlpha,Kn=t.MapAlpha,Jn=t.VP8LPredictorsAdd=[];Jn.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var Qn,ti,ei,ni,ii,ri,si,oi,ai,li,hi,ui,ci,di,fi,pi,gi,mi,yi,_i,vi,xi,bi,wi,Ai,Si,Ei,Ti,Ci=s(511),Mi=s(2041),Li=s(225),Pi=s(767),Ri=0,Ii=Mi,Ni=Li,Fi=Pi,ki=Ci,Di=0,Oi=1,ji=2,Gi=3,Bi=4,zi=5,qi=6,Ui=7,Wi=8,$i=9,Vi=10,Xi=[2,3,7],Hi=[3,3,11],Yi=[280,256,256,256,40],Zi=[0,1,1,1,0],Ki=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Ji=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Qi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],tr=8,er=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],nr=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],ir=null,rr=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],sr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],or=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],ar=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],lr=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],hr=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ur=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],cr=[],dr=[],fr=[],pr=1,gr=2,mr=[],yr=[];_n("UpsampleRgbLinePair",Sn,3),_n("UpsampleBgrLinePair",En,3),_n("UpsampleRgbaLinePair",Pn,4),_n("UpsampleBgraLinePair",Ln,4),_n("UpsampleArgbLinePair",Mn,4),_n("UpsampleRgba4444LinePair",Cn,2),_n("UpsampleRgb565LinePair",Tn,2);var _r=t.UpsampleRgbLinePair,vr=t.UpsampleBgrLinePair,xr=t.UpsampleRgbaLinePair,br=t.UpsampleBgraLinePair,wr=t.UpsampleArgbLinePair,Ar=t.UpsampleRgba4444LinePair,Sr=t.UpsampleRgb565LinePair,Er=16,Tr=1<<Er-1,Cr=-227,Mr=482,Lr=6,Pr=(256<<Lr)-1,Rr=0,Ir=s(256),Nr=s(256),Fr=s(256),kr=s(256),Dr=s(Mr-Cr),Or=s(Mr-Cr);Rn("YuvToRgbRow",Sn,3),Rn("YuvToBgrRow",En,3),Rn("YuvToRgbaRow",Pn,4),Rn("YuvToBgraRow",Ln,4),Rn("YuvToArgbRow",Mn,4),Rn("YuvToRgba4444Row",Cn,2),Rn("YuvToRgb565Row",Tn,2);var jr=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],Gr=[0,2,8],Br=[8,7,6,4,4,2,2,2,1,1,1,1],zr=1;this.WebPDecodeRGBA=function(t,n,i,r,s){var o=Oi,a=new nn,l=new ot;a.ba=l,l.S=o,l.width=[l.width],l.height=[l.height];var h=l.width,u=l.height,c=new at;if(null==c||null==t)var d=2;else e(null!=c),d=kn(t,n,i,c.width,c.height,c.Pd,c.Qd,c.format,null);if(0!=d?h=0:(null!=h&&(h[0]=c.width[0]),null!=u&&(u[0]=c.height[0]),h=1),h){l.width=l.width[0],l.height=l.height[0],null!=r&&(r[0]=l.width),null!=s&&(s[0]=l.height);t:{if(r=new Vt,(s=new rn).data=t,s.w=n,s.ha=i,s.kd=1,n=[0],e(null!=s),(0==(t=kn(s.data,s.w,s.ha,null,null,null,n,null,s))||7==t)&&n[0]&&(t=4),0==(n=t)){if(e(null!=a),r.data=s.data,r.w=s.w+s.offset,r.ha=s.ha-s.offset,r.put=ft,r.ac=dt,r.bc=pt,r.ma=a,s.xa){if(null==(t=Mt())){a=1;break t}if(function(t,n){var i=[0],r=[0],s=[0];e:for(;;){if(null==t)return 0;if(null==n)return t.a=2,0;if(t.l=n,t.a=0,y(t.m,n.data,n.w,n.ha),!gt(t.m,i,r,s)){t.a=3;break e}if(t.xb=gr,n.width=i[0],n.height=r[0],!Lt(i[0],r[0],1,t,null))break e;return 1}return e(0!=t.a),0}(t,r)){if(r=0==(n=jn(r.width,r.height,a.Oa,a.ba))){e:{r=t;n:for(;;){if(null==r){r=0;break e}if(e(null!=r.s.yc),e(null!=r.s.Ya),e(0<r.s.Wb),e(null!=(i=r.l)),e(null!=(s=i.ma)),0!=r.xb){if(r.ca=s.ba,r.tb=s.tb,e(null!=r.ca),!Dn(s.Oa,i,Gi)){r.a=2;break n}if(!Pt(r,i.width))break n;if(i.da)break n;if((i.da||it(r.ca.S))&&yn(),11>r.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=r.ca.f.kb.F&&yn()),r.Pb&&0<r.s.ua&&null==r.s.vb.X&&!N(r.s.vb,r.s.Wa.Xa)){r.a=1;break n}r.xb=0}if(!Tt(r,r.V,r.Ba,r.c,r.i,i.o,wt))break n;s.Dc=r.Ma,r=1;break e}e(0!=r.a),r=0}r=!r}r&&(n=t.a)}else n=t.a}else{if(null==(t=new Xt)){a=1;break t}if(t.Fa=s.na,t.P=s.P,t.qc=s.Sa,Zt(t,r)){if(0==(n=jn(r.width,r.height,a.Oa,a.ba))){if(t.Aa=0,i=a.Oa,e(null!=(s=t)),null!=i){if(0<(h=0>(h=i.Md)?0:100<h?255:255*h/100)){for(u=c=0;4>u;++u)12>(d=s.pb[u]).lc&&(d.ia=h*Br[0>d.lc?0:d.lc]>>3),c|=d.ia;c&&(alert("todo:VP8InitRandom"),s.ia=1)}s.Ga=i.Id,100<s.Ga?s.Ga=100:0>s.Ga&&(s.Ga=0)}Qt(t,r)||(n=t.a)}}else n=t.a}0==n&&null!=a.Oa&&a.Oa.fd&&(n=On(a.ba))}a=n}o=0!=a?null:11>o?l.f.RGBA.eb:l.f.kb.y}else o=null;return o};var qr=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(t,e){for(var n="",i=0;i<4;i++)n+=String.fromCharCode(t[e++]);return n}function u(t,e){return(t[e+0]|t[e+1]<<8|t[e+2]<<16)>>>0}function c(t,e){return(t[e+0]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new l;var d=[0],f=[0],p=[],g=new l,m=t,y=function(t,e){var n={},i=0,r=!1,s=0,o=0;if(n.frames=[],!
/** @license
   * Copyright (c) 2017 Dominik Homberger
  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  https://webpjs.appspot.com
  WebPRiffParser dominikhlbg@gmail.com
  */
function(t,e){for(var n=0;n<4;n++)if(t[e+n]!="RIFF".charCodeAt(n))return!0;return!1}(t,e)){for(c(t,e+=4),e+=8;e<t.length;){var a=h(t,e),l=c(t,e+=4);e+=4;var d=l+(1&l);switch(a){case"VP8 ":case"VP8L":void 0===n.frames[i]&&(n.frames[i]={}),(g=n.frames[i]).src_off=r?o:e-8,g.src_size=s+l+8,i++,r&&(r=!1,s=0,o=0);break;case"VP8X":(g=n.header={}).feature_flags=t[e];var f=e+4;g.canvas_width=1+u(t,f),f+=3,g.canvas_height=1+u(t,f),f+=3;break;case"ALPH":r=!0,s=d+8,o=e-8;break;case"ANIM":(g=n.header).bgcolor=c(t,e),f=e+4,g.loop_count=(m=t)[(y=f)+0]|m[y+1]<<8,f+=2;break;case"ANMF":var p,g;(g=n.frames[i]={}).offset_x=2*u(t,e),e+=3,g.offset_y=2*u(t,e),e+=3,g.width=1+u(t,e),e+=3,g.height=1+u(t,e),e+=3,g.duration=u(t,e),e+=3,p=t[e++],g.dispose=1&p,g.blend=p>>1&1}"ANMF"!=a&&(e+=d)}var m,y;return n}}(m,0);y.response=m,y.rgbaoutput=!0,y.dataurl=!1;var _=y.header?y.header:null,v=y.frames?y.frames:null;if(_){_.loop_counter=_.loop_count,d=[_.canvas_height],f=[_.canvas_width];for(var x=0;x<v.length&&0!=v[x].blend;x++);}var b=v[0],w=g.WebPDecodeRGBA(m,b.src_off,b.src_size,f,d);b.rgba=w,b.imgwidth=f[0],b.imgheight=d[0];for(var A=0;A<f[0]*d[0]*4;A++)p[A]=w[A];return this.width=f,this.height=d,this.data=p,this}!function(t){var e=function(e,i,h,u){var c=4,d=o;switch(u){case t.image_compression.FAST:c=1,d=s;break;case t.image_compression.MEDIUM:c=6,d=a;break;case t.image_compression.SLOW:c=9,d=l}e=n(e,i,h,d);var f=(0,r.$)(e,{level:c});return t.__addimage__.arrayBufferToBinaryString(f)},n=function(t,e,n,i){for(var r,s,o,a=t.length/e,l=new Uint8Array(t.length+a),h=u(),d=0;d<a;d+=1){if(o=d*e,r=t.subarray(o,o+e),i)l.set(i(r,n,s),o+d);else{for(var f,p=h.length,g=[];f<p;f+=1)g[f]=h[f](r,n,s);var m=c(g.concat());l.set(g[m],o+d)}s=r}return l},i=function(t){var e=Array.apply([],t);return e.unshift(0),e},s=function(t,e){var n,i=[],r=t.length;i[0]=1;for(var s=0;s<r;s+=1)n=t[s-e]||0,i[s+1]=t[s]-n+256&255;return i},o=function(t,e,n){var i,r=[],s=t.length;r[0]=2;for(var o=0;o<s;o+=1)i=n&&n[o]||0,r[o+1]=t[o]-i+256&255;return r},a=function(t,e,n){var i,r,s=[],o=t.length;s[0]=3;for(var a=0;a<o;a+=1)i=t[a-e]||0,r=n&&n[a]||0,s[a+1]=t[a]+256-(i+r>>>1)&255;return s},l=function(t,e,n){var i,r,s,o,a=[],l=t.length;a[0]=4;for(var u=0;u<l;u+=1)i=t[u-e]||0,r=n&&n[u]||0,s=n&&n[u-e]||0,o=h(i,r,s),a[u+1]=t[u]-o+256&255;return a},h=function(t,e,n){if(t===e&&e===n)return t;var i=Math.abs(e-n),r=Math.abs(t-n),s=Math.abs(t+e-n-n);return i<=r&&i<=s?t:r<=s?e:n},u=function(){return[i,s,o,a,l]},c=function(t){var e=t.map((function(t){return t.reduce((function(t,e){return t+Math.abs(e)}),0)}));return e.indexOf(Math.min.apply(null,e))};t.processPNG=function(n,i,s,o){var a,l,h,u,c,d,f,p,g,m,y,_,v,x,b,w=this.decode.FLATE_DECODE,A="";if(this.__addimage__.isArrayBuffer(n)&&(n=new Uint8Array(n)),this.__addimage__.isArrayBufferView(n)){if(n=(h=new Kt(n)).imgData,l=h.bits,a=h.colorSpace,c=h.colors,-1!==[4,6].indexOf(h.colorType)){if(8===h.bits){g=(p=32==h.pixelBitlength?new Uint32Array(h.decodePixels().buffer):16==h.pixelBitlength?new Uint16Array(h.decodePixels().buffer):new Uint8Array(h.decodePixels().buffer)).length,y=new Uint8Array(g*h.colors),m=new Uint8Array(g);var S,E=h.pixelBitlength-h.bits;for(x=0,b=0;x<g;x++){for(v=p[x],S=0;S<E;)y[b++]=v>>>S&255,S+=h.bits;m[x]=v>>>S&255}}if(16===h.bits){g=(p=new Uint32Array(h.decodePixels().buffer)).length,y=new Uint8Array(g*(32/h.pixelBitlength)*h.colors),m=new Uint8Array(g*(32/h.pixelBitlength)),_=h.colors>1,x=0,b=0;for(var T=0;x<g;)v=p[x++],y[b++]=v>>>0&255,_&&(y[b++]=v>>>16&255,v=p[x++],y[b++]=v>>>0&255),m[T++]=v>>>16&255;l=8}o!==t.image_compression.NONE&&"function"==typeof r.$?(n=e(y,h.width*h.colors,h.colors,o),f=e(m,h.width,1,o)):(n=y,f=m,w=void 0)}if(3===h.colorType&&(a=this.color_spaces.INDEXED,d=h.palette,h.transparency.indexed)){var C=h.transparency.indexed,M=0;for(x=0,g=C.length;x<g;++x)M+=C[x];if((M/=255)==g-1&&-1!==C.indexOf(0))u=[C.indexOf(0)];else if(M!==g){for(p=h.decodePixels(),m=new Uint8Array(p.length),x=0,g=p.length;x<g;x++)m[x]=C[p[x]];f=e(m,h.width,1)}}var L=function(e){var n;switch(e){case t.image_compression.FAST:n=11;break;case t.image_compression.MEDIUM:n=13;break;case t.image_compression.SLOW:n=14;break;default:n=12}return n}(o);return w===this.decode.FLATE_DECODE&&(A="/Predictor "+L+" "),A+="/Colors "+c+" /BitsPerComponent "+l+" /Columns "+h.width,(this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n))&&(n=this.__addimage__.arrayBufferToBinaryString(n)),(f&&this.__addimage__.isArrayBuffer(f)||this.__addimage__.isArrayBufferView(f))&&(f=this.__addimage__.arrayBufferToBinaryString(f)),{alias:s,data:n,index:i,filter:w,decodeParameters:A,transparency:u,palette:d,sMask:f,predictor:L,width:h.width,height:h.height,bitsPerComponent:l,colorSpace:a}}}}(j.API),function(t){t.processGIF89A=function(e,n,i,r){var s=new Jt(e),o=s.width,a=s.height,l=[];s.decodeAndBlitFrameRGBA(0,l);var h={data:l,width:o,height:a},u=new te(100).encode(h,100);return t.processJPEG.call(this,u,n,i,r)},t.processGIF87A=t.processGIF89A}(j.API),ee.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:s}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},ee.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){a.log("bit decode error:"+t)}},ee.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+8*r*4,a=0;a<8&&8*r+a<this.width;a++){var l=this.palette[s>>7-a&1];this.data[o+4*a]=l.blue,this.data[o+4*a+1]=l.green,this.data[o+4*a+2]=l.red,this.data[o+4*a+3]=255}0!==n&&(this.pos+=4-n)}},ee.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var s=this.datav.getUint8(this.pos++,!0),o=i*this.width*4+2*r*4,a=s>>4,l=15&s,h=this.palette[a];if(this.data[o]=h.blue,this.data[o+1]=h.green,this.data[o+2]=h.red,this.data[o+3]=255,2*r+1>=this.width)break;h=this.palette[l],this.data[o+4]=h.blue,this.data[o+4+1]=h.green,this.data[o+4+2]=h.red,this.data[o+4+3]=255}0!==e&&(this.pos+=4-e)}},ee.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),s=n*this.width*4+4*i;if(r<this.palette.length){var o=this.palette[r];this.data[s]=o.red,this.data[s+1]=o.green,this.data[s+2]=o.blue,this.data[s+3]=255}else this.data[s]=255,this.data[s+1]=255,this.data[s+2]=255,this.data[s+3]=255}0!==t&&(this.pos+=4-t)}},ee.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var s=this.datav.getUint16(this.pos,!0);this.pos+=2;var o=(s&e)/e*255|0,a=(s>>5&e)/e*255|0,l=(s>>10&e)/e*255|0,h=s>>15?255:0,u=i*this.width*4+4*r;this.data[u]=l,this.data[u+1]=a,this.data[u+2]=o,this.data[u+3]=h}this.pos+=t}},ee.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,s=0;s<this.width;s++){var o=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(o&e)/e*255|0,l=(o>>5&n)/n*255|0,h=(o>>11)/e*255|0,u=r*this.width*4+4*s;this.data[u]=h,this.data[u+1]=l,this.data[u+2]=a,this.data[u+3]=255}this.pos+=t}},ee.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=e*this.width*4+4*n;this.data[o]=s,this.data[o+1]=r,this.data[o+2]=i,this.data[o+3]=255}this.pos+=this.width%4}},ee.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*n;this.data[a]=s,this.data[a+1]=r,this.data[a+2]=i,this.data[a+3]=o}},ee.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2018 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processBMP=function(e,n,i,r){var s=new ee(e,!1),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},h=new te(100).encode(l,100);return t.processJPEG.call(this,h,n,i,r)}}(j.API),ne.prototype.getData=function(){return this.data},
/**
 * @license
 * Copyright (c) 2019 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){t.processWEBP=function(e,n,i,r){var s=new ne(e),o=s.width,a=s.height,l={data:s.getData(),width:o,height:a},h=new te(100).encode(l,100);return t.processJPEG.call(this,h,n,i,r)}}(j.API),j.API.processRGBA=function(t,e,n){for(var i=t.data,r=i.length,s=new Uint8Array(r/4*3),o=new Uint8Array(r/4),a=0,l=0,h=0;h<r;h+=4){var u=i[h],c=i[h+1],d=i[h+2],f=i[h+3];s[a++]=u,s[a++]=c,s[a++]=d,o[l++]=f}var p=this.__addimage__.arrayBufferToBinaryString(s);return{alpha:this.__addimage__.arrayBufferToBinaryString(o),data:p,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},j.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!=={af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},Vt=j.API,Xt=Vt.getCharWidthsArray=function(t,e){var n,r,s=(e=e||{}).font||this.internal.getFont(),o=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:s.metadata.Unicode.widths,h=l.fof?l.fof:1,u=e.kerning?e.kerning:s.metadata.Unicode.kerning,c=u.fof?u.fof:1,d=!1!==e.doKerning,f=0,p=t.length,g=0,m=l[0]||h,y=[];for(n=0;n<p;n++)r=t.charCodeAt(n),"function"==typeof s.metadata.widthOfString?y.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/o)||0)/1e3):(f=d&&"object"===(0,i.A)(u[r])&&!isNaN(parseInt(u[r][g],10))?u[r][g]/c:0,y.push((l[r]||m)/h+f)),g=r;return y},Ht=Vt.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return Vt.processArabic&&(t=Vt.processArabic(t)),"function"==typeof i.metadata.widthOfString?i.metadata.widthOfString(t,n,r)/n:Xt.apply(this,arguments).reduce((function(t,e){return t+e}),0)},Yt=function(t,e,n,i){for(var r=[],s=0,o=t.length,a=0;s!==o&&a+e[s]<n;)a+=e[s],s++;r.push(t.slice(0,s));var l=s;for(a=0;s!==o;)a+e[s]>i&&(r.push(t.slice(l,s)),a=0,l=s),a+=e[s],s++;return l!==s&&r.push(t.slice(l,s)),r},Zt=function(t,e,n){n||(n={});var i,r,s,o,a,l,h,u=[],c=[u],d=n.textIndent||0,f=0,p=0,g=t.split(" "),m=Xt.apply(this,[" ",n])[0];if(l=-1===n.lineIndent?g[0].length+2:n.lineIndent||0){var y=Array(l).join(" "),_=[];g.map((function(t){(t=t.split(/\s*\n/)).length>1?_=_.concat(t.map((function(t,e){return(e&&t.length?"\n":"")+t}))):_.push(t[0])})),g=_,l=Ht.apply(this,[y,n])}for(s=0,o=g.length;s<o;s++){var v=0;if(i=g[s],l&&"\n"==i[0]&&(i=i.substr(1),v=1),d+f+(p=(r=Xt.apply(this,[i,n])).reduce((function(t,e){return t+e}),0))>e||v){if(p>e){for(a=Yt.apply(this,[i,r,e-(d+f),e]),u.push(a.shift()),u=[a.pop()];a.length;)c.push([a.shift()]);p=r.slice(i.length-(u[0]?u[0].length:0)).reduce((function(t,e){return t+e}),0)}else u=[i];c.push(u),d=p+l,f=m}else u.push(i),d+=f+p,f=m}return h=l?function(t,e){return(e?y:"")+t.join(" ")}:function(t){return t.join(" ")},c.map(h)},Vt.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),s=function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var o=1*this.internal.scaleFactor*e/r;s.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,s.lineIndent=n.lineIndent;var a,l,h=[];for(a=0,l=i.length;a<l;a++)h=h.concat(Zt.apply(this,[i[a],o,s]));return h},function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",n={},r={},s=0;s<16;s++)n[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var o=function(t){return"0x"+parseInt(t,10).toString(16)},a=t.__fontmetrics__.compress=function(t){var e,n,s,l,h=["{"];for(var u in t){if(e=t[u],isNaN(parseInt(u,10))?n="'"+u+"'":(u=parseInt(u,10),n=(n=o(u).slice(2)).slice(0,-1)+r[n.slice(-1)]),"number"==typeof e)e<0?(s=o(e).slice(3),l="-"):(s=o(e).slice(2),l=""),s=l+s.slice(0,-1)+r[s.slice(-1)];else{if("object"!==(0,i.A)(e))throw new Error("Don't know what to do with value type "+(0,i.A)(e)+".");s=a(e)}h.push(n+s)}return h.push("}"),h.join("")},l=t.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw new Error("Invalid argument passed to uncompress.");for(var e,i,r,s,o={},a=1,l=o,h=[],u="",c="",d=t.length-1,f=1;f<d;f+=1)"'"==(s=t[f])?e?(r=e.join(""),e=void 0):e=[]:e?e.push(s):"{"==s?(h.push([l,r]),l={},r=void 0):"}"==s?((i=h.pop())[0][i[1]]=l,r=void 0,l=i[0]):"-"==s?a=-1:void 0===r?n.hasOwnProperty(s)?(u+=n[s],r=parseInt(u,16)*a,a=1,u=""):u+=s:n.hasOwnProperty(s)?(c+=n[s],l[r]=parseInt(c,16)*a,a=1,r=void 0,c=""):c+=s;return o},h={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},u={Unicode:{Courier:h,"Courier-Bold":h,"Courier-BoldOblique":h,"Courier-Oblique":h,Helvetica:h,"Helvetica-Bold":h,"Helvetica-BoldOblique":h,"Helvetica-Oblique":h,"Times-Roman":h,"Times-Bold":h,"Times-BoldItalic":h,"Times-Italic":h}},c={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(t){var e=t.font,n=c.Unicode[e.postScriptName];n&&(e.metadata.Unicode={},e.metadata.Unicode.widths=n.widths,e.metadata.Unicode.kerning=n.kerning);var i=u.Unicode[e.postScriptName];i&&(e.metadata.Unicode.encoding=i,e.encoding=i.codePages[0])}])}(j.API),
/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(t){for(var e=t.length,n=new Uint8Array(e),i=0;i<e;i++)n[i]=t.charCodeAt(i);return n};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,s=n.instance;if(!r.isStandardFont){if(void 0===s)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if("string"!=typeof(i=!1===s.existsFileInVFS(r.postScriptName)?s.loadFile(r.postScriptName):s.getFileFromVFS(r.postScriptName)))throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");!function(n,i){i=/^\x00\x01\x00\x00/.test(i)?e(i):e(c(i)),n.metadata=t.API.TTFFont.open(i),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}(r,i)}}])}(j),
/** @license
 * Copyright (c) 2012 Willow Systems Corporation, https://github.com/willowsystems
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */
function(){function t(){return(s.canvg?Promise.resolve(s.canvg):n.e(8091).then(n.bind(n,98091))).catch((function(t){return Promise.reject(new Error("Could not load canvg: "+t))})).then((function(t){return t.default?t.default:t}))}j.API.addSvgAsImage=function(e,n,i,r,s,o,l,h){if(isNaN(n)||isNaN(i))throw a.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(s))throw a.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var u=document.createElement("canvas");u.width=r,u.height=s;var c=u.getContext("2d");c.fillStyle="#fff",c.fillRect(0,0,u.width,u.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return t().then((function(t){return t.fromString(c,e,d)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(t){return t.render(d)})).then((function(){f.addImage(u.toDataURL("image/jpeg",1),n,i,r,s,l,h)}))}}(),j.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},j.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var r,s,o,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),h=[],u=0,c=0,d=0;function f(t,e){var n,i=!1;for(n=0;n<t.length;n+=1)t[n]===e&&(i=!0);return i}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,"reset"===t||!0===e){var p=l.length;for(d=0;d<p;d+=1)n[l[d]].value=n[l[d]].defaultValue,n[l[d]].explicitSet=!1}if("object"===(0,i.A)(t))for(s in t)if(o=t[s],f(l,s)&&void 0!==o){if("boolean"===n[s].type&&"boolean"==typeof o)n[s].value=o;else if("name"===n[s].type&&f(n[s].valueSet,o))n[s].value=o;else if("integer"===n[s].type&&Number.isInteger(o))n[s].value=o;else if("array"===n[s].type){for(u=0;u<o.length;u+=1)if(r=!0,1===o[u].length&&"number"==typeof o[u][0])h.push(String(o[u]-1));else if(o[u].length>1){for(c=0;c<o[u].length;c+=1)"number"!=typeof o[u][c]&&(r=!1);!0===r&&h.push([o[u][0]-1,o[u][1]-1].join(" "))}n[s].value="["+h.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",(function(){var t,e=[];for(t in n)!0===n[t].explicitSet&&("name"===n[t].type?e.push("/"+t+" /"+n[t].value):e.push("/"+t+" "+n[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this
/** ====================================================================
 * @license
 * jsPDF XMP metadata plugin
 * Copyright (c) 2016 Jussi Utunen, u-jussi@suomi24.fi
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 */},function(t){var e=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),n=unescape(encodeURIComponent(t)),i=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),r=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),s=unescape(encodeURIComponent("</x:xmpmeta>")),o=n.length+i.length+r.length+e.length+s.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+o+" >>"),this.internal.write("stream"),this.internal.write(e+n+i+r+s),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(t,i){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:i||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}}(j.API),function(t){var e=t.API,n=e.pdfEscape16=function(t,e){for(var n,i=e.metadata.Unicode.widths,r=["","0","00","000","0000"],s=[""],o=0,a=t.length;o<a;++o){if(n=e.metadata.characterToGlyph(t.charCodeAt(o)),e.metadata.glyIdsUsed.push(n),e.metadata.toUnicode[n]=t.charCodeAt(o),-1==i.indexOf(n)&&(i.push(n),i.push([parseInt(e.metadata.widthOfGlyph(n),10)])),"0"==n)return s.join("");n=n.toString(16),s.push(r[4-n.length],n)}return s.join("")},i=function(t){var e,n,i,r,s,o,a;for(s="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",i=[],o=0,a=(n=Object.keys(t).sort((function(t,e){return t-e}))).length;o<a;o++)e=n[o],i.length>=100&&(s+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar",i=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(r=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),i.push("<"+e+"><"+r+">"));return i.length&&(s+="\n"+i.length+" beginbfchar\n"+i.join("\n")+"\nendbfchar\n"),s+"endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"};e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,s=e.newObject,o=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"Identity-H"===n.encoding){for(var a=n.metadata.Unicode.widths,l=n.metadata.subset.encode(n.metadata.glyIdsUsed,1),h="",u=0;u<l.length;u++)h+=String.fromCharCode(l[u]);var c=s();o({data:h,addLength1:!0,objectId:c}),r("endobj");var d=s();o({data:i(n.metadata.toUnicode),addLength1:!0,objectId:d}),r("endobj");var f=s();r("<<"),r("/Type /FontDescriptor"),r("/FontName /"+I(n.fontName)),r("/FontFile2 "+c+" 0 R"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/Flags "+n.metadata.flags),r("/StemV "+n.metadata.stemV),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r(">>"),r("endobj");var p=s();r("<<"),r("/Type /Font"),r("/BaseFont /"+I(n.fontName)),r("/FontDescriptor "+f+" 0 R"),r("/W "+t.API.PDFObject.convert(a)),r("/CIDToGIDMap /Identity"),r("/DW 1000"),r("/Subtype /CIDFontType2"),r("/CIDSystemInfo"),r("<<"),r("/Supplement 0"),r("/Registry (Adobe)"),r("/Ordering ("+n.encoding+")"),r(">>"),r(">>"),r("endobj"),n.objectNumber=s(),r("<<"),r("/Type /Font"),r("/Subtype /Type0"),r("/ToUnicode "+d+" 0 R"),r("/BaseFont /"+I(n.fontName)),r("/Encoding /"+n.encoding),r("/DescendantFonts ["+p+" 0 R]"),r(">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]),e.events.push(["putFont",function(e){!function(e){var n=e.font,r=e.out,s=e.newObject,o=e.putStream;if(n.metadata instanceof t.API.TTFFont&&"WinAnsiEncoding"===n.encoding){for(var a=n.metadata.rawData,l="",h=0;h<a.length;h++)l+=String.fromCharCode(a[h]);var u=s();o({data:l,addLength1:!0,objectId:u}),r("endobj");var c=s();o({data:i(n.metadata.toUnicode),addLength1:!0,objectId:c}),r("endobj");var d=s();r("<<"),r("/Descent "+n.metadata.decender),r("/CapHeight "+n.metadata.capHeight),r("/StemV "+n.metadata.stemV),r("/Type /FontDescriptor"),r("/FontFile2 "+u+" 0 R"),r("/Flags 96"),r("/FontBBox "+t.API.PDFObject.convert(n.metadata.bbox)),r("/FontName /"+I(n.fontName)),r("/ItalicAngle "+n.metadata.italicAngle),r("/Ascent "+n.metadata.ascender),r(">>"),r("endobj"),n.objectNumber=s();for(var f=0;f<n.metadata.hmtx.widths.length;f++)n.metadata.hmtx.widths[f]=parseInt(n.metadata.hmtx.widths[f]*(1e3/n.metadata.head.unitsPerEm));r("<</Subtype/TrueType/Type/Font/ToUnicode "+c+" 0 R/BaseFont/"+I(n.fontName)+"/FontDescriptor "+d+" 0 R/Encoding/"+n.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(n.metadata.hmtx.widths)+">>"),r("endobj"),n.isAlreadyPutted=!0}}(e)}]);var r=function(t){var e,i=t.text||"",r=t.x,s=t.y,o=t.options||{},a=t.mutex||{},l=a.pdfEscape,h=a.activeFontKey,u=a.fonts,c=h,d="",f=0,p="",g=u[c].encoding;if("Identity-H"!==u[c].encoding)return{text:i,x:r,y:s,options:o,mutex:a};for(p=i,c=h,Array.isArray(i)&&(p=i[0]),f=0;f<p.length;f+=1)u[c].metadata.hasOwnProperty("cmap")&&(e=u[c].metadata.cmap.unicode.codeMap[p[f].charCodeAt(0)]),e||p[f].charCodeAt(0)<256&&u[c].metadata.hasOwnProperty("Unicode")?d+=p[f]:d+="";var m="";return parseInt(c.slice(1))<14||"WinAnsiEncoding"===g?m=l(d,c).split("").map((function(t){return t.charCodeAt(0).toString(16)})).join(""):"Identity-H"===g&&(m=n(d,u[c])),a.isHex=!0,{text:m,x:r,y:s,options:o,mutex:a}};e.events.push(["postProcessText",function(t){var e=t.text||"",n=[],i={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var s=0;for(s=0;s<e.length;s+=1)Array.isArray(e[s])&&3===e[s].length?n.push([r(Object.assign({},i,{text:e[s][0]})).text,e[s][1],e[s][2]]):n.push(r(Object.assign({},i,{text:e[s]})).text);t.text=n}else t.text=r(Object.assign({},i,{text:e})).text}])}(j),
/**
 * @license
 * jsPDF virtual FileSystem functionality
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */
function(t){var e=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]},t.addFileToVFS=function(t,n){return e.call(this),this.internal.vFS[t]=n,this},t.getFileFromVFS=function(t){return e.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null}}(j.API),
/**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */
function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var n,i,r,s,o,a,l,h=e,u=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],c=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],d={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},p=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],g=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),m=!1,y=0;this.__bidiEngine__={};var _=function(t){var e=t.charCodeAt(),n=e>>8,i=f[n];return void 0!==i?h[256*i+(255&e)]:252===n||253===n?"AL":g.test(n)?"L":8===n?"R":"N"},v=function(t){for(var e,n=0;n<t.length;n++){if("L"===(e=_(t.charAt(n))))return!1;if("R"===e)return!0}return!1},x=function(t,e,o,a){var l,h,u,c,d=e[a];switch(d){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":m=!1;break;case"N":case"AN":break;case"EN":m&&(d="AN");break;case"AL":m=!0,d="R";break;case"WS":case"BN":d="N";break;case"CS":a<1||a+1>=e.length||"EN"!==(l=o[a-1])&&"AN"!==l||"EN"!==(h=e[a+1])&&"AN"!==h?d="N":m&&(h="AN"),d=h===l?h:"N";break;case"ES":d="EN"===(l=a>0?o[a-1]:"B")&&a+1<e.length&&"EN"===e[a+1]?"EN":"N";break;case"ET":if(a>0&&"EN"===o[a-1]){d="EN";break}if(m){d="N";break}for(u=a+1,c=e.length;u<c&&"ET"===e[u];)u++;d=u<c&&"EN"===e[u]?"EN":"N";break;case"NSM":if(r&&!s){for(c=e.length,u=a+1;u<c&&"NSM"===e[u];)u++;if(u<c){var f=t[a],p=f>=1425&&f<=2303||64286===f;if(l=e[u],p&&("R"===l||"AL"===l)){d="R";break}}}d=a<1||"B"===(l=e[a-1])?"N":o[a-1];break;case"B":m=!1,n=!0,d=y;break;case"S":i=!0,d="N"}return d},b=function(t,e,n){var i=t.split("");return n&&w(i,n,{hiLevel:y}),i.reverse(),e&&e.reverse(),i.join("")},w=function(t,e,r){var s,o,a,l,h,f=-1,p=t.length,g=0,v=[],b=y?c:u,w=[];for(m=!1,n=!1,i=!1,o=0;o<p;o++)w[o]=_(t[o]);for(a=0;a<p;a++){if(h=g,v[a]=x(t,w,v,a),s=240&(g=b[h][d[v[a]]]),g&=15,e[a]=l=b[g][5],s>0)if(16===s){for(o=f;o<a;o++)e[o]=1;f=-1}else f=-1;if(b[g][6])-1===f&&(f=a);else if(f>-1){for(o=f;o<a;o++)e[o]=l;f=-1}"B"===w[a]&&(e[a]=0),r.hiLevel|=l}i&&function(t,e,n){for(var i=0;i<n;i++)if("S"===t[i]){e[i]=y;for(var r=i-1;r>=0&&"WS"===t[r];r--)e[r]=y}}(w,e,p)},A=function(t,e,i,r,s){if(!(s.hiLevel<t)){if(1===t&&1===y&&!n)return e.reverse(),void(i&&i.reverse());for(var o,a,l,h,u=e.length,c=0;c<u;){if(r[c]>=t){for(l=c+1;l<u&&r[l]>=t;)l++;for(h=c,a=l-1;h<a;h++,a--)o=e[h],e[h]=e[a],e[a]=o,i&&(o=i[h],i[h]=i[a],i[a]=o);c=l}c++}}},S=function(t,e,n){var i=t.split(""),r={hiLevel:y};return n||(n=[]),w(i,n,r),function(t,e,n){if(0!==n.hiLevel&&l)for(var i,r=0;r<t.length;r++)1===e[r]&&(i=p.indexOf(t[r]))>=0&&(t[r]=p[i+1])}(i,n,r),A(2,i,e,n,r),A(1,i,e,n,r),i.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,n){if(function(t,e){if(e)for(var n=0;n<t.length;n++)e[n]=n;void 0===s&&(s=v(t)),void 0===a&&(a=v(t))}(t,e),r||!o||a)if(r&&o&&s^a)y=s?1:0,t=b(t,e,n);else if(!r&&o&&a)y=s?1:0,t=S(t,e,n),t=b(t,e);else if(!r||s||o||a){if(r&&!o&&s^a)t=b(t,e),s?(y=0,t=S(t,e,n)):(y=1,t=S(t,e,n),t=b(t,e));else if(r&&s&&!o&&a)y=1,t=S(t,e,n),t=b(t,e);else if(!r&&!o&&s^a){var i=l;s?(y=1,t=S(t,e,n),y=0,l=!1,t=S(t,e,n),l=i):(y=0,t=S(t,e,n),t=b(t,e),y=1,l=!1,t=S(t,e,n),l=i,t=b(t,e))}}else y=0,t=S(t,e,n);else y=s?1:0,t=S(t,e,n);return t},this.__bidiEngine__.setOptions=function(t){t&&(r=t.isInputVisual,o=t.isOutputVisual,s=t.isInputRtl,a=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text;t.x,t.y;var i=t.options||{};t.mutex,i.lang;var r=[];if(i.isInputVisual="boolean"!=typeof i.isInputVisual||i.isInputVisual,n.setOptions(i),"[object Array]"===Object.prototype.toString.call(e)){var s=0;for(r=[],s=0;s<e.length;s+=1)"[object Array]"===Object.prototype.toString.call(e[s])?r.push([n.doBidiReorder(e[s][0]),e[s][1],e[s][2]]):r.push([n.doBidiReorder(e[s])]);t.text=r}else t.text=n.doBidiReorder(e);n.setOptions({isInputVisual:!0})}])}(j),j.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new re(t),this.contents.pos=4,"ttcf"===e.readString(4))throw new Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new Ae(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new se(this.contents),this.head=new le(this),this.name=new ge(this),this.cmap=new ue(this),this.toUnicode={},this.hhea=new ce(this),this.maxp=new me(this),this.hmtx=new ye(this),this.post=new fe(this),this.os2=new de(this),this.loca=new we(this),this.glyf=new ve(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,n,i,r;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var e,n,i,r;for(r=[],e=0,n=(i=this.bbox).length;e<n;e++)t=i[e],r.push(Math.round(t*this.scaleFactor));return r}.call(this),this.stemV=0,this.post.exists?(n=255&(i=this.post.italic_angle),!!(32768&(e=i>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+n)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(r=this.familyClass)||2===r||3===r||4===r||5===r||7===r,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,n){var i,r,s,o;for(s=0,r=0,o=(t=""+t).length;0<=o?r<o:r>o;r=0<=o?++r:--r)i=t.charCodeAt(r),s+=this.widthOfGlyph(this.characterToGlyph(i))+n*(1e3/e)||0;return s*(e/1e3)},t.prototype.lineHeight=function(t,e){var n;return null==e&&(e=!1),n=e?this.lineGap:0,(this.ascender+n-this.decender)/1e3*t},t}();var ie,re=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,n;for(n=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)n[e]=String.fromCharCode(this.readByte());return n.join("")},t.prototype.writeString=function(t){var e,n,i;for(i=[],e=0,n=t.length;0<=n?e<n:e>n;e=0<=n?++e:--e)i.push(this.writeByte(t.charCodeAt(e)));return i},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,n,i,r,s,o,a;return t=this.readByte(),e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),s=this.readByte(),o=this.readByte(),a=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^n)+4294967296*(255^i)+16777216*(255^r)+65536*(255^s)+256*(255^o)+(255^a)+1):72057594037927940*t+281474976710656*e+1099511627776*n+4294967296*i+16777216*r+65536*s+256*o+a},t.prototype.writeLongLong=function(t){var e,n;return e=Math.floor(t/4294967296),n=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,n;for(e=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)e.push(this.readByte());return e},t.prototype.write=function(t){var e,n,i,r;for(r=[],n=0,i=t.length;n<i;n++)e=t[n],r.push(this.writeByte(e));return r},t}(),se=function(){var t;function e(t){var e,n,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},n=0,i=this.tableCount;0<=i?n<i:n>i;n=0<=i?++n:--n)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var n,i,r,s,o,a,l,h,u,c,d,f,p;for(p in d=Object.keys(e).length,a=Math.log(2),u=16*Math.floor(Math.log(d)/a),s=Math.floor(u/a),h=16*d-u,(i=new re).writeInt(this.scalarType),i.writeShort(d),i.writeShort(u),i.writeShort(s),i.writeShort(h),r=16*d,l=i.pos+r,o=null,f=[],e)for(c=e[p],i.writeString(p),i.writeInt(t(c)),i.writeInt(l),i.writeInt(c.length),f=f.concat(c),"head"===p&&(o=l),l+=c.length;l%4;)f.push(0),l++;return i.write(f),n=2981146554-t(i.data),i.pos=o+8,i.writeUInt32(n),i.data},t=function(t){var e,n,i,r;for(t=_e.call(t);t.length%4;)t.push(0);for(i=new re(t),n=0,e=0,r=t.length;e<r;e=e+=4)n+=i.readUInt32();return 4294967295&n},e}(),oe={}.hasOwnProperty,ae=function(t,e){for(var n in e)oe.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};ie=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var le=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="head",t.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},t.prototype.encode=function(t){var e;return(e=new re).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},t}(),he=function(){function t(t,e){var n,i,r,s,o,a,l,h,u,c,d,f,p,g,m,y,_;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(a=0;a<256;++a)this.codeMap[a]=t.readByte();break;case 4:for(d=t.readUInt16(),c=d/2,t.pos+=6,r=function(){var e,n;for(n=[],a=e=0;0<=c?e<c:e>c;a=0<=c?++e:--e)n.push(t.readUInt16());return n}(),t.pos+=2,p=function(){var e,n;for(n=[],a=e=0;0<=c?e<c:e>c;a=0<=c?++e:--e)n.push(t.readUInt16());return n}(),l=function(){var e,n;for(n=[],a=e=0;0<=c?e<c:e>c;a=0<=c?++e:--e)n.push(t.readUInt16());return n}(),h=function(){var e,n;for(n=[],a=e=0;0<=c?e<c:e>c;a=0<=c?++e:--e)n.push(t.readUInt16());return n}(),i=(this.length-t.pos+this.offset)/2,o=function(){var e,n;for(n=[],a=e=0;0<=i?e<i:e>i;a=0<=i?++e:--e)n.push(t.readUInt16());return n}(),a=m=0,_=r.length;m<_;a=++m)for(g=r[a],n=y=f=p[a];f<=g?y<=g:y>=g;n=f<=g?++y:--y)0===h[a]?s=n+l[a]:0!==(s=o[h[a]/2+(n-f)-(c-a)]||0)&&(s+=l[a]),this.codeMap[n]=65535&s}t.pos=u}return t.encode=function(t,e){var n,i,r,s,o,a,l,h,u,c,d,f,p,g,m,y,_,v,x,b,w,A,S,E,T,C,M,L,P,R,I,N,F,k,D,O,j,G,B,z,q,U,W,$,V,X;switch(L=new re,s=Object.keys(t).sort((function(t,e){return t-e})),e){case"macroman":for(p=0,g=function(){var t=[];for(f=0;f<256;++f)t.push(0);return t}(),y={0:0},r={},P=0,F=s.length;P<F;P++)null==y[W=t[i=s[P]]]&&(y[W]=++p),r[i]={old:t[i],new:y[t[i]]},g[i]=y[t[i]];return L.writeUInt16(1),L.writeUInt16(0),L.writeUInt32(12),L.writeUInt16(0),L.writeUInt16(262),L.writeUInt16(0),L.write(g),{charMap:r,subtable:L.data,maxGlyphID:p+1};case"unicode":for(C=[],u=[],_=0,y={},n={},m=l=null,R=0,k=s.length;R<k;R++)null==y[x=t[i=s[R]]]&&(y[x]=++_),n[i]={old:x,new:y[x]},o=y[x]-i,null!=m&&o===l||(m&&u.push(m),C.push(i),l=o),m=i;for(m&&u.push(m),u.push(65535),C.push(65535),E=2*(S=C.length),A=2*Math.pow(Math.log(S)/Math.LN2,2),c=Math.log(A/2)/Math.LN2,w=2*S-A,a=[],b=[],d=[],f=I=0,D=C.length;I<D;f=++I){if(T=C[f],h=u[f],65535===T){a.push(0),b.push(0);break}if(T-(M=n[T].new)>=32768)for(a.push(0),b.push(2*(d.length+S-f)),i=N=T;T<=h?N<=h:N>=h;i=T<=h?++N:--N)d.push(n[i].new);else a.push(M-T),b.push(0)}for(L.writeUInt16(3),L.writeUInt16(1),L.writeUInt32(12),L.writeUInt16(4),L.writeUInt16(16+8*S+2*d.length),L.writeUInt16(0),L.writeUInt16(E),L.writeUInt16(A),L.writeUInt16(c),L.writeUInt16(w),q=0,O=u.length;q<O;q++)i=u[q],L.writeUInt16(i);for(L.writeUInt16(0),U=0,j=C.length;U<j;U++)i=C[U],L.writeUInt16(i);for($=0,G=a.length;$<G;$++)o=a[$],L.writeUInt16(o);for(V=0,B=b.length;V<B;V++)v=b[V],L.writeUInt16(v);for(X=0,z=d.length;X<z;X++)p=d[X],L.writeUInt16(p);return{charMap:n,subtable:L.data,maxGlyphID:_+1}}},t}(),ue=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="cmap",t.prototype.parse=function(t){var e,n,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,n=0;0<=i?n<i:n>i;n=0<=i?++n:--n)e=new he(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},t.encode=function(t,e){var n,i;return null==e&&(e="macroman"),n=he.encode(t,e),(i=new re).writeUInt16(0),i.writeUInt16(1),n.table=i.data.concat(n.subtable),n},t}(),ce=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="hhea",t.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},t}(),de=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="OS/2",t.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,n;for(n=[],e=0;e<10;++e)n.push(t.readByte());return n}(),this.charRange=function(){var e,n;for(n=[],e=0;e<4;++e)n.push(t.readInt());return n}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,n;for(n=[],e=0;e<2;e=++e)n.push(t.readInt());return n}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},t}(),fe=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="post",t.prototype.parse=function(t){var e,n,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:var r;for(n=t.readUInt16(),this.glyphNameIndex=[],r=0;0<=n?r<n:r>n;r=0<=n?++r:--r)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)e=t.readByte(),i.push(this.names.push(t.readString(e)));return i;case 151552:return n=t.readUInt16(),this.offsets=t.read(n);case 262144:return this.map=function(){var e,n,i;for(i=[],r=e=0,n=this.file.maxp.numGlyphs;0<=n?e<n:e>n;r=0<=n?++e:--e)i.push(t.readUInt32());return i}.call(this)}},t}(),pe=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},ge=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="name",t.prototype.parse=function(t){var e,n,i,r,s,o,a,l,h,u,c;for(t.pos=this.offset,t.readShort(),e=t.readShort(),o=t.readShort(),n=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)n.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+o+t.readShort()});for(a={},r=h=0,u=n.length;h<u;r=++h)i=n[r],t.pos=i.offset,l=t.readString(i.length),s=new pe(l,i),null==a[c=i.nameID]&&(a[c]=[]),a[i.nameID].push(s);this.strings=a,this.copyright=a[0],this.fontFamily=a[1],this.fontSubfamily=a[2],this.uniqueSubfamily=a[3],this.fontName=a[4],this.version=a[5];try{this.postscriptName=a[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=a[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=a[7],this.manufacturer=a[8],this.designer=a[9],this.description=a[10],this.vendorUrl=a[11],this.designerUrl=a[12],this.license=a[13],this.licenseUrl=a[14],this.preferredFamily=a[15],this.preferredSubfamily=a[17],this.compatibleFull=a[18],this.sampleText=a[19]},t}(),me=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="maxp",t.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},t}(),ye=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="hmtx",t.prototype.parse=function(t){var e,n,i,r,s,o,a;for(t.pos=this.offset,this.metrics=[],e=0,o=this.file.hhea.numberOfMetrics;0<=o?e<o:e>o;e=0<=o?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var n,r;for(r=[],e=n=0;0<=i?n<i:n>i;e=0<=i?++n:--n)r.push(t.readInt16());return r}(),this.widths=function(){var t,e,n,i;for(i=[],t=0,e=(n=this.metrics).length;t<e;t++)r=n[t],i.push(r.advance);return i}.call(this),n=this.widths[this.widths.length-1],a=[],e=s=0;0<=i?s<i:s>i;e=0<=i?++s:--s)a.push(this.widths.push(n));return a},t.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},t}(),_e=[].slice,ve=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(t){var e,n,i,r,s,o,a,l,h,u;return t in this.cache?this.cache[t]:(r=this.file.loca,e=this.file.contents,n=r.indexOf(t),0===(i=r.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+n,s=(o=new re(e.read(i))).readShort(),l=o.readShort(),u=o.readShort(),a=o.readShort(),h=o.readShort(),this.cache[t]=-1===s?new be(o,l,u,a,h):new xe(o,s,l,u,a,h),this.cache[t]))},t.prototype.encode=function(t,e,n){var i,r,s,o,a;for(s=[],r=[],o=0,a=e.length;o<a;o++)i=t[e[o]],r.push(s.length),i&&(s=s.concat(i.encode(n)));return r.push(s.length),{table:s,offsets:r}},t}(),xe=function(){function t(t,e,n,i,r,s){this.raw=t,this.numberOfContours=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=s,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),be=function(){function t(t,e,n,i,r){var s,o;for(this.raw=t,this.xMin=e,this.yMin=n,this.xMax=i,this.yMax=r,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],s=this.raw;o=s.readShort(),this.glyphOffsets.push(s.pos),this.glyphIDs.push(s.readUInt16()),32&o;)s.pos+=1&o?4:2,128&o?s.pos+=8:64&o?s.pos+=4:8&o&&(s.pos+=2)}return t.prototype.encode=function(){var t,e,n;for(e=new re(_e.call(this.raw.data)),t=0,n=this.glyphIDs.length;t<n;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),we=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return ae(t,ie),t.prototype.tag="loca",t.prototype.parse=function(t){var e,n;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?function(){var e,i;for(i=[],n=0,e=this.length;n<e;n+=2)i.push(2*t.readUInt16());return i}.call(this):function(){var e,i;for(i=[],n=0,e=this.length;n<e;n+=4)i.push(t.readUInt32());return i}.call(this)},t.prototype.indexOf=function(t){return this.offsets[t]},t.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},t.prototype.encode=function(t,e){for(var n=new Uint32Array(this.offsets.length),i=0,r=0,s=0;s<n.length;++s)if(n[s]=i,r<e.length&&e[r]==s){++r,n[s]=i;var o=this.offsets[s],a=this.offsets[s+1]-o;a>0&&(i+=a)}for(var l=new Array(4*n.length),h=0;h<n.length;++h)l[4*h+3]=255&n[h],l[4*h+2]=(65280&n[h])>>8,l[4*h+1]=(16711680&n[h])>>16,l[4*h]=(4278190080&n[h])>>24;return l},t}(),Ae=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,n,i,r;for(e in i=this.font.cmap.tables[0].codeMap,t={},r=this.subset)n=r[e],t[e]=i[n];return t},t.prototype.glyphsFor=function(t){var e,n,i,r,s,o,a;for(i={},s=0,o=t.length;s<o;s++)i[r=t[s]]=this.font.glyf.glyphFor(r);for(r in e=[],i)(null!=(n=i[r])?n.compound:void 0)&&e.push.apply(e,n.glyphIDs);if(e.length>0)for(r in a=this.glyphsFor(e))n=a[r],i[r]=n;return i},t.prototype.encode=function(t,e){var n,i,r,s,o,a,l,h,u,c,d,f,p,g,m;for(i in n=ue.encode(this.generateCmap(),"unicode"),s=this.glyphsFor(t),d={0:0},m=n.charMap)d[(a=m[i]).old]=a.new;for(f in c=n.maxGlyphID,s)f in d||(d[f]=c++);return h=function(t){var e,n;for(e in n={},t)n[t[e]]=e;return n}(d),u=Object.keys(h).sort((function(t,e){return t-e})),p=function(){var t,e,n;for(n=[],t=0,e=u.length;t<e;t++)o=u[t],n.push(h[o]);return n}(),r=this.font.glyf.encode(s,p,d),l=this.font.loca.encode(r.offsets,p),g={cmap:this.font.cmap.raw(),glyf:r.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();j.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(n){var i,r,s,o;if(Array.isArray(n))return"["+function(){var t,r,s;for(s=[],t=0,r=n.length;t<r;t++)i=n[t],s.push(e.convert(i));return s}().join(" ")+"]";if("string"==typeof n)return"/"+n;if(null!=n?n.isString:void 0)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if("[object Object]"==={}.toString.call(n)){for(r in s=["<<"],n)o=n[r],s.push("/"+r+" "+e.convert(o));return s.push(">>"),s.join("\n")}return""+n},e}()},4666:function(t,e,n){"use strict";n.d(e,{Be:function(){return l},Ek:function(){return a},H7:function(){return r},IP:function(){return s},JL:function(){return u},SD:function(){return p},Ss:function(){return o},UD:function(){return c},l4:function(){return h},zH:function(){return d}});var i=n(95907);const r=34962,s=34963,o=35040,a=35044,l=35048,h=5121,u=5123,c=5125,d=5126,f=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function p(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!i.oF},e);const n=f.length;for(let i=0;i<n;++i)try{const n=t.getContext(f[i],e);if(n)return n}catch{}return null}},5596:function(t,e,n){"use strict";var i=n(63188),r=n(67024),s=n(69791),o=n(22685),a=n(92662),l=n(73988);const h=["fullscreenchange","webkitfullscreenchange"],u="enterfullscreen",c="leavefullscreen";class d extends l.A{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target}),this.on,this.once,this.un,this.keys_=void 0!==t.keys&&t.keys,this.source_=t.source,this.isInFullscreen_=!1,this.boundHandleMapTargetChange_=this.handleMapTargetChange_.bind(this),this.cssClassName_=void 0!==t.className?t.className:"ol-full-screen",this.documentListeners_=[],this.activeClassName_=void 0!==t.activeClassName?t.activeClassName.split(" "):[this.cssClassName_+"-true"],this.inactiveClassName_=void 0!==t.inactiveClassName?t.inactiveClassName.split(" "):[this.cssClassName_+"-false"];const e=void 0!==t.label?t.label:"⤢";this.labelNode_="string"==typeof e?document.createTextNode(e):e;const n=void 0!==t.labelActive?t.labelActive:"×";this.labelActiveNode_="string"==typeof n?document.createTextNode(n):n;const i=t.tipLabel?t.tipLabel:"Toggle full-screen";this.button_=document.createElement("button"),this.button_.title=i,this.button_.setAttribute("type","button"),this.button_.appendChild(this.labelNode_),this.button_.addEventListener(o.A.CLICK,this.handleClick_.bind(this),!1),this.setClassName_(this.button_,this.isInFullscreen_),this.element.className=`${this.cssClassName_} ${r.XI} ${r.$N}`,this.element.appendChild(this.button_)}handleClick_(t){t.preventDefault(),this.handleFullScreen_()}handleFullScreen_(){const t=this.getMap();if(!t)return;const e=t.getOwnerDocument();if(f(e))if(p(e))!function(t){t.exitFullscreen?t.exitFullscreen():t.webkitExitFullscreen&&t.webkitExitFullscreen()}(e);else{let n;n=this.source_?"string"==typeof this.source_?e.getElementById(this.source_):this.source_:t.getTargetElement(),this.keys_?function(t){t.webkitRequestFullscreen?t.webkitRequestFullscreen():g(t)}(n):g(n)}}handleFullScreenChange_(){const t=this.getMap();if(!t)return;const e=this.isInFullscreen_;this.isInFullscreen_=p(t.getOwnerDocument()),e!==this.isInFullscreen_&&(this.setClassName_(this.button_,this.isInFullscreen_),this.isInFullscreen_?((0,s.fo)(this.labelActiveNode_,this.labelNode_),this.dispatchEvent(u)):((0,s.fo)(this.labelNode_,this.labelActiveNode_),this.dispatchEvent(c)),t.updateSize())}setClassName_(t,e){e?(t.classList.remove(...this.inactiveClassName_),t.classList.add(...this.activeClassName_)):(t.classList.remove(...this.activeClassName_),t.classList.add(...this.inactiveClassName_))}setMap(t){const e=this.getMap();e&&e.removeChangeListener(i.A.TARGET,this.boundHandleMapTargetChange_),super.setMap(t),this.handleMapTargetChange_(),t&&t.addChangeListener(i.A.TARGET,this.boundHandleMapTargetChange_)}handleMapTargetChange_(){const t=this.documentListeners_;for(let e=0,n=t.length;e<n;++e)(0,a.JH)(t[e]);t.length=0;const e=this.getMap();if(e){const n=e.getOwnerDocument();f(n)?this.element.classList.remove(r.Vv):this.element.classList.add(r.Vv);for(let e=0,i=h.length;e<i;++e)t.push((0,a.KT)(n,h[e],this.handleFullScreenChange_,this));this.handleFullScreenChange_()}}}function f(t){const e=t.body;return!!(e.webkitRequestFullscreen||e.requestFullscreen&&t.fullscreenEnabled)}function p(t){return!(!t.webkitIsFullScreen&&!t.fullscreenElement)}function g(t){t.requestFullscreen?t.requestFullscreen():t.webkitRequestFullscreen&&t.webkitRequestFullscreen()}e.A=d},5900:function(t,e,n){"use strict";var i=n(16235),r=n(25231),s=n(62994),o=n(10135),a=n(69606),l=n(38376);class h extends l.A{constructor(t){const e=void 0!==t.hidpi&&t.hidpi;super({cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,projection:(0,r.Jt)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,tilePixelRatio:e?2:1,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.hidpi_=e,this.culture_=void 0!==t.culture?t.culture:"en-us",this.maxZoom_=void 0!==t.maxZoom?t.maxZoom:-1,this.apiKey_=t.key,this.imagerySet_=t.imagerySet,this.placeholderTiles_=t.placeholderTiles;const n="https://dev.virtualearth.net/REST/v1/Imagery/Metadata/"+this.imagerySet_+"?uriScheme=https&include=ImageryProviders&key="+this.apiKey_+"&c="+this.culture_;fetch(n).then((t=>t.json())).then((t=>this.handleImageryMetadataResponse(t)))}getApiKey(){return this.apiKey_}getImagerySet(){return this.imagerySet_}handleImageryMetadataResponse(t){if(200!=t.statusCode||"OK"!=t.statusDescription||"ValidCredentials"!=t.authenticationResultCode||1!=t.resourceSets.length||1!=t.resourceSets[0].resources.length)return void this.setState("error");const e=t.resourceSets[0].resources[0],n=-1==this.maxZoom_?e.zoomMax:this.maxZoom_,l=this.getProjection(),h=(0,o.kZ)(l),u=this.hidpi_?2:1,c=e.imageWidth==e.imageHeight?e.imageWidth/u:[e.imageWidth/u,e.imageHeight/u],d=(0,o.EN)({extent:h,minZoom:e.zoomMin,maxZoom:n,tileSize:c});this.tileGrid=d;const f=this.culture_,p=this.hidpi_,g=this.placeholderTiles_;if(this.tileUrlFunction=(0,a.FD)(e.imageUrlSubdomains.map((function(t){const n=[0,0,0],i=e.imageUrl.replace("{subdomain}",t).replace("{culture}",f);return function(t,e,r){if(!t)return;(0,s.N)(t[0],t[1],t[2],n);const o=new URL(i.replace("{quadkey}",function(t){const e=t[0],n=new Array(e);let i,r,s=1<<e-1;for(i=0;i<e;++i)r=48,t[1]&s&&(r+=1),t[2]&s&&(r+=2),n[i]=String.fromCharCode(r),s>>=1;return n.join("")}(n))),a=o.searchParams;return p&&(a.set("dpi","d1"),a.set("device","mobile")),!0===g?a.delete("n"):!1===g&&a.set("n","z"),o.toString()}}))),e.imageryProviders){const t=(0,r.FO)((0,r.Jt)("EPSG:4326"),this.getProjection());this.setAttributions((n=>{const r=[],s=n.viewState,o=this.getTileGrid(),a=o.getZForResolution(s.resolution,this.zDirection),l=o.getTileCoordForCoordAndZ(s.center,a)[0];return e.imageryProviders.map((function(e){let s=!1;const o=e.coverageAreas;for(let e=0,r=o.length;e<r;++e){const r=o[e];if(l>=r.zoomMin&&l<=r.zoomMax){const e=r.bbox,o=[e[1],e[0],e[3],e[2]],a=(0,i.NW)(o,t);if((0,i.HY)(a,n.extent)){s=!0;break}}}s&&r.push(e.attribution)})),r.push('<a class="ol-attribution-bing-tos" href="https://www.microsoft.com/maps/product/terms.html" target="_blank">Terms of Use</a>'),r}))}this.setState("ready")}}e.A=h},6157:function(t,e,n){"use strict";var i=n(16235),r=n(25231),s=n(37246),o=n(72961),a=n(36018),l=n(40132);const h=a.M+" http://schemas.opengis.net/gml/2.1.2/feature.xsd",u={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};class c extends a.A{constructor(t){super(t=t||{}),this.FEATURE_COLLECTION_PARSERS[a.M].featureMember=(0,s.VT)(this.readFeaturesInternal),this.schemaLocation=t.schemaLocation?t.schemaLocation:h}readFlatCoordinates(t,e){const n=(0,s.mT)(t,!1).replace(/^\s*|\s*$/g,""),i=e[0].srsName;let o="enu";if(i){const t=(0,r.Jt)(i);t&&(o=t.getAxisOrientation())}const a=n.trim().split(/\s+/),l=[];for(let t=0,e=a.length;t<e;t++){const e=a[t].split(/,+/),n=parseFloat(e[0]),i=parseFloat(e[1]),r=3===e.length?parseFloat(e[2]):0;o.startsWith("en")?l.push(n,i,r):l.push(i,n,r)}return l}readBox(t,e){const n=(0,s.eY)([null],this.BOX_PARSERS_,t,e,this);return(0,i.N)(n[1][0],n[1][1],n[1][3],n[1][4])}innerBoundaryIsParser(t,e){const n=(0,s.eY)(void 0,this.RING_PARSERS,t,e,this);if(n){e[e.length-1].push(n)}}outerBoundaryIsParser(t,e){const n=(0,s.eY)(void 0,this.RING_PARSERS,t,e,this);if(n){e[e.length-1][0]=n}}GEOMETRY_NODE_FACTORY_(t,e,n){const i=e[e.length-1],r=i.multiSurface,o=i.surface,a=i.multiCurve;return Array.isArray(t)?n="Envelope":"MultiPolygon"===(n=t.getType())&&!0===r?n="MultiSurface":"Polygon"===n&&!0===o?n="Surface":"MultiLineString"===n&&!0===a&&(n="MultiCurve"),(0,s.qq)("http://www.opengis.net/gml",n)}writeFeatureElement(t,e,n){const i=e.getId();i&&t.setAttribute("fid",i);const r=n[n.length-1],o=r.featureNS,a=e.getGeometryName();r.serializers||(r.serializers={},r.serializers[o]={});const h=[],u=[];if(e.hasProperties()){const t=e.getProperties();for(const e in t){const n=t[e];null!=n&&(h.push(e),u.push(n),e==a||"function"==typeof n.getSimplifiedGeometry?e in r.serializers[o]||(r.serializers[o][e]=(0,s.mm)(this.writeGeometryElement,this)):e in r.serializers[o]||(r.serializers[o][e]=(0,s.mm)(l.uB)))}}const c=Object.assign({},r);c.node=t,(0,s.NQ)(c,r.serializers,(0,s.X1)(void 0,o),u,n,h)}writeCurveOrLineString(t,e,n){const i=n[n.length-1].srsName;if("LineStringSegment"!==t.nodeName&&i&&t.setAttribute("srsName",i),"LineString"===t.nodeName||"LineStringSegment"===t.nodeName){const i=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(i),this.writeCoordinates_(i,e,n)}else if("Curve"===t.nodeName){const i=(0,s.qq)(t.namespaceURI,"segments");t.appendChild(i),this.writeCurveSegments_(i,e,n)}}writeLineStringOrCurveMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeCurveOrLineString(i,e,n))}writeMultiCurveOrLineString(t,e,n){const i=n[n.length-1],r=i.hasZ,o=i.srsName,a=i.curve;o&&t.setAttribute("srsName",o);const l=e.getLineStrings();(0,s.NQ)({node:t,hasZ:r,srsName:o,curve:a},this.LINESTRINGORCURVEMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeGeometryElement(t,e,n){const i=n[n.length-1],r=Object.assign({},i);let a;r.node=t,a=Array.isArray(e)?(0,o.zU)(e,i):(0,o.hX)(e,!0,i),(0,s.NQ)(r,this.GEOMETRY_SERIALIZERS,this.GEOMETRY_NODE_FACTORY_,[a],n,void 0,this)}createCoordinatesNode_(t){const e=(0,s.qq)(t,"coordinates");return e.setAttribute("decimal","."),e.setAttribute("cs",","),e.setAttribute("ts"," "),e}writeCoordinates_(t,e,n){const i=n[n.length-1],r=i.hasZ,s=i.srsName,o=e.getCoordinates(),a=o.length,h=new Array(a);for(let t=0;t<a;++t){const e=o[t];h[t]=this.getCoords_(e,s,r)}(0,l.uB)(t,h.join(" "))}writeCurveSegments_(t,e,n){const i=(0,s.qq)(t.namespaceURI,"LineStringSegment");t.appendChild(i),this.writeCurveOrLineString(i,e,n)}writeSurfaceOrPolygon(t,e,n){const i=n[n.length-1],r=i.hasZ,o=i.srsName;if("PolygonPatch"!==t.nodeName&&o&&t.setAttribute("srsName",o),"Polygon"===t.nodeName||"PolygonPatch"===t.nodeName){const i=e.getLinearRings();(0,s.NQ)({node:t,hasZ:r,srsName:o},this.RING_SERIALIZERS,this.RING_NODE_FACTORY_,i,n,void 0,this)}else if("Surface"===t.nodeName){const i=(0,s.qq)(t.namespaceURI,"patches");t.appendChild(i),this.writeSurfacePatches_(i,e,n)}}RING_NODE_FACTORY_(t,e,n){const i=e[e.length-1],r=i.node,o=i.exteriorWritten;return void 0===o&&(i.exteriorWritten=!0),(0,s.qq)(r.namespaceURI,void 0!==o?"innerBoundaryIs":"outerBoundaryIs")}writeSurfacePatches_(t,e,n){const i=(0,s.qq)(t.namespaceURI,"PolygonPatch");t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n)}writeRing(t,e,n){const i=(0,s.qq)(t.namespaceURI,"LinearRing");t.appendChild(i),this.writeLinearRing(i,e,n)}getCoords_(t,e,n){let i=(e?(0,r.Jt)(e).getAxisOrientation():"enu").startsWith("en")?t[0]+","+t[1]:t[1]+","+t[0];if(n){i+=","+(t[2]||0)}return i}writePoint(t,e,n){const i=n[n.length-1],r=i.hasZ,s=i.srsName;s&&t.setAttribute("srsName",s);const o=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(o);const a=e.getCoordinates(),h=this.getCoords_(a,s,r);(0,l.uB)(o,h)}writeMultiPoint(t,e,n){const i=n[n.length-1],r=i.hasZ,o=i.srsName;o&&t.setAttribute("srsName",o);const a=e.getPoints();(0,s.NQ)({node:t,hasZ:r,srsName:o},this.POINTMEMBER_SERIALIZERS,(0,s.X1)("pointMember"),a,n,void 0,this)}writePointMember(t,e,n){const i=(0,s.qq)(t.namespaceURI,"Point");t.appendChild(i),this.writePoint(i,e,n)}writeLinearRing(t,e,n){const i=n[n.length-1].srsName;i&&t.setAttribute("srsName",i);const r=this.createCoordinatesNode_(t.namespaceURI);t.appendChild(r),this.writeCoordinates_(r,e,n)}writeMultiSurfaceOrPolygon(t,e,n){const i=n[n.length-1],r=i.hasZ,o=i.srsName,a=i.surface;o&&t.setAttribute("srsName",o);const l=e.getPolygons();(0,s.NQ)({node:t,hasZ:r,srsName:o,surface:a},this.SURFACEORPOLYGONMEMBER_SERIALIZERS,this.MULTIGEOMETRY_MEMBER_NODE_FACTORY_,l,n,void 0,this)}writeSurfaceOrPolygonMember(t,e,n){const i=this.GEOMETRY_NODE_FACTORY_(e,n);i&&(t.appendChild(i),this.writeSurfaceOrPolygon(i,e,n))}writeEnvelope(t,e,n){const i=n[n.length-1].srsName;i&&t.setAttribute("srsName",i);const r=[e[0]+" "+e[1],e[2]+" "+e[3]];(0,s.NQ)({node:t},this.ENVELOPE_SERIALIZERS,s.OL,r,n,["lowerCorner","upperCorner"],this)}MULTIGEOMETRY_MEMBER_NODE_FACTORY_(t,e,n){const i=e[e.length-1].node;return(0,s.qq)("http://www.opengis.net/gml",u[i.nodeName])}}c.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{coordinates:(0,s.Tb)(c.prototype.readFlatCoordinates)}},c.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{innerBoundaryIs:c.prototype.innerBoundaryIsParser,outerBoundaryIs:c.prototype.outerBoundaryIsParser}},c.prototype.BOX_PARSERS_={"http://www.opengis.net/gml":{coordinates:(0,s.VT)(c.prototype.readFlatCoordinates)}},c.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{Point:(0,s.Tb)(a.A.prototype.readPoint),MultiPoint:(0,s.Tb)(a.A.prototype.readMultiPoint),LineString:(0,s.Tb)(a.A.prototype.readLineString),MultiLineString:(0,s.Tb)(a.A.prototype.readMultiLineString),LinearRing:(0,s.Tb)(a.A.prototype.readLinearRing),Polygon:(0,s.Tb)(a.A.prototype.readPolygon),MultiPolygon:(0,s.Tb)(a.A.prototype.readMultiPolygon),Box:(0,s.Tb)(c.prototype.readBox)}},c.prototype.GEOMETRY_SERIALIZERS={"http://www.opengis.net/gml":{Curve:(0,s.mm)(c.prototype.writeCurveOrLineString),MultiCurve:(0,s.mm)(c.prototype.writeMultiCurveOrLineString),Point:(0,s.mm)(c.prototype.writePoint),MultiPoint:(0,s.mm)(c.prototype.writeMultiPoint),LineString:(0,s.mm)(c.prototype.writeCurveOrLineString),MultiLineString:(0,s.mm)(c.prototype.writeMultiCurveOrLineString),LinearRing:(0,s.mm)(c.prototype.writeLinearRing),Polygon:(0,s.mm)(c.prototype.writeSurfaceOrPolygon),MultiPolygon:(0,s.mm)(c.prototype.writeMultiSurfaceOrPolygon),Surface:(0,s.mm)(c.prototype.writeSurfaceOrPolygon),MultiSurface:(0,s.mm)(c.prototype.writeMultiSurfaceOrPolygon),Envelope:(0,s.mm)(c.prototype.writeEnvelope)}},c.prototype.LINESTRINGORCURVEMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{lineStringMember:(0,s.mm)(c.prototype.writeLineStringOrCurveMember),curveMember:(0,s.mm)(c.prototype.writeLineStringOrCurveMember)}},c.prototype.RING_SERIALIZERS={"http://www.opengis.net/gml":{outerBoundaryIs:(0,s.mm)(c.prototype.writeRing),innerBoundaryIs:(0,s.mm)(c.prototype.writeRing)}},c.prototype.POINTMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{pointMember:(0,s.mm)(c.prototype.writePointMember)}},c.prototype.SURFACEORPOLYGONMEMBER_SERIALIZERS={"http://www.opengis.net/gml":{surfaceMember:(0,s.mm)(c.prototype.writeSurfaceOrPolygonMember),polygonMember:(0,s.mm)(c.prototype.writeSurfaceOrPolygonMember)}},c.prototype.ENVELOPE_SERIALIZERS={"http://www.opengis.net/gml":{lowerCorner:(0,s.mm)(l.uB),upperCorner:(0,s.mm)(l.uB)}},e.A=c},6778:function(t,e,n){"use strict";n.d(e,{h2:function(){return f}});var i=n(92814),r=n(16235),s=n(31516),o=n(25231),a=n(45342);const l={"image/png":!0,"image/jpeg":!0,"image/gif":!0,"image/webp":!0},h={"application/vnd.mapbox-vector-tile":!0,"application/geo+json":!0};function u(t,e){if(!e.length)return t;const n=new URL(t,"file:/");if(n.pathname.split("/").includes("collections"))return(0,i.z3)('The "collections" query parameter cannot be added to collection endpoints'),t;const r=e.map((t=>encodeURIComponent(t))).join(",");n.searchParams.append("collections",r);return`${t.split("?")[0]}?${decodeURIComponent(n.searchParams.toString())}`}function c(t,e,n,i){let l=t.projection;if(!l&&("string"==typeof e.crs?l=(0,o.Jt)(e.crs):"uri"in e.crs&&(l=(0,o.Jt)(e.crs.uri)),!l))throw new Error(`Unsupported CRS: ${JSON.stringify(e.crs)}`);const h=e.orderedAxes,u=!(h?h.slice(0,2).map((t=>t.replace(/E|X|Lon/i,"e").replace(/N|Y|Lat/i,"n"))).join(""):l.getAxisOrientation()).startsWith("en"),c=e.tileMatrices,d={};for(let t=0;t<c.length;++t){const e=c[t];d[e.id]=e}const f={},p=[];if(i)for(let t=0;t<i.length;++t){const e=i[t],n=e.tileMatrix;p.push(n),f[n]=e}else for(let t=0;t<c.length;++t){const e=c[t].id;p.push(e)}const g=p.length,m=new Array(g),y=new Array(g),_=new Array(g),v=new Array(g),x=[-1/0,-1/0,1/0,1/0];for(let t=0;t<g;++t){const e=p[t],n=d[e],i=n.pointOfOrigin;m[t]=u?[i[1],i[0]]:i,y[t]=n.cellSize,_[t]=[n.matrixWidth,n.matrixHeight],v[t]=[n.tileWidth,n.tileHeight];const s=f[e];if(s){const e=n.cellSize*n.tileWidth,i=m[t][0]+s.minTileCol*e,o=m[t][0]+(s.maxTileCol+1)*e,a=n.cellSize*n.tileHeight;let l,h;"bottomLeft"===n.cornerOfOrigin?(l=m[t][1]+s.minTileRow*a,h=m[t][1]+(s.maxTileRow+1)*a):(l=m[t][1]-(s.maxTileRow+1)*a,h=m[t][1]-s.minTileRow*a),(0,r._N)(x,[i,l,o,h],x)}}const b=new a.A({origins:m,resolutions:y,sizes:_,tileSizes:v,extent:i?x:void 0}),w=t.context,A=t.url;return{grid:b,projection:l,urlTemplate:n,urlFunction:function(t,e,r){if(!t)return;const o=p[t[0]],a=d[o],l="bottomLeft"===a.cornerOfOrigin,h={tileMatrix:o,tileCol:t[1],tileRow:l?-t[2]-1:t[2]};if(i){const t=f[a.id];if(h.tileCol<t.minTileCol||h.tileCol>t.maxTileCol||h.tileRow<t.minTileRow||h.tileRow>t.maxTileRow)return}Object.assign(h,w);const u=n.replace(/\{(\w+?)\}/g,(function(t,e){return h[e]}));return(0,s.O2)(A,u)}}}function d(t,e){const n=e.tileMatrixSetLimits;let i;if("map"===e.dataType)i=function(t,e,n){let i,r;for(let n=0;n<t.length;++n){const s=t[n];if("item"===s.rel){if(s.type===e){i=s.href;break}(l[s.type]||!r&&s.type.startsWith("image/"))&&(r=s.href)}}if(!i){if(!r)throw new Error('Could not find "item" link');i=r}return n&&(i=u(i,n)),i}(e.links,t.mediaType,t.collections);else{if("vector"!==e.dataType)throw new Error('Expected tileset data type to be "map" or "vector"');i=function(t,e,n,i){let r,s;const o={};for(let n=0;n<t.length;++n){const i=t[n];if(o[i.type]=i.href,"item"===i.rel){if(i.type===e){r=i.href;break}h[i.type]&&(s=i.href)}}if(!r&&n)for(let t=0;t<n.length;++t){const e=n[t];if(o[e]){r=o[e];break}}if(!r){if(!s)throw new Error('Could not find "item" link');r=s}return i&&(r=u(r,i)),r}(e.links,t.mediaType,t.supportedMediaTypes,t.collections)}if(e.tileMatrixSet)return c(t,e.tileMatrixSet,i,n);const r=e.links.find((t=>"http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme"===t.rel));if(!r)throw new Error("Expected http://www.opengis.net/def/rel/ogc/1.0/tiling-scheme link or tileMatrixSet");const o=r.href,a=(0,s.O2)(t.url,o);return(0,s.hm)(a).then((function(e){return c(t,e,i,n)}))}function f(t){return(0,s.hm)(t.url).then((function(e){return d(t,e)}))}},6848:function(t,e,n){"use strict";var i=n(16235),r=n(31141),s=n(25231),o=n(96081),a=n(28606),l=n(62994),h=n(16649),u=n(38376),c=n(64740);class d extends u.A{constructor(t){t=t||{};const e=Object.assign({},t.params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,i.S5)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,n,r){const a=(0,s.Jt)(n),l=this.getProjection()||a;let h=this.getTileGrid();h||(h=this.getTileGridForProjection(l));const u=(0,s.pd)(t,a,l),d=(0,o.KQ)(l,a,t,e),f=h.getZForResolution(d,this.zDirection),p=h.getResolution(f),g=h.getTileCoordForCoordAndZ(u,f);if(h.getResolutions().length<=g[0])return;let m=h.getTileCoordExtent(g,this.tmpExtent_);const y=this.gutter_;0!==y&&(m=(0,i.r)(m,p*y,m));const _={QUERY_LAYERS:this.params_.LAYERS};Object.assign(_,(0,c.W3)(this.params_,"GetFeatureInfo"),r);const v=Math.floor((u[0]-m[0])/p),x=Math.floor((m[3]-u[1])/p);return _[this.v13_?"I":"X"]=v,_[this.v13_?"J":"Y"]=x,this.getRequestUrl_(g,m,1,l||a,_)}getLegendUrl(t,e){if(void 0===this.urls[0])return;const n={SERVICE:"WMS",VERSION:c.jD,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){const t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;n.LAYER=t}if(void 0!==t){const e=this.getProjection()?this.getProjection().getMetersPerUnit():1,i=28e-5;n.SCALE=t*e/i}return Object.assign(n,e),(0,h.LW)(this.urls[0],n)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,n,i,s){const o=this.urls;if(!o)return;let a;if(1==o.length)a=o[0];else{a=o[(0,r.xP)((0,l.tW)(t),o.length)]}return(0,c.AE)(e,(this.tileGrid||this.getTileGridForProjection(i)).getResolution(t[0]),n,i,a,s,this.serverType_)}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0;const e=[];for(const n in this.params_)e[t++]=n+"-"+this.params_[n];return e.join("/")}setParams_(t){this.params_=t,this.updateV13_(),this.setKey(this.getKeyForParams_())}setParams(t){this.setParams_(Object.assign({},t))}updateParams(t){this.setParams_(Object.assign(this.params_,t))}updateV13_(){const t=this.params_.VERSION||c.jD;this.v13_=(0,a.Z)(t,"1.3")>=0}tileUrlFunction(t,e,n){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(n)),r.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);const s=r.getResolution(t[0]);let o=r.getTileCoordExtent(t,this.tmpExtent_);const a=this.gutter_;0!==a&&(o=(0,i.r)(o,s*a,o));const l=Object.assign({},(0,c.W3)(this.params_,"GetMap"));return this.getRequestUrl_(t,o,e,n,l)}}e.A=d},7074:function(t,e,n){"use strict";n.d(e,{R3:function(){return a},UG:function(){return h},Yf:function(){return s},cY:function(){return u}});var i=n(31141);const r=6371008.8;function s(t,e,n){n=n||r;const s=(0,i.eh)(t[1]),o=(0,i.eh)(e[1]),a=(o-s)/2,l=(0,i.eh)(e[0]-t[0])/2,h=Math.sin(a)*Math.sin(a)+Math.sin(l)*Math.sin(l)*Math.cos(s)*Math.cos(o);return 2*n*Math.atan2(Math.sqrt(h),Math.sqrt(1-h))}function o(t,e){let n=0;for(let i=0,r=t.length;i<r-1;++i)n+=s(t[i],t[i+1],e);return n}function a(t,e){const n=(e=e||{}).radius||r,i=e.projection||"EPSG:3857",s=t.getType();"GeometryCollection"!==s&&(t=t.clone().transform(i,"EPSG:4326"));let l,h,u,c,d,f,p=0;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":l=t.getCoordinates(),p=o(l,n);break;case"MultiLineString":case"Polygon":for(l=t.getCoordinates(),u=0,c=l.length;u<c;++u)p+=o(l[u],n);break;case"MultiPolygon":for(l=t.getCoordinates(),u=0,c=l.length;u<c;++u)for(h=l[u],d=0,f=h.length;d<f;++d)p+=o(h[d],n);break;case"GeometryCollection":{const n=t.getGeometries();for(u=0,c=n.length;u<c;++u)p+=a(n[u],e);break}default:throw new Error("Unsupported geometry type: "+s)}return p}function l(t,e){let n=0;const r=t.length;let s=t[r-1][0],o=t[r-1][1];for(let e=0;e<r;e++){const r=t[e][0],a=t[e][1];n+=(0,i.eh)(r-s)*(2+Math.sin((0,i.eh)(o))+Math.sin((0,i.eh)(a))),s=r,o=a}return n*e*e/2}function h(t,e){const n=(e=e||{}).radius||r,i=e.projection||"EPSG:3857",s=t.getType();"GeometryCollection"!==s&&(t=t.clone().transform(i,"EPSG:4326"));let o,a,u,c,d,f,p=0;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":for(o=t.getCoordinates(),p=Math.abs(l(o[0],n)),u=1,c=o.length;u<c;++u)p-=Math.abs(l(o[u],n));break;case"MultiPolygon":for(o=t.getCoordinates(),u=0,c=o.length;u<c;++u)for(a=o[u],p+=Math.abs(l(a[0],n)),d=1,f=a.length;d<f;++d)p-=Math.abs(l(a[d],n));break;case"GeometryCollection":{const n=t.getGeometries();for(u=0,c=n.length;u<c;++u)p+=h(n[u],e);break}default:throw new Error("Unsupported geometry type: "+s)}return p}function u(t,e,n,s){s=s||r;const o=(0,i.eh)(t[1]),a=(0,i.eh)(t[0]),l=e/s,h=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(n)),u=a+Math.atan2(Math.sin(n)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(h));return[(0,i.xW)(u),(0,i.xW)(h)]}},7535:function(t,e,n){"use strict";var i=n(44090),r=n(16235),s=n(31141),o=n(40878),a=n(96728),l=n(93001),h=n(2337);class u extends a.Ay{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){(0,i.X$)(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new u(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<(0,r.Ld)(this.getExtent(),t,e))return i;const o=this.flatCoordinates,a=this.stride;for(let r=0,l=o.length;r<l;r+=a){const l=(0,s.hG)(t,e,o[r],o[r+1]);if(l<i){i=l;for(let t=0;t<a;++t)n[t]=o[r+t];n.length=a}}return i}getCoordinates(){return(0,h.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new o.A(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,i=[];for(let r=0,s=t.length;r<s;r+=n){const s=new o.A(t.slice(r,r+n),e);i.push(s)}return i}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let i=0,s=e.length;i<s;i+=n){const n=e[i],s=e[i+1];if((0,r.Rj)(t,n,s))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,l.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}e.A=u},7992:function(t,e,n){"use strict";n.d(e,{A:function(){return U}});var i=n(29837),r=n(46928),s=n(38177),o=n(48729),a=n(45090),l=n(3974),h=n(21133),u=n(38276),c=n(75052),d=n(28656),f=n(44689),p=n(88292),g=n(59194);function m(t){return!0}function y(t){const e=(0,o.SR)(),n=function(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r){const n=t[r],a="filter"in n?(0,s.n)(n.filter,o.T8,e):m;let l;if(Array.isArray(n.style)){const t=n.style.length;l=new Array(t);for(let i=0;i<t;++i)l[i]=v(n.style[i],e)}else l=[v(n.style,e)];i[r]={filter:a,styles:l}}return function(e){const r=[];let s=!1;for(let o=0;o<n;++o){if((0,i[o].filter)(e)&&(!t[o].else||!s)){s=!0;for(const t of i[o].styles){const n=t(e);n&&r.push(n)}}}return r}}(t,e),i=(0,s.A)();return function(t,r){if(i.properties=t.getPropertiesInternal(),i.resolution=r,e.featureId){const e=t.getId();i.featureId=void 0!==e?e:null}return e.geometryType&&(i.geometryType=(0,o.Ye)(t.getGeometry())),n(i)}}function _(t){const e=(0,o.SR)(),n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=v(t[r],e);const r=(0,s.A)(),a=new Array(n);return function(t,s){if(r.properties=t.getPropertiesInternal(),r.resolution=s,e.featureId){const e=t.getId();r.featureId=void 0!==e?e:null}let o=0;for(let t=0;t<n;++t){const e=i[t](r);e&&(a[o]=e,o+=1)}return a.length=o,a}}function v(t,e){const n=x(t,"",e),i=b(t,"",e),r=function(t,e){const n="text-",i=A(t,n+"value",e);if(!i)return null;const r=x(t,n,e),s=x(t,n+"background-",e),o=b(t,n,e),a=b(t,n+"background-",e),l=A(t,n+"font",e),h=w(t,n+"max-angle",e),u=w(t,n+"offset-x",e),c=w(t,n+"offset-y",e),d=S(t,n+"overflow",e),f=A(t,n+"placement",e),p=w(t,n+"repeat",e),m=L(t,n+"scale",e),y=S(t,n+"rotate-with-view",e),_=w(t,n+"rotation",e),v=A(t,n+"align",e),E=A(t,n+"justify",e),C=A(t,n+"baseline",e),M=S(t,n+"keep-upright",e),P=T(t,n+"padding",e),R=F(t,n+"declutter-mode"),I=new g.A({declutterMode:R});return function(t){if(I.setText(i(t)),r&&I.setFill(r(t)),s&&I.setBackgroundFill(s(t)),o&&I.setStroke(o(t)),a&&I.setBackgroundStroke(a(t)),l&&I.setFont(l(t)),h&&I.setMaxAngle(h(t)),u&&I.setOffsetX(u(t)),c&&I.setOffsetY(c(t)),d&&I.setOverflow(d(t)),f){const e=f(t);if("point"!==e&&"line"!==e)throw new Error("Expected point or line for text-placement");I.setPlacement(e)}if(p&&I.setRepeat(p(t)),m&&I.setScale(m(t)),y&&I.setRotateWithView(y(t)),_&&I.setRotation(_(t)),v){const e=v(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw new Error("Expected left, right, center, start, or end for text-align");I.setTextAlign(e)}if(E){const e=E(t);if("left"!==e&&"right"!==e&&"center"!==e)throw new Error("Expected left, right, or center for text-justify");I.setJustify(e)}if(C){const e=C(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");I.setTextBaseline(e)}return P&&I.setPadding(P(t)),M&&I.setKeepUpright(M(t)),I}}(t,e),s=function(t,e){if("icon-src"in t)return function(t,e){const n="icon-",i=n+"src",r=D(t[i],i),s=C(t,n+"anchor",e),o=L(t,n+"scale",e),a=w(t,n+"opacity",e),l=C(t,n+"displacement",e),h=w(t,n+"rotation",e),u=S(t,n+"rotate-with-view",e),d=I(t,n+"anchor-origin"),f=N(t,n+"anchor-x-units"),p=N(t,n+"anchor-y-units"),g=function(t,e){const n=t[e];if(void 0===n)return;return j(n,e)}(t,n+"color"),m=function(t,e){const n=t[e];if(void 0===n)return;if("string"!=typeof n)throw new Error(`Expected a string for ${e}`);return n}(t,n+"cross-origin"),y=function(t,e){const n=t[e];if(void 0===n)return;return k(n,e)}(t,n+"offset"),_=I(t,n+"offset-origin"),v=P(t,n+"width"),x=P(t,n+"height"),b=R(t,n+"size"),A=F(t,n+"declutter-mode"),E=new c.A({src:r,anchorOrigin:d,anchorXUnits:f,anchorYUnits:p,color:g,crossOrigin:m,offset:y,offsetOrigin:_,height:x,width:v,size:b,declutterMode:A});return function(t){return a&&E.setOpacity(a(t)),l&&E.setDisplacement(l(t)),h&&E.setRotation(h(t)),u&&E.setRotateWithView(u(t)),o&&E.setScale(o(t)),s&&E.setAnchor(s(t)),E}}(t,e);if("shape-points"in t)return function(t,e){const n="shape-",i=n+"points",r=n+"radius",s=O(t[i],i),o=O(t[r],r),a=x(t,n,e),l=b(t,n,e),h=L(t,n+"scale",e),u=C(t,n+"displacement",e),c=w(t,n+"rotation",e),f=S(t,n+"rotate-with-view",e),p=P(t,n+"radius2"),g=P(t,n+"angle"),m=F(t,n+"declutter-mode"),y=new d.A({points:s,radius:o,radius2:p,angle:g,declutterMode:m});return function(t){return a&&y.setFill(a(t)),l&&y.setStroke(l(t)),u&&y.setDisplacement(u(t)),c&&y.setRotation(c(t)),f&&y.setRotateWithView(f(t)),h&&y.setScale(h(t)),y}}(t,e);if("circle-radius"in t)return function(t,e){const n="circle-",i=x(t,n,e),r=b(t,n,e),s=w(t,n+"radius",e),o=L(t,n+"scale",e),a=C(t,n+"displacement",e),l=w(t,n+"rotation",e),u=S(t,n+"rotate-with-view",e),c=F(t,n+"declutter-mode"),d=new h.A({radius:5,declutterMode:c});return function(t){return s&&d.setRadius(s(t)),i&&d.setFill(i(t)),r&&d.setStroke(r(t)),a&&d.setDisplacement(a(t)),l&&d.setRotation(l(t)),u&&d.setRotateWithView(u(t)),o&&d.setScale(o(t)),d}}(t,e);return null}(t,e),o=w(t,"z-index",e);if(!(n||i||r||s||(0,a.p)(t)))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));const l=new p.Ay;return function(t){let e=!0;if(n){const i=n(t);i&&(e=!1),l.setFill(i)}if(i){const n=i(t);n&&(e=!1),l.setStroke(n)}if(r){const n=r(t);n&&(e=!1),l.setText(n)}if(s){const n=s(t);n&&(e=!1),l.setImage(n)}return o&&l.setZIndex(o(t)),e?null:l}}function x(t,e,n){let i;if(e+"fill-pattern-src"in t)i=function(t,e,n){const i=A(t,e+"pattern-src",n),r=M(t,e+"pattern-offset",n),s=M(t,e+"pattern-size",n),o=E(t,e+"color",n);return function(t){return{src:i(t),offset:r&&r(t),size:s&&s(t),color:o&&o(t)}}}(t,e+"fill-",n);else{if("none"===t[e+"fill-color"])return t=>null;i=E(t,e+"fill-color",n)}if(!i)return null;const s=new u.A;return function(t){const e=i(t);return e===r.qV?null:(s.setColor(e),s)}}function b(t,e,n){const i=w(t,e+"stroke-width",n),s=E(t,e+"stroke-color",n);if(!i&&!s)return null;const o=A(t,e+"stroke-line-cap",n),a=A(t,e+"stroke-line-join",n),l=T(t,e+"stroke-line-dash",n),h=w(t,e+"stroke-line-dash-offset",n),u=w(t,e+"stroke-miter-limit",n),c=new f.A;return function(t){if(s){const e=s(t);if(e===r.qV)return null;c.setColor(e)}if(i&&c.setWidth(i(t)),o){const e=o(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw new Error("Expected butt, round, or square line cap");c.setLineCap(e)}if(a){const e=a(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw new Error("Expected bevel, round, or miter line join");c.setLineJoin(e)}return l&&c.setLineDash(l(t)),h&&c.setLineDashOffset(h(t)),u&&c.setMiterLimit(u(t)),c}}function w(t,e,n){if(!(e in t))return;const i=(0,s.n)(t[e],o.wl,n);return function(t){return O(i(t),e)}}function A(t,e,n){if(!(e in t))return null;const i=(0,s.n)(t[e],o.cT,n);return function(t){return D(i(t),e)}}function S(t,e,n){if(!(e in t))return null;const i=(0,s.n)(t[e],o.T8,n);return function(t){const n=i(t);if("boolean"!=typeof n)throw new Error(`Expected a boolean for ${e}`);return n}}function E(t,e,n){if(!(e in t))return null;const i=(0,s.n)(t[e],o.mE,n);return function(t){return j(i(t),e)}}function T(t,e,n){if(!(e in t))return null;const i=(0,s.n)(t[e],o.Fq,n);return function(t){return k(i(t),e)}}function C(t,e,n){if(!(e in t))return null;const i=(0,s.n)(t[e],o.Fq,n);return function(t){const n=k(i(t),e);if(2!==n.length)throw new Error(`Expected two numbers for ${e}`);return n}}function M(t,e,n){if(!(e in t))return null;const i=(0,s.n)(t[e],o.Fq,n);return function(t){return G(i(t),e)}}function L(t,e,n){if(!(e in t))return null;const i=(0,s.n)(t[e],o.Fq|o.wl,n);return function(t){return function(t,e){if("number"==typeof t)return t;return G(t,e)}(i(t),e)}}function P(t,e){const n=t[e];if(void 0!==n){if("number"!=typeof n)throw new Error(`Expected a number for ${e}`);return n}}function R(t,e){const n=t[e];if(void 0!==n){if("number"==typeof n)return(0,l.xq)(n);if(!Array.isArray(n))throw new Error(`Expected a number or size array for ${e}`);if(2!==n.length||"number"!=typeof n[0]||"number"!=typeof n[1])throw new Error(`Expected a number or size array for ${e}`);return n}}function I(t,e){const n=t[e];if(void 0!==n){if("bottom-left"!==n&&"bottom-right"!==n&&"top-left"!==n&&"top-right"!==n)throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return n}}function N(t,e){const n=t[e];if(void 0!==n){if("pixels"!==n&&"fraction"!==n)throw new Error(`Expected pixels or fraction for ${e}`);return n}}function F(t,e){const n=t[e];if(void 0!==n){if("string"!=typeof n)throw new Error(`Expected a string for ${e}`);if("declutter"!==n&&"obstacle"!==n&&"none"!==n)throw new Error(`Expected declutter, obstacle, or none for ${e}`);return n}}function k(t,e){if(!Array.isArray(t))throw new Error(`Expected an array for ${e}`);const n=t.length;for(let i=0;i<n;++i)if("number"!=typeof t[i])throw new Error(`Expected an array of numbers for ${e}`);return t}function D(t,e){if("string"!=typeof t)throw new Error(`Expected a string for ${e}`);return t}function O(t,e){if("number"!=typeof t)throw new Error(`Expected a number for ${e}`);return t}function j(t,e){if("string"==typeof t)return t;const n=k(t,e),i=n.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${e}`);return n}function G(t,e){const n=k(t,e);if(2!==n.length)throw new Error(`Expected an array of two numbers for ${e}`);return n}var B=n(36804);const z="renderOrder";class q extends B.A{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(z)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const n=this.getDeclutter();n in t.declutter==!1&&(t.declutter[n]=new i.A(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(z,t)}setStyle(t){this.style_=void 0===t?p.d1:t;const e=function(t){if(void 0===t)return p.d1;if(!t)return null;if("function"==typeof t)return t;if(t instanceof p.Ay)return t;if(!Array.isArray(t))return _([t]);if(0===t.length)return[];const e=t.length,n=t[0];if(n instanceof p.Ay){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!(e instanceof p.Ay))throw new Error("Expected a list of style instances");n[i]=e}return n}if("style"in n){const n=new Array(e);for(let i=0;i<e;++i){const e=t[i];if(!("style"in e))throw new Error("Expected a list of rules with a style property");n[i]=e}return y(n)}const i=t;return _(i)}(t);this.styleFunction_=null===t?void 0:(0,p.mC)(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}var U=q},8631:function(t,e,n){"use strict";var i=n(22685),r=n(38808),s=n(31141),o=n(8860);class a extends o.Ay{constructor(t){super(t=t||{}),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=void 0!==t.maxDelta?t.maxDelta:1,this.duration_=void 0!==t.duration?t.duration:250,this.timeout_=void 0!==t.timeout?t.timeout:80,this.useAnchor_=void 0===t.useAnchor||t.useAnchor,this.constrainResolution_=void 0!==t.constrainResolution&&t.constrainResolution;const e=t.condition?t.condition:r.Gk;this.condition_=t.onFocusOnly?(0,r.Q7)(r.eL,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t))return!0;if(t.type!==i.A.WHEEL)return!0;const e=t.map,n=t.originalEvent;let r;if(n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel),t.type==i.A.WHEEL&&(r=n.deltaY,n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(r*=40)),0===r)return!1;this.lastDelta_=r;const s=Date.now();void 0===this.startTime_&&(this.startTime_=s),(!this.mode_||s-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(r)<4?"trackpad":"wheel");const o=e.getView();if("trackpad"===this.mode_&&!o.getConstrainResolution()&&!this.constrainResolution_)return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(o.getAnimating()&&o.cancelAnimations(),o.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),o.adjustZoom(-r/this.deltaPerZoom_,this.lastAnchor_?e.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=s,!1;this.totalDelta_+=r;const a=Math.max(this.timeout_-(s-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,e),a),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let n=-(0,s.qE)(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(n=n?n>0?1:-1:0),(0,o.D2)(e,n,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}e.A=a},8656:function(t,e,n){"use strict";n.d(e,{A:function(){return m}});var i=n(17306),r=n(16235),s=n(56037);class o extends i.A{constructor(t,e,n,i){super(t,e,n,i),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,n){if(!this.image_||this.maxExtent&&!(0,r.Ym)(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),o=t.getStride(),a=this.coordinates.length,l=this.appendFlatPointCoordinates(i,o);this.instructions.push([s.Ay.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([s.Ay.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,n){if(!this.image_)return;this.beginGeometry(t,e,n);const i=t.getFlatCoordinates(),o=[];for(let e=0,n=i.length;e<n;e+=t.getStride())this.maxExtent&&!(0,r.Ym)(this.maxExtent,i.slice(e,e+2))||o.push(i[e],i[e+1]);const a=this.coordinates.length,l=this.appendFlatPointCoordinates(o,2);this.instructions.push([s.Ay.DRAW_IMAGE,a,l,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([s.Ay.DRAW_IMAGE,a,l,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const n=t.getAnchor(),i=t.getSize(),r=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=n[0],this.anchorY_=n[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=i[1],this.opacity_=t.getOpacity(),this.originX_=r[0],this.originY_=r[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=i[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var a=o,l=n(27678);class h extends i.A{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinates_(t,e,n,i){const r=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,n,i,!1,!1),a=[s.Ay.MOVE_TO_LINE_TO,r,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),n}drawLineString(t,e,n){const i=this.state,r=i.strokeStyle,o=i.lineWidth;if(void 0===r||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,l.Oq,l.vk],s.th);const a=t.getFlatCoordinates(),h=t.getStride();this.drawFlatCoordinates_(a,0,a.length,h),this.hitDetectionInstructions.push(s.VD),this.endGeometry(e)}drawMultiLineString(t,e,n){const i=this.state,r=i.strokeStyle,o=i.lineWidth;if(void 0===r||void 0===o)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e,n),this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,l.Oq,l.vk],s.th);const a=t.getEnds(),h=t.getFlatCoordinates(),u=t.getStride();let c=0;for(let t=0,e=a.length;t<e;++t)c=this.drawFlatCoordinates_(h,c,a[t],u);this.hitDetectionInstructions.push(s.VD),this.endGeometry(e)}finish(){const t=this.state;return null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(s.VD),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){null!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(s.VD),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(s.th)}}var u=h,c=n(60447);class d extends i.A{constructor(t,e,n,i){super(t,e,n,i)}drawFlatCoordinatess_(t,e,n,i){const r=this.state,o=void 0!==r.fillStyle,a=void 0!==r.strokeStyle,l=n.length;this.instructions.push(s.th),this.hitDetectionInstructions.push(s.th);for(let r=0;r<l;++r){const o=n[r],l=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,o,i,!0,!a),u=[s.Ay.MOVE_TO_LINE_TO,l,h];this.instructions.push(u),this.hitDetectionInstructions.push(u),a&&(this.instructions.push(s.kx),this.hitDetectionInstructions.push(s.kx)),e=o}return o&&(this.instructions.push(s.I5),this.hitDetectionInstructions.push(s.I5)),a&&(this.instructions.push(s.VD),this.hitDetectionInstructions.push(s.VD)),e}drawCircle(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0===r&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([s.Ay.SET_FILL_STYLE,l.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,l.Oq,l.vk]);const a=t.getFlatCoordinates(),h=t.getStride(),u=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,h,!1,!1);const c=[s.Ay.CIRCLE,u];this.instructions.push(s.th,c),this.hitDetectionInstructions.push(s.th,c),void 0!==i.fillStyle&&(this.instructions.push(s.I5),this.hitDetectionInstructions.push(s.I5)),void 0!==i.strokeStyle&&(this.instructions.push(s.VD),this.hitDetectionInstructions.push(s.VD)),this.endGeometry(e)}drawPolygon(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0===r&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([s.Ay.SET_FILL_STYLE,l.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,l.Oq,l.vk]);const a=t.getEnds(),h=t.getOrientedFlatCoordinates(),u=t.getStride();this.drawFlatCoordinatess_(h,0,a,u),this.endGeometry(e)}drawMultiPolygon(t,e,n){const i=this.state,r=i.fillStyle,o=i.strokeStyle;if(void 0===r&&void 0===o)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,n),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([s.Ay.SET_FILL_STYLE,l.qY]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([s.Ay.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,l.Oq,l.vk]);const a=t.getEndss(),h=t.getOrientedFlatCoordinates(),u=t.getStride();let c=0;for(let t=0,e=a.length;t<e;++t)c=this.drawFlatCoordinatess_(h,c,a[t],u);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(0!==t){const e=this.coordinates;for(let n=0,i=e.length;n<i;++n)e[n]=(0,c.n$)(e[n],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var f=d,p=n(95792);const g={Circle:f,Default:i.A,Image:a,LineString:u,Polygon:f,Text:p.A};var m=class{constructor(t,e,n,i){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=i,this.resolution_=n,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const n=this.buildersByZIndex_[e];for(const i in n){const r=n[i].finish();t[e][i]=r}}return t}getBuilder(t,e){const n=void 0!==t?t.toString():"0";let i=this.buildersByZIndex_[n];void 0===i&&(i={},this.buildersByZIndex_[n]=i);let r=i[e];if(void 0===r){r=new(0,g[e])(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),i[e]=r}return r}}},8841:function(t,e,n){"use strict";var i=n(61341),r=n(92662),s=n(38941),o=n(25231),a=n(73988);const l="projection",h="coordinateFormat";class u extends a.A{constructor(t){t=t||{};const e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(l,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==t.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(h)}getProjection(){return this.get(l)}handleMouseMove(t){const e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){const e=t.getViewport();this.listenerKeys.push((0,r.KT)(e,s.A.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,r.KT)(e,s.A.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(h,t)}setProjection(t){this.set(l,(0,o.Jt)(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){const t=this.getProjection();this.transform_=t?(0,o.FO)(this.mapProjection_,t):o.R6}const n=this.getMap().getCoordinateFromPixelInternal(t);if(n){const t=(0,o.Tf)();if(t&&(this.transform_=(0,o.FO)(this.mapProjection_,t)),this.transform_(n,n),this.wrapX_){const e=t||this.getProjection()||this.mapProjection_;(0,i.Li)(n,e)}const r=this.getCoordinateFormat();e=r?r(n):n.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){const e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}e.A=u},8860:function(t,e,n){"use strict";n.d(e,{D2:function(){return l},e4:function(){return a}});var i=n(70192),r=n(426),s=n(19155);class o extends i.A{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(s.A.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(s.A.ACTIVE,t)}setMap(t){this.map_=t}}function a(t,e,n){const i=t.getCenterInternal();if(i){const s=[i[0]+e[0],i[1]+e[1]];t.animateInternal({duration:void 0!==n?n:250,easing:r.sn,center:t.getConstrainedCenter(s)})}}function l(t,e,n,i){const s=t.getZoom();if(void 0===s)return;const o=t.getConstrainedZoom(s+e),a=t.getResolutionForZoom(o);t.getAnimating()&&t.cancelAnimations(),t.animate({resolution:a,anchor:n,duration:void 0!==i?i:250,easing:r.vT})}e.Ay=o},9226:function(t,e,n){"use strict";var i=n(28e3),r=n(55238);const s={stamen_terrain:{extension:"png"},stamen_terrain_background:{extension:"png"},stamen_terrain_labels:{extension:"png"},stamen_terrain_lines:{extension:"png"},stamen_toner_background:{extension:"png"},stamen_toner:{extension:"png"},stamen_toner_labels:{extension:"png"},stamen_toner_lines:{extension:"png"},stamen_toner_lite:{extension:"png"},stamen_watercolor:{extension:"jpg"},alidade_smooth:{extension:"png"},alidade_smooth_dark:{extension:"png"},alidade_satellite:{extension:"png"},outdoors:{extension:"png"},osm_bright:{extension:"png"}},o={stamen_terrain:{minZoom:0,maxZoom:18,retina:!0},stamen_toner:{minZoom:0,maxZoom:20,retina:!0},stamen_watercolor:{minZoom:1,maxZoom:18,retina:!1}};class a extends r.A{constructor(t){const e=t.layer.indexOf("-"),n=-1==e?t.layer:t.layer.slice(0,e),r=o[n]||{minZoom:0,maxZoom:20,retina:!0},a=s[t.layer],l=t.apiKey?"?api_key="+t.apiKey:"",h=r.retina&&t.retina?"@2x":"",u=void 0!==t.url?t.url:"https://tiles.stadiamaps.com/tiles/"+t.layer+"/{z}/{x}/{y}"+h+"."+a.extension+l,c=['&copy; <a href="https://www.stadiamaps.com/" target="_blank">Stadia Maps</a>','&copy; <a href="https://openmaptiles.org/" target="_blank">OpenMapTiles</a>',i.o];t.layer.startsWith("stamen_")&&c.splice(1,0,'&copy; <a href="https://stamen.com/" target="_blank">Stamen Design</a>'),super({attributions:c,cacheSize:t.cacheSize,crossOrigin:"anonymous",interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:r.maxZoom,minZoom:void 0!==t.minZoom?t.minZoom:r.minZoom,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:u,tilePixelRatio:h?2:1,wrapX:t.wrapX,zDirection:t.zDirection})}}e.A=a},9424:function(t,e){"use strict";e.A={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}},9444:function(t,e,n){"use strict";n.d(e,{Xs:function(){return U},ge:function(){return W}});var i=n(51541),r=n(40237),s=n(25309),o=n(61341),a=n(18381),l=n(22685),h=n(38808),u=n(16235),c=n(95702),d=n(92198),f=n(29050),p=n(77833),g=n(59286),m=n(7535),y=n(69727),_=n(40878),v=n(30470),x=n(96728),b=n(23986),w=n(31141),A=n(25231),S=n(29810),E=n(88292),T=n(87113),C=n(19155);const M="drawstart",L="drawend",P="drawabort";class R extends a.Ay{constructor(t,e){super(t),this.feature=e}}function I(t,e){return(0,w.hG)(t[0],t[1],e[0],e[1])}function N(t,e){const n=t.length;return e<0?t[e+n]:e>=n?t[e-n]:t[e]}function F(t,e,n){let i,r;e<n?(i=e,r=n):(i=n,r=e);const s=Math.ceil(i),o=Math.floor(r);if(s>o){return I(B(t,i),B(t,r))}let a=0;if(i<s){a+=I(B(t,i),N(t,s))}if(o<r){a+=I(N(t,o),B(t,r))}for(let e=s;e<o-1;++e){a+=I(N(t,e),N(t,e+1))}return a}function k(t,e,n){if(e instanceof p.A)O(t,e.getCoordinates(),!1,n);else if(e instanceof g.A){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e)O(t,i[e],!1,n)}else if(e instanceof v.Ay){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e)O(t,i[e],!0,n)}else if(e instanceof y.A){const i=e.getCoordinates();for(let e=0,r=i.length;e<r;++e){const r=i[e];for(let e=0,i=r.length;e<i;++e)O(t,r[e],!0,n)}}else if(e instanceof f.A){const i=e.getGeometries();for(let e=0;e<i.length;++e)k(t,i[e],n)}else;}const D={index:-1,endIndex:NaN};function O(t,e,n,i){const r=t[0],s=t[1];for(let t=0,o=e.length-1;t<o;++t){const o=G(r,s,e[t],e[t+1]);if(0===o.squaredDistance){const r=t+o.along;return void i.push({coordinates:e,ring:n,startIndex:r,endIndex:r})}}}const j={along:0,squaredDistance:0};function G(t,e,n,i){const r=n[0],s=n[1],o=i[0]-r,a=i[1]-s;let l=0,h=r,u=s;return 0===o&&0===a||(l=(0,w.qE)(((t-r)*o+(e-s)*a)/(o*o+a*a),0,1),h+=o*l,u+=a*l),j.along=l,j.squaredDistance=(0,w.Mg)((0,w.hG)(t,e,h,u),10),j}function B(t,e){const n=t.length;let i=Math.floor(e);const r=e-i;i>=n?i-=n:i<0&&(i+=n);let s=i+1;s>=n&&(s-=n);const o=t[i],a=o[0],l=o[1],h=t[s];return[a+(h[0]-a)*r,l+(h[1]-l)*r]}class z extends T.A{constructor(t){const e=t;e.stopDown||(e.stopDown=c.W8),super(e),this.on,this.once,this.un,this.shouldHandle_=!1,this.downPx_=null,this.downTimeout_,this.lastDragTime_,this.pointerType_,this.freehand_=!1,this.source_=t.source?t.source:null,this.features_=t.features?t.features:null,this.snapTolerance_=t.snapTolerance?t.snapTolerance:12,this.type_=t.type,this.mode_=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"Circle":return"Circle";default:throw new Error("Invalid type: "+t)}}(this.type_),this.stopClick_=!!t.stopClick,this.minPoints_=t.minPoints?t.minPoints:"Polygon"===this.mode_?3:2,this.maxPoints_="Circle"===this.mode_?2:t.maxPoints?t.maxPoints:1/0,this.finishCondition_=t.finishCondition?t.finishCondition:c.rT,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY";let n=t.geometryFunction;if(!n){const t=this.mode_;if("Circle"===t)n=(t,e,n)=>{const i=e||new d.A([NaN,NaN]),r=(0,A.Ad)(t[0],n),s=(0,o.hG)(r,(0,A.Ad)(t[t.length-1],n));i.setCenterAndRadius(r,Math.sqrt(s),this.geometryLayout_);const a=(0,A.Tf)();return a&&i.transform(n,a),i};else{let e;"Point"===t?e=_.A:"LineString"===t?e=p.A:"Polygon"===t&&(e=v.Ay),n=(n,i,r)=>(i?"Polygon"===t?n[0].length?i.setCoordinates([n[0].concat([n[0][0]])],this.geometryLayout_):i.setCoordinates([],this.geometryLayout_):i.setCoordinates(n,this.geometryLayout_):i=new e(n,this.geometryLayout_),i)}}this.geometryFunction_=n,this.dragVertexDelay_=void 0!==t.dragVertexDelay?t.dragVertexDelay:500,this.finishCoordinate_=null,this.sketchFeature_=null,this.sketchPoint_=null,this.sketchCoords_=null,this.sketchLine_=null,this.sketchLineCoords_=null,this.squaredClickTolerance_=t.clickTolerance?t.clickTolerance*t.clickTolerance:36,this.overlay_=new b.A({source:new S.A({useSpatialIndex:!1,wrapX:!!t.wrapX&&t.wrapX}),style:t.style?t.style:q(),updateWhileInteracting:!0}),this.geometryName_=t.geometryName,this.condition_=t.condition?t.condition:h.TS,this.freehandCondition_,t.freehand?this.freehandCondition_=h.Gk:this.freehandCondition_=t.freehandCondition?t.freehandCondition:h.Kg,this.traceCondition_,this.setTrace(t.trace||!1),this.traceState_={active:!1},this.traceSource_=t.traceSource||t.source||null,this.addChangeListener(C.A.ACTIVE,this.updateState_)}setTrace(t){let e;e=t?!0===t?h.Gk:t:h.Zm,this.traceCondition_=e}setMap(t){super.setMap(t),this.updateState_()}getOverlay(){return this.overlay_}handleEvent(t){t.originalEvent.type===l.A.CONTEXTMENU&&t.originalEvent.preventDefault(),this.freehand_="Point"!==this.mode_&&this.freehandCondition_(t);let e=t.type===s.A.POINTERMOVE,n=!0;if(!this.freehand_&&this.lastDragTime_&&t.type===s.A.POINTERDRAG){Date.now()-this.lastDragTime_>=this.dragVertexDelay_?(this.downPx_=t.pixel,this.shouldHandle_=!this.freehand_,e=!0):this.lastDragTime_=void 0,this.shouldHandle_&&void 0!==this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0)}return this.freehand_&&t.type===s.A.POINTERDRAG&&null!==this.sketchFeature_?(this.addToDrawing_(t.coordinate),n=!1):this.freehand_&&t.type===s.A.POINTERDOWN?n=!1:e&&this.getPointerCount()<2?(n=t.type===s.A.POINTERMOVE,n&&this.freehand_?(this.handlePointerMove_(t),this.shouldHandle_&&t.originalEvent.preventDefault()):("mouse"===t.originalEvent.pointerType||t.type===s.A.POINTERDRAG&&void 0===this.downTimeout_)&&this.handlePointerMove_(t)):t.type===s.A.DBLCLICK&&(n=!1),super.handleEvent(t)&&n}handleDownEvent(t){return this.shouldHandle_=!this.freehand_,this.freehand_?(this.downPx_=t.pixel,this.finishCoordinate_||this.startDrawing_(t.coordinate),!0):this.condition_(t)?(this.lastDragTime_=Date.now(),this.downTimeout_=setTimeout((()=>{this.handlePointerMove_(new r.A(s.A.POINTERMOVE,t.map,t.originalEvent,!1,t.frameState))}),this.dragVertexDelay_),this.downPx_=t.pixel,!0):(this.lastDragTime_=void 0,!1)}deactivateTrace_(){this.traceState_={active:!1}}toggleTraceState_(t){if(!this.traceSource_||!this.traceCondition_(t))return;if(this.traceState_.active)return void this.deactivateTrace_();const e=this.getMap(),n=e.getCoordinateFromPixel([t.pixel[0]-this.snapTolerance_,t.pixel[1]+this.snapTolerance_]),i=e.getCoordinateFromPixel([t.pixel[0]+this.snapTolerance_,t.pixel[1]-this.snapTolerance_]),r=(0,u.Tr)([n,i]),s=this.traceSource_.getFeaturesInExtent(r);if(0===s.length)return;const o=function(t,e){const n=[];for(let i=0;i<e.length;++i)k(t,e[i].getGeometry(),n);return n}(t.coordinate,s);o.length&&(this.traceState_={active:!0,startPx:t.pixel.slice(),targets:o,targetIndex:-1})}addOrRemoveTracedCoordinates_(t,e){const n=t.startIndex<=t.endIndex;n===t.startIndex<=e?n&&e>t.endIndex||!n&&e<t.endIndex?this.addTracedCoordinates_(t,t.endIndex,e):(n&&e<t.endIndex||!n&&e>t.endIndex)&&this.removeTracedCoordinates_(e,t.endIndex):(this.removeTracedCoordinates_(t.startIndex,t.endIndex),this.addTracedCoordinates_(t,t.startIndex,e))}removeTracedCoordinates_(t,e){if(t===e)return;let n=0;if(t<e){const i=Math.ceil(t);let r=Math.floor(e);r===e&&(r-=1),n=r-i+1}else{const i=Math.floor(t);let r=Math.ceil(e);r===e&&(r+=1),n=i-r+1}n>0&&this.removeLastPoints_(n)}addTracedCoordinates_(t,e,n){if(e===n)return;const i=[];if(e<n){const r=Math.ceil(e);let s=Math.floor(n);s===n&&(s-=1);for(let e=r;e<=s;++e)i.push(N(t.coordinates,e))}else{const r=Math.floor(e);let s=Math.ceil(n);s===n&&(s+=1);for(let e=r;e>=s;--e)i.push(N(t.coordinates,e))}i.length&&this.appendCoordinates(i)}updateTrace_(t){const e=this.traceState_;if(!e.active)return;if(-1===e.targetIndex&&(0,o.Io)(e.startPx,t.pixel)<this.snapTolerance_)return;const n=function(t,e,n,i){const r=t[0],s=t[1];let a=1/0,l=-1,h=NaN;for(let t=0;t<e.targets.length;++t){const n=e.targets[t],i=n.coordinates;let o,u=1/0;for(let t=0;t<i.length-1;++t){const e=G(r,s,i[t],i[t+1]);e.squaredDistance<u&&(u=e.squaredDistance,o=t+e.along)}u<a&&(a=u,n.ring&&e.targetIndex===t&&(n.endIndex>n.startIndex?o<n.startIndex&&(o+=i.length):n.endIndex<n.startIndex&&o>n.startIndex&&(o-=i.length)),h=o,l=t)}const u=e.targets[l];let c=u.ring;if(e.targetIndex===l&&c){const t=B(u.coordinates,h),r=n.getPixelFromCoordinate(t);(0,o.Io)(r,e.startPx)>i&&(c=!1)}if(c){const t=u.coordinates,e=t.length,n=u.startIndex,i=h;if(n<i){const r=F(t,n,i);F(t,n,i-e)<r&&(h-=e)}else{const r=F(t,n,i);F(t,n,i+e)<r&&(h+=e)}}return D.index=l,D.endIndex=h,D}(t.coordinate,e,this.getMap(),this.snapTolerance_);if(e.targetIndex!==n.index){if(-1!==e.targetIndex){const t=e.targets[e.targetIndex];this.removeTracedCoordinates_(t.startIndex,t.endIndex)}const t=e.targets[n.index];this.addTracedCoordinates_(t,t.startIndex,n.endIndex)}else{const t=e.targets[e.targetIndex];this.addOrRemoveTracedCoordinates_(t,n.endIndex)}e.targetIndex=n.index;const i=e.targets[e.targetIndex];i.endIndex=n.endIndex;const r=B(i.coordinates,i.endIndex),s=this.getMap().getPixelFromCoordinate(r);t.coordinate=r,t.pixel=[Math.round(s[0]),Math.round(s[1])]}handleUpEvent(t){let e=!0;if(0===this.getPointerCount()){this.downTimeout_&&(clearTimeout(this.downTimeout_),this.downTimeout_=void 0),this.handlePointerMove_(t);const n=this.traceState_.active;if(this.toggleTraceState_(t),this.shouldHandle_){const i=!this.finishCoordinate_;i&&this.startDrawing_(t.coordinate),!i&&this.freehand_?this.finishDrawing():this.freehand_||i&&"Point"!==this.mode_||(this.atFinish_(t.pixel,n)?this.finishCondition_(t)&&this.finishDrawing():this.addToDrawing_(t.coordinate)),e=!1}else this.freehand_&&this.abortDrawing()}return!e&&this.stopClick_&&t.preventDefault(),e}handlePointerMove_(t){if(this.pointerType_=t.originalEvent.pointerType,this.downPx_&&(!this.freehand_&&this.shouldHandle_||this.freehand_&&!this.shouldHandle_)){const e=this.downPx_,n=t.pixel,i=e[0]-n[0],r=e[1]-n[1],s=i*i+r*r;if(this.shouldHandle_=this.freehand_?s>this.squaredClickTolerance_:s<=this.squaredClickTolerance_,!this.shouldHandle_)return}this.finishCoordinate_?(this.updateTrace_(t),this.modifyDrawing_(t.coordinate)):this.createOrUpdateSketchPoint_(t.coordinate.slice())}atFinish_(t,e){let n=!1;if(this.sketchFeature_){let i=!1,r=[this.finishCoordinate_];const s=this.mode_;if("Point"===s)n=!0;else if("Circle"===s)n=2===this.sketchCoords_.length;else if("LineString"===s)i=!e&&this.sketchCoords_.length>this.minPoints_;else if("Polygon"===s){const t=this.sketchCoords_;i=t[0].length>this.minPoints_,r=[t[0][0],t[0][t[0].length-2]],r=e?[t[0][0]]:[t[0][0],t[0][t[0].length-2]]}if(i){const e=this.getMap();for(let i=0,s=r.length;i<s;i++){const s=r[i],o=e.getPixelFromCoordinate(s),a=t[0]-o[0],l=t[1]-o[1],h=this.freehand_?1:this.snapTolerance_;if(n=Math.sqrt(a*a+l*l)<=h,n){this.finishCoordinate_=s;break}}}}return n}createOrUpdateSketchPoint_(t){if(this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}else this.sketchPoint_=new i.A(new _.A(t)),this.updateSketchFeatures_()}createOrUpdateCustomSketchLine_(t){this.sketchLine_||(this.sketchLine_=new i.A);const e=t.getLinearRing(0);let n=this.sketchLine_.getGeometry();n?(n.setFlatCoordinates(e.getLayout(),e.getFlatCoordinates()),n.changed()):(n=new p.A(e.getFlatCoordinates(),e.getLayout()),this.sketchLine_.setGeometry(n))}startDrawing_(t){const e=this.getMap().getView().getProjection(),n=(0,x.dn)(this.geometryLayout_);for(;t.length<n;)t.push(0);this.finishCoordinate_=t,"Point"===this.mode_?this.sketchCoords_=t.slice():"Polygon"===this.mode_?(this.sketchCoords_=[[t.slice(),t.slice()]],this.sketchLineCoords_=this.sketchCoords_[0]):this.sketchCoords_=[t.slice(),t.slice()],this.sketchLineCoords_&&(this.sketchLine_=new i.A(new p.A(this.sketchLineCoords_)));const r=this.geometryFunction_(this.sketchCoords_,void 0,e);this.sketchFeature_=new i.A,this.geometryName_&&this.sketchFeature_.setGeometryName(this.geometryName_),this.sketchFeature_.setGeometry(r),this.updateSketchFeatures_(),this.dispatchEvent(new R(M,this.sketchFeature_))}modifyDrawing_(t){const e=this.getMap(),n=this.sketchFeature_.getGeometry(),i=e.getView().getProjection(),r=(0,x.dn)(this.geometryLayout_);let s,o;for(;t.length<r;)t.push(0);if("Point"===this.mode_?o=this.sketchCoords_:"Polygon"===this.mode_?(s=this.sketchCoords_[0],o=s[s.length-1],this.atFinish_(e.getPixelFromCoordinate(t))&&(t=this.finishCoordinate_.slice())):(s=this.sketchCoords_,o=s[s.length-1]),o[0]=t[0],o[1]=t[1],this.geometryFunction_(this.sketchCoords_,n,i),this.sketchPoint_){this.sketchPoint_.getGeometry().setCoordinates(t)}if("Polygon"===n.getType()&&"Polygon"!==this.mode_)this.createOrUpdateCustomSketchLine_(n);else if(this.sketchLineCoords_){this.sketchLine_.getGeometry().setCoordinates(this.sketchLineCoords_)}this.updateSketchFeatures_()}addToDrawing_(t){const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection();let i,r;const s=this.mode_;return"LineString"===s||"Circle"===s?(this.finishCoordinate_=t.slice(),r=this.sketchCoords_,r.length>=this.maxPoints_&&(this.freehand_?r.pop():i=!0),r.push(t.slice()),this.geometryFunction_(r,e,n)):"Polygon"===s&&(r=this.sketchCoords_[0],r.length>=this.maxPoints_&&(this.freehand_?r.pop():i=!0),r.push(t.slice()),i&&(this.finishCoordinate_=r[0]),this.geometryFunction_(this.sketchCoords_,e,n)),this.createOrUpdateSketchPoint_(t.slice()),this.updateSketchFeatures_(),i?this.finishDrawing():this.sketchFeature_}removeLastPoints_(t){if(!this.sketchFeature_)return;const e=this.sketchFeature_.getGeometry(),n=this.getMap().getView().getProjection(),i=this.mode_;for(let r=0;r<t;++r){let t;if("LineString"===i||"Circle"===i){if(t=this.sketchCoords_,t.splice(-2,1),t.length>=2){this.finishCoordinate_=t[t.length-2].slice();const e=this.finishCoordinate_.slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}this.geometryFunction_(t,e,n),"Polygon"===e.getType()&&this.sketchLine_&&this.createOrUpdateCustomSketchLine_(e)}else if("Polygon"===i){t=this.sketchCoords_[0],t.splice(-2,1);const i=this.sketchLine_.getGeometry();if(t.length>=2){const e=t[t.length-2].slice();t[t.length-1]=e,this.createOrUpdateSketchPoint_(e)}i.setCoordinates(t),this.geometryFunction_(this.sketchCoords_,e,n)}if(1===t.length){this.abortDrawing();break}}this.updateSketchFeatures_()}removeLastPoint(){this.removeLastPoints_(1)}finishDrawing(){const t=this.abortDrawing_();if(!t)return null;let e=this.sketchCoords_;const n=t.getGeometry(),i=this.getMap().getView().getProjection();return"LineString"===this.mode_?(e.pop(),this.geometryFunction_(e,n,i)):"Polygon"===this.mode_&&(e[0].pop(),this.geometryFunction_(e,n,i),e=n.getCoordinates()),"MultiPoint"===this.type_?t.setGeometry(new m.A([e])):"MultiLineString"===this.type_?t.setGeometry(new g.A([e])):"MultiPolygon"===this.type_&&t.setGeometry(new y.A([e])),this.dispatchEvent(new R(L,t)),this.features_&&this.features_.push(t),this.source_&&this.source_.addFeature(t),t}abortDrawing_(){this.finishCoordinate_=null;const t=this.sketchFeature_;return this.sketchFeature_=null,this.sketchPoint_=null,this.sketchLine_=null,this.overlay_.getSource().clear(!0),this.deactivateTrace_(),t}abortDrawing(){const t=this.abortDrawing_();t&&this.dispatchEvent(new R(P,t))}appendCoordinates(t){const e=this.mode_,n=!this.sketchFeature_;let i;if(n&&this.startDrawing_(t[0]),"LineString"===e||"Circle"===e)i=this.sketchCoords_;else{if("Polygon"!==e)return;i=this.sketchCoords_&&this.sketchCoords_.length?this.sketchCoords_[0]:[]}n&&i.shift(),i.pop();for(let e=0;e<t.length;e++)this.addToDrawing_(t[e]);const r=t[t.length-1];this.sketchFeature_=this.addToDrawing_(r),this.modifyDrawing_(r)}extend(t){const e=t.getGeometry();this.sketchFeature_=t,this.sketchCoords_=e.getCoordinates();const n=this.sketchCoords_[this.sketchCoords_.length-1];this.finishCoordinate_=n.slice(),this.sketchCoords_.push(n.slice()),this.sketchPoint_=new i.A(new _.A(n)),this.updateSketchFeatures_(),this.dispatchEvent(new R(M,this.sketchFeature_))}updateSketchFeatures_(){const t=[];this.sketchFeature_&&t.push(this.sketchFeature_),this.sketchLine_&&t.push(this.sketchLine_),this.sketchPoint_&&t.push(this.sketchPoint_);const e=this.overlay_.getSource();e.clear(!0),e.addFeatures(t)}updateState_(){const t=this.getMap(),e=this.getActive();t&&e||this.abortDrawing(),this.overlay_.setMap(e?t:null)}}function q(){const t=(0,E.mY)();return function(e,n){return t[e.getGeometry().getType()]}}function U(t,e){return function(n,i,r){const s=(0,A.Ad)(n[0],r),a=(0,A.Ad)(n[n.length-1],r),l=Math.sqrt((0,o.hG)(s,a));i=i||(0,v.nD)(new d.A(s),t);let h=e;if(!e&&0!==e){const t=a[0]-s[0],e=a[1]-s[1];h=Math.atan2(e,t)}(0,v.Tf)(i,s,l,h);const u=(0,A.Tf)();return u&&i.transform(r,u),i}}function W(){return function(t,e,n){const i=(0,u.Tr)([t[0],t[t.length-1]].map((function(t){return(0,A.Ad)(t,n)}))),r=[[(0,u.R)(i),(0,u.k_)(i),(0,u.WU)(i),(0,u.Py)(i),(0,u.R)(i)]];e?e.setCoordinates(r):e=new v.Ay(r);const s=(0,A.Tf)();return s&&e.transform(n,s),e}}e.Ay=z},9466:function(t,e,n){"use strict";function i(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function r(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}function s(t,e,n,i,r,s,o){const a=1/(t-e),l=1/(n-i),h=1/(r-s);return(o=o??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=-2*a,o[1]=0,o[2]=0,o[3]=0,o[4]=0,o[5]=-2*l,o[6]=0,o[7]=0,o[8]=0,o[9]=0,o[10]=2*h,o[11]=0,o[12]=(t+e)*a,o[13]=(i+n)*l,o[14]=(s+r)*h,o[15]=1,o}function o(t,e,n,i,r){return(r=r??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=t[0]*e,r[1]=t[1]*e,r[2]=t[2]*e,r[3]=t[3]*e,r[4]=t[4]*n,r[5]=t[5]*n,r[6]=t[6]*n,r[7]=t[7]*n,r[8]=t[8]*i,r[9]=t[9]*i,r[10]=t[10]*i,r[11]=t[11]*i,r[12]=t[12],r[13]=t[13],r[14]=t[14],r[15]=t[15],r}function a(t,e,n,i,r){let s,o,a,l,h,u,c,d,f,p,g,m;return t===(r=r??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])?(r[12]=t[0]*e+t[4]*n+t[8]*i+t[12],r[13]=t[1]*e+t[5]*n+t[9]*i+t[13],r[14]=t[2]*e+t[6]*n+t[10]*i+t[14],r[15]=t[3]*e+t[7]*n+t[11]*i+t[15]):(s=t[0],o=t[1],a=t[2],l=t[3],h=t[4],u=t[5],c=t[6],d=t[7],f=t[8],p=t[9],g=t[10],m=t[11],r[0]=s,r[1]=o,r[2]=a,r[3]=l,r[4]=h,r[5]=u,r[6]=c,r[7]=d,r[8]=f,r[9]=p,r[10]=g,r[11]=m,r[12]=s*e+h*n+f*i+t[12],r[13]=o*e+u*n+p*i+t[13],r[14]=a*e+c*n+g*i+t[14],r[15]=l*e+d*n+m*i+t[15]),r}function l(t,e,n,i){return(i=i??[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])[0]=1,i[1]=0,i[2]=0,i[3]=0,i[4]=0,i[5]=1,i[6]=0,i[7]=0,i[8]=0,i[9]=0,i[10]=1,i[11]=0,i[12]=t,i[13]=e,i[14]=n,i[15]=1,i}n.d(e,{Tl:function(){return a},Z1:function(){return r},hs:function(){return o},j0:function(){return s},vt:function(){return i},wT:function(){return l}})},9619:function(t,e,n){"use strict";n.d(e,{A:function(){return z}});var i=n(16235),r=n(37246),s=n(99602),o=n(58215),a=n(40132);const l=[null,"http://www.opengis.net/ows/1.1"],h=(0,r.Dm)(l,{ServiceIdentification:(0,r.kW)((function(t,e){return(0,r.eY)({},w,t,e)})),ServiceProvider:(0,r.kW)((function(t,e){return(0,r.eY)({},A,t,e)})),OperationsMetadata:(0,r.kW)((function(t,e){return(0,r.eY)({},_,t,e)}))});class u extends s.A{constructor(){super()}readFromNode(t){const e=(0,r.eY)({},h,t,[]);return e||null}}const c=(0,r.Dm)(l,{DeliveryPoint:(0,r.kW)(a.E3),City:(0,r.kW)(a.E3),AdministrativeArea:(0,r.kW)(a.E3),PostalCode:(0,r.kW)(a.E3),Country:(0,r.kW)(a.E3),ElectronicMailAddress:(0,r.kW)(a.E3)}),d=(0,r.Dm)(l,{Value:(0,r.c4)((function(t,e){return(0,a.E3)(t)}))}),f=(0,r.Dm)(l,{AllowedValues:(0,r.kW)((function(t,e){return(0,r.eY)({},d,t,e)}))}),p=(0,r.Dm)(l,{Phone:(0,r.kW)((function(t,e){return(0,r.eY)({},v,t,e)})),Address:(0,r.kW)((function(t,e){return(0,r.eY)({},c,t,e)}))}),g=(0,r.Dm)(l,{HTTP:(0,r.kW)((function(t,e){return(0,r.eY)({},m,t,e)}))}),m=(0,r.Dm)(l,{Get:(0,r.c4)((function(t,e){const n=(0,o.q)(t);if(!n)return;return(0,r.eY)({href:n},x,t,e)})),Post:void 0}),y=(0,r.Dm)(l,{DCP:(0,r.kW)((function(t,e){return(0,r.eY)({},g,t,e)}))}),_=(0,r.Dm)(l,{Operation:function(t,e){const n=t.getAttribute("name"),i=(0,r.eY)({},y,t,e);if(!i)return;e[e.length-1][n]=i}}),v=(0,r.Dm)(l,{Voice:(0,r.kW)(a.E3),Facsimile:(0,r.kW)(a.E3)}),x=(0,r.Dm)(l,{Constraint:(0,r.c4)((function(t,e){const n=t.getAttribute("name");if(!n)return;return(0,r.eY)({name:n},f,t,e)}))}),b=(0,r.Dm)(l,{IndividualName:(0,r.kW)(a.E3),PositionName:(0,r.kW)(a.E3),ContactInfo:(0,r.kW)((function(t,e){return(0,r.eY)({},p,t,e)}))}),w=(0,r.Dm)(l,{Abstract:(0,r.kW)(a.E3),AccessConstraints:(0,r.kW)(a.E3),Fees:(0,r.kW)(a.E3),Title:(0,r.kW)(a.E3),ServiceTypeVersion:(0,r.kW)(a.E3),ServiceType:(0,r.kW)(a.E3)}),A=(0,r.Dm)(l,{ProviderName:(0,r.kW)(a.E3),ProviderSite:(0,r.kW)(o.q),ServiceContact:(0,r.kW)((function(t,e){return(0,r.eY)({},b,t,e)}))});var S=u;const E=[null,"http://www.opengis.net/wmts/1.0"],T=[null,"http://www.opengis.net/ows/1.1"],C=(0,r.Dm)(E,{Contents:(0,r.kW)((function(t,e){return(0,r.eY)({},L,t,e)}))});class M extends s.A{constructor(){super(),this.owsParser_=new S}readFromNode(t){let e=t.getAttribute("version");e&&(e=e.trim());let n=this.owsParser_.readFromNode(t);return n?(n.version=e,n=(0,r.eY)(n,C,t,[]),n||null):null}}const L=(0,r.Dm)(E,{Layer:(0,r.c4)((function(t,e){return(0,r.eY)({},P,t,e)})),TileMatrixSet:(0,r.c4)((function(t,e){return(0,r.eY)({},O,t,e)}))}),P=(0,r.Dm)(E,{Style:(0,r.c4)((function(t,e){const n=(0,r.eY)({},R,t,e);if(!n)return;const i="true"===t.getAttribute("isDefault");return n.isDefault=i,n})),Format:(0,r.c4)(a.E3),TileMatrixSetLink:(0,r.c4)((function(t,e){return(0,r.eY)({},I,t,e)})),Dimension:(0,r.c4)((function(t,e){return(0,r.eY)({},k,t,e)})),ResourceURL:(0,r.c4)((function(t,e){const n=t.getAttribute("format"),i=t.getAttribute("template"),r=t.getAttribute("resourceType"),s={};n&&(s.format=n);i&&(s.template=i);r&&(s.resourceType=r);return s}))},(0,r.Dm)(T,{Title:(0,r.kW)(a.E3),Abstract:(0,r.kW)(a.E3),WGS84BoundingBox:(0,r.kW)(G),BoundingBox:(0,r.c4)((function(t,e){const n=t.getAttribute("crs"),s=(0,r.eY)([],D,t,e);if(2!=s.length)return;return{extent:(0,i.Tr)(s),crs:n}})),Identifier:(0,r.kW)(a.E3)})),R=(0,r.Dm)(E,{LegendURL:(0,r.c4)((function(t,e){const n={};return n.format=t.getAttribute("format"),n.href=(0,o.q)(t),n}))},(0,r.Dm)(T,{Title:(0,r.kW)(a.E3),Identifier:(0,r.kW)(a.E3)})),I=(0,r.Dm)(E,{TileMatrixSet:(0,r.kW)(a.E3),TileMatrixSetLimits:(0,r.kW)((function(t,e){return(0,r.eY)([],N,t,e)}))}),N=(0,r.Dm)(E,{TileMatrixLimits:(0,r.VT)((function(t,e){return(0,r.eY)({},F,t,e)}))}),F=(0,r.Dm)(E,{TileMatrix:(0,r.kW)(a.E3),MinTileRow:(0,r.kW)(a.yg),MaxTileRow:(0,r.kW)(a.yg),MinTileCol:(0,r.kW)(a.yg),MaxTileCol:(0,r.kW)(a.yg)}),k=(0,r.Dm)(E,{Default:(0,r.kW)(a.E3),Value:(0,r.c4)(a.E3)},(0,r.Dm)(T,{Identifier:(0,r.kW)(a.E3)})),D=(0,r.Dm)(T,{LowerCorner:(0,r.VT)(B),UpperCorner:(0,r.VT)(B)}),O=(0,r.Dm)(E,{WellKnownScaleSet:(0,r.kW)(a.E3),TileMatrix:(0,r.c4)((function(t,e){return(0,r.eY)({},j,t,e)}))},(0,r.Dm)(T,{SupportedCRS:(0,r.kW)(a.E3),Identifier:(0,r.kW)(a.E3),BoundingBox:(0,r.kW)(G)})),j=(0,r.Dm)(E,{TopLeftCorner:(0,r.kW)(B),ScaleDenominator:(0,r.kW)(a.e4),TileWidth:(0,r.kW)(a.yg),TileHeight:(0,r.kW)(a.yg),MatrixWidth:(0,r.kW)(a.yg),MatrixHeight:(0,r.kW)(a.yg)},(0,r.Dm)(T,{Identifier:(0,r.kW)(a.E3)}));function G(t,e){const n=(0,r.eY)([],D,t,e);if(2==n.length)return(0,i.Tr)(n)}function B(t,e){const n=(0,a.E3)(t).split(/\s+/);if(!n||2!=n.length)return;const i=+n[0],r=+n[1];return isNaN(i)||isNaN(r)?void 0:[i,r]}var z=M},10135:function(t,e,n){"use strict";n.d(e,{EN:function(){return u},Li:function(){return h},kZ:function(){return d},pr:function(){return l}});var i=n(16235),r=n(25231),s=n(3974),o=n(45342),a=n(80547);function l(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,n,r){const s=d(t);return function(t,e,n,r){r=void 0!==r?r:"top-left";const s=c(t,e,n);return new o.A({extent:t,origin:(0,i.qF)(t,r),resolutions:s,tileSize:n})}(s,e,n,r)}(t),t.setDefaultTileGrid(e)),e}function h(t,e,n){const r=e[0],s=t.getTileCoordCenter(e),o=d(n);if(!(0,i.Ym)(o,s)){const e=(0,i.RG)(o),n=Math.ceil((o[0]-s[0])/e);return s[0]+=e*n,t.getTileCoordForCoordAndZ(s,r)}return e}function u(t){const e=t||{},n=e.extent||(0,r.Jt)("EPSG:3857").getExtent(),i={extent:n,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:c(n,e.maxZoom,e.tileSize,e.maxResolution)};return new o.A(i)}function c(t,e,n,r){e=void 0!==e?e:a.L,n=(0,s.xq)(void 0!==n?n:a.R);const o=(0,i.Oq)(t),l=(0,i.RG)(t);r=r>0?r:Math.max(l/n[0],o/n[1]);const h=e+1,u=new Array(h);for(let t=0;t<h;++t)u[t]=r/Math.pow(2,t);return u}function d(t){let e=(t=(0,r.Jt)(t)).getExtent();if(!e){const n=180*r.Ig.degrees/t.getMetersPerUnit();e=(0,i.N)(-n,-n,n,n)}return e}},10572:function(t,e,n){"use strict";var i=n(51541),r=n(16235),s=n(77833),o=n(62609),a=n(59286),l=n(7535),h=n(69727),u=n(40878),c=n(30470),d=n(93001),f=n(66962),p=n(45090),g=n(25231),m=n(72961),y=n(43987);const _={Point:function(t){let e;e=void 0!==t.m&&void 0!==t.z?new u.A([t.x,t.y,t.z,t.m],"XYZM"):void 0!==t.z?new u.A([t.x,t.y,t.z],"XYZ"):void 0!==t.m?new u.A([t.x,t.y,t.m],"XYM"):new u.A([t.x,t.y]);return e},LineString:function(t){const e=w(t);return new s.A(t.paths[0],e)},Polygon:function(t){const e=w(t);return new c.Ay(t.rings,e)},MultiPoint:function(t){const e=w(t);return new l.A(t.points,e)},MultiLineString:function(t){const e=w(t);return new a.A(t.paths,e)},MultiPolygon:function(t){const e=w(t);return new h.A(t.rings,e)}},v={Point:function(t,e){const n=t.getCoordinates();let i;const r=t.getLayout();if("XYZ"===r)i={x:n[0],y:n[1],z:n[2]};else if("XYM"===r)i={x:n[0],y:n[1],m:n[2]};else if("XYZM"===r)i={x:n[0],y:n[1],z:n[2],m:n[3]};else{if("XY"!==r)throw new Error("Invalid geometry layout");i={x:n[0],y:n[1]}}return i},LineString:function(t,e){const n=A(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:[t.getCoordinates()]}},Polygon:function(t,e){const n=A(t);return{hasZ:n.hasZ,hasM:n.hasM,rings:t.getCoordinates(!1)}},MultiPoint:function(t,e){const n=A(t);return{hasZ:n.hasZ,hasM:n.hasM,points:t.getCoordinates()}},MultiLineString:function(t,e){const n=A(t);return{hasZ:n.hasZ,hasM:n.hasM,paths:t.getCoordinates()}},MultiPolygon:function(t,e){const n=A(t),i=t.getCoordinates(!1),r=[];for(let t=0;t<i.length;t++)for(let e=i[t].length-1;e>=0;e--)r.push(i[t][e]);return{hasZ:n.hasZ,hasM:n.hasM,rings:r}}};class x extends y.A{constructor(t){t=t||{},super(),this.geometryName_=t.geometryName}readFeatureFromObject(t,e,n){const r=t,s=b(r.geometry,e),o=new i.A;if(this.geometryName_&&o.setGeometryName(this.geometryName_),o.setGeometry(s),r.attributes){o.setProperties(r.attributes,!0);const t=r.attributes[n];void 0!==t&&o.setId(t)}return o}readFeaturesFromObject(t,e){if(e=e||{},t.features){const n=[],i=t.features;for(let r=0,s=i.length;r<s;++r)n.push(this.readFeatureFromObject(i[r],e,t.objectIdFieldName));return n}return[this.readFeatureFromObject(t,e)]}readGeometryFromObject(t,e){return b(t,e)}readProjectionFromObject(t){if(t.spatialReference&&void 0!==t.spatialReference.wkid){const e=t.spatialReference.wkid;return(0,g.Jt)("EPSG:"+e)}return null}writeGeometryObject(t,e){return S(t,this.adaptOptions(e))}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={};if(!t.hasProperties())return n.attributes={},n;const i=t.getProperties(),r=t.getGeometry();if(r){n.geometry=S(r,e);const s=e&&(e.dataProjection||e.featureProjection);s&&(n.geometry.spatialReference={wkid:Number((0,g.Jt)(s).getCode().split(":").pop())}),delete i[t.getGeometryName()]}return(0,p.p)(i)?n.attributes={}:n.attributes=i,n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{features:n}}}function b(t,e){if(!t)return null;let n;if("number"==typeof t.x&&"number"==typeof t.y)n="Point";else if(t.points)n="MultiPoint";else if(t.paths){n=1===t.paths.length?"LineString":"MultiLineString"}else if(t.rings){const e=t,i=w(e),s=function(t,e){const n=[],i=[],s=[];let a,l;for(a=0,l=t.length;a<l;++a){n.length=0,(0,d.z2)(n,0,t[a],e.length);(0,f.uQ)(n,0,n.length,e.length)?i.push([t[a]]):s.push(t[a])}for(;s.length;){const t=s.shift();let e=!1;for(a=i.length-1;a>=0;a--){const n=i[a][0];if((0,r.ms)(new o.A(n).getExtent(),new o.A(t).getExtent())){i[a].push(t),e=!0;break}}e||i.push([t.reverse()])}return i}(e.rings,i);1===s.length?(n="Polygon",t=Object.assign({},t,{rings:s[0]})):(n="MultiPolygon",t=Object.assign({},t,{rings:s}))}const i=_[n];return(0,m.hX)(i(t),!1,e)}function w(t){let e="XY";return!0===t.hasZ&&!0===t.hasM?e="XYZM":!0===t.hasZ?e="XYZ":!0===t.hasM&&(e="XYM"),e}function A(t){const e=t.getLayout();return{hasZ:"XYZ"===e||"XYZM"===e,hasM:"XYM"===e||"XYZM"===e}}function S(t,e){return(0,v[t.getType()])((0,m.hX)(t,!0,e),e)}e.A=x},11238:function(t,e,n){"use strict";function i(t,e,n,i,r){let s;for(e+=i;e<n;e+=i)if(s=r(t.slice(e-i,e),t.slice(e,e+i)),s)return s;return!1}function r(t,e){const[n,i]=t,[r,s]=e,o=((n[0]-r[0])*(r[1]-s[1])-(n[1]-r[1])*(r[0]-s[0]))/((n[0]-i[0])*(r[1]-s[1])-(n[1]-i[1])*(r[0]-s[0])),a=((n[0]-r[0])*(n[1]-i[1])-(n[1]-r[1])*(n[0]-i[0]))/((n[0]-i[0])*(r[1]-s[1])-(n[1]-i[1])*(r[0]-s[0]));if(0<=o&&o<=1&&0<=a&&a<=1)return[n[0]+o*(i[0]-n[0]),n[1]+o*(i[1]-n[1])]}n.d(e,{i:function(){return r},j:function(){return i}})},12165:function(t,e,n){"use strict";n.d(e,{l:function(){return i}});const i=.5},12185:function(t,e,n){"use strict";var i=n(1749),r=n(880);class s extends r.A{constructor(t){super(t)}createRenderer(){return new i.A(this,{cacheSize:this.getCacheSize()})}}e.A=s},12239:function(t,e){"use strict";e.A={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"}},12911:function(t,e,n){"use strict";n.d(e,{Bb:function(){return u},MY:function(){return g},T9:function(){return m},Tl:function(){return f},Zz:function(){return p},cL:function(){return o},dI:function(){return _},e$:function(){return c},hs:function(){return d},k3:function(){return h},lw:function(){return a},tI:function(){return x},vt:function(){return s}});var i=n(42484);const r=new Array(6);function s(){return[1,0,0,1,0,0]}function o(t){return l(t,1,0,0,1,0,0)}function a(t,e){const n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=e[0],h=e[1],u=e[2],c=e[3],d=e[4],f=e[5];return t[0]=n*l+r*h,t[1]=i*l+s*h,t[2]=n*u+r*c,t[3]=i*u+s*c,t[4]=n*d+r*f+o,t[5]=i*d+s*f+a,t}function l(t,e,n,i,r,s,o){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t[4]=s,t[5]=o,t}function h(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function u(t,e){const n=e[0],i=e[1];return e[0]=t[0]*n+t[2]*i+t[4],e[1]=t[1]*n+t[3]*i+t[5],e}function c(t,e){const n=Math.cos(e),i=Math.sin(e);return a(t,l(r,n,i,-i,n,0,0))}function d(t,e,n){return a(t,l(r,e,0,0,n,0,0))}function f(t,e,n){return a(t,l(r,1,0,0,1,e,n))}function p(t,e,n,i,r,s,o,a){const l=Math.sin(s),h=Math.cos(s);return t[0]=i*h,t[1]=r*l,t[2]=-i*l,t[3]=r*h,t[4]=o*i*h-a*i*l+e,t[5]=o*r*l+a*r*h+n,t}function g(t,e,n,i,r,s,o){return _(p([1,0,0,1,0,0],t,e,n,i,r,s,o))}function m(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;(0,i.v)(0!==n,"Transformation matrix cannot be inverted");const s=e[0],o=e[1],a=e[2],l=e[3],h=e[4],u=e[5];return t[0]=l/n,t[1]=-o/n,t[2]=-a/n,t[3]=s/n,t[4]=(a*u-l*h)/n,t[5]=-(s*u-o*h)/n,t}const y=[1e5,1e5,1e5,1e5,2,2];function _(t){return"matrix("+t.join(", ")+")"}function v(t){return t.substring(7,t.length-1).split(",").map(parseFloat)}function x(t,e){const n=v(t),i=v(e);for(let t=0;t<6;++t)if(0!==Math.round((n[t]-i[t])*y[t]))return!1;return!0}},12918:function(t,e,n){"use strict";var i=n(29837),r=n(16235),s=n(45090),o=n(37759);e.A=class{constructor(t){this.rbush_=new i.A(t),this.items_={}}insert(t,e){const n={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(n),this.items_[(0,o.v6)(e)]=n}load(t,e){const n=new Array(e.length);for(let i=0,r=e.length;i<r;i++){const r=t[i],s=e[i],a={minX:r[0],minY:r[1],maxX:r[2],maxY:r[3],value:s};n[i]=a,this.items_[(0,o.v6)(s)]=a}this.rbush_.load(n)}remove(t){const e=(0,o.v6)(t),n=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(n)}update(t,e){const n=this.items_[(0,o.v6)(e)],i=[n.minX,n.minY,n.maxX,n.maxY];(0,r.aI)(i,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map((function(t){return t.value}))}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map((function(t){return t.value}))}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let n;for(let i=0,r=t.length;i<r;i++)if(n=e(t[i]),n)return n;return n}isEmpty(){return(0,s.p)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return(0,r.N)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}},13413:function(t,e,n){"use strict";var i=n(67024),r=n(25231),s=n(73988);const o="units",a=[1,2,5],l=25.4/.28;class h extends s.A{constructor(t){t=t||{};const e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;const n=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=n+"-inner",this.element.className=n+" "+i.XI,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(o,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(o)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(o,t)}setDpi(t){this.dpi_=t}updateElement_(){const t=this.viewState_;if(!t)return void(this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1));const e=t.center,n=t.projection,i=this.getUnits(),s="degrees"==i?"degrees":"m";let o=(0,r.hO)(n,t.resolution,e,s);const h=this.minWidth_*(this.dpi_||l)/l,u=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||l)/l:void 0;let c=h*o,d="";if("degrees"==i){const t=r.Ig.degrees;c*=t,c<t/60?(d="″",o*=3600):c<t?(d="′",o*=60):d="°"}else if("imperial"==i)c<.9144?(d="in",o/=.0254):c<1609.344?(d="ft",o/=.3048):(d="mi",o/=1609.344);else if("nautical"==i)o/=1852,d="NM";else if("metric"==i)c<1e-6?(d="nm",o*=1e9):c<.001?(d="μm",o*=1e6):c<1?(d="mm",o*=1e3):c<1e3?d="m":(d="km",o/=1e3);else{if("us"!=i)throw new Error("Invalid units");c<.9144?(d="in",o*=39.37):c<1609.344?(d="ft",o/=.30480061):(d="mi",o/=1609.3472)}let f,p,g,m,y,_=3*Math.floor(Math.log(h*o)/Math.log(10)),v=0;for(;;){g=Math.floor(_/3);const t=Math.pow(10,g);if(f=a[(_%3+3)%3]*t,p=Math.round(f/o),isNaN(p))return this.element.style.display="none",void(this.renderedVisible_=!1);if(void 0!==u&&p>=u){f=v,p=m,g=y;break}if(p>=h)break;v=f,m=p,y=g,++_}const x=this.scaleBar_?this.createScaleBar(p,f,d):f.toFixed(g<0?-g:0)+" "+d;this.renderedHTML_!=x&&(this.innerElement_.innerHTML=x,this.renderedHTML_=x),this.renderedWidth_!=p&&(this.innerElement_.style.width=p+"px",this.renderedWidth_=p),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,n){const i=this.getScaleForResolution(),r=i<1?Math.round(1/i).toLocaleString()+" : 1":"1 : "+Math.round(i).toLocaleString(),s=this.scaleBarSteps_,o=t/s,a=[this.createMarker("absolute")];for(let i=0;i<s;++i){const r=i%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";a.push(`<div><div class="ol-scale-singlebar ${r}" style="width: ${o}px;"></div>`+this.createMarker("relative")+(i%2==0||2===s?this.createStepText(i,t,!1,e,n):"")+"</div>")}a.push(this.createStepText(s,t,!0,e,n));return(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+r+"</div>":"")+a.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,n,i,r){const s=(0===t?0:Math.round(i/this.scaleBarSteps_*t*100)/100)+(0===t?"":" "+r);return`<div class="ol-scale-step-text" style="margin-left: ${0===t?-3:e/this.scaleBarSteps_*-1}px;text-align: ${0===t?"left":"center"};min-width: ${0===t?0:e/this.scaleBarSteps_*2}px;left: ${n?e+"px":"unset"};">`+s+"</div>"}getScaleForResolution(){return(0,r.hO)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(1e3/25.4)*(this.dpi_||l)}render(t){const e=t.frameState;this.viewState_=e?e.viewState:null,this.updateElement_()}}e.A=h},13440:function(){},14049:function(t,e,n){"use strict";var i=n(14390),r=n(30942),s=n(22685),o=n(37372),a=n(37759);class l extends o.A{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter=t.gutter||0,this.helper=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile)if(this.tile&&this.tile.removeEventListener(s.A.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===r.A.LOADED,this.loaded)this.uploadTile();else{if(t instanceof i.A){const e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(s.A.CHANGE,this.handleTileChange_)}}uploadTile(){(0,a.b0)()}setReady(){this.ready=!0,this.dispatchEvent(s.A.CHANGE)}handleTileChange_(){this.tile.getState()===r.A.LOADED&&(this.loaded=!0,this.uploadTile())}setHelper(t){this.helper=t,this.helper&&this.loaded&&this.uploadTile()}disposeInternal(){this.setHelper(null),this.tile.removeEventListener(s.A.CHANGE,this.handleTileChange_)}}e.A=l},14390:function(t,e,n){"use strict";var i=n(36634),r=n(37751),s=n(30942),o=n(69791);class a extends r.A{constructor(t,e,n,i,r,s){super(t,e,s),this.crossOrigin_=i,this.src_=n,this.key=n,this.image_=new Image,null!==i&&(this.image_.crossOrigin=i),this.unlisten_=null,this.tileLoadFunction_=r}getImage(){return this.image_}setImage(t){this.image_=t,this.state=s.A.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=s.A.ERROR,this.unlistenImage_(),this.image_=function(){const t=(0,o.Y)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=s.A.LOADED:this.state=s.A.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==s.A.ERROR&&(this.state=s.A.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==s.A.IDLE&&(this.state=s.A.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,i.f6)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}e.A=a},14407:function(t,e,n){"use strict";var i=n(16235),r=n(31516),s=n(25231),o=n(10135),a=n(69606),l=n(38376);class h extends l.A{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:(0,s.Jt)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url)if(t.jsonp)(0,r.FQ)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){const e=(0,s.Jt)("EPSG:4326"),n=this.getProjection();let r;if(void 0!==t.bounds){const o=(0,s.FO)(e,n);r=(0,i.NW)(t.bounds,o)}const l=(0,o.kZ)(n),h=t.minzoom||0,u=t.maxzoom||22,c=(0,o.EN)({extent:l,maxZoom:u,minZoom:h,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=(0,a.Qz)(t.tiles,c),t.attribution&&!this.getAttributions()){const e=void 0!==r?r:l;this.setAttributions((function(n){return(0,i.HY)(e,n.extent)?[t.attribution]:null}))}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}e.A=h},15264:function(t,e,n){"use strict";var i=n(16649),r=n(77779);const s=new Error("Image failed to load");function o(t,e,n,r,o){return new Promise(((a,l)=>{const h=new Image;h.crossOrigin=o.crossOrigin??null,h.addEventListener("load",(()=>a(h))),h.addEventListener("error",(()=>l(s))),h.src=(0,i.M)(t,e,n,r,o.maxY)}))}function a(t){return function(e,n,r,s){return o((0,i.de)(t,e,n,r),e,n,r,s)}}function l(t){let e;if(Array.isArray(t))e=a(t);else if("string"==typeof t){e=a((0,i.Uu)(t))}else{if("function"!=typeof t)throw new Error("The url option must be a single template, an array of templates, or a function for getting a URL");n=t,e=function(t,e,i,r){return o(n(t,e,i,r),t,e,i,r)}}var n;return e}let h=0;function u(t){return Array.isArray(t)?t.join("\n"):"string"==typeof t?t:(++h,"url-function-key-"+h)}class c extends r.A{constructor(t){let e,n=(t=t||{}).loader;t.url&&(n=l(t.url),e=u(t.url));const i=n?t.state:"loading",r=void 0===t.wrapX||t.wrapX;super({loader:n,key:e,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize,gutter:t.gutter,maxResolution:t.maxResolution,projection:t.projection,tileGrid:t.tileGrid,state:i,wrapX:r,transition:t.transition,interpolate:!1!==t.interpolate,crossOrigin:t.crossOrigin,zDirection:t.zDirection})}setUrl(t){const e=l(t);this.setLoader(e),this.setKey(u(t)),"ready"!==this.getState()&&this.setState("ready")}}e.A=c},15353:function(t,e,n){"use strict";n.d(e,{ue:function(){return l}});var i=n(61829),r=n(46928),s=n(69791);class o{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const n=this.cache_[e];3&t++||n.hasListener()||(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,n){const i=a(t,e,n);return i in this.cache_?this.cache_[i]:null}getPattern(t,e,n){const i=a(t,e,n);return i in this.patternCache_?this.patternCache_[i]:null}set(t,e,n,r,o){const l=a(t,e,n),h=l in this.cache_;this.cache_[l]=r,o&&(r.getImageState()===i.A.IDLE&&r.load(),r.getImageState()===i.A.LOADING?r.ready().then((()=>{this.patternCache_[l]=(0,s.lr)().createPattern(r.getImage(1),"repeat")})):this.patternCache_[l]=(0,s.lr)().createPattern(r.getImage(1),"repeat")),h||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function a(t,e,n){return e+":"+t+":"+(n?(0,r._j)(n):"null")}const l=new o},16235:function(t,e,n){"use strict";n.d(e,{$C:function(){return x},$u:function(){return j},Af:function(){return G},Bg:function(){return L},HY:function(){return D},Im:function(){return O},Ld:function(){return a},Li:function(){return q},Mx:function(){return B},N:function(){return f},NW:function(){return z},Oq:function(){return R},Py:function(){return N},QJ:function(){return U},R:function(){return E},R8:function(){return b},RG:function(){return k},Rj:function(){return u},S5:function(){return d},Tr:function(){return r},UG:function(){return S},Vy:function(){return m},WU:function(){return F},X$:function(){return v},Ym:function(){return l},Yw:function(){return P},_N:function(){return I},aI:function(){return y},aZ:function(){return p},bE:function(){return _},dP:function(){return g},k_:function(){return T},ms:function(){return h},o8:function(){return o},q1:function(){return C},qF:function(){return M},r:function(){return s},sB:function(){return A},vz:function(){return c}});var i=n(69892);function r(t){const e=d();for(let n=0,i=t.length;n<i;++n)x(e,t[n]);return e}function s(t,e,n){return n?(n[0]=t[0]-e,n[1]=t[1]-e,n[2]=t[2]+e,n[3]=t[3]+e,n):[t[0]-e,t[1]-e,t[2]+e,t[3]+e]}function o(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t.slice()}function a(t,e,n){let i,r;return i=e<t[0]?t[0]-e:t[2]<e?e-t[2]:0,r=n<t[1]?t[1]-n:t[3]<n?n-t[3]:0,i*i+r*r}function l(t,e){return u(t,e[0],e[1])}function h(t,e){return t[0]<=e[0]&&e[2]<=t[2]&&t[1]<=e[1]&&e[3]<=t[3]}function u(t,e,n){return t[0]<=e&&e<=t[2]&&t[1]<=n&&n<=t[3]}function c(t,e){const n=t[0],r=t[1],s=t[2],o=t[3],a=e[0],l=e[1];let h=i.A.UNKNOWN;return a<n?h|=i.A.LEFT:a>s&&(h|=i.A.RIGHT),l<r?h|=i.A.BELOW:l>o&&(h|=i.A.ABOVE),h===i.A.UNKNOWN&&(h=i.A.INTERSECTING),h}function d(){return[1/0,1/0,-1/0,-1/0]}function f(t,e,n,i,r){return r?(r[0]=t,r[1]=e,r[2]=n,r[3]=i,r):[t,e,n,i]}function p(t){return f(1/0,1/0,-1/0,-1/0,t)}function g(t,e){const n=t[0],i=t[1];return f(n,i,n,i,e)}function m(t,e,n,i,r){return b(p(r),t,e,n,i)}function y(t,e){return t[0]==e[0]&&t[2]==e[2]&&t[1]==e[1]&&t[3]==e[3]}function _(t,e,n){return Math.abs(t[0]-e[0])<n&&Math.abs(t[2]-e[2])<n&&Math.abs(t[1]-e[1])<n&&Math.abs(t[3]-e[3])<n}function v(t,e){return e[0]<t[0]&&(t[0]=e[0]),e[2]>t[2]&&(t[2]=e[2]),e[1]<t[1]&&(t[1]=e[1]),e[3]>t[3]&&(t[3]=e[3]),t}function x(t,e){e[0]<t[0]&&(t[0]=e[0]),e[0]>t[2]&&(t[2]=e[0]),e[1]<t[1]&&(t[1]=e[1]),e[1]>t[3]&&(t[3]=e[1])}function b(t,e,n,i,r){for(;n<i;n+=r)w(t,e[n],e[n+1]);return t}function w(t,e,n){t[0]=Math.min(t[0],e),t[1]=Math.min(t[1],n),t[2]=Math.max(t[2],e),t[3]=Math.max(t[3],n)}function A(t,e){let n;return n=e(E(t)),n||(n=e(T(t)),n||(n=e(F(t)),n||(n=e(N(t)),n||!1)))}function S(t){let e=0;return O(t)||(e=k(t)*R(t)),e}function E(t){return[t[0],t[1]]}function T(t){return[t[2],t[1]]}function C(t){return[(t[0]+t[2])/2,(t[1]+t[3])/2]}function M(t,e){let n;if("bottom-left"===e)n=E(t);else if("bottom-right"===e)n=T(t);else if("top-left"===e)n=N(t);else{if("top-right"!==e)throw new Error("Invalid corner");n=F(t)}return n}function L(t,e,n,i,r){const[s,o,a,l,h,u,c,d]=P(t,e,n,i);return f(Math.min(s,a,h,c),Math.min(o,l,u,d),Math.max(s,a,h,c),Math.max(o,l,u,d),r)}function P(t,e,n,i){const r=e*i[0]/2,s=e*i[1]/2,o=Math.cos(n),a=Math.sin(n),l=r*o,h=r*a,u=s*o,c=s*a,d=t[0],f=t[1];return[d-l+c,f-h-u,d-l-c,f-h+u,d+l-c,f+h+u,d+l+c,f+h-u,d-l+c,f-h-u]}function R(t){return t[3]-t[1]}function I(t,e,n){const i=n||[1/0,1/0,-1/0,-1/0];return D(t,e)?(t[0]>e[0]?i[0]=t[0]:i[0]=e[0],t[1]>e[1]?i[1]=t[1]:i[1]=e[1],t[2]<e[2]?i[2]=t[2]:i[2]=e[2],t[3]<e[3]?i[3]=t[3]:i[3]=e[3]):p(i),i}function N(t){return[t[0],t[3]]}function F(t){return[t[2],t[3]]}function k(t){return t[2]-t[0]}function D(t,e){return t[0]<=e[2]&&t[2]>=e[0]&&t[1]<=e[3]&&t[3]>=e[1]}function O(t){return t[2]<t[0]||t[3]<t[1]}function j(t,e){return e?(e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e):t}function G(t,e){const n=(t[2]-t[0])/2*(e-1),i=(t[3]-t[1])/2*(e-1);t[0]-=n,t[2]+=n,t[1]-=i,t[3]+=i}function B(t,e,n){let r=!1;const s=c(t,e),o=c(t,n);if(s===i.A.INTERSECTING||o===i.A.INTERSECTING)r=!0;else{const a=t[0],l=t[1],h=t[2],u=t[3],c=e[0],d=e[1],f=n[0],p=n[1],g=(p-d)/(f-c);let m,y;o&i.A.ABOVE&&!(s&i.A.ABOVE)&&(m=f-(p-u)/g,r=m>=a&&m<=h),r||!(o&i.A.RIGHT)||s&i.A.RIGHT||(y=p-(f-h)*g,r=y>=l&&y<=u),r||!(o&i.A.BELOW)||s&i.A.BELOW||(m=f-(p-l)/g,r=m>=a&&m<=h),r||!(o&i.A.LEFT)||s&i.A.LEFT||(y=p-(f-a)*g,r=y>=l&&y<=u)}return r}function z(t,e,n,i){if(O(t))return p(n);let r=[];if(i>1){const e=t[2]-t[0],n=t[3]-t[1];for(let s=0;s<i;++s)r.push(t[0]+e*s/i,t[1],t[2],t[1]+n*s/i,t[2]-e*s/i,t[3],t[0],t[3]-n*s/i)}else r=[t[0],t[1],t[2],t[1],t[2],t[3],t[0],t[3]];e(r,r,2);const s=[],o=[];for(let t=0,e=r.length;t<e;t+=2)s.push(r[t]),o.push(r[t+1]);return function(t,e,n){return f(Math.min.apply(null,t),Math.min.apply(null,e),Math.max.apply(null,t),Math.max.apply(null,e),n)}(s,o,n)}function q(t,e){const n=e.getExtent(),i=C(t);if(e.canWrapX()&&(i[0]<n[0]||i[0]>=n[2])){const e=k(n),r=Math.floor((i[0]-n[0])/e)*e;t[0]-=r,t[2]-=r}return t}function U(t,e,n){if(e.canWrapX()){const i=e.getExtent();if(!isFinite(t[0])||!isFinite(t[2]))return[[i[0],t[1],i[2],t[3]]];q(t,e);const r=k(i);if(k(t)>r&&!n)return[[i[0],t[1],i[2],t[3]]];if(t[0]<i[0])return[[t[0]+r,t[1],i[2],t[3]],[i[0],t[1],t[2],t[3]]];if(t[2]>i[2])return[[t[0],t[1],i[2],t[3]],[i[0],t[1],t[2]-r,t[3]]]}return[t]}},16649:function(t,e,n){"use strict";n.d(e,{LW:function(){return s},M:function(){return u},Uu:function(){return d},de:function(){return c}});var i=n(31141),r=n(62994);function s(t,e){const n=[];Object.keys(e).forEach((function(t){null!==e[t]&&void 0!==e[t]&&n.push(t+"="+encodeURIComponent(e[t]))}));const i=n.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+i}const o=/\{z\}/g,a=/\{x\}/g,l=/\{y\}/g,h=/\{-y\}/g;function u(t,e,n,i,r){return t.replace(o,e.toString()).replace(a,n.toString()).replace(l,i.toString()).replace(h,(function(){if(void 0===r)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(r-i).toString()}))}function c(t,e,n,s){const o=(0,r._T)(e,n,s);return t[(0,i.xP)(o,t.length)]}function d(t){const e=[];let n=/\{([a-z])-([a-z])\}/.exec(t);if(n){const i=n[1].charCodeAt(0),r=n[2].charCodeAt(0);let s;for(s=i;s<=r;++s)e.push(t.replace(n[0],String.fromCharCode(s)));return e}if(n=/\{(\d+)-(\d+)\}/.exec(t),n){const i=parseInt(n[2],10);for(let r=parseInt(n[1],10);r<=i;r++)e.push(t.replace(n[0],r.toString()));return e}return e.push(t),e}},17306:function(t,e,n){"use strict";var i=n(44090),r=n(23463),s=n(69892),o=n(16235),a=n(2337),l=n(89762),h=n(27678),u=n(56037);class c extends l.A{constructor(t,e,n,i){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=i,this.maxLineWidth=0,this.resolution=n,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return 1==e?t:t.map((function(t){return t*e}))}appendFlatPointCoordinates(t,e){const n=this.getBufferedMaxExtent(),i=this.tmpCoordinate_,r=this.coordinates;let s=r.length;for(let a=0,l=t.length;a<l;a+=e)i[0]=t[a],i[1]=t[a+1],(0,o.Ym)(n,i)&&(r[s++]=i[0],r[s++]=i[1]);return s}appendFlatLineCoordinates(t,e,n,i,r,a){const l=this.coordinates;let h=l.length;const u=this.getBufferedMaxExtent();a&&(e+=i);let c=t[e],d=t[e+1];const f=this.tmpCoordinate_;let p,g,m,y=!0;for(p=e+i;p<n;p+=i)f[0]=t[p],f[1]=t[p+1],m=(0,o.vz)(u,f),m!==g?(y&&(l[h++]=c,l[h++]=d,y=!1),l[h++]=f[0],l[h++]=f[1]):m===s.A.INTERSECTING?(l[h++]=f[0],l[h++]=f[1],y=!1):y=!0,c=f[0],d=f[1],g=m;return(r&&y||p===e+i)&&(l[h++]=c,l[h++]=d),h}drawCustomCoordinates_(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s],a=this.appendFlatLineCoordinates(t,e,o,i,!1,!1);r.push(a),e=o}return e}drawCustom(t,e,n,i,r){this.beginGeometry(t,e,r);const s=t.getType(),o=t.getStride(),l=this.coordinates.length;let h,c,d,f,p;switch(s){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),f=[];const e=t.getEndss();p=0;for(let t=0,n=e.length;t<n;++t){const n=[];p=this.drawCustomCoordinates_(h,p,e[t],o,n),f.push(n)}this.instructions.push([u.Ay.CUSTOM,l,f,t,n,a.Dz,r]),this.hitDetectionInstructions.push([u.Ay.CUSTOM,l,f,t,i||n,a.Dz,r]);break;case"Polygon":case"MultiLineString":d=[],h="Polygon"==s?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),p=this.drawCustomCoordinates_(h,0,t.getEnds(),o,d),this.instructions.push([u.Ay.CUSTOM,l,d,t,n,a.cD,r]),this.hitDetectionInstructions.push([u.Ay.CUSTOM,l,d,t,i||n,a.cD,r]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),c=this.appendFlatLineCoordinates(h,0,h.length,o,!1,!1),this.instructions.push([u.Ay.CUSTOM,l,c,t,n,a.n2,r]),this.hitDetectionInstructions.push([u.Ay.CUSTOM,l,c,t,i||n,a.n2,r]);break;case"MultiPoint":h=t.getFlatCoordinates(),c=this.appendFlatPointCoordinates(h,o),c>l&&(this.instructions.push([u.Ay.CUSTOM,l,c,t,n,a.n2,r]),this.hitDetectionInstructions.push([u.Ay.CUSTOM,l,c,t,i||n,a.n2,r]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),c=this.coordinates.length,this.instructions.push([u.Ay.CUSTOM,l,c,t,n,void 0,r]),this.hitDetectionInstructions.push([u.Ay.CUSTOM,l,c,t,i||n,void 0,r])}this.endGeometry(e)}beginGeometry(t,e,n){this.beginGeometryInstruction1_=[u.Ay.BEGIN_GEOMETRY,e,0,t,n],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[u.Ay.BEGIN_GEOMETRY,e,0,t,n],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;let e;t.reverse();const n=t.length;let r,s,o=-1;for(e=0;e<n;++e)r=t[e],s=r[0],s==u.Ay.END_GEOMETRY?o=e:s==u.Ay.BEGIN_GEOMETRY&&(r[2]=e,(0,i.gI)(this.hitDetectionInstructions,o,e),o=-1)}fillStyleToState(t,e={}){if(t){const n=t.getColor();e.fillPatternScale=n&&"object"==typeof n&&"src"in n?this.pixelRatio:1,e.fillStyle=(0,r.F)(n||h.qY)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const n=t.getColor();e.strokeStyle=(0,r.F)(n||h.NT);const i=t.getLineCap();e.lineCap=void 0!==i?i:h._m;const s=t.getLineDash();e.lineDash=s?s.slice():h.Oq;const o=t.getLineDashOffset();e.lineDashOffset=o||h.vk;const a=t.getLineJoin();e.lineJoin=void 0!==a?a:h._K;const l=t.getWidth();e.lineWidth=void 0!==l?l:h.aq;const u=t.getMiterLimit();e.miterLimit=void 0!==u?u:h.eL,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const n=this.state;this.fillStyleToState(t,n),this.strokeStyleToState(e,n)}createFill(t){const e=t.fillStyle,n=[u.Ay.SET_FILL_STYLE,e];return"string"!=typeof e&&n.push(t.fillPatternScale),n}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[u.Ay.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const n=t.fillStyle;"string"==typeof n&&t.currentFillStyle==n||(void 0!==n&&this.instructions.push(e.call(this,t)),t.currentFillStyle=n)}updateStrokeStyle(t,e){const n=t.strokeStyle,r=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=n||t.currentLineCap!=r||s!=t.currentLineDash&&!(0,i.aI)(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(void 0!==n&&e.call(this,t),t.currentStrokeStyle=n,t.currentLineCap=r,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[u.Ay.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,o.o8)(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;(0,o.r)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}e.A=c},17534:function(t,e,n){"use strict";var i=n(51541),r=n(77833),s=n(25231),o=n(72961),a=n(92656);const l=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,h=/^H.([A-Z]{3}).*?:(.*)/,u=/^HFDTE(\d{2})(\d{2})(\d{2})/,c=/^HFDTEDATE:(\d{2})(\d{2})(\d{2}),(\d{2})/,d=/\r\n|\r|\n/;class f extends a.A{constructor(t){super(),t=t||{},this.dataProjection=(0,s.Jt)("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none",this.lad_=!1,this.lod_=!1,this.ladStart_=0,this.ladStop_=0,this.lodStart_=0,this.lodStop_=0}readFeatureFromText(t,e){const n=this.altitudeMode_,s=t.split(d),a={},f=[];let p,g,m=2e3,y=0,_=1,v=-1;for(p=0,g=s.length;p<g;++p){const t=s[p];let e;if("B"==t.charAt(0)){if(e=l.exec(t),e){const i=parseInt(e[1],10),r=parseInt(e[2],10),s=parseInt(e[3],10);let o=parseInt(e[4],10)+parseInt(e[5],10)/6e4;this.lad_&&(o+=parseInt(t.slice(this.ladStart_,this.ladStop_),10)/6e4/10**(this.ladStop_-this.ladStart_)),"S"==e[6]&&(o=-o);let a=parseInt(e[7],10)+parseInt(e[8],10)/6e4;if(this.lod_&&(a+=parseInt(t.slice(this.lodStart_,this.lodStop_),10)/6e4/10**(this.lodStop_-this.lodStart_)),"W"==e[9]&&(a=-a),f.push(a,o),"none"!=n){let t;t="gps"==n?parseInt(e[11],10):"barometric"==n?parseInt(e[12],10):0,f.push(t)}let l=Date.UTC(m,y,_,i,r,s);l<v&&(l=Date.UTC(m,y,_+1,i,r,s)),f.push(l/1e3),v=l}}else if("H"==t.charAt(0))e=c.exec(t),e?(_=parseInt(e[1],10),y=parseInt(e[2],10)-1,m=2e3+parseInt(e[3],10)):(e=u.exec(t),e?(_=parseInt(e[1],10),y=parseInt(e[2],10)-1,m=2e3+parseInt(e[3],10)):(e=h.exec(t),e&&(a[e[1]]=e[2].trim())));else if("I"==t.charAt(0)){const e=parseInt(t.slice(1,3),10);for(let n=0;n<e;n++){const e=t.slice(7+7*n,10+7*n);if("LAD"===e||"LOD"===e){const i=parseInt(t.slice(3+7*n,5+7*n),10)-1,r=parseInt(t.slice(5+7*n,7+7*n),10);"LAD"===e?(this.lad_=!0,this.ladStart_=i,this.ladStop_=r):"LOD"===e&&(this.lod_=!0,this.lodStart_=i,this.lodStop_=r)}}}}if(0===f.length)return null;const x="none"==n?"XYM":"XYZM",b=new r.A(f,x),w=new i.A((0,o.hX)(b,!1,e));return w.setProperties(a,!0),w}readFeaturesFromText(t,e){const n=this.readFeatureFromText(t,e);return n?[n]:[]}}e.A=f},17656:function(t,e,n){"use strict";n.d(e,{B:function(){return i}});const i=4},17881:function(t,e,n){"use strict";n.d(e,{B:function(){return d}});var i=n(44090),r=n(46928),s=n(69791),o=n(16235),a=n(71552),l=n(280),h=n(73808),u=n(12911),c=n(93098);const d=[];let f=null;class p extends c.A{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,u.vt)(),this.pixelTransform=(0,u.vt)(),this.inversePixelTransform=(0,u.vt)(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,n){let i;f||(f=(0,s.Y)(1,1,void 0,{willReadFrequently:!0})),f.clearRect(0,0,1,1);try{f.drawImage(t,e,n,1,1,0,0,1,1),i=f.getImageData(0,0,1,1).data}catch{return f=null,null}return i}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,n){const o=this.getLayer().getClassName();let a,l;if(t&&t.className===o&&(!n||t&&t.style.backgroundColor&&(0,i.aI)((0,r._j)(t.style.backgroundColor),(0,r._j)(n)))){const e=t.firstElementChild;e instanceof HTMLCanvasElement&&(l=e.getContext("2d"))}if(l&&(0,u.tI)(l.canvas.style.transform,e)?(this.container=t,this.context=l,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){a=document.createElement("div"),a.className=o;let t=a.style;t.position="absolute",t.width="100%",t.height="100%",l=(0,s.Y)();const e=l.canvas;a.appendChild(e),t=e.style,t.position="absolute",t.left="0",t.transformOrigin="top left",this.container=a,this.context=l}this.containerReused||!n||this.container.style.backgroundColor||(this.container.style.backgroundColor=n)}clipUnrotated(t,e,n){const i=(0,o.Py)(n),r=(0,o.WU)(n),s=(0,o.k_)(n),a=(0,o.R)(n);(0,u.Bb)(e.coordinateToPixelTransform,i),(0,u.Bb)(e.coordinateToPixelTransform,r),(0,u.Bb)(e.coordinateToPixelTransform,s),(0,u.Bb)(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;(0,u.Bb)(l,i),(0,u.Bb)(l,r),(0,u.Bb)(l,s),(0,u.Bb)(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(i[0]),Math.round(i[1])),t.lineTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,e){const n=t.extent,i=t.viewState.resolution,r=t.viewState.rotation,s=t.pixelRatio,a=Math.round((0,o.RG)(n)/i*s),l=Math.round((0,o.Oq)(n)/i*s);(0,u.Zz)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/s,1/s,r,-a/2,-l/2),(0,u.T9)(this.inversePixelTransform,this.pixelTransform);const h=(0,u.dI)(this.pixelTransform);if(this.useContainer(e,h,this.getBackground(t)),!this.containerReused){const t=this.context.canvas;t.width!=a||t.height!=l?(t.width=a,t.height=l):this.context.clearRect(0,0,a,l),h!==t.style.transform&&(t.style.transform=h)}}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){const r=new a.A(t,this.inversePixelTransform,n,e);i.dispatchEvent(r)}}preRender(t,e){this.frameState=e,e.declutter||this.dispatchRenderEvent_(l.A.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(l.A.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new h.A),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(l.A.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(l.A.POSTRENDER,this.context,t))}getRenderTransform(t,e,n,i,r,s,o){const a=r/2,l=s/2,h=i/e,c=-h,d=-t[0]+o,f=-t[1];return(0,u.Zz)(this.tempTransform,a,l,h,c,-n,d,f)}disposeInternal(){delete this.frameState,super.disposeInternal()}}e.A=p},18215:function(t){function e(t,e,n){const i=n&&n.debug||!1;i&&console.log("[xml-utils] getting "+e+" in "+t);const r="object"==typeof t?t.outer:t,s=r.slice(0,r.indexOf(">")+1),o=['"',"'"];for(let t=0;t<o.length;t++){const n=o[t],r=e+"\\="+n+"([^"+n+"]*)"+n;i&&console.log("[xml-utils] pattern:",r);const a=new RegExp(r).exec(s);if(i&&console.log("[xml-utils] match:",a),a)return a[1]}}t.exports=e,t.exports.default=e},18381:function(t,e,n){"use strict";n.d(e,{dG:function(){return i}});function i(t){t.stopPropagation()}e.Ay=class{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}},19136:function(t,e,n){"use strict";n.d(e,{A:function(){return b}});var i=n(94679),r=n(42484),s=n(92662),o=n(16235),a=n(7992),l=n(25231),h=n(84333),u=n(52724),c=n(92982),d=n(36035),f=n(9424),p=n(12911),g=n(9466),m=n(77801),y=n(2732),_=n(93908);const v={...m.M8,RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",GLOBAL_ALPHA:"u_globalAlpha"};class x extends _.A{constructor(t,e){super(t,{uniforms:{[v.RENDER_EXTENT]:[0,0,0,0],[v.PATTERN_ORIGIN]:[0,0],[v.GLOBAL_ALPHA]:1},postProcesses:e.postProcesses}),this.hitDetectionEnabled_=!e.disableHitDetection,this.hitRenderTarget_,this.sourceRevision_=-1,this.previousExtent_=(0,o.S5)(),this.currentTransform_=(0,p.vt)(),this.tmpCoords_=[0,0],this.tmpTransform_=(0,p.vt)(),this.tmpMat4_=(0,g.vt)(),this.currentFrameStateTransform_=(0,p.vt)(),this.styleVariables_={},this.styles_=[],this.styleRenderers_=[],this.buffers_=[],this.applyOptions_(e),this.batch_=new h.A,this.initialFeaturesAdded_=!1,this.sourceListenKeys_=null}addInitialFeatures_(t){const e=this.getLayer().getSource(),n=(0,l.Tf)();let i;n&&(i=(0,l.FO)(n,t.viewState.projection)),this.batch_.addFeatures(e.getFeatures(),i),this.sourceListenKeys_=[(0,s.KT)(e,f.A.ADDFEATURE,this.handleSourceFeatureAdded_.bind(this,i)),(0,s.KT)(e,f.A.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),(0,s.KT)(e,f.A.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),(0,s.KT)(e,f.A.CLEAR,this.handleSourceFeatureClear_,this)]}applyOptions_(t){this.styleVariables_=t.variables,this.styles_=(0,d.iA)(t.style)}createRenderers_(){this.buffers_=[],this.styleRenderers_=this.styles_.map((t=>new u.A(t,this.styleVariables_,this.helper,this.hitDetectionEnabled_,"filter"in t?t.filter:null)))}reset(t){this.applyOptions_(t),this.helper&&this.createRenderers_(),super.reset(t)}afterHelperCreated(){this.styleRenderers_.length?this.styleRenderers_.forEach(((t,e)=>t.setHelper(this.helper,this.buffers_[e]))):this.createRenderers_(),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new y.A(this.helper))}handleSourceFeatureAdded_(t,e){const n=e.feature;this.batch_.addFeature(n,t)}handleSourceFeatureChanged_(t){const e=t.feature;this.batch_.changeFeature(e)}handleSourceFeatureDelete_(t){const e=t.feature;this.batch_.removeFeature(e)}handleSourceFeatureClear_(){this.batch_.clear()}applyUniforms_(t){(0,p.k3)(this.tmpTransform_,this.currentFrameStateTransform_),(0,p.lw)(this.tmpTransform_,t),this.helper.setUniformMatrixValue(v.PROJECTION_MATRIX,(0,g.Z1)(this.tmpMat4_,this.tmpTransform_)),(0,p.T9)(this.tmpTransform_,this.tmpTransform_),this.helper.setUniformMatrixValue(v.SCREEN_TO_WORLD_MATRIX,(0,g.Z1)(this.tmpMat4_,this.tmpTransform_)),this.tmpCoords_[0]=0,this.tmpCoords_[1]=0,(0,p.T9)(this.tmpTransform_,t),(0,p.Bb)(this.tmpTransform_,this.tmpCoords_),this.helper.setUniformFloatVec2(v.PATTERN_ORIGIN,this.tmpCoords_)}renderFrame(t){const e=this.helper.getGL();this.preRender(e,t);const[n,i,r]=function(t,e){const n=t.viewState.projection,i=e.getSource().getWrapX()&&n.canWrapX(),r=n.getExtent(),s=t.extent,a=i?(0,o.RG)(r):null,l=i?Math.ceil((s[2]-r[2])/a)+1:1;return[i?Math.floor((s[0]-r[0])/a):0,l,a]}(t,this.getLayer());this.helper.prepareDraw(t),this.renderWorlds(t,!1,n,i,r),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const s=this.helper.getCanvas();return this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,n,i,r),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),s}prepareFrameInternal(t){this.initialFeaturesAdded_||(this.addInitialFeatures_(t),this.initialFeaturesAdded_=!0);const e=this.getLayer(),n=e.getSource(),r=t.viewState,s=!t.viewHints[i.A.ANIMATING]&&!t.viewHints[i.A.INTERACTING],h=!(0,o.aI)(this.previousExtent_,t.extent),u=this.sourceRevision_<n.getRevision();if(u&&(this.sourceRevision_=n.getRevision()),s&&(h||u)){const i=r.projection,s=r.resolution,h=e instanceof a.A?e.getRenderBuffer():0,u=(0,o.r)(t.extent,h*s),c=(0,l.Tf)();c?n.loadFeatures((0,l.JR)(u,c),(0,l.vN)(s,i),c):n.loadFeatures(u,s,i),this.ready=!1;const d=this.helper.makeProjectionTransform(t,(0,p.vt)()),f=this.styleRenderers_.map(((t,e)=>t.generateBuffers(this.batch_,d).then((t=>{this.buffers_[e]&&this.disposeBuffers(this.buffers_[e]),this.buffers_[e]=t}))));Promise.all(f).then((()=>{this.ready=!0,this.getLayer().changed()})),this.previousExtent_=t.extent.slice()}return!0}renderWorlds(t,e,n,i,r){let s=n;e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0));do{this.helper.makeProjectionTransform(t,this.currentFrameStateTransform_),(0,p.Tl)(this.currentFrameStateTransform_,s*r,0);for(let n=0,i=this.styleRenderers_.length;n<i;n++){const i=this.styleRenderers_[n],r=this.buffers_[n];r&&i.render(r,t,(()=>{this.applyUniforms_(r.invertVerticesTransform),this.helper.applyHitDetectionUniform(e)}))}}while(++s<i)}forEachFeatureAtCoordinate(t,e,n,i,s){if((0,r.v)(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.styleRenderers_.length||!this.hitDetectionEnabled_)return;const o=(0,p.Bb)(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(o[0]/2,o[1]/2),l=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],h=(0,c.L)(l),u=this.batch_.getFeatureFromRef(h);return u?i(u,this.getLayer(),null):void 0}disposeBuffers(t){const e=t=>{for(const e of t)e&&this.helper.deleteBuffer(e)};t.pointBuffers&&e(t.pointBuffers),t.lineStringBuffers&&e(t.lineStringBuffers),t.polygonBuffers&&e(t.polygonBuffers)}disposeInternal(){this.buffers_.forEach((t=>{t&&this.disposeBuffers(t)})),this.sourceListenKeys_&&(this.sourceListenKeys_.forEach((function(t){(0,s.JH)(t)})),this.sourceListenKeys_=null),super.disposeInternal()}renderDeclutter(){}}var b=x},19155:function(t,e){"use strict";e.A={ACTIVE:"active"}},19276:function(t,e,n){"use strict";var i=n(61829),r=n(94679),s=n(16235),o=n(25231),a=n(12911),l=n(17881);class h extends l.A{constructor(t){super(t),this.image=null}getImage(){return this.image?this.image.getImage():null}prepareFrame(t){const e=t.layerStatesArray[t.layerIndex],n=t.pixelRatio,a=t.viewState,l=a.resolution,h=this.getLayer().getSource(),u=t.viewHints;let c=t.extent;if(void 0!==e.extent&&(c=(0,s._N)(c,(0,o.SD)(e.extent,a.projection))),!u[r.A.ANIMATING]&&!u[r.A.INTERACTING]&&!(0,s.Im)(c))if(h){const t=a.projection,e=h.getImage(c,l,n,t);e&&(this.loadImage(e)?this.image=e:e.getState()===i.A.EMPTY&&(this.image=null))}else this.image=null;return!!this.image}getData(t){const e=this.frameState;if(!e)return null;const n=this.getLayer(),i=(0,a.Bb)(e.pixelToCoordinateTransform,t.slice()),r=n.getExtent();if(r&&!(0,s.Ym)(r,i))return null;const o=this.image.getExtent(),l=this.image.getImage(),h=(0,s.RG)(o),u=Math.floor(l.width*((i[0]-o[0])/h));if(u<0||u>=l.width)return null;const c=(0,s.Oq)(o),d=Math.floor(l.height*((o[3]-i[1])/c));return d<0||d>=l.height?null:this.getImageData(l,u,d)}renderFrame(t,e){const n=this.image,i=n.getExtent(),r=n.getResolution(),[l,h]=Array.isArray(r)?r:[r,r],u=n.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],d=t.pixelRatio,f=t.viewState,p=f.center,g=f.resolution,m=d*l/(g*u),y=d*h/(g*u);this.prepareContainer(t,e);const _=this.context.canvas.width,v=this.context.canvas.height,x=this.getRenderContext(t);let b=!1,w=!0;if(c.extent){const e=(0,o.SD)(c.extent,f.projection);w=(0,s.HY)(e,t.extent),b=w&&!(0,s.ms)(e,t.extent),b&&this.clipUnrotated(x,t,e)}const A=n.getImage(),S=(0,a.Zz)(this.tempTransform,_/2,v/2,m,y,0,u*(i[0]-p[0])/l,u*(p[1]-i[3])/h);this.renderedResolution=h*d/u;const E=A.width*S[0],T=A.height*S[3];if(this.getLayer().getSource().getInterpolate()||(x.imageSmoothingEnabled=!1),this.preRender(x,t),w&&E>=.5&&T>=.5){const t=S[4],e=S[5],n=c.opacity;1!==n&&(x.save(),x.globalAlpha=n),x.drawImage(A,0,0,+A.width,+A.height,t,e,E,T),1!==n&&x.restore()}return this.postRender(this.context,t),b&&x.restore(),x.imageSmoothingEnabled=!0,this.container}}e.A=h},20703:function(t,e,n){"use strict";n.d(e,{$r:function(){return u},bL:function(){return a},xo:function(){return o}});var i=n(37751),r=n(30942),s=n(69791);function o(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function a(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}const l=new Error("disposed");let h=null;function u(t){h||(h=(0,s.Y)(t.width,t.height,void 0,{willReadFrequently:!0}));const e=h.canvas,n=t.width;e.width!==n&&(e.width=n);const i=t.height;return e.height!==i&&(e.height=i),h.clearRect(0,0,n,i),h.drawImage(t,0,0),h.getImageData(0,0,n,i).data}const c=[256,256];class d extends i.A{constructor(t){const e=r.A.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=o(this.data_);return t?[t.width,t.height]:c}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==r.A.IDLE&&this.state!==r.A.ERROR)return;this.state=r.A.LOADING,this.changed();const t=this;this.loader_().then((function(e){t.data_=e,t.state=r.A.LOADED,t.changed()})).catch((function(e){t.error_=e,t.state=r.A.ERROR,t.changed()}))}disposeInternal(){this.controller_&&(this.controller_.abort(l),this.controller_=null),super.disposeInternal()}}e.Ay=d},21133:function(t,e,n){"use strict";var i=n(28656);class r extends i.A{constructor(t){super({points:1/0,fill:(t=t||{radius:5}).fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new r({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}e.A=r},21847:function(t,e,n){"use strict";n.d(e,{F8:function(){return d},_7:function(){return c},tF:function(){return u}});var i=n(44090),r=n(69791),s=n(16235),o=n(31141),a=n(25231),l=n(75052),h=n(61748);const u=.5;function c(t,e,n,o,c,d,f,p,g){const m=g?(0,a.JR)(c,g):c,y=t[0]*u,_=t[1]*u,v=(0,r.Y)(y,_);v.imageSmoothingEnabled=!1;const x=v.canvas,b=new h.A(v,u,c,null,f,p,g?(0,a.FO)((0,a.Tf)(),g):null),w=n.length,A=Math.floor(16777215/w),S={};for(let t=1;t<=w;++t){const e=n[t-1],i=e.getStyleFunction()||o;if(!i)continue;let a=i(e,d);if(!a)continue;Array.isArray(a)||(a=[a]);const h=(t*A).toString(16).padStart(7,"#00000");for(let t=0,n=a.length;t<n;++t){const n=a[t],i=n.getGeometryFunction()(e);if(!i||!(0,s.HY)(m,i.getExtent()))continue;const o=n.clone(),u=o.getFill();u&&u.setColor(h);const c=o.getStroke();c&&(c.setColor(h),c.setLineDash(null)),o.setText(void 0);const d=n.getImage();if(d){const t=d.getImageSize();if(!t)continue;const e=(0,r.Y)(t[0],t[1],void 0,{alpha:!1}),n=e.canvas;e.fillStyle=h,e.fillRect(0,0,n.width,n.height),o.setImage(new l.A({img:n,anchor:d.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:d.getOrigin(),opacity:1,size:d.getSize(),scale:d.getScale(),rotation:d.getRotation(),rotateWithView:d.getRotateWithView()}))}const f=o.getZIndex()||0;let p=S[f];p||(p={},S[f]=p,p.Polygon=[],p.Circle=[],p.LineString=[],p.Point=[]);const g=i.getType();if("GeometryCollection"===g){const t=i.getGeometriesArrayRecursive();for(let e=0,n=t.length;e<n;++e){const n=t[e];p[n.getType().replace("Multi","")].push(n,o)}}else p[g.replace("Multi","")].push(i,o)}}const E=Object.keys(S).map(Number).sort(i.V_);for(let t=0,n=E.length;t<n;++t){const n=S[E[t]];for(const t in n){const i=n[t];for(let t=0,n=i.length;t<n;t+=2){b.setStyle(i[t+1]);for(let n=0,r=e.length;n<r;++n)b.setTransform(e[n]),b.drawGeometry(i[t])}}}return v.getImageData(0,0,x.width,x.height)}function d(t,e,n){const i=[];if(n){const r=Math.floor(Math.round(t[0])*u),s=Math.floor(Math.round(t[1])*u),a=4*((0,o.qE)(r,0,n.width-1)+(0,o.qE)(s,0,n.height-1)*n.width),l=n.data[a],h=n.data[a+1],c=n.data[a+2]+256*(h+256*l),d=Math.floor(16777215/e.length);c&&c%d==0&&i.push(e[c/d-1])}return i}},22514:function(t,e,n){"use strict";var i=n(73887),r=n(51541),s=n(18381),o=n(38808),a=n(95702),l=n(25231),h=n(87113),u=n(19155);const c="translatestart",d="translating",f="translateend";class p extends s.Ay{constructor(t,e,n,i,r){super(t),this.features=e,this.coordinate=n,this.startCoordinate=i,this.mapBrowserEvent=r}}class g extends h.A{constructor(t){let e;if(super(t=t||{}),this.on,this.once,this.un,this.lastCoordinate_=null,this.startCoordinate_=null,this.features_=void 0!==t.features?t.features:null,t.layers&&!this.features_)if("function"==typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=a.rT;this.layerFilter_=e,this.filter_=t.filter&&!this.features_?t.filter:a.rT,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.condition_=t.condition?t.condition:o.Gk,this.lastFeature_=null,this.addChangeListener(u.A.ACTIVE,this.handleActiveChanged_)}handleDownEvent(t){if(!t.originalEvent||!this.condition_(t))return!1;if(this.lastFeature_=this.featuresAtPixel_(t.pixel,t.map),!this.lastCoordinate_&&this.lastFeature_){this.startCoordinate_=t.coordinate,this.lastCoordinate_=t.coordinate,this.handleMoveEvent(t);const e=this.features_||new i.A([this.lastFeature_]);return this.dispatchEvent(new p(c,e,t.coordinate,this.startCoordinate_,t)),!0}return!1}handleUpEvent(t){if(this.lastCoordinate_){this.lastCoordinate_=null,this.handleMoveEvent(t);const e=this.features_||new i.A([this.lastFeature_]);return this.dispatchEvent(new p(f,e,t.coordinate,this.startCoordinate_,t)),this.startCoordinate_=null,!0}return!1}handleDragEvent(t){if(this.lastCoordinate_){const e=t.coordinate,n=t.map.getView().getProjection(),r=(0,l.Ad)(e,n),s=(0,l.Ad)(this.lastCoordinate_,n),o=r[0]-s[0],a=r[1]-s[1],h=this.features_||new i.A([this.lastFeature_]),u=(0,l.Tf)();h.forEach((function(t){const e=t.getGeometry();u?(e.transform(u,n),e.translate(o,a),e.transform(n,u)):e.translate(o,a),t.setGeometry(e)})),this.lastCoordinate_=e,this.dispatchEvent(new p(d,h,e,this.startCoordinate_,t))}}handleMoveEvent(t){const e=t.map.getViewport();this.featuresAtPixel_(t.pixel,t.map)?(e.classList.remove(this.lastCoordinate_?"ol-grab":"ol-grabbing"),e.classList.add(this.lastCoordinate_?"ol-grabbing":"ol-grab")):e.classList.remove("ol-grab","ol-grabbing")}featuresAtPixel_(t,e){return e.forEachFeatureAtPixel(t,((t,e)=>{if(t instanceof r.A&&this.filter_(t,e)&&(!this.features_||this.features_.getArray().includes(t)))return t}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_})}getHitTolerance(){return this.hitTolerance_}setHitTolerance(t){this.hitTolerance_=t}setMap(t){const e=this.getMap();super.setMap(t),this.updateState_(e)}handleActiveChanged_(){this.updateState_(null)}updateState_(t){let e=this.getMap();const n=this.getActive();if((!e||!n)&&(e=e||t,e)){e.getViewport().classList.remove("ol-grab","ol-grabbing")}}}e.A=g},22685:function(t,e){"use strict";e.A={CHANGE:"change",ERROR:"error",BLUR:"blur",CLEAR:"clear",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",DRAGENTER:"dragenter",DRAGOVER:"dragover",DROP:"drop",FOCUS:"focus",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",RESIZE:"resize",TOUCHMOVE:"touchmove",WHEEL:"wheel"}},23463:function(t,e,n){"use strict";n.d(e,{F:function(){return l}});var i=n(61829),r=n(46928),s=n(69791),o=n(86603),a=n(15353);function l(t){return t?Array.isArray(t)?(0,r.dI)(t):"object"==typeof t&&"src"in t?function(t){if(!t.offset||!t.size)return a.ue.getPattern(t.src,"anonymous",t.color);const e=t.src+":"+t.offset,n=a.ue.getPattern(e,void 0,t.color);if(n)return n;const r=a.ue.get(t.src,"anonymous",null);if(r.getImageState()!==i.A.LOADED)return null;const l=(0,s.Y)(t.size[0],t.size[1]);return l.drawImage(r.getImage(1),t.offset[0],t.offset[1],t.size[0],t.size[1],0,0,t.size[0],t.size[1]),(0,o.J)(l.canvas,e,void 0,i.A.LOADED,t.color,!0),a.ue.getPattern(e,void 0,t.color)}(t):t:null}},23986:function(t,e,n){"use strict";var i=n(33220),r=n(7992);class s extends r.A{constructor(t){super(t)}createRenderer(){return new i.A(this)}}e.A=s},24366:function(t,e,n){"use strict";n.d(e,{N:function(){return r}});class i{constructor(t,e,n,i){this.minX=t,this.maxX=e,this.minY=n,this.maxY=i}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function r(t,e,n,r,s){return void 0!==s?(s.minX=t,s.maxX=e,s.minY=n,s.maxY=r,s):new i(t,e,n,r)}e.A=i},25231:function(t,e,n){"use strict";n.d(e,{Ig:function(){return l.I},MF:function(){return a.A},hB:function(){return lt},O3:function(){return st},bF:function(){return nt},Av:function(){return ot},wU:function(){return Tt},HU:function(){return at},RJ:function(){return Q},tI:function(){return ct},Rb:function(){return ht},Ad:function(){return bt},SD:function(){return At},U$:function(){return Et},Jt:function(){return it},hO:function(){return rt},RG:function(){return pt},FO:function(){return dt},Tf:function(){return _t},R6:function(){return et},WP:function(){return ut},te:function(){return xt},JR:function(){return wt},vN:function(){return St},pd:function(){return gt},DI:function(){return mt},n0:function(){return vt}});var i=n(92814),r=n(61341),s=n(16235),o=n(31141),a=n(43438),l=n(55612);const h=6378137,u=Math.PI*h,c=[-u,-u,u,u],d=[-180,-85,180,85],f=h*Math.log(Math.tan(Math.PI/2));class p extends a.A{constructor(t){super({code:t,units:"m",extent:c,global:!0,worldExtent:d,getPointResolution:function(t,e){return t/Math.cosh(e[1]/h)}})}}const g=[new p("EPSG:3857"),new p("EPSG:102100"),new p("EPSG:102113"),new p("EPSG:900913"),new p("http://www.opengis.net/def/crs/EPSG/0/3857"),new p("http://www.opengis.net/gml/srs/epsg.xml#3857")];function m(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,void 0===e&&(e=n>2?t.slice():new Array(r));for(let n=0;n<r;n+=i){e[n]=u*t[n]/180;let i=h*Math.log(Math.tan(Math.PI*(+t[n+1]+90)/360));i>f?i=f:i<-f&&(i=-f),e[n+1]=i}return e}function y(t,e,n,i){const r=t.length;n=n>1?n:2,i=i??n,void 0===e&&(e=n>2?t.slice():new Array(r));for(let n=0;n<r;n+=i)e[n]=180*t[n]/u,e[n+1]=360*Math.atan(Math.exp(t[n+1]/h))/Math.PI-90;return e}const _=[-180,-90,180,90],v=6378137*Math.PI/180;class x extends a.A{constructor(t,e){super({code:t,units:"degrees",extent:_,axisOrientation:e,global:!0,metersPerUnit:v,worldExtent:_})}}const b=[new x("CRS:84"),new x("EPSG:4326","neu"),new x("urn:ogc:def:crs:OGC:1.3:CRS84"),new x("urn:ogc:def:crs:OGC:2:84"),new x("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new x("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new x("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];var w=n(82629),A=n(67102);const S=.9996,E=.00669438,T=E*E,C=T*E,M=E/(1-E),L=Math.sqrt(1-E),P=(1-L)/(1+L),R=P*P,I=R*P,N=I*P,F=N*P,k=.9983242984503243,D=15*T/256+45*C/1024,O=35*C/3072,j=1.5*P-27/32*I+269/512*F,G=21/16*R-55/32*N,B=151/96*I-417/128*F,z=1097/512*N,q=6378137;function U(t,e,n){const i=t-5e5,r=(n.north?e:e-1e7)/S/(q*k),s=r+j*Math.sin(2*r)+G*Math.sin(4*r)+B*Math.sin(6*r)+z*Math.sin(8*r),a=Math.sin(s),l=a*a,h=Math.cos(s),u=a/h,c=u*u,d=c*c,f=1-E*l,p=Math.sqrt(1-E*l),g=M*h**2,m=g*g,y=i/(q/p*S),_=y*y,v=_*y,x=v*y,b=x*y,w=s-u/((1-E)/f)*(_/2-x/24*(5+3*c+10*g-4*m-9*M))+b*y/720*(61+90*c+298*g+45*d-252*M-3*m);let A=(y-v/6*(1+2*c+g)+b/120*(5-2*g+28*c-3*m+8*M+24*d))/h;return A=(0,o.LV)(A+(0,o.eh)($(n.number)),-Math.PI,Math.PI),[(0,o.xW)(A),(0,o.xW)(w)]}function W(t,e,n){t=(0,o.LV)(t,-180,180),e<-80?e=-80:e>84&&(e=84);const i=(0,o.eh)(e),r=Math.sin(i),s=Math.cos(i),a=r/s,l=a*a,h=l*l,u=(0,o.eh)(t),c=$(n.number),d=(0,o.eh)(c),f=q/Math.sqrt(1-E*r**2),p=M*s**2,g=s*(0,o.LV)(u-d,-Math.PI,Math.PI),m=g*g,y=m*g,_=y*g,v=_*g,x=v*g,b=q*(k*i-.002514607064228144*Math.sin(2*i)+D*Math.sin(4*i)-O*Math.sin(6*i)),w=S*f*(g+y/6*(1-l+p)+v/120*(5-18*l+h+72*p-58*M))+5e5;let A=S*(b+f*a*(m/2+_/24*(5-l+9*p+4*p**2)+x/720*(61-58*l+h+600*p-330*M)));return n.north||(A+=1e7),[w,A]}function $(t){return 6*(t-1)-180+3}const V=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function X(t){let e=0;for(const n of V){const i=t.match(n);if(i){e=parseInt(i[1]);break}}if(!e)return null;let n=0,i=!1;return e>32700&&e<32761?n=e-32700:e>32600&&e<32661&&(i=!0,n=e-32600),n?{number:n,north:i}:null}function H(t,e){return function(n,i,r,s){const o=n.length;r=r>1?r:2,s=s??r,i||(i=r>2?n.slice():new Array(o));for(let r=0;r<o;r+=s){const s=n[r],o=n[r+1],a=t(s,o,e);i[r]=a[0],i[r+1]=a[1]}return i}}var Y=n(7074);const Z=[function(t){const e=X(t.getCode());return e?{forward:H(W,e),inverse:H(U,e)}:null}],K=[function(t){return X(t)?new a.A({code:t,units:"m"}):null}];let J=!0;function Q(t){J=!(void 0===t||t)}function tt(t,e){if(void 0!==e)for(let n=0,i=t.length;n<i;++n)e[n]=t[n];else e=t.slice();return e}function et(t,e){if(void 0!==e&&t!==e){for(let n=0,i=t.length;n<i;++n)e[n]=t[n];t=e}return t}function nt(t){(0,w.WQ)(t.getCode(),t),(0,A.WQ)(t,t,tt)}function it(t){if("string"!=typeof t)return t;const e=(0,w.Jt)(t);if(e)return e;for(const e of K){const n=e(t);if(n)return n}return null}function rt(t,e,n,i){let r;const s=(t=it(t)).getPointResolutionFunc();if(s){if(r=s(e,n),i&&i!==t.getUnits()){const e=t.getMetersPerUnit();e&&(r=r*e/l.I[i])}}else{const s=t.getUnits();if("degrees"==s&&!i||"degrees"==i)r=e;else{const o=dt(t,it("EPSG:4326"));if(o||"degrees"===s){let t=[n[0]-e/2,n[1],n[0]+e/2,n[1],n[0],n[1]-e/2,n[0],n[1]+e/2];t=o(t,t,2);r=((0,Y.Yf)(t.slice(0,2),t.slice(2,4))+(0,Y.Yf)(t.slice(4,6),t.slice(6,8)))/2}else r=e*t.getMetersPerUnit();const a=i?l.I[i]:t.getMetersPerUnit();void 0!==a&&(r/=a)}}return r}function st(t){!function(t){t.forEach(nt)}(t),t.forEach((function(e){t.forEach((function(t){e!==t&&(0,A.WQ)(e,t,tt)}))}))}function ot(t,e){return t?"string"==typeof t?it(t):t:it(e)}function at(t){return function(e,n,i,r){const s=e.length;i=void 0!==i?i:2,r=r??i,n=void 0!==n?n:new Array(s);for(let o=0;o<s;o+=r){const s=t(e.slice(o,o+i)),a=s.length;for(let t=0,i=r;t<i;++t)n[o+t]=t>=a?e[o+t]:s[t]}return n}}function lt(t,e,n,i){const r=it(t),s=it(e);(0,A.WQ)(r,s,at(n)),(0,A.WQ)(s,r,at(i))}function ht(t,e){return Q(),gt(t,"EPSG:4326",void 0!==e?e:"EPSG:3857")}function ut(t,e){const n=gt(t,void 0!==e?e:"EPSG:3857","EPSG:4326"),i=n[0];return(i<-180||i>180)&&(n[0]=(0,o.xP)(i+180,360)-180),n}function ct(t,e){if(t===e)return!0;const n=t.getUnits()===e.getUnits();if(t.getCode()===e.getCode())return n;return dt(t,e)===tt&&n}function dt(t,e){const n=t.getCode(),i=e.getCode();let r=(0,A.Jt)(n,i);if(r)return r;let s=null,o=null;for(const n of Z)s||(s=n(t)),o||(o=n(e));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)r=ft(s.inverse,o.forward);else{const t=(0,A.Jt)(n,a);t&&(r=ft(t,o.forward))}else{const t=(0,A.Jt)(a,i);t&&(r=ft(s.inverse,t))}return r&&(nt(t),nt(e),(0,A.WQ)(t,e,r)),r}function ft(t,e){return function(n,i,r,s){return i=t(n,i,r,s),e(i,i,r,s)}}function pt(t,e){return dt(it(t),it(e))}function gt(t,e,n){const i=pt(e,n);if(!i){const t=it(e).getCode(),i=it(n).getCode();throw new Error(`No transform available between ${t} and ${i}`)}return i(t,void 0,t.length)}function mt(t,e,n,i){const r=pt(e,n);return(0,s.NW)(t,r,void 0,i)}let yt=null;function _t(){return yt}function vt(){yt=it("EPSG:4326")}function xt(t,e){return yt?gt(t,e,yt):t}function bt(t,e){return yt?gt(t,yt,e):(J&&!(0,r.aI)(t,[0,0])&&t[0]>=-180&&t[0]<=180&&t[1]>=-90&&t[1]<=90&&(J=!1,(0,i.R8)("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),t)}function wt(t,e){return yt?mt(t,e,yt):t}function At(t,e){return yt?mt(t,yt,e):t}function St(t,e){if(!yt)return t;const n=it(e).getMetersPerUnit(),i=yt.getMetersPerUnit();return n&&i?t*n/i:t}function Et(t,e){if(!yt)return t;const n=it(e).getMetersPerUnit(),i=yt.getMetersPerUnit();return n&&i?t*i/n:t}function Tt(t,e,n){return function(i){let a,l;if(t.canWrapX()){const e=t.getExtent(),h=(0,s.RG)(e);i=i.slice(0),l=(0,r.U$)(i,t,h),l&&(i[0]=i[0]-l*h),i[0]=(0,o.qE)(i[0],e[0],e[2]),i[1]=(0,o.qE)(i[1],e[1],e[3]),a=n(i)}else a=n(i);return l&&e.canWrapX()&&(a[0]+=l*(0,s.RG)(e.getExtent())),a}}var Ct,Mt,Lt;st(g),st(b),Ct=g,Mt=m,Lt=y,b.forEach((function(t){Ct.forEach((function(e){(0,A.WQ)(t,e,Mt),(0,A.WQ)(e,t,Lt)}))}))},25309:function(t,e,n){"use strict";var i=n(22685);e.A={SINGLECLICK:"singleclick",CLICK:i.A.CLICK,DBLCLICK:i.A.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},26238:function(t,e,n){"use strict";function i(t,e,n,i,r,s,o){s=s||[],o=o||2;let a=0;for(let l=e;l<n;l+=i){const e=t[l],n=t[l+1];s[a++]=r[0]*e+r[2]*n+r[4],s[a++]=r[1]*e+r[3]*n+r[5];for(let e=2;e<o;e++)s[a++]=t[l+e]}return s&&s.length!=a&&(s.length=a),s}function r(t,e,n,i,r,s,o){o=o||[];const a=Math.cos(r),l=Math.sin(r),h=s[0],u=s[1];let c=0;for(let r=e;r<n;r+=i){const e=t[r]-h,n=t[r+1]-u;o[c++]=h+e*a-n*l,o[c++]=u+e*l+n*a;for(let e=r+2;e<r+i;++e)o[c++]=t[e]}return o&&o.length!=c&&(o.length=c),o}function s(t,e,n,i,r,s,o,a){a=a||[];const l=o[0],h=o[1];let u=0;for(let o=e;o<n;o+=i){const e=t[o]-l,n=t[o+1]-h;a[u++]=l+r*e,a[u++]=h+s*n;for(let e=o+2;e<o+i;++e)a[u++]=t[e]}return a&&a.length!=u&&(a.length=u),a}function o(t,e,n,i,r,s,o){o=o||[];let a=0;for(let l=e;l<n;l+=i){o[a++]=t[l]+r,o[a++]=t[l+1]+s;for(let e=l+2;e<l+i;++e)o[a++]=t[e]}return o&&o.length!=a&&(o.length=a),o}n.d(e,{Rc:function(){return i},Tl:function(){return o},e$:function(){return r},hs:function(){return s}})},26764:function(t,e,n){"use strict";function i(){}function r(t){return null==t?i:function(){return this.querySelector(t)}}n.d(e,{A:function(){return r}})},26947:function(t,e,n){"use strict";n.d(e,{HC:function(){return G},nb:function(){return b}});var i=n(74977),r=Object.defineProperty,s=Math.pow,o=(t,e)=>r(t,"name",{value:e,configurable:!0}),a=(t,e,n)=>new Promise(((i,r)=>{var s=t=>{try{a(n.next(t))}catch(t){r(t)}},o=t=>{try{a(n.throw(t))}catch(t){r(t)}},a=t=>t.done?i(t.value):Promise.resolve(t.value).then(s,o);a((n=n.apply(t,e)).next())})),l=(o(((t,e)=>{let n=!1,i="";return new(L.GridLayer.extend({createTile:o(((e,r)=>{let s=document.createElement("img"),o=new AbortController,a=o.signal;return s.cancel=()=>{o.abort()},n||(t.getHeader().then((t=>{1===t.tileType?console.error("Error: archive contains MVT vector tiles, but leafletRasterLayer is for displaying raster tiles. See https://github.com/protomaps/PMTiles/tree/main/js for details."):2===t.tileType?i="image/png":3===t.tileType?i="image/jpeg":4===t.tileType?i="image/webp":5===t.tileType&&(i="image/avif")})),n=!0),t.getZxy(e.z,e.x,e.y,a).then((t=>{if(t){let e=new Blob([t.data],{type:i}),n=window.URL.createObjectURL(e);s.src=n,s.cancel=void 0,r(void 0,s)}})).catch((t=>{if("AbortError"!==t.name)throw t})),s}),"createTile"),_removeTile:o((function(t){let e=this._tiles[t];e&&(e.el.cancel&&e.el.cancel(),e.el.width=0,e.el.height=0,e.el.deleted=!0,L.DomUtil.remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))}),"_removeTile")}))(e)}),"leafletRasterLayer"),o((t=>(e,n)=>{if(n instanceof AbortController)return t(e,n);let i=new AbortController;return t(e,i).then((t=>n(void 0,t.data,t.cacheControl||"",t.expires||"")),(t=>n(t))).catch((t=>n(t))),{cancel:o((()=>i.abort()),"cancel")}}),"v3compat")),h=class{constructor(t){this.tilev4=o(((t,e)=>a(this,null,(function*(){if("json"===t.type){let e=t.url.substr(10),n=this.tiles.get(e);if(n||(n=new G(e),this.tiles.set(e,n)),this.metadata)return{data:yield n.getTileJson(t.url)};let i=yield n.getHeader();return(i.minLon>=i.maxLon||i.minLat>=i.maxLat)&&console.error(`Bounds of PMTiles archive ${i.minLon},${i.minLat},${i.maxLon},${i.maxLat} are not valid.`),{data:{tiles:[`${t.url}/{z}/{x}/{y}`],minzoom:i.minZoom,maxzoom:i.maxZoom,bounds:[i.minLon,i.minLat,i.maxLon,i.maxLat]}}}let n=new RegExp(/pmtiles:\/\/(.+)\/(\d+)\/(\d+)\/(\d+)/),i=t.url.match(n);if(!i)throw new Error("Invalid PMTiles protocol URL");let r=i[1],s=this.tiles.get(r);s||(s=new G(r),this.tiles.set(r,s));let o=i[2],a=i[3],l=i[4],h=yield s.getHeader(),u=yield null==s?void 0:s.getZxy(+o,+a,+l,e.signal);if(u)return{data:new Uint8Array(u.data),cacheControl:u.cacheControl,expires:u.expires};if(1===h.tileType){if(this.errorOnMissingTile)throw new Error("Tile not found.");return{data:new Uint8Array}}return{data:null}}))),"tilev4"),this.tile=l(this.tilev4),this.tiles=new Map,this.metadata=(null==t?void 0:t.metadata)||!1,this.errorOnMissingTile=(null==t?void 0:t.errorOnMissingTile)||!1}add(t){this.tiles.set(t.source.getKey(),t)}get(t){return this.tiles.get(t)}};o(h,"Protocol");function u(t,e){return 4294967296*(e>>>0)+(t>>>0)}function c(t,e){let n=e.buf,i=n[e.pos++],r=(112&i)>>4;if(i<128||(i=n[e.pos++],r|=(127&i)<<3,i<128)||(i=n[e.pos++],r|=(127&i)<<10,i<128)||(i=n[e.pos++],r|=(127&i)<<17,i<128)||(i=n[e.pos++],r|=(127&i)<<24,i<128)||(i=n[e.pos++],r|=(1&i)<<31,i<128))return u(t,r);throw new Error("Expected varint not more than 10 bytes")}function d(t){let e=t.buf,n=e[t.pos++],i=127&n;return n<128||(n=e[t.pos++],i|=(127&n)<<7,n<128)||(n=e[t.pos++],i|=(127&n)<<14,n<128)||(n=e[t.pos++],i|=(127&n)<<21,n<128)?i:(n=e[t.pos],i|=(15&n)<<28,c(i,t))}function f(t,e,n,i){if(0===i){1===n&&(e[0]=t-1-e[0],e[1]=t-1-e[1]);let i=e[0];e[0]=e[1],e[1]=i}}function p(t,e){let n=s(2,t),i=e,r=e,o=e,a=[0,0],l=1;for(;l<n;)i=1&o/2,r=1&(o^i),f(l,a,i,r),a[0]+=l*i,a[1]+=l*r,o/=4,l*=2;return[t,a[0],a[1]]}o(u,"toNum"),o(c,"readVarintRemainder"),o(d,"readVarint"),o(f,"rotate"),o(p,"idOnLevel");var g=[0,1,5,21,85,341,1365,5461,21845,87381,349525,1398101,5592405,22369621,89478485,357913941,1431655765,5726623061,22906492245,91625968981,366503875925,1466015503701,5864062014805,23456248059221,93824992236885,375299968947541,0x5555555555555];function m(t,e,n){if(t>26)throw new Error("Tile zoom level exceeds max safe number limit (26)");if(e>s(2,t)-1||n>s(2,t)-1)throw new Error("tile x/y outside zoom level bounds");let i=g[t],r=0,o=0,a=0,l=[e,n],h=s(2,t)/2;for(;h>0;)r=(l[0]&h)>0?1:0,o=(l[1]&h)>0?1:0,a+=h*h*(3*r^o),f(h,l,r,o),h/=2;return i+a}o(m,"zxyToTileId"),o((function(t){let e=0;for(let n=0;n<27;n++){let i=(1<<n)*(1<<n);if(e+i>t)return p(n,t-e);e+=i}throw new Error("Tile zoom level exceeds max safe number limit (26)")}),"tileIdToZxy");var y,_=((y=_||{})[y.Unknown=0]="Unknown",y[y.None=1]="None",y[y.Gzip=2]="Gzip",y[y.Brotli=3]="Brotli",y[y.Zstd=4]="Zstd",y);function v(t,e){return a(this,null,(function*(){if(1===e||0===e)return t;if(2===e){if(void 0===globalThis.DecompressionStream)return(0,i.Rq)(new Uint8Array(t));let e=new Response(t).body;if(!e)throw new Error("Failed to read response stream");let n=e.pipeThrough(new globalThis.DecompressionStream("gzip"));return new Response(n).arrayBuffer()}throw new Error("Compression method not supported")}))}o(v,"defaultDecompress");var x,b=((x=b||{})[x.Unknown=0]="Unknown",x[x.Mvt=1]="Mvt",x[x.Png=2]="Png",x[x.Jpeg=3]="Jpeg",x[x.Webp=4]="Webp",x[x.Avif=5]="Avif",x);function w(t){return 1===t?".mvt":2===t?".png":3===t?".jpg":4===t?".webp":5===t?".avif":""}o(w,"tileTypeExt");function A(t,e){let n=0,i=t.length-1;for(;n<=i;){let r=i+n>>1,s=e-t[r].tileId;if(s>0)n=r+1;else{if(!(s<0))return t[r];i=r-1}}return i>=0&&(0===t[i].runLength||e-t[i].tileId<t[i].runLength)?t[i]:null}o(A,"findTile");var S=class{constructor(t){this.file=t}getKey(){return this.file.name}getBytes(t,e){return a(this,null,(function*(){return{data:yield this.file.slice(t,t+e).arrayBuffer()}}))}};o(S,"FileSource");var E=class{constructor(t,e=new Headers){this.url=t,this.customHeaders=e,this.mustReload=!1;let n="";"navigator"in globalThis&&(n=globalThis.navigator.userAgent||"");let i=n.indexOf("Windows")>-1,r=/Chrome|Chromium|Edg|OPR|Brave/.test(n);this.chromeWindowsNoCache=!1,i&&r&&(this.chromeWindowsNoCache=!0)}getKey(){return this.url}setHeaders(t){this.customHeaders=t}getBytes(t,e,n,i){return a(this,null,(function*(){let r,s;n?s=n:(r=new AbortController,s=r.signal);let o,a=new Headers(this.customHeaders);a.set("range",`bytes=${t}-${t+e-1}`),this.mustReload?o="reload":this.chromeWindowsNoCache&&(o="no-store");let l=yield fetch(this.url,{signal:s,cache:o,headers:a});if(0===t&&416===l.status){let t=l.headers.get("Content-Range");if(!t||!t.startsWith("bytes */"))throw new Error("Missing content-length on 416 response");let e=+t.substr(8);l=yield fetch(this.url,{signal:s,cache:"reload",headers:{range:"bytes=0-"+(e-1)}})}let h=l.headers.get("Etag");if(null!=h&&h.startsWith("W/")&&(h=null),416===l.status||i&&h&&h!==i)throw this.mustReload=!0,new I(`Server returned non-matching ETag ${i} after one retry. Check browser extensions and servers for issues that may affect correct ETag headers.`);if(l.status>=300)throw new Error(`Bad response code: ${l.status}`);let u=l.headers.get("Content-Length");if(200===l.status&&(!u||+u>e))throw r&&r.abort(),new Error("Server returned no content-length header or content-length exceeding request. Check that your storage backend supports HTTP Byte Serving.");return{data:yield l.arrayBuffer(),etag:h||void 0,cacheControl:l.headers.get("Cache-Control")||void 0,expires:l.headers.get("Expires")||void 0}}))}};o(E,"FetchSource");var T=E;function C(t,e){let n=t.getUint32(e+4,!0),i=t.getUint32(e+0,!0);return n*s(2,32)+i}function M(t,e){let n=new DataView(t),i=n.getUint8(7);if(i>3)throw new Error(`Archive is spec version ${i} but this library supports up to spec version 3`);return{specVersion:i,rootDirectoryOffset:C(n,8),rootDirectoryLength:C(n,16),jsonMetadataOffset:C(n,24),jsonMetadataLength:C(n,32),leafDirectoryOffset:C(n,40),leafDirectoryLength:C(n,48),tileDataOffset:C(n,56),tileDataLength:C(n,64),numAddressedTiles:C(n,72),numTileEntries:C(n,80),numTileContents:C(n,88),clustered:1===n.getUint8(96),internalCompression:n.getUint8(97),tileCompression:n.getUint8(98),tileType:n.getUint8(99),minZoom:n.getUint8(100),maxZoom:n.getUint8(101),minLon:n.getInt32(102,!0)/1e7,minLat:n.getInt32(106,!0)/1e7,maxLon:n.getInt32(110,!0)/1e7,maxLat:n.getInt32(114,!0)/1e7,centerZoom:n.getUint8(118),centerLon:n.getInt32(119,!0)/1e7,centerLat:n.getInt32(123,!0)/1e7,etag:e}}function P(t){let e={buf:new Uint8Array(t),pos:0},n=d(e),i=[],r=0;for(let t=0;t<n;t++){let t=d(e);i.push({tileId:r+t,offset:0,length:0,runLength:1}),r+=t}for(let t=0;t<n;t++)i[t].runLength=d(e);for(let t=0;t<n;t++)i[t].length=d(e);for(let t=0;t<n;t++){let n=d(e);i[t].offset=0===n&&t>0?i[t-1].offset+i[t-1].length:n-1}return i}o(C,"getUint64"),o(M,"bytesToHeader"),o(P,"deserializeIndex");var R=class extends Error{};o(R,"EtagMismatch");var I=R;function N(t,e){return a(this,null,(function*(){let n=yield t.getBytes(0,16384);if(19792!==new DataView(n.data).getUint16(0,!0))throw new Error("Wrong magic number for PMTiles archive");let i=M(n.data.slice(0,127),n.etag),r=n.data.slice(i.rootDirectoryOffset,i.rootDirectoryOffset+i.rootDirectoryLength),s=`${t.getKey()}|${i.etag||""}|${i.rootDirectoryOffset}|${i.rootDirectoryLength}`,o=P(yield e(r,i.internalCompression));return[i,[s,o.length,o]]}))}function F(t,e,n,i,r){return a(this,null,(function*(){let s=yield t.getBytes(n,i,void 0,r.etag),o=P(yield e(s.data,r.internalCompression));if(0===o.length)throw new Error("Empty directory is invalid");return o}))}o(N,"getHeaderAndRoot"),o(F,"getDirectory");var k=class{constructor(t=100,e=!0,n=v){this.cache=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=n}getHeader(t){return a(this,null,(function*(){let e=t.getKey(),n=this.cache.get(e);if(n)return n.lastUsed=this.counter++,n.data;let i=yield N(t,this.decompress);return i[1]&&this.cache.set(i[1][0],{lastUsed:this.counter++,data:i[1][2]}),this.cache.set(e,{lastUsed:this.counter++,data:i[0]}),this.prune(),i[0]}))}getDirectory(t,e,n,i){return a(this,null,(function*(){let r=`${t.getKey()}|${i.etag||""}|${e}|${n}`,s=this.cache.get(r);if(s)return s.lastUsed=this.counter++,s.data;let o=yield F(t,this.decompress,e,n,i);return this.cache.set(r,{lastUsed:this.counter++,data:o}),this.prune(),o}))}prune(){if(this.cache.size>this.maxCacheEntries){let t,e=1/0;this.cache.forEach(((n,i)=>{n.lastUsed<e&&(e=n.lastUsed,t=i)})),t&&this.cache.delete(t)}}invalidate(t){return a(this,null,(function*(){this.cache.delete(t.getKey())}))}};o(k,"ResolvedValueCache");var D=class{constructor(t=100,e=!0,n=v){this.cache=new Map,this.invalidations=new Map,this.maxCacheEntries=t,this.counter=1,this.decompress=n}getHeader(t){return a(this,null,(function*(){let e=t.getKey(),n=this.cache.get(e);if(n)return n.lastUsed=this.counter++,yield n.data;let i=new Promise(((e,n)=>{N(t,this.decompress).then((t=>{t[1]&&this.cache.set(t[1][0],{lastUsed:this.counter++,data:Promise.resolve(t[1][2])}),e(t[0]),this.prune()})).catch((t=>{n(t)}))}));return this.cache.set(e,{lastUsed:this.counter++,data:i}),i}))}getDirectory(t,e,n,i){return a(this,null,(function*(){let r=`${t.getKey()}|${i.etag||""}|${e}|${n}`,s=this.cache.get(r);if(s)return s.lastUsed=this.counter++,yield s.data;let o=new Promise(((r,s)=>{F(t,this.decompress,e,n,i).then((t=>{r(t),this.prune()})).catch((t=>{s(t)}))}));return this.cache.set(r,{lastUsed:this.counter++,data:o}),o}))}prune(){if(this.cache.size>=this.maxCacheEntries){let t,e=1/0;this.cache.forEach(((n,i)=>{n.lastUsed<e&&(e=n.lastUsed,t=i)})),t&&this.cache.delete(t)}}invalidate(t){return a(this,null,(function*(){let e=t.getKey();if(this.invalidations.get(e))return yield this.invalidations.get(e);this.cache.delete(t.getKey());let n=new Promise(((n,i)=>{this.getHeader(t).then((t=>{n(),this.invalidations.delete(e)})).catch((t=>{i(t)}))}));this.invalidations.set(e,n)}))}};o(D,"SharedPromiseCache");var O=D,j=class{constructor(t,e,n){this.source="string"==typeof t?new T(t):t,this.decompress=n||v,this.cache=e||new O}getHeader(){return a(this,null,(function*(){return yield this.cache.getHeader(this.source)}))}getZxyAttempt(t,e,n,i){return a(this,null,(function*(){let r=m(t,e,n),s=yield this.cache.getHeader(this.source);if(t<s.minZoom||t>s.maxZoom)return;let o=s.rootDirectoryOffset,a=s.rootDirectoryLength;for(let t=0;t<=3;t++){let t=A(yield this.cache.getDirectory(this.source,o,a,s),r);if(!t)return;if(t.runLength>0){let e=yield this.source.getBytes(s.tileDataOffset+t.offset,t.length,i,s.etag);return{data:yield this.decompress(e.data,s.tileCompression),cacheControl:e.cacheControl,expires:e.expires}}o=s.leafDirectoryOffset+t.offset,a=t.length}throw new Error("Maximum directory depth exceeded")}))}getZxy(t,e,n,i){return a(this,null,(function*(){try{return yield this.getZxyAttempt(t,e,n,i)}catch(r){if(r instanceof I)return this.cache.invalidate(this.source),yield this.getZxyAttempt(t,e,n,i);throw r}}))}getMetadataAttempt(){return a(this,null,(function*(){let t=yield this.cache.getHeader(this.source),e=yield this.source.getBytes(t.jsonMetadataOffset,t.jsonMetadataLength,void 0,t.etag),n=yield this.decompress(e.data,t.internalCompression),i=new TextDecoder("utf-8");return JSON.parse(i.decode(n))}))}getMetadata(){return a(this,null,(function*(){try{return yield this.getMetadataAttempt()}catch(t){if(t instanceof I)return this.cache.invalidate(this.source),yield this.getMetadataAttempt();throw t}}))}getTileJson(t){return a(this,null,(function*(){let e=yield this.getHeader(),n=yield this.getMetadata(),i=w(e.tileType);return{tilejson:"3.0.0",scheme:"xyz",tiles:[`${t}/{z}/{x}/{y}${i}`],vector_layers:n.vector_layers,attribution:n.attribution,description:n.description,name:n.name,version:n.version,bounds:[e.minLon,e.minLat,e.maxLon,e.maxLat],center:[e.centerLon,e.centerLat,e.centerZoom],minzoom:e.minZoom,maxzoom:e.maxZoom}}))}};o(j,"PMTiles");var G=j},27213:function(t,e){"use strict";e.A={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}},27527:function(t,e,n){"use strict";n.d(e,{y2:function(){return C},$i:function(){return M},x$:function(){return L},Ay:function(){return R}});var i=n(44090),r=n(69791),s=n(16235),o=n(26238),a=n(45090),l=n(12911),h=n(78368),u=n(31141);function c(t,e,n,i,r,s,a,l,h,c,d,f,p=!0){let g=t[e],m=t[e+1],y=0,_=0,v=0,x=0;function b(){y=g,_=m,g=t[e+=i],m=t[e+1],x+=v,v=Math.sqrt((g-y)*(g-y)+(m-_)*(m-_))}do{b()}while(e<n-i&&x+v<s);let w=0===v?0:(s-x)/v;const A=(0,u.Cc)(y,g,w),S=(0,u.Cc)(_,m,w),E=e-i,T=x,C=s+l*h(c,r,d);for(;e<n-i&&x+v<C;)b();w=0===v?0:(C-x)/v;const M=(0,u.Cc)(y,g,w),L=(0,u.Cc)(_,m,w);let P=!1;if(p)if(f){const t=[A,S,M,L];(0,o.e$)(t,0,4,2,f,t,t),P=t[0]>t[2]}else P=A>M;const R=Math.PI,I=[],N=E+i===e;let F;if(v=0,x=T,g=t[e=E],m=t[e+1],N){b(),F=Math.atan2(m-_,g-y),P&&(F+=F>0?-R:R);const t=(M+A)/2,e=(L+S)/2;return I[0]=[t,e,(C-s)/2,F,r],I}for(let t=0,o=(r=r.replace(/\n/g," ")).length;t<o;){b();let f=Math.atan2(m-_,g-y);if(P&&(f+=f>0?-R:R),void 0!==F){let t=f-F;if(t+=t>R?-2*R:t<-R?2*R:0,Math.abs(t)>a)return null}F=f;const p=t;let A=0;for(;t<o;++t){const a=l*h(c,r[P?o-t-1:t],d);if(e+i<n&&x+v<s+A+a/2)break;A+=a}if(t===p)continue;const S=P?r.substring(o-p,o-t):r.substring(p,t);w=0===v?0:(s+A/2-x)/v;const E=(0,u.Cc)(y,g,w),T=(0,u.Cc)(_,m,w);I.push([E,T,A/2,f,S]),s+=A}return I}var d=n(73808),f=n(27678),p=n(56037),g=n(95792);const m=(0,s.S5)(),y=[],_=[],v=[],x=[];function b(t){return t[3].declutterBox}const w=new RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function A(t,e){return"start"===e?e=w.test(t)?"right":"left":"end"===e&&(e=w.test(t)?"left":"right"),g.E[e]}function S(t,e,n){return n>0&&t.push("\n",""),t.push(e,""),t}function E(t,e,n){return n%2==0&&(t+=e),t}var T=class{constructor(t,e,n,i,r){this.overlaps=n,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=i.instructions,this.coordinates=i.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,l.vt)(),this.hitDetectionInstructions=i.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=i.fillStates||{},this.strokeStates=i.strokeStates||{},this.textStates=i.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=r?new d.A:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,n,i){const r=t+e+n+i;if(this.labels_[r])return this.labels_[r];const s=i?this.strokeStates[i]:null,o=n?this.fillStates[n]:null,a=this.textStates[e],l=this.pixelRatio,h=[a.scale[0]*l,a.scale[1]*l],u=a.justify?g.E[a.justify]:A(Array.isArray(t)?t[0]:t,a.textAlign||f.MY),c=i&&s.lineWidth?s.lineWidth:0,d=Array.isArray(t)?t:String(t).split("\n").reduce(S,[]),{width:p,height:m,widths:y,heights:_,lineWidths:v}=(0,f.jT)(a,d),x=p+c,b=[],w=(x+2)*h[0],E=(m+c)*h[1],T={width:w<0?Math.floor(w):Math.ceil(w),height:E<0?Math.floor(E):Math.ceil(E),contextInstructions:b};1==h[0]&&1==h[1]||b.push("scale",h),i&&(b.push("strokeStyle",s.strokeStyle),b.push("lineWidth",c),b.push("lineCap",s.lineCap),b.push("lineJoin",s.lineJoin),b.push("miterLimit",s.miterLimit),b.push("setLineDash",[s.lineDash]),b.push("lineDashOffset",s.lineDashOffset)),n&&b.push("fillStyle",o.fillStyle),b.push("textBaseline","middle"),b.push("textAlign","center");const C=.5-u;let M=u*x+C*c;const L=[],P=[];let R,I=0,N=0,F=0,k=0;for(let t=0,e=d.length;t<e;t+=2){const e=d[t];if("\n"===e){N+=I,I=0,M=u*x+C*c,++k;continue}const r=d[t+1]||a.font;r!==R&&(i&&L.push("font",r),n&&P.push("font",r),R=r),I=Math.max(I,_[F]);const s=[e,M+C*y[F]+u*(y[F]-v[k]),.5*(c+I)+N];M+=y[F],i&&L.push("strokeText",s),n&&P.push("fillText",s),++F}return Array.prototype.push.apply(b,L),Array.prototype.push.apply(b,P),this.labels_[r]=T,T}replayTextBackground_(t,e,n,i,r,s,o){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,n),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,e),s&&(this.alignAndScaleFill_=s[2],t.fillStyle=s[1],this.fill_(t)),o&&(this.setStrokeStyle_(t,o),t.stroke())}calculateImageOrLabelDimensions_(t,e,n,i,r,o,a,h,u,c,d,f,p,g,b,w){let A=n-(a*=f[0]),S=i-(h*=f[1]);const E=r+u>t?t-u:r,T=o+c>e?e-c:o,C=g[3]+E*f[0]+g[1],M=g[0]+T*f[1]+g[2],L=A-g[3],P=S-g[0];let R;return(b||0!==d)&&(y[0]=L,x[0]=L,y[1]=P,_[1]=P,_[0]=L+C,v[0]=_[0],v[1]=P+M,x[1]=v[1]),0!==d?(R=(0,l.Zz)((0,l.vt)(),n,i,1,1,d,-n,-i),(0,l.Bb)(R,y),(0,l.Bb)(R,_),(0,l.Bb)(R,v),(0,l.Bb)(R,x),(0,s.N)(Math.min(y[0],_[0],v[0],x[0]),Math.min(y[1],_[1],v[1],x[1]),Math.max(y[0],_[0],v[0],x[0]),Math.max(y[1],_[1],v[1],x[1]),m)):(0,s.N)(Math.min(L,L+C),Math.min(P,P+M),Math.max(L,L+C),Math.max(P,P+M),m),p&&(A=Math.round(A),S=Math.round(S)),{drawImageX:A,drawImageY:S,drawImageW:E,drawImageH:T,originX:u,originY:c,declutterBox:{minX:m[0],minY:m[1],maxX:m[2],maxY:m[3],value:w},canvasTransform:R,scale:f}}replayImageOrLabel_(t,e,n,i,r,s,o){const a=!(!s&&!o),l=i.declutterBox,h=o?o[2]*i.scale[0]/2:0;return l.minX-h<=e[0]&&l.maxX+h>=0&&l.minY-h<=e[1]&&l.maxY+h>=0&&(a&&this.replayTextBackground_(t,y,_,v,x,s,o),(0,f.Jw)(t,i.canvasTransform,r,n,i.originX,i.originY,i.drawImageW,i.drawImageH,i.drawImageX,i.drawImageY,i.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const n=(0,l.Bb)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(n[0]%i,n[1]%i),1!==e&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,n,i){const r=this.textStates[e],s=this.createLabel(t,e,i,n),o=this.strokeStates[n],a=this.pixelRatio,l=A(Array.isArray(t)?t[0]:t,r.textAlign||f.MY),h=g.E[r.textBaseline||f.M8],u=o&&o.lineWidth?o.lineWidth:0;return{label:s,anchorX:l*(s.width/a-2*r.scale[0])+2*(.5-l)*u,anchorY:h*s.height/a+2*(.5-h)*u}}execute_(t,e,n,r,a,u,d,g){const m=this.zIndexContext_;let y;this.pixelCoordinates_&&(0,i.aI)(n,this.renderedTransform_)?y=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),y=(0,o.Rc)(this.coordinates,0,this.coordinates.length,2,n,this.pixelCoordinates_),(0,l.k3)(this.renderedTransform_,n));let _=0;const v=r.length;let x,w,S,T,C,M,L,P,R,I,N,F,k,D=0,O=0,j=0;const G=this.coordinateCache_,B=this.viewRotation_,z=Math.round(1e12*Math.atan2(-n[1],n[0]))/1e12,q={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},U=this.instructions!=r||this.overlaps?0:200;let W,$,V,X;for(;_<v;){const n=r[_];switch(n[0]){case p.Ay.BEGIN_GEOMETRY:W=n[1],X=n[3],W.getGeometry()?void 0===d||(0,s.HY)(d,X.getExtent())?++_:_=n[2]+1:_=n[2],m&&(m.zIndex=n[4]);break;case p.Ay.BEGIN_PATH:O>U&&(this.fill_(t),O=0),j>U&&(t.stroke(),j=0),O||j||(t.beginPath(),C=NaN,M=NaN),++_;break;case p.Ay.CIRCLE:D=n[1];const i=y[D],r=y[D+1],o=y[D+2]-i,l=y[D+3]-r,v=Math.sqrt(o*o+l*l);t.moveTo(i+v,r),t.arc(i,r,v,0,2*Math.PI,!0),++_;break;case p.Ay.CLOSE_PATH:t.closePath(),++_;break;case p.Ay.CUSTOM:D=n[1],x=n[2];const H=n[3],Y=n[4],Z=n[5];q.geometry=H,q.feature=W,_ in G||(G[_]=[]);const K=G[_];Z?Z(y,D,x,2,K):(K[0]=y[D],K[1]=y[D+1],K.length=2),m&&(m.zIndex=n[6]),Y(K,q),++_;break;case p.Ay.DRAW_IMAGE:D=n[1],x=n[2],R=n[3],w=n[4],S=n[5];let J=n[6];const Q=n[7],tt=n[8],et=n[9],nt=n[10];let it=n[11];const rt=n[12];let st=n[13];T=n[14]||"declutter";const ot=n[15];if(!R&&n.length>=20){I=n[19],N=n[20],F=n[21],k=n[22];const t=this.drawLabelWithPointPlacement_(I,N,F,k);R=t.label,n[3]=R;const e=n[23];w=(t.anchorX-e)*this.pixelRatio,n[4]=w;const i=n[24];S=(t.anchorY-i)*this.pixelRatio,n[5]=S,J=R.height,n[6]=J,st=R.width,n[13]=st}let at,lt,ht,ut;n.length>25&&(at=n[25]),n.length>17?(lt=n[16],ht=n[17],ut=n[18]):(lt=f.Tq,ht=null,ut=null),nt&&z?it+=B:nt||z||(it-=B);let ct=0;for(;D<x;D+=2){if(at&&at[ct++]<st/this.pixelRatio)continue;const n=this.calculateImageOrLabelDimensions_(R.width,R.height,y[D],y[D+1],st,J,w,S,tt,et,it,rt,a,lt,!!ht||!!ut,W),i=[t,e,R,n,Q,ht,ut];if(g){let t,e,r,s,o;if(ot){const n=x-D;if(!ot[n]){ot[n]={args:i,declutterMode:T};continue}const s=ot[n];t=s.args,e=s.declutterMode,delete ot[n],r=b(t)}if(!t||"declutter"===e&&g.collides(r)||(s=!0),"declutter"===T&&g.collides(n.declutterBox)||(o=!0),"declutter"===e&&"declutter"===T){const t=s&&o;s=t,o=t}s&&("none"!==e&&g.insert(r),this.replayImageOrLabel_.apply(this,t)),o&&("none"!==T&&g.insert(n.declutterBox),this.replayImageOrLabel_.apply(this,i))}else this.replayImageOrLabel_.apply(this,i)}++_;break;case p.Ay.DRAW_CHARS:const dt=n[1],ft=n[2],pt=n[3],gt=n[4];k=n[5];const mt=n[6],yt=n[7],_t=n[8];F=n[9];const vt=n[10];I=n[11],Array.isArray(I)&&(I=I.reduce(E,"")),N=n[12];const xt=[n[13],n[13]];T=n[14]||"declutter";const bt=n[15],wt=this.textStates[N],At=wt.font,St=[wt.scale[0]*yt,wt.scale[1]*yt];let Et;At in this.widths_?Et=this.widths_[At]:(Et={},this.widths_[At]=Et);const Tt=(0,h.k)(y,dt,ft,2),Ct=Math.abs(St[0])*(0,f.TA)(At,I,Et);if(gt||Ct<=Tt){const n=c(y,dt,ft,2,I,(Tt-Ct)*A(I,this.textStates[N].textAlign),mt,Math.abs(St[0]),f.TA,At,Et,z?0:this.viewRotation_,bt);t:if(n){const i=[];let r,s,o,a,l;if(F)for(r=0,s=n.length;r<s;++r){l=n[r],o=l[4],a=this.createLabel(o,N,"",F),w=l[2]+(St[0]<0?-vt:vt),S=pt*a.height+2*(.5-pt)*vt*St[1]/St[0]-_t;const s=this.calculateImageOrLabelDimensions_(a.width,a.height,l[0],l[1],a.width,a.height,w,S,0,0,l[3],xt,!1,f.Tq,!1,W);if(g&&"declutter"===T&&g.collides(s.declutterBox))break t;i.push([t,e,a,s,1,null,null])}if(k)for(r=0,s=n.length;r<s;++r){l=n[r],o=l[4],a=this.createLabel(o,N,k,""),w=l[2],S=pt*a.height-_t;const s=this.calculateImageOrLabelDimensions_(a.width,a.height,l[0],l[1],a.width,a.height,w,S,0,0,l[3],xt,!1,f.Tq,!1,W);if(g&&"declutter"===T&&g.collides(s.declutterBox))break t;i.push([t,e,a,s,1,null,null])}g&&"none"!==T&&g.load(i.map(b));for(let t=0,e=i.length;t<e;++t)this.replayImageOrLabel_.apply(this,i[t])}}++_;break;case p.Ay.END_GEOMETRY:if(void 0!==u){W=n[1];const t=u(W,X,T);if(t)return t}++_;break;case p.Ay.FILL:U?O++:this.fill_(t),++_;break;case p.Ay.MOVE_TO_LINE_TO:for(D=n[1],x=n[2],$=y[D],V=y[D+1],t.moveTo($,V),C=$+.5|0,M=V+.5|0,D+=2;D<x;D+=2)$=y[D],V=y[D+1],L=$+.5|0,P=V+.5|0,D!=x-2&&L===C&&P===M||(t.lineTo($,V),C=L,M=P);++_;break;case p.Ay.SET_FILL_STYLE:this.alignAndScaleFill_=n[2],O&&(this.fill_(t),O=0,j&&(t.stroke(),j=0)),t.fillStyle=n[1],++_;break;case p.Ay.SET_STROKE_STYLE:j&&(t.stroke(),j=0),this.setStrokeStyle_(t,n),++_;break;case p.Ay.STROKE:U?j++:t.stroke(),++_;break;default:++_}}O&&this.fill_(t),j&&t.stroke()}execute(t,e,n,i,r,s){this.viewRotation_=i,this.execute_(t,e,n,this.instructions,r,void 0,void 0,s)}executeHitDetection(t,e,n,i,r){return this.viewRotation_=n,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,i,r)}};const C=["Polygon","Circle","LineString","Image","Text","Default"],M=["Image","Text"],L=C.filter((t=>!M.includes(t)));const P={};var R=class{constructor(t,e,n,i,r,s,o){this.maxExtent_=t,this.overlaps_=i,this.pixelRatio_=n,this.resolution_=e,this.renderBuffer_=s,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,l.vt)(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(r,o)}clip(t,e){const n=this.getClipCoords(e);t.beginPath(),t.moveTo(n[0],n[1]),t.lineTo(n[2],n[3]),t.lineTo(n[4],n[5]),t.lineTo(n[6],n[7]),t.clip()}createExecutors_(t,e){for(const n in t){let i=this.executorsByZIndex_[n];void 0===i&&(i={},this.executorsByZIndex_[n]=i);const r=t[n];for(const t in r){const n=r[t];i[t]=new T(this.resolution_,this.pixelRatio_,this.overlaps_,n,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const n=this.executorsByZIndex_[e];for(let e=0,i=t.length;e<i;++e)if(t[e]in n)return!0}return!1}forEachFeatureAtCoordinate(t,e,n,o,a,h){const u=2*(o=Math.round(o))+1,c=(0,l.Zz)(this.hitDetectionTransform_,o+.5,o+.5,1/e,-1/e,-n,-t[0],-t[1]),d=!this.hitDetectionContext_;d&&(this.hitDetectionContext_=(0,r.Y)(u,u));const f=this.hitDetectionContext_;let p;f.canvas.width!==u||f.canvas.height!==u?(f.canvas.width=u,f.canvas.height=u):d||f.clearRect(0,0,u,u),void 0!==this.renderBuffer_&&(p=(0,s.S5)(),(0,s.$C)(p,t),(0,s.r)(p,e*(this.renderBuffer_+o),p));const g=function(t){if(void 0!==P[t])return P[t];const e=2*t+1,n=t*t,i=new Array(n+1);for(let r=0;r<=t;++r)for(let s=0;s<=t;++s){const o=r*r+s*s;if(o>n)break;let a=i[o];a||(a=[],i[o]=a),a.push(4*((t+r)*e+(t+s))+3),r>0&&a.push(4*((t-r)*e+(t+s))+3),s>0&&(a.push(4*((t+r)*e+(t-s))+3),r>0&&a.push(4*((t-r)*e+(t-s))+3))}const r=[];for(let t=0,e=i.length;t<e;++t)i[t]&&r.push(...i[t]);return P[t]=r,r}(o);let m;function y(t,e,n){const i=f.getImageData(0,0,u,u).data;for(let r=0,s=g.length;r<s;r++)if(i[g[r]]>0){if(!h||"none"===n||"Image"!==m&&"Text"!==m||h.includes(t)){const n=(g[r]-3)/4,i=o-n%u,s=o-(n/u|0),l=a(t,e,i*i+s*s);if(l)return l}f.clearRect(0,0,u,u);break}}const _=Object.keys(this.executorsByZIndex_).map(Number);let v,x,b,w,A;for(_.sort(i.V_),v=_.length-1;v>=0;--v){const t=_[v].toString();for(b=this.executorsByZIndex_[t],x=C.length-1;x>=0;--x)if(m=C[x],w=b[m],void 0!==w&&(A=w.executeHitDetection(f,c,n,y,p),A))return A}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const n=e[0],i=e[1],r=e[2],s=e[3],a=[n,i,n,s,r,s,r,i];return(0,o.Rc)(a,0,8,2,t,a),a}isEmpty(){return(0,a.p)(this.executorsByZIndex_)}execute(t,e,n,r,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?i.rG:i.V_),o=o||C;const h=C.length;for(let i=0,u=l.length;i<u;++i){const u=l[i].toString(),c=this.executorsByZIndex_[u];for(let u=0,d=o.length;u<d;++u){const d=o[u],f=c[d];if(void 0!==f){const o=null===a?void 0:f.getZIndexContext(),c=o?o.getContext():t,p=this.maxExtent_&&"Image"!==d&&"Text"!==d;if(p&&(c.save(),this.clip(c,n)),o&&"Text"!==d&&"Image"!==d?o.pushFunction((t=>f.execute(t,e,n,r,s,a))):f.execute(c,e,n,r,s,a),p&&c.restore(),o){o.offset();const t=l[i]*h+u;this.deferredZIndexContexts_[t]||(this.deferredZIndexContexts_[t]=[]),this.deferredZIndexContexts_[t].push(o)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(i.V_);for(let n=0,i=e.length;n<i;++n)t[e[n]].forEach((t=>{t.draw(this.renderedContext_),t.clear()})),t[e[n]].length=0}}},27542:function(t,e,n){"use strict";n.d(e,{Q7:function(){return r},Qk:function(){return s},Vs:function(){return o}});var i=n(25231);function r(t,e){return[[-1/0,-1/0,1/0,1/0]]}function s(t,e){return[t]}function o(t){return function(e,n,r){const s=t.getZForResolution((0,i.U$)(n,r)),o=t.getTileRangeForExtentAndZ((0,i.SD)(e,r),s),a=[],l=[s,0,0];for(l[1]=o.minX;l[1]<=o.maxX;++l[1])for(l[2]=o.minY;l[2]<=o.maxY;++l[2])a.push((0,i.JR)(t.getTileCoordExtent(l),r));return a}}},27678:function(t,e,n){"use strict";n.d(e,{Jw:function(){return P},M8:function(){return y},MY:function(){return m},NT:function(){return g},Oq:function(){return c},TA:function(){return M},Tq:function(){return _},ZV:function(){return l},_K:function(){return f},_m:function(){return u},aq:function(){return v},eL:function(){return p},fZ:function(){return S},jT:function(){return L},qY:function(){return h},vk:function(){return d},yY:function(){return x}});var i=n(70192),r=n(67024),s=n(69791),o=n(95907),a=n(45090);const l="10px sans-serif",h="#000",u="round",c=[],d=0,f="round",p=10,g="#000",m="center",y="middle",_=[0,0,0,0],v=1,x=new i.A;let b,w=null;const A={},S=function(){const t="32px ",e=["monospace","serif"],n=e.length,i="wmytzilWMYTZIL@#/&?$%10";let s,o;function l(r,s,a){let l=!0;for(let h=0;h<n;++h){const n=e[h];if(o=C(r+" "+s+" "+t+n,i),a!=n){const e=C(r+" "+s+" "+t+a+","+n,i);l=l&&e!=o}}return!!l}function h(){let t=!0;const e=x.getKeys();for(let n=0,i=e.length;n<i;++n){const i=e[n];if(x.get(i)<100){const[e,n,r]=i.split("\n");l(e,n,r)?((0,a.I)(A),w=null,b=void 0,x.set(i,100)):(x.set(i,x.get(i)+1,!0),t=!1)}}t&&(clearInterval(s),s=void 0)}return function(t){const e=(0,r.K5)(t);if(!e)return;const n=e.families;for(let t=0,i=n.length;t<i;++t){const i=n[t],r=e.style+"\n"+e.weight+"\n"+i;void 0===x.get(r)&&(x.set(r,100,!0),l(e.style,e.weight,i)||(x.set(r,0,!0),void 0===s&&(s=setInterval(h,32))))}}}(),E=function(){let t;return function(e){let n=A[e];if(null==n){if(o.Wl){const t=(0,r.K5)(e),i=T(e,"Žg");n=(isNaN(Number(t.lineHeight))?1.2:Number(t.lineHeight))*(i.actualBoundingBoxAscent+i.actualBoundingBoxDescent)}else t||(t=document.createElement("div"),t.innerHTML="M",t.style.minHeight="0",t.style.maxHeight="none",t.style.height="auto",t.style.padding="0",t.style.border="none",t.style.position="absolute",t.style.display="block",t.style.left="-99999px"),t.style.font=e,document.body.appendChild(t),n=t.offsetHeight,document.body.removeChild(t);A[e]=n}return n}}();function T(t,e){return w||(w=(0,s.Y)(1,1)),t!=b&&(w.font=t,b=w.font),w.measureText(e)}function C(t,e){return T(t,e).width}function M(t,e,n){if(e in n)return n[e];const i=e.split("\n").reduce(((e,n)=>Math.max(e,C(t,n))),0);return n[e]=i,i}function L(t,e){const n=[],i=[],r=[];let s=0,o=0,a=0,l=0;for(let h=0,u=e.length;h<=u;h+=2){const c=e[h];if("\n"===c||h===u){s=Math.max(s,o),r.push(o),o=0,a+=l,l=0;continue}const d=e[h+1]||t.font,f=C(d,c);n.push(f),o+=f;const p=E(d);i.push(p),l=Math.max(l,p)}return{width:s,height:a,widths:n,heights:i,lineWidths:r}}function P(t,e,n,i,r,s,o,a,l,h,u){t.save(),1!==n&&(void 0===t.globalAlpha?t.globalAlpha=t=>t.globalAlpha*=n:t.globalAlpha*=n),e&&t.transform.apply(t,e),i.contextInstructions?(t.translate(l,h),t.scale(u[0],u[1]),function(t,e){const n=t.contextInstructions;for(let t=0,i=n.length;t<i;t+=2)Array.isArray(n[t+1])?e[n[t]].apply(e,n[t+1]):e[n[t]]=n[t+1]}(i,t)):u[0]<0||u[1]<0?(t.translate(l,h),t.scale(u[0],u[1]),t.drawImage(i,r,s,o,a,0,0,o,a)):t.drawImage(i,r,s,o,a,l,h,o*u[0],a*u[1]),t.restore()}},28e3:function(t,e,n){"use strict";n.d(e,{o:function(){return r}});var i=n(55238);const r='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class s extends i.A{constructor(t){let e;e=void 0!==(t=t||{}).attributions?t.attributions:[r];const n=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",i=void 0!==t.url?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:n,interpolate:t.interpolate,maxZoom:void 0!==t.maxZoom?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:i,wrapX:t.wrapX,zDirection:t.zDirection})}}e.A=s},28025:function(t,e,n){"use strict";n.d(e,{c:function(){return u}});var i=n(18381),r=n(3974),s=n(62994),o=n(10135),a=n(37759),l=n(31716);class h extends l.A{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null;const e=[256,256];this.tileGrid&&(0,r.xq)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||(0,a.v6)(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,n,i,r){return(0,a.b0)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,o.pr)(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),s=this.getTilePixelRatio(e),o=(0,r.xq)(i.getTileSize(t),this.tmpSize);return 1==s?o:(0,r.hs)(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const n=void 0!==e?e:this.getProjection(),i=void 0!==e?this.getTileGridForProjection(n):this.tileGrid||this.getTileGridForProjection(n);return this.getWrapX()&&n.isGlobal()&&(t=(0,o.Li)(i,t,n)),(0,s.N5)(t,i)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class u extends i.Ay{constructor(t,e){super(t),this.tile=e}}e.A=h},28178:function(t,e,n){"use strict";var i=n(92814),r=n(38376),s=n(6778);class o extends r.A{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition});const e={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,context:t.context||null,collections:t.collections};(0,s.h2)(e).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){(0,i.z3)(t),this.setState("error")}}e.A=o},28227:function(t,e,n){"use strict";var i=n(51541),r=n(42484),s=n(61341),o=n(22685),a=n(16235),l=n(40878),h=n(37759),u=n(29810);class c extends u.A{constructor(t){super({attributions:(t=t||{}).attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(t){const e=t.getGeometry();return(0,r.v)(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,n){this.source?.loadFeatures(t,e,n),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(o.A.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(o.A.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){const n=0===t?0:Math.min(e,t)/t,i=t!==this.distance||this.interpolationRatio!==n;this.distance=t,this.minDistance=e,this.interpolationRatio=n,i&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;const t=(0,a.S5)(),e=this.distance*this.resolution,n=this.source.getFeatures(),i={};for(let r=0,s=n.length;r<s;r++){const s=n[r];if(!((0,h.v6)(s)in i)){const n=this.geometryFunction(s);if(n){const r=n.getCoordinates();(0,a.dP)(r,t),(0,a.r)(t,e,t);const s=this.source.getFeaturesInExtent(t).filter((function(t){const e=(0,h.v6)(t);return!(e in i)&&(i[e]=!0,!0)}));this.features.push(this.createCluster(s,t))}}}}createCluster(t,e){const n=[0,0];for(let e=t.length-1;e>=0;--e){const i=this.geometryFunction(t[e]);i?(0,s.WQ)(n,i.getCoordinates()):t.splice(e,1)}(0,s.hs)(n,1/t.length);const r=(0,a.q1)(e),o=this.interpolationRatio,h=new l.A([n[0]*(1-o)+r[0]*o,n[1]*(1-o)+r[1]*o]);return this.createCustomCluster_?this.createCustomCluster_(h,t):new i.A({geometry:h,features:t})}}e.A=c},28567:function(t,e,n){"use strict";var i=n(67024),r=n(426),s=n(18381),o=n(22685),a=n(92662),l=n(31141),h=n(38941),u=n(73988);const c=0,d=1;class f extends u.A{constructor(t){super({target:(t=t||{}).target,element:document.createElement("div"),render:t.render}),this.dragListenerKeys_=[],this.currentResolution_=void 0,this.direction_=c,this.dragging_,this.heightLimit_=0,this.widthLimit_=0,this.startX_,this.startY_,this.thumbSize_=null,this.sliderInitialized_=!1,this.duration_=void 0!==t.duration?t.duration:200;const e=void 0!==t.className?t.className:"ol-zoomslider",n=document.createElement("button");n.setAttribute("type","button"),n.className=e+"-thumb "+i.XI;const r=this.element;r.className=e+" "+i.XI+" "+i.$N,r.appendChild(n),r.addEventListener(h.A.POINTERDOWN,this.handleDraggerStart_.bind(this),!1),r.addEventListener(h.A.POINTERMOVE,this.handleDraggerDrag_.bind(this),!1),r.addEventListener(h.A.POINTERUP,this.handleDraggerEnd_.bind(this),!1),r.addEventListener(o.A.CLICK,this.handleContainerClick_.bind(this),!1),n.addEventListener(o.A.CLICK,s.dG,!1)}setMap(t){super.setMap(t),t&&t.render()}initSlider_(){const t=this.element;let e=t.offsetWidth,n=t.offsetHeight;if(0===e&&0===n)return this.sliderInitialized_=!1;const i=getComputedStyle(t);e-=parseFloat(i.paddingRight)+parseFloat(i.paddingLeft),n-=parseFloat(i.paddingTop)+parseFloat(i.paddingBottom);const r=t.firstElementChild,s=getComputedStyle(r),o=r.offsetWidth+parseFloat(s.marginRight)+parseFloat(s.marginLeft),a=r.offsetHeight+parseFloat(s.marginTop)+parseFloat(s.marginBottom);return this.thumbSize_=[o,a],e>n?(this.direction_=d,this.widthLimit_=e-o):(this.direction_=c,this.heightLimit_=n-a),this.sliderInitialized_=!0}handleContainerClick_(t){const e=this.getMap().getView(),n=this.getRelativePosition_(t.offsetX-this.thumbSize_[0]/2,t.offsetY-this.thumbSize_[1]/2),i=this.getResolutionForPosition_(n),s=e.getConstrainedZoom(e.getZoomForResolution(i));e.animateInternal({zoom:s,duration:this.duration_,easing:r.vT})}handleDraggerStart_(t){if(!this.dragging_&&t.target===this.element.firstElementChild){const e=this.element.firstElementChild;if(this.getMap().getView().beginInteraction(),this.startX_=t.clientX-parseFloat(e.style.left),this.startY_=t.clientY-parseFloat(e.style.top),this.dragging_=!0,0===this.dragListenerKeys_.length){const t=this.handleDraggerDrag_,e=this.handleDraggerEnd_,n=this.getMap().getOwnerDocument();this.dragListenerKeys_.push((0,a.KT)(n,h.A.POINTERMOVE,t,this),(0,a.KT)(n,h.A.POINTERUP,e,this))}}}handleDraggerDrag_(t){if(this.dragging_){const e=t.clientX-this.startX_,n=t.clientY-this.startY_,i=this.getRelativePosition_(e,n);this.currentResolution_=this.getResolutionForPosition_(i),this.getMap().getView().setResolution(this.currentResolution_)}}handleDraggerEnd_(t){if(this.dragging_){this.getMap().getView().endInteraction(),this.dragging_=!1,this.startX_=void 0,this.startY_=void 0,this.dragListenerKeys_.forEach(a.JH),this.dragListenerKeys_.length=0}}setThumbPosition_(t){const e=this.getPositionForResolution_(t),n=this.element.firstElementChild;this.direction_==d?n.style.left=this.widthLimit_*e+"px":n.style.top=this.heightLimit_*e+"px"}getRelativePosition_(t,e){let n;return n=this.direction_===d?t/this.widthLimit_:e/this.heightLimit_,(0,l.qE)(n,0,1)}getResolutionForPosition_(t){return this.getMap().getView().getResolutionForValueFunction()(1-t)}getPositionForResolution_(t){const e=this.getMap().getView().getValueForResolutionFunction();return(0,l.qE)(1-e(t),0,1)}render(t){if(!t.frameState)return;if(!this.sliderInitialized_&&!this.initSlider_())return;const e=t.frameState.viewState.resolution;this.currentResolution_=e,this.setThumbPosition_(e)}}e.A=f},28606:function(t,e,n){"use strict";function i(t,e,n){const i=void 0!==n?t.toFixed(n):""+t;let r=i.indexOf(".");return r=-1===r?i.length:r,r>e?i:new Array(1+e-r).join("0")+i}function r(t,e){const n=(""+t).split("."),i=(""+e).split(".");for(let t=0;t<Math.max(n.length,i.length);t++){const e=parseInt(n[t]||"0",10),r=parseInt(i[t]||"0",10);if(e>r)return 1;if(r>e)return-1}return 0}n.d(e,{H:function(){return i},Z:function(){return r}})},28656:function(t,e,n){"use strict";var i=n(61829),r=n(46928),s=n(23463),o=n(69791),a=n(27678),l=n(86603),h=n(15353),u=n(89380);class c extends u.A{constructor(t){super({opacity:1,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=void 0!==t.fill?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=void 0!==t.angle?t.angle:0,this.stroke_=void 0!==t.stroke?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?i.A.LOADING:i.A.LOADED,this.imageState_===i.A.LOADING&&this.ready().then((()=>this.imageState_=i.A.LOADED)),this.render()}clone(){const t=this.getScale(),e=new c({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),n=this.getScaleArray();return[t[0]/2-e[0]/n[0],t[1]/2+e[1]/n[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){const e=this.fill_?.getKey(),n=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let r=h.ue.get(n,null,null)?.getImage(1);if(!r){const e=this.renderOptions_,s=Math.ceil(e.size*t),a=(0,o.Y)(s,s);this.draw_(e,a,t),r=a.canvas,h.ue.set(n,null,null,new l.A(r,void 0,null,i.A.LOADED,null))}return r}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,n){if(0===e||this.points_===1/0||"bevel"!==t&&"miter"!==t)return e;let i=this.radius,r=void 0===this.radius2_?i:this.radius2_;if(i<r){const t=i;i=r,r=t}const s=void 0===this.radius2_?this.points_:2*this.points_,o=2*Math.PI/s,a=r*Math.sin(o),l=i-Math.sqrt(r*r-a*a),h=Math.sqrt(a*a+l*l),u=h/a;if("miter"===t&&u<=n)return u*e;const c=e/2/u,d=e/2*(l/h),f=Math.sqrt((i+c)*(i+c)+d*d)-i;if(void 0===this.radius2_||"bevel"===t)return 2*f;const p=i*Math.sin(o),g=r-Math.sqrt(i*i-p*p),m=Math.sqrt(p*p+g*g)/p;if(m<=n){const t=m*e/2-r-i;return 2*Math.max(f,t)}return 2*f}createRenderOptions(){let t,e=a._m,n=a._K,i=0,r=null,o=0,l=0;this.stroke_&&(t=(0,s.F)(this.stroke_.getColor()??a.NT),l=this.stroke_.getWidth()??a.aq,r=this.stroke_.getLineDash(),o=this.stroke_.getLineDashOffset()??0,n=this.stroke_.getLineJoin()??a._K,e=this.stroke_.getLineCap()??a._m,i=this.stroke_.getMiterLimit()??a.eL);const h=this.calculateLineJoinSize_(n,l,i),u=Math.max(this.radius,this.radius2_||0);return{strokeStyle:t,strokeWidth:l,size:Math.ceil(2*u+h),lineCap:e,lineDash:r,lineDashOffset:o,lineJoin:n,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,n){if(e.scale(n,n),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let t=this.fill_.getColor();null===t&&(t=a.qY),e.fillStyle=(0,s.F)(t),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let n=this.fill_.getColor(),i=0;"string"==typeof n&&(n=(0,r._j)(n)),null===n?i=1:Array.isArray(n)&&(i=4===n.length?n[3]:1),0===i&&(e=(0,o.Y)(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const n=this.radius;if(e===1/0)t.arc(0,0,n,0,2*Math.PI);else{const i=void 0===this.radius2_?n:this.radius2_;void 0!==this.radius2_&&(e*=2);const r=this.angle_-Math.PI/2,s=2*Math.PI/e;for(let o=0;o<e;o++){const e=r+o*s,a=o%2==0?n:i;t.lineTo(a*Math.cos(e),a*Math.sin(e))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=a.qY,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}e.A=c},28665:function(t,e,n){"use strict";var i=n(51541),r=n(77833),s=n(59286),o=n(7535),a=n(69727),l=n(40878),h=n(30470),u=n(25231),c=n(72961),d=n(43987);class f extends d.A{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=(0,u.Jt)(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if("Topology"==t.type){const n=t;let i,r=null,s=null;n.transform&&(i=n.transform,r=i.scale,s=i.translate);const o=n.arcs;i&&function(t,e,n){for(let i=0,r=t.length;i<r;++i)_(t[i],e,n)}(o,r,s);const a=[],l=n.objects,h=this.layerName_;let u;for(const t in l)this.layers_&&!this.layers_.includes(t)||("GeometryCollection"===l[t].type?(u=l[t],a.push.apply(a,m(u,o,r,s,h,t,e))):(u=l[t],a.push(y(u,o,r,s,h,t,e))));return a}return[]}readProjectionFromObject(t){return this.dataProjection}}const p={Point:function(t,e,n){const i=t.coordinates;e&&n&&v(i,e,n);return new l.A(i)},LineString:function(t,e){const n=g(t.arcs,e);return new r.A(n)},Polygon:function(t,e){const n=[];for(let i=0,r=t.arcs.length;i<r;++i)n[i]=g(t.arcs[i],e);return new h.Ay(n)},MultiPoint:function(t,e,n){const i=t.coordinates;if(e&&n)for(let t=0,r=i.length;t<r;++t)v(i[t],e,n);return new o.A(i)},MultiLineString:function(t,e){const n=[];for(let i=0,r=t.arcs.length;i<r;++i)n[i]=g(t.arcs[i],e);return new s.A(n)},MultiPolygon:function(t,e){const n=[];for(let i=0,r=t.arcs.length;i<r;++i){const r=t.arcs[i],s=[];for(let t=0,n=r.length;t<n;++t)s[t]=g(r[t],e);n[i]=s}return new a.A(n)}};function g(t,e){const n=[];let i;for(let r=0,s=t.length;r<s;++r)if(i=t[r],r>0&&n.pop(),i>=0){const t=e[i];for(let e=0,i=t.length;e<i;++e)n.push(t[e].slice(0))}else{const t=e[~i];for(let e=t.length-1;e>=0;--e)n.push(t[e].slice(0))}return n}function m(t,e,n,i,r,s,o){const a=t.geometries,l=[];for(let t=0,h=a.length;t<h;++t)l[t]=y(a[t],e,n,i,r,s,o);return l}function y(t,e,n,r,s,o,a){let l=null;const h=t.type;if(h){const i=p[h];l="Point"===h||"MultiPoint"===h?i(t,n,r):i(t,e),l=(0,c.hX)(l,!1,a)}const u=new i.A({geometry:l});void 0!==t.id&&u.setId(t.id);let d=t.properties;return s&&(d||(d={}),d[s]=o),d&&u.setProperties(d,!0),u}function _(t,e,n){let i=0,r=0;for(let s=0,o=t.length;s<o;++s){const o=t[s];i+=o[0],r+=o[1],o[0]=i,o[1]=r,v(o,e,n)}}function v(t,e,n){t[0]=t[0]*e[0]+n[0],t[1]=t[1]*e[1]+n[1]}e.A=f},29050:function(t,e,n){"use strict";var i=n(22685),r=n(92662),s=n(16235),o=n(99518);class a extends o.A{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(r.JH),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push((0,r.KT)(t[e],i.A.CHANGE,this.changed,this))}clone(){const t=new a(l(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,n,i){if(i<(0,s.Ld)(this.getExtent(),t,e))return i;const r=this.geometries_;for(let s=0,o=r.length;s<o;++s)i=r[s].closestPointXY(t,e,n,i);return i}containsXY(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)if(n[i].containsXY(t,e))return!0;return!1}computeExtent(t){(0,s.aZ)(t);const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)(0,s.X$)(t,e[n].getExtent());return t}getGeometries(){return l(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let i=!1;for(let r=0,s=n.length;r<s;++r){const s=n[r],o=s.getSimplifiedGeometry(t);e.push(o),o!==s&&(i=!0)}if(i){return new a(e)}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].rotate(t,e);this.changed()}scale(t,e,n){n||(n=(0,s.q1)(this.getExtent()));const i=this.geometries_;for(let r=0,s=i.length;r<s;++r)i[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(l(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,i=e.length;n<i;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let i=0,r=n.length;i<r;++i)n[i].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function l(t){return t.map((t=>t.clone()))}e.A=a},29079:function(t,e,n){"use strict";n.d(e,{eS:function(){return S},gF:function(){return A},Ay:function(){return C}});var i=n(30942),r=n(16235),s=n(25231),o=n(3974),a=n(12911),l=n(9466),h=n(77163),u=n(77801),c=n(20703),d=n(14390),f=n(69791),p=n(91460),g=n(4666),m=n(14049);function y(t,e,n){const i=n?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,i),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,i)}function _(t,e,n,i,r,s){const o=t.getGL();let a,l;if(n instanceof Float32Array){a=o.FLOAT,t.getExtension("OES_texture_float");l=null!==t.getExtension("OES_texture_float_linear")}else a=o.UNSIGNED_BYTE,l=!0;y(o,e,s&&l);const h=n.byteLength/i[1];let u,c=1;switch(h%8==0?c=8:h%4==0?c=4:h%2==0&&(c=2),r){case 1:u=o.LUMINANCE;break;case 2:u=o.LUMINANCE_ALPHA;break;case 3:u=o.RGB;break;case 4:u=o.RGBA;break;default:throw new Error(`Unsupported number of bands: ${r}`)}const d=o.getParameter(o.UNPACK_ALIGNMENT);o.pixelStorei(o.UNPACK_ALIGNMENT,c),o.texImage2D(o.TEXTURE_2D,0,u,i[0],i[1],0,u,a,n),o.pixelStorei(o.UNPACK_ALIGNMENT,d)}let v=null;class x extends m.A{constructor(t){super(t),this.textures=[],this.renderSize_=(0,o.xq)(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;const e=new h.Ay(g.H7,g.Ek);e.fromArray([0,1,1,1,1,0,0,0]),this.helper.flushBufferData(e),this.coords=e,this.setTile(t.tile)}setHelper(t){const e=this.helper?.getGL();if(e){this.helper.deleteBuffer(this.coords);for(let t=0;t<this.textures.length;++t)e.deleteTexture(this.textures[t])}super.setHelper(t),t&&t.flushBufferData(this.coords)}uploadTile(){const t=this.helper,e=t.getGL(),n=this.tile;let i;this.textures.length=0,i=n instanceof d.A||n instanceof p.A?n.getImage():n.getData();const r=(0,c.xo)(i);if(r){const t=e.createTexture();return this.textures.push(t),this.bandCount=4,function(t,e,n,i){y(t,e,i),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n)}(e,t,r,n.interpolate),void this.setReady()}i=(0,c.bL)(i);const s=n.getSize(),o=[s[0]+2*this.gutter,s[1]+2*this.gutter],a=i instanceof Float32Array,l=o[0]*o[1],h=a?Float32Array:Uint8Array,u=h.BYTES_PER_ELEMENT,f=i.byteLength/o[1];this.bandCount=Math.floor(f/u/o[0]);const g=Math.ceil(this.bandCount/4);if(1===g){const r=e.createTexture();return this.textures.push(r),_(t,r,i,o,this.bandCount,n.interpolate),void this.setReady()}const m=new Array(g);for(let t=0;t<g;++t){const n=e.createTexture();this.textures.push(n);const i=t<g-1?4:(this.bandCount-1)%4+1;m[t]=new h(l*i)}let v=0,x=0;const b=o[0]*this.bandCount;for(let t=0;t<o[1];++t){for(let t=0;t<b;++t){const e=i[x+t],n=Math.floor(v/this.bandCount),r=t%this.bandCount,s=m[Math.floor(r/4)];s[n*(s.length/l)+r%4]=e,++v}x+=f/u}for(let e=0;e<g;++e){const i=this.textures[e],r=m[e];_(t,i,r,o,r.length/l,n.interpolate)}this.setReady()}getImagePixelData_(t,e,n){const i=this.gutter,r=this.renderSize_[0],s=this.renderSize_[1];v||(v=(0,f.Y)(1,1,void 0,{willReadFrequently:!0})),v.clearRect(0,0,1,1);const o=t.width-2*i,a=t.height-2*i,l=i+Math.floor(o*(e/r)),h=i+Math.floor(a*(n/s));let u;try{v.drawImage(t,l,h,1,1,0,0,1,1),u=v.getImageData(0,0,1,1).data}catch{return v=null,null}return u}getArrayPixelData_(t,e,n,i){const r=this.gutter,s=this.renderSize_[0],o=this.renderSize_[1],a=e[0],l=e[1],h=a+2*r,u=l+2*r,c=r+Math.floor(a*(n/s)),d=r+Math.floor(l*(i/o));if(t instanceof DataView){const e=t.byteLength/(h*u),n=e*(d*h+c),i=t.buffer.slice(n,n+e);return new DataView(i)}const f=this.bandCount*(d*h+c);return t.slice(f,f+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof c.Ay){const n=this.tile.getData(),i=(0,c.bL)(n);if(i){const n=this.tile.getSize();return this.getArrayPixelData_(i,n,t,e)}return this.getImagePixelData_((0,c.xo)(n),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}var b=x,w=n(55721);const A={...w.gF,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},S={TEXTURE_COORD:"a_textureCoord"},E=[{name:S.TEXTURE_COORD,size:2,type:u.jQ.FLOAT}];class T extends w.Ay{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new h.Ay(g.IP,g.Ek),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){if(super.reset(t),this.helper){const t=this.helper.getGL();for(const e of this.paletteTextures_)e.delete(t)}if(this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_);const t=this.helper.getGL();for(const e of this.paletteTextures_)e.getTexture(t)}}afterHelperCreated(){super.afterHelperCreated();const t=this.helper.getGL();for(const e of this.paletteTextures_)e.getTexture(t);this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}removeHelper(){if(this.helper){const t=this.helper.getGL();for(const e of this.paletteTextures_)e.delete(t)}super.removeHelper()}createTileRepresentation(t){return new b(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,n,i,s,o,a,h,u,c,d){const f=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(E);let p=0;for(;p<t.textures.length;){const e=`${A.TILE_TEXTURE_ARRAY}[${p}]`;this.helper.bindTexture(t.textures[p],p,e),++p}for(let t=0;t<this.paletteTextures_.length;++t){const e=this.paletteTextures_[t],n=e.getTexture(f);this.helper.bindTexture(n,p,e.name),++p}const g=n.viewState,m=o[0]+2*c,y=o[1]+2*c,_=t.tile.tileCoord,v=_[1],x=_[2];this.helper.setUniformMatrixValue(A.TILE_TRANSFORM,(0,l.Z1)(this.tempMat4,e)),this.helper.setUniformFloatValue(A.TRANSITION_ALPHA,d),this.helper.setUniformFloatValue(A.DEPTH,u);let b=i;c>0&&(b=h,(0,r._N)(b,i,b)),this.helper.setUniformFloatVec4(A.RENDER_EXTENT,b),this.helper.setUniformFloatValue(A.RESOLUTION,g.resolution),this.helper.setUniformFloatValue(A.ZOOM,g.zoom),this.helper.setUniformFloatValue(A.TEXTURE_PIXEL_WIDTH,m),this.helper.setUniformFloatValue(A.TEXTURE_PIXEL_HEIGHT,y),this.helper.setUniformFloatValue(A.TEXTURE_RESOLUTION,s),this.helper.setUniformFloatValue(A.TEXTURE_ORIGIN_X,a[0]+v*o[0]*s-c*s),this.helper.setUniformFloatValue(A.TEXTURE_ORIGIN_Y,a[1]-x*o[1]*s+c*s),this.helper.drawElements(0,this.indices_.getSize())}getData(t){if(!this.helper.getGL())return null;const e=this.frameState;if(!e)return null;const n=this.getLayer(),l=(0,a.Bb)(e.pixelToCoordinateTransform,t.slice()),h=e.viewState,u=n.getExtent();if(u&&!(0,r.Ym)((0,s.SD)(u,h.projection),l))return null;const c=n.getSources((0,r.Tr)([l]),h.resolution);let d,f,p;for(d=c.length-1;d>=0;--d)if(f=c[d],"ready"===f.getState()){if(p=f.getTileGridForProjection(h.projection),f.getWrapX())break;const t=p.getExtent();if(!t||(0,r.Ym)(t,l))break}if(d<0)return null;const g=this.tileRepresentationCache;for(let t=p.getZForResolution(h.resolution);t>=p.getMinZoom();--t){const e=p.getTileCoordForCoordAndZ(l,t),n=(0,w.et)(f,e);if(!g.containsKey(n))continue;const r=g.get(n);if(r.tile.getState()===i.A.EMPTY)return null;if(!r.loaded)continue;const s=p.getOrigin(t),a=(0,o.xq)(p.getTileSize(t)),h=p.getResolution(t),u=(l[0]-s[0])/h-e[1]*a[0],c=(s[1]-l[1])/h-e[2]*a[1];return r.getPixelData(u,c)}return null}disposeInternal(){const t=this.helper;if(t){const e=t.getGL();for(const t of this.paletteTextures_)t.delete(e);this.paletteTextures_.length=0,e.deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)}super.disposeInternal(),delete this.indices_}}var C=T},29596:function(t,e,n){"use strict";n.d(e,{A:function(){return y}});var i=n(29837),r=n(56430),s=n(61829),o=n(94679),a=n(22685),l=n(16235),h=n(38497),u=n(12911),c=n(19276),d=n(33220);class f extends c.A{constructor(t){super(t),this.vectorRenderer_=new d.A(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=(0,u.vt)(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);const e=(0,u.Bb)(this.coordinateToVectorPixelTransform_,(0,u.Bb)(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(t){const e=t.pixelRatio,n=t.viewState,c=n.resolution,d=t.viewHints,f=this.vectorRenderer_;let p=t.extent;1!==this.layerImageRatio_&&(p=p.slice(0),(0,l.Af)(p,this.layerImageRatio_));const g=(0,l.RG)(p)/c,m=(0,l.Oq)(p)/c;if(!d[o.A.ANIMATING]&&!d[o.A.INTERACTING]&&!(0,l.Im)(p)){f.useContainer(null,null);const o=f.context,l=t.layerStatesArray[t.layerIndex],d=Object.assign({},l,{opacity:1}),y=Object.assign({},t,{extent:p,size:[g,m],viewState:Object.assign({},t.viewState,{rotation:0}),layerStatesArray:[d],layerIndex:0,declutter:null}),_=this.getLayer().getDeclutter();_&&(y.declutter={[_]:new i.A(9)});const v=new r.A(p,c,e,o.canvas,(function(t){f.prepareFrame(y)&&f.replayGroupChanged&&(f.clipping=!1,f.renderFrame(y,null),f.renderDeclutter(y),f.renderDeferred(y),t())}));v.addEventListener(a.A.CHANGE,(()=>{if(v.getState()!==s.A.LOADED)return;this.image=v;const t=v.getPixelRatio(),i=(0,h.m)(v.getResolution())*e/t;this.renderedResolution=i,this.coordinateToVectorPixelTransform_=(0,u.Zz)(this.coordinateToVectorPixelTransform_,g/2,m/2,1/i,-1/i,0,-n.center[0],-n.center[1])})),v.load()}return this.image&&(this.renderedPixelToCoordinateTransform_=t.pixelToCoordinateTransform.slice()),!this.getLayer().getSource().loading&&!!this.image}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,n,i,r){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,n,i,r):super.forEachFeatureAtCoordinate(t,e,n,i,r)}}var p=f,g=n(7992);class m extends g.A{constructor(t){t=t||{};const e=Object.assign({},t);delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new p(this)}}var y=m},29810:function(t,e,n){"use strict";var i=n(73887),r=n(96479),s=n(75738),o=n(44090),a=n(42484),l=n(18381),h=n(22685),u=n(92662),c=n(16235),d=n(87598),f=n(95702),p=n(27542),g=n(45090),m=n(71442),y=n(12918),_=n(37759),v=n(31716),x=n(9424);class b extends l.Ay{constructor(t,e,n){super(t),this.feature=e,this.features=n}}class w extends v.A{constructor(t){super({attributions:(t=t||{}).attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=f.tV,this.format_=t.format||null,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,a.v)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,d.nF)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:p.Q7;const e=void 0===t.useSpatialIndex||t.useSpatialIndex;let n,r;this.featuresRtree_=e?new y.A:null,this.loadedExtentsRtree_=new y.A,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?r=t.features:t.features&&(n=t.features,r=n.getArray()),e||void 0!==n||(n=new i.A(r)),void 0!==r&&this.addFeaturesInternal(r),void 0!==n&&this.bindFeaturesCollection_(n)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=(0,_.v6)(t);if(!this.addToIndex_(e,t))return void(this.featuresCollection_&&this.featuresCollection_.remove(t));this.setupChangeEvents_(e,t);const n=t.getGeometry();if(n){const e=n.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new b(x.A.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof m.Ay||(this.featureChangeKeys_[t]=[(0,u.KT)(e,h.A.CHANGE,this.handleFeatureChange_,this),(0,u.KT)(e,s.A.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let n=!0;if(void 0!==e.getId()){const t=String(e.getId());if(t in this.idIndex_)if(e instanceof m.Ay){const i=this.idIndex_[t];i instanceof m.Ay?Array.isArray(i)?i.push(e):this.idIndex_[t]=[i,e]:n=!1}else n=!1;else this.idIndex_[t]=e}return n&&((0,a.v)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),n}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],n=[],i=[];for(let e=0,i=t.length;e<i;e++){const i=t[e],r=(0,_.v6)(i);this.addToIndex_(r,i)&&n.push(i)}for(let t=0,r=n.length;t<r;t++){const r=n[t],s=(0,_.v6)(r);this.setupChangeEvents_(s,r);const o=r.getGeometry();if(o){const t=o.getExtent();e.push(t),i.push(r)}else this.nullGeometryFeatures_[s]=r}if(this.featuresRtree_&&this.featuresRtree_.load(e,i),this.hasListener(x.A.ADDFEATURE))for(let t=0,e=n.length;t<e;t++)this.dispatchEvent(new b(x.A.ADDFEATURE,n[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(x.A.ADDFEATURE,(function(n){e||(e=!0,t.push(n.feature),e=!1)})),this.addEventListener(x.A.REMOVEFEATURE,(function(n){e||(e=!0,t.remove(n.feature),e=!1)})),t.addEventListener(r.A.ADD,(t=>{e||(e=!0,this.addFeature(t.element),e=!1)})),t.addEventListener(r.A.REMOVE,(t=>{e||(e=!0,this.removeFeature(t.element),e=!1)})),this.featuresCollection_=t}clear(t){if(t){for(const t in this.featureChangeKeys_){this.featureChangeKeys_[t].forEach(u.JH)}this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach((t=>{this.removeFeatureInternal(t)}));for(const t in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new b(x.A.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const n=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(n,(function(n){const i=n.getGeometry();if(i instanceof m.Ay||i.intersectsCoordinate(t))return e(n)}))}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,(function(n){const i=n.getGeometry();if(i instanceof m.Ay||i.intersectsExtent(t)){const t=e(n);if(t)return t}}))}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,g.p)(this.nullGeometryFeatures_)||(0,o.X$)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,(function(t){e.push(t)})),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=(0,c.QJ)(t,e);return[].concat(...n.map((t=>this.featuresRtree_.getInExtent(t))))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const n=t[0],i=t[1];let r=null;const s=[NaN,NaN];let o=1/0;const a=[-1/0,-1/0,1/0,1/0];return e=e||f.rT,this.featuresRtree_.forEachInExtent(a,(function(t){if(e(t)){const e=t.getGeometry(),l=o;if(o=e instanceof m.Ay?0:e.closestPointXY(n,i,s,o),o<l){r=t;const e=Math.sqrt(o);a[0]=n-e,a[1]=i-e,a[2]=n+e,a[3]=i+e}}})),r}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,n=(0,_.v6)(e),i=e.getGeometry();if(i){const t=i.getExtent();n in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[n],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else n in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[n]=e);const r=e.getId();if(void 0!==r){const t=r.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[n]=e;this.changed(),this.dispatchEvent(new b(x.A.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return void 0!==e?e in this.idIndex_:(0,_.v6)(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,g.p)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,n){const i=this.loadedExtentsRtree_,r=this.strategy_(t,e,n);for(let t=0,s=r.length;t<s;++t){const s=r[t];i.forEachInExtent(s,(function(t){return(0,c.ms)(t.extent,s)}))||(++this.loadingExtentsCount_,this.dispatchEvent(new b(x.A.FEATURESLOADSTART)),this.loader_.call(this,s,e,n,(t=>{--this.loadingExtentsCount_,this.dispatchEvent(new b(x.A.FEATURESLOADEND,void 0,t))}),(()=>{--this.loadingExtentsCount_,this.dispatchEvent(new b(x.A.FEATURESLOADERROR))})),i.insert(s,{extent:s.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,n=e.forEachInExtent(t,(function(e){if((0,c.aI)(e.extent,t))return e}));n&&e.remove(n)}removeFeatures(t){let e=!1;for(let n=0,i=t.length;n<i;++n)e=this.removeFeatureInternal(t[n])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=(0,_.v6)(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const n=this.featureChangeKeys_[e];n?.forEach(u.JH),delete this.featureChangeKeys_[e];const i=t.getId();if(void 0!==i){const e=i.toString(),n=this.idIndex_[e];n===t?delete this.idIndex_[e]:Array.isArray(n)&&(n.splice(n.indexOf(t),1),1===n.length&&(this.idIndex_[e]=n[0]))}return delete this.uidIndex_[e],this.hasListener(x.A.REMOVEFEATURE)&&this.dispatchEvent(new b(x.A.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){(0,a.v)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader((0,d.nF)(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}e.A=w},29837:function(t,e,n){"use strict";function i(t,e,n=0,o=t.length-1,a=s){for(;o>n;){if(o-n>600){const r=o-n+1,s=e-n+1,l=Math.log(r),h=.5*Math.exp(2*l/3),u=.5*Math.sqrt(l*h*(r-h)/r)*(s-r/2<0?-1:1);i(t,e,Math.max(n,Math.floor(e-s*h/r+u)),Math.min(o,Math.floor(e+(r-s)*h/r+u)),a)}const s=t[e];let l=n,h=o;for(r(t,n,e),a(t[o],s)>0&&r(t,n,o);l<h;){for(r(t,l,h),l++,h--;a(t[l],s)<0;)l++;for(;a(t[h],s)>0;)h--}0===a(t[n],s)?r(t,n,h):(h++,r(t,h,o)),h<=e&&(n=h+1),e<=h&&(o=h-1)}}function r(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function s(t,e){return t<e?-1:t>e?1:0}n.d(e,{A:function(){return o}});class o{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const n=[];if(!y(t,e))return n;const i=this.toBBox,r=[];for(;e;){for(let s=0;s<e.children.length;s++){const o=e.children[s],a=e.leaf?i(o):o;y(t,a)&&(e.leaf?n.push(o):m(t,a)?this._all(o,n):r.push(o))}e=r.pop()}return n}collides(t){let e=this.data;if(!y(t,e))return!1;const n=[];for(;e;){for(let i=0;i<e.children.length;i++){const r=e.children[i],s=e.leaf?this.toBBox(r):r;if(y(t,s)){if(e.leaf||m(t,s))return!0;n.push(r)}}e=n.pop()}return!1}load(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(let e=0;e<t.length;e++)this.insert(t[e]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length)if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const t=this.data;this.data=e,e=t}this._insert(e,this.data.height-e.height-1,!0)}else this.data=e;return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=_([]),this}remove(t,e){if(!t)return this;let n=this.data;const i=this.toBBox(t),r=[],s=[];let o,l,h;for(;n||r.length;){if(n||(n=r.pop(),l=r[r.length-1],o=s.pop(),h=!0),n.leaf){const i=a(t,n.children,e);if(-1!==i)return n.children.splice(i,1),r.push(n),this._condense(r),this}h||n.leaf||!m(n,i)?l?(o++,n=l.children[o],h=!1):n=null:(r.push(n),s.push(o),o=0,l=n,n=n.children[0])}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const n=[];for(;t;)t.leaf?e.push(...t.children):n.push(...t.children),t=n.pop();return e}_build(t,e,n,i){const r=n-e+1;let s,o=this._maxEntries;if(r<=o)return s=_(t.slice(e,n+1)),l(s,this.toBBox),s;i||(i=Math.ceil(Math.log(r)/Math.log(o)),o=Math.ceil(r/Math.pow(o,i-1))),s=_([]),s.leaf=!1,s.height=i;const a=Math.ceil(r/o),h=a*Math.ceil(Math.sqrt(o));v(t,e,n,h,this.compareMinX);for(let r=e;r<=n;r+=h){const e=Math.min(r+h-1,n);v(t,r,e,a,this.compareMinY);for(let n=r;n<=e;n+=a){const r=Math.min(n+a-1,e);s.children.push(this._build(t,n,r,i-1))}}return l(s,this.toBBox),s}_chooseSubtree(t,e,n,i){for(;i.push(e),!e.leaf&&i.length-1!==n;){let n,i=1/0,o=1/0;for(let a=0;a<e.children.length;a++){const l=e.children[a],h=f(l),u=(r=t,s=l,(Math.max(s.maxX,r.maxX)-Math.min(s.minX,r.minX))*(Math.max(s.maxY,r.maxY)-Math.min(s.minY,r.minY))-h);u<o?(o=u,i=h<i?h:i,n=l):u===o&&h<i&&(i=h,n=l)}e=n||e.children[0]}var r,s;return e}_insert(t,e,n){const i=n?t:this.toBBox(t),r=[],s=this._chooseSubtree(i,this.data,e,r);for(s.children.push(t),u(s,i);e>=0&&r[e].children.length>this._maxEntries;)this._split(r,e),e--;this._adjustParentBBoxes(i,r,e)}_split(t,e){const n=t[e],i=n.children.length,r=this._minEntries;this._chooseSplitAxis(n,r,i);const s=this._chooseSplitIndex(n,r,i),o=_(n.children.splice(s,n.children.length-s));o.height=n.height,o.leaf=n.leaf,l(n,this.toBBox),l(o,this.toBBox),e?t[e-1].children.push(o):this._splitRoot(n,o)}_splitRoot(t,e){this.data=_([t,e]),this.data.height=t.height+1,this.data.leaf=!1,l(this.data,this.toBBox)}_chooseSplitIndex(t,e,n){let i,r=1/0,s=1/0;for(let o=e;o<=n-e;o++){const e=h(t,0,o,this.toBBox),a=h(t,o,n,this.toBBox),l=g(e,a),u=f(e)+f(a);l<r?(r=l,i=o,s=u<s?u:s):l===r&&u<s&&(s=u,i=o)}return i||n-e}_chooseSplitAxis(t,e,n){const i=t.leaf?this.compareMinX:c,r=t.leaf?this.compareMinY:d;this._allDistMargin(t,e,n,i)<this._allDistMargin(t,e,n,r)&&t.children.sort(i)}_allDistMargin(t,e,n,i){t.children.sort(i);const r=this.toBBox,s=h(t,0,e,r),o=h(t,n-e,n,r);let a=p(s)+p(o);for(let i=e;i<n-e;i++){const e=t.children[i];u(s,t.leaf?r(e):e),a+=p(s)}for(let i=n-e-1;i>=e;i--){const e=t.children[i];u(o,t.leaf?r(e):e),a+=p(o)}return a}_adjustParentBBoxes(t,e,n){for(let i=n;i>=0;i--)u(e[i],t)}_condense(t){for(let e,n=t.length-1;n>=0;n--)0===t[n].children.length?n>0?(e=t[n-1].children,e.splice(e.indexOf(t[n]),1)):this.clear():l(t[n],this.toBBox)}}function a(t,e,n){if(!n)return e.indexOf(t);for(let i=0;i<e.length;i++)if(n(t,e[i]))return i;return-1}function l(t,e){h(t,0,t.children.length,e,t)}function h(t,e,n,i,r){r||(r=_(null)),r.minX=1/0,r.minY=1/0,r.maxX=-1/0,r.maxY=-1/0;for(let s=e;s<n;s++){const e=t.children[s];u(r,t.leaf?i(e):e)}return r}function u(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function c(t,e){return t.minX-e.minX}function d(t,e){return t.minY-e.minY}function f(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function p(t){return t.maxX-t.minX+(t.maxY-t.minY)}function g(t,e){const n=Math.max(t.minX,e.minX),i=Math.max(t.minY,e.minY),r=Math.min(t.maxX,e.maxX),s=Math.min(t.maxY,e.maxY);return Math.max(0,r-n)*Math.max(0,s-i)}function m(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function y(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function _(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function v(t,e,n,r,s){const o=[e,n];for(;o.length;){if((n=o.pop())-(e=o.pop())<=r)continue;const a=e+Math.ceil((n-e)/r/2)*r;i(t,a,e,n,s),o.push(e,a,a,n)}}},30135:function(t,e,n){"use strict";var i=n(51541),r=n(61829),s=n(44090),o=n(46928),a=n(29050),l=n(77833),h=n(59286),u=n(7535),c=n(69727),d=n(40878),f=n(30470),p=n(31141),g=n(25231),m=n(38276),y=n(75052),_=n(44689),v=n(88292),x=n(59194),b=n(37246),w=n(72961),A=n(86858),S=n(40132);const E=["http://www.google.com/kml/ext/2.2"],T=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],C={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},M=(0,b.Dm)(T,{ExtendedData:It,Region:Nt,MultiGeometry:(0,b.kW)(At,"geometry"),LineString:(0,b.kW)(xt,"geometry"),LinearRing:(0,b.kW)(bt,"geometry"),Point:(0,b.kW)(St,"geometry"),Polygon:(0,b.kW)(Tt,"geometry"),Style:(0,b.kW)(Mt),StyleMap:function(t,e){const n=ot.call(this,t,e);if(!n)return;const i=e[e.length-1];if(Array.isArray(n))i.Style=n;else{if("string"!=typeof n)throw new Error("`styleMapValue` has an unknown type");i.styleUrl=n}},address:(0,b.kW)(S.E3),description:(0,b.kW)(S.E3),name:(0,b.kW)(S.E3),open:(0,b.kW)(S.Vf),phoneNumber:(0,b.kW)(S.E3),styleUrl:(0,b.kW)(it),visibility:(0,b.kW)(S.Vf)},(0,b.Dm)(E,{MultiTrack:(0,b.kW)((function(t,e){const n=(0,b.eY)([],ft,t,e);if(!n)return;return new h.A(n)}),"geometry"),Track:(0,b.kW)(gt,"geometry")})),L=(0,b.Dm)(T,{ExtendedData:It,Region:Nt,Link:function(t,e){(0,b.UN)(P,t,e)},address:(0,b.kW)(S.E3),description:(0,b.kW)(S.E3),name:(0,b.kW)(S.E3),open:(0,b.kW)(S.Vf),phoneNumber:(0,b.kW)(S.E3),visibility:(0,b.kW)(S.Vf)}),P=(0,b.Dm)(T,{href:(0,b.kW)(nt)}),R=(0,b.Dm)(T,{Altitude:(0,b.kW)(S.e4),Longitude:(0,b.kW)(S.e4),Latitude:(0,b.kW)(S.e4),Tilt:(0,b.kW)(S.e4),AltitudeMode:(0,b.kW)(S.E3),Heading:(0,b.kW)(S.e4),Roll:(0,b.kW)(S.e4)}),I=(0,b.Dm)(T,{LatLonAltBox:function(t,e){const n=(0,b.eY)({},Dt,t,e);if(!n)return;const i=e[e.length-1],r=[parseFloat(n.west),parseFloat(n.south),parseFloat(n.east),parseFloat(n.north)];i.extent=r,i.altitudeMode=n.altitudeMode,i.minAltitude=parseFloat(n.minAltitude),i.maxAltitude=parseFloat(n.maxAltitude)},Lod:function(t,e){const n=(0,b.eY)({},Ot,t,e);if(!n)return;const i=e[e.length-1];i.minLodPixels=parseFloat(n.minLodPixels),i.maxLodPixels=parseFloat(n.maxLodPixels),i.minFadeExtent=parseFloat(n.minFadeExtent),i.maxFadeExtent=parseFloat(n.maxFadeExtent)}}),N=(0,b.Dm)(T,["Document","Placemark"]),F=(0,b.Dm)(T,{Document:(0,b.mm)((function(t,e,n){const i={node:t};(0,b.NQ)(i,qt,Ut,e,n,void 0,this)})),Placemark:(0,b.mm)(fe)});let k,D,O,j,G,B,z=null;let q,U=null;let W,$=null;let V=null;let X=null;let H,Y=null;function Z(t){return 32/Math.min(t[0],t[1])}function K(t){return t}class J extends A.A{constructor(t){super(),t=t||{},Y||(k=[255,255,255,1],z=new m.A({color:k}),D=[20,2],O="pixels",j="pixels",G=[64,64],B="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",U=new y.A({anchor:D,anchorOrigin:"bottom-left",anchorXUnits:O,anchorYUnits:j,crossOrigin:"anonymous",rotation:0,scale:Z(G),size:G,src:B}),q="NO_IMAGE",$=new _.A({color:k,width:1}),W=new _.A({color:[51,51,51,1],width:2}),V=new x.A({font:"bold 16px Helvetica",fill:z,stroke:W,scale:.8}),X=new v.Ay({fill:z,image:U,text:V,stroke:$,zIndex:0}),Y=[X]),this.dataProjection=(0,g.Jt)("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:Y,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:K,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){const n=(0,b.Dm)(T,{Document:(0,b.Vh)(this.readDocumentOrFolder_,this),Folder:(0,b.Vh)(this.readDocumentOrFolder_,this),Placemark:(0,b.VT)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),i=(0,b.eY)([],n,t,e,this);if(i)return i}readPlacemark_(t,e){const n=(0,b.eY)({geometry:null},M,t,e,this);if(!n)return;const r=new i.A,s=t.getAttribute("id");null!==s&&r.setId(s);const o=e[0],l=n.geometry;if(l&&(0,w.hX)(l,!1,o),r.setGeometry(l),delete n.geometry,this.extractStyles_){const t=function(t,e,n,i,r){return function(s,o){let l=r,h="",u=[];if(l){const t=s.getGeometry();if(t)if(t instanceof a.A)u=t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})),l=u.length>0;else{const e=t.getType();l="Point"===e||"MultiPoint"===e}}l&&(h=s.get("name"),l=l&&!!h,l&&/&[^&]+;/.test(h)&&(H||(H=document.createElement("textarea")),H.innerHTML=h,h=H.value));let c=n;if(t?c=t:e&&(c=Q(e,n,i)),l){const t=function(t,e){const n=[0,0];let i="start";const r=t.getImage();if(r){const t=r.getSize();if(t&&2==t.length){const e=r.getScaleArray(),s=r.getAnchor();n[0]=e[0]*(t[0]-s[0]),n[1]=e[1]*(t[1]/2-s[1]),i="left"}}let s=t.getText();s?(s=s.clone(),s.setFont(s.getFont()||V.getFont()),s.setScale(s.getScale()||V.getScale()),s.setFill(s.getFill()||V.getFill()),s.setStroke(s.getStroke()||W)):s=V.clone();s.setText(e),s.setOffsetX(n[0]),s.setOffsetY(n[1]),s.setTextAlign(i);const o=new v.Ay({image:r,text:s});return o}(c[0],h);if(u.length>0){t.setGeometry(new a.A(u));return[t,new v.Ay({geometry:c[0].getGeometry(),image:null,fill:c[0].getFill(),stroke:c[0].getStroke(),text:null})].concat(c.slice(1))}return t}return c}}(n.Style,n.styleUrl,this.defaultStyle_,this.sharedStyles_,this.showPointNames_);r.setStyle(t)}return delete n.Style,r.setProperties(n,!0),r}readSharedStyle_(t,e){const n=t.getAttribute("id");if(null!==n){const i=Mt.call(this,t,e);if(i){let e,r=t.baseURI;if(r&&"about:blank"!=r||(r=window.location.href),r){e=new URL("#"+n,r).href}else e="#"+n;this.sharedStyles_[e]=i}}}readSharedStyleMap_(t,e){const n=t.getAttribute("id");if(null===n)return;const i=ot.call(this,t,e);if(!i)return;let r,s=t.baseURI;if(s&&"about:blank"!=s||(s=window.location.href),s){r=new URL("#"+n,s).href}else r="#"+n;this.sharedStyles_[r]=i}readFeatureFromNode(t,e){if(!T.includes(t.namespaceURI))return null;const n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n||null}readFeaturesFromNode(t,e){if(!T.includes(t.namespaceURI))return[];let n;const i=t.localName;if("Document"==i||"Folder"==i)return n=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]),n||[];if("Placemark"==i){const n=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return n?[n]:[]}if("kml"==i){n=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling){const t=this.readFeaturesFromNode(i,e);t&&(0,s.X$)(n,t)}return n}return[]}readName(t){if(t){if("string"==typeof t){const e=(0,b.qg)(t);return this.readNameFromDocument(e)}return(0,b.wz)(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){const t=this.readNameFromNode(e);if(t)return t}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(T.includes(e.namespaceURI)&&"name"==e.localName)return(0,S.E3)(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){const t=e.localName;if(T.includes(e.namespaceURI)&&("Document"==t||"Folder"==t||"Placemark"==t||"kml"==t)){const t=this.readNameFromNode(e);if(t)return t}}}readNetworkLinks(t){const e=[];if("string"==typeof t){const n=(0,b.qg)(t);(0,s.X$)(e,this.readNetworkLinksFromDocument(n))}else(0,b.wz)(t)?(0,s.X$)(e,this.readNetworkLinksFromDocument(t)):(0,s.X$)(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,s.X$)(e,this.readNetworkLinksFromNode(n));return e}readNetworkLinksFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(T.includes(n.namespaceURI)&&"NetworkLink"==n.localName){const t=(0,b.eY)({},L,n,[]);e.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=n.localName;!T.includes(n.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||(0,s.X$)(e,this.readNetworkLinksFromNode(n))}return e}readRegion(t){const e=[];if("string"==typeof t){const n=(0,b.qg)(t);(0,s.X$)(e,this.readRegionFromDocument(n))}else(0,b.wz)(t)?(0,s.X$)(e,this.readRegionFromDocument(t)):(0,s.X$)(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType==Node.ELEMENT_NODE&&(0,s.X$)(e,this.readRegionFromNode(n));return e}readRegionFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(T.includes(n.namespaceURI)&&"Region"==n.localName){const t=(0,b.eY)({},I,n,[]);e.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=n.localName;!T.includes(n.namespaceURI)||"Document"!=t&&"Folder"!=t&&"kml"!=t||(0,s.X$)(e,this.readRegionFromNode(n))}return e}readCamera(t){const e=[];if("string"==typeof t){const n=(0,b.qg)(t);(0,s.X$)(e,this.readCameraFromDocument(n))}else(0,b.wz)(t)?(0,s.X$)(e,this.readCameraFromDocument(t)):(0,s.X$)(e,this.readCameraFromNode(t));return e}readCameraFromDocument(t){const e=[];for(let n=t.firstChild;n;n=n.nextSibling)n.nodeType===Node.ELEMENT_NODE&&(0,s.X$)(e,this.readCameraFromNode(n));return e}readCameraFromNode(t){const e=[];for(let n=t.firstElementChild;n;n=n.nextElementSibling)if(T.includes(n.namespaceURI)&&"Camera"===n.localName){const t=(0,b.eY)({},R,n,[]);e.push(t)}for(let n=t.firstElementChild;n;n=n.nextElementSibling){const t=n.localName;!T.includes(n.namespaceURI)||"Document"!==t&&"Folder"!==t&&"Placemark"!==t&&"kml"!==t||(0,s.X$)(e,this.readCameraFromNode(n))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=(0,b.qq)(T[4],"kml"),i="http://www.w3.org/2000/xmlns/";n.setAttributeNS(i,"xmlns:gx",E[0]),n.setAttributeNS(i,"xmlns:xsi",b.pF),n.setAttributeNS(b.pF,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");const r={node:n},s={};t.length>1?s.Document=t:1==t.length&&(s.Placemark=t[0]);const o=N[n.namespaceURI],a=(0,b.Gl)(s,o);return(0,b.NQ)(r,F,b.OL,a,[e],o,this),n}}function Q(t,e,n){return Array.isArray(t)?t:"string"==typeof t?Q(n[t],e,n):e}function tt(t){const e=(0,b.mT)(t,!1),n=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(n){const t=n[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function et(t){let e=(0,b.mT)(t,!1);const n=[];e=e.replace(/\s*,\s*/g,",");const i=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;let r;for(;r=i.exec(e);){const t=parseFloat(r[1]),i=parseFloat(r[2]),s=r[3]?parseFloat(r[3]):0;n.push(t,i,s),e=e.substr(r[0].length)}if(""===e)return n}function nt(t){const e=(0,b.mT)(t,!1).trim();let n=t.baseURI;if(n&&"about:blank"!=n||(n=window.location.href),n){return new URL(e,n).href}return e}function it(t){const e=(0,b.mT)(t,!1).trim().replace(/^(?!.*#)/,"#");let n=t.baseURI;if(n&&"about:blank"!=n||(n=window.location.href),n){return new URL(e,n).href}return e}function rt(t){return(0,S.e4)(t)}const st=(0,b.Dm)(T,{Pair:function(t,e){const n=(0,b.eY)({},Ft,t,e,this);if(!n)return;const i=n.key;if(i&&"normal"==i){const t=n.styleUrl;t&&(e[e.length-1]=t);const i=n.Style;i&&(e[e.length-1]=i)}}});function ot(t,e){return(0,b.eY)(void 0,st,t,e,this)}const at=(0,b.Dm)(T,{Icon:(0,b.kW)((function(t,e){const n=(0,b.eY)({},mt,t,e);if(n)return n;return null})),color:(0,b.kW)(tt),heading:(0,b.kW)(S.e4),hotSpot:(0,b.kW)((function(t){const e=t.getAttribute("xunits"),n=t.getAttribute("yunits");let i;return i="insetPixels"!==e?"insetPixels"!==n?"bottom-left":"top-left":"insetPixels"!==n?"bottom-right":"top-right",{x:parseFloat(t.getAttribute("x")),xunits:C[e],y:parseFloat(t.getAttribute("y")),yunits:C[n],origin:i}})),scale:(0,b.kW)(rt)});const lt=(0,b.Dm)(T,{color:(0,b.kW)(tt),scale:(0,b.kW)(rt)});const ht=(0,b.Dm)(T,{color:(0,b.kW)(tt),width:(0,b.kW)(S.e4)});const ut=(0,b.Dm)(T,{color:(0,b.kW)(tt),fill:(0,b.kW)(S.Vf),outline:(0,b.kW)(S.Vf)});const ct=(0,b.Dm)(T,{coordinates:(0,b.Tb)(et)});function dt(t,e){return(0,b.eY)(null,ct,t,e)}const ft=(0,b.Dm)(E,{Track:(0,b.VT)(gt)});const pt=(0,b.Dm)(T,{when:function(t,e){const n=e[e.length-1].whens,i=(0,b.mT)(t,!1),r=Date.parse(i);n.push(isNaN(r)?0:r)}},(0,b.Dm)(E,{coord:function(t,e){const n=e[e.length-1].coordinates,i=(0,b.mT)(t,!1),r=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(i);if(r){const t=parseFloat(r[1]),e=parseFloat(r[2]),i=parseFloat(r[3]);n.push([t,e,i])}else n.push([])}}));function gt(t,e){const n=(0,b.eY)({coordinates:[],whens:[]},pt,t,e);if(!n)return;const i=[],r=n.coordinates,s=n.whens;for(let t=0,e=Math.min(r.length,s.length);t<e;++t)3==r[t].length&&i.push(r[t][0],r[t][1],r[t][2],s[t]);return new l.A(i,"XYZM")}const mt=(0,b.Dm)(T,{href:(0,b.kW)(nt)},(0,b.Dm)(E,{x:(0,b.kW)(S.e4),y:(0,b.kW)(S.e4),w:(0,b.kW)(S.e4),h:(0,b.kW)(S.e4)}));const yt=(0,b.Dm)(T,{coordinates:(0,b.Tb)(et)});function _t(t,e){return(0,b.eY)(null,yt,t,e)}const vt=(0,b.Dm)(T,{extrude:(0,b.kW)(S.Vf),tessellate:(0,b.kW)(S.Vf),altitudeMode:(0,b.kW)(S.E3)});function xt(t,e){const n=(0,b.eY)({},vt,t,e),i=_t(t,e);if(i){const t=new l.A(i,"XYZ");return t.setProperties(n,!0),t}}function bt(t,e){const n=(0,b.eY)({},vt,t,e),i=_t(t,e);if(i){const t=new f.Ay(i,"XYZ",[i.length]);return t.setProperties(n,!0),t}}const wt=(0,b.Dm)(T,{LineString:(0,b.VT)(xt),LinearRing:(0,b.VT)(bt),MultiGeometry:(0,b.VT)(At),Point:(0,b.VT)(St),Polygon:(0,b.VT)(Tt)});function At(t,e){const n=(0,b.eY)([],wt,t,e);if(!n)return null;if(0===n.length)return new a.A(n);let i,r=!0;const o=n[0].getType();let l;for(let t=1,e=n.length;t<e;++t)if(l=n[t],l.getType()!=o){r=!1;break}if(r){let t,e;if("Point"==o){const r=n[0];t=r.getLayout(),e=r.getFlatCoordinates();for(let t=1,i=n.length;t<i;++t)l=n[t],(0,s.X$)(e,l.getFlatCoordinates());i=new u.A(e,t),Lt(i,n)}else if("LineString"==o)i=new h.A(n),Lt(i,n);else if("Polygon"==o)i=new c.A(n),Lt(i,n);else{if("GeometryCollection"!=o&&!o.startsWith("Multi"))throw new Error("Unknown geometry type found");i=new a.A(n)}}else i=new a.A(n);return i}function St(t,e){const n=(0,b.eY)({},vt,t,e),i=_t(t,e);if(i){const t=new d.A(i,"XYZ");return t.setProperties(n,!0),t}}const Et=(0,b.Dm)(T,{innerBoundaryIs:function(t,e){const n=(0,b.eY)([],jt,t,e);if(n.length>0){e[e.length-1].push(...n)}},outerBoundaryIs:function(t,e){const n=(0,b.eY)(void 0,Gt,t,e);if(n){e[e.length-1][0]=n}}});function Tt(t,e){const n=(0,b.eY)({},vt,t,e),i=(0,b.eY)([null],Et,t,e);if(i&&i[0]){const t=i[0],e=[t.length];for(let n=1,r=i.length;n<r;++n)(0,s.X$)(t,i[n]),e.push(t.length);const r=new f.Ay(t,"XYZ",e);return r.setProperties(n,!0),r}}const Ct=(0,b.Dm)(T,{IconStyle:function(t,e){const n=(0,b.eY)({},at,t,e);if(!n)return;const i=e[e.length-1],s="Icon"in n?n.Icon:{},o=!("Icon"in n)||Object.keys(s).length>0;let a;const l=s.href;let h,u,c;l?a=l:o&&(a=B);let d="bottom-left";const f=n.hotSpot;let g;f?(h=[f.x,f.y],u=f.xunits,c=f.yunits,d=f.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(a)&&(a.includes("pushpin")?(h=D,u=O,c=j):a.includes("arrow-reverse")?(h=[54,42],u=O,c=j):a.includes("paddle")&&(h=[32,1],u=O,c=j));const m=s.x,_=s.y;let v;void 0!==m&&void 0!==_&&(g=[m,_]);const x=s.w,w=s.h;let A;void 0!==x&&void 0!==w&&(v=[x,w]);const S=n.heading;void 0!==S&&(A=(0,p.eh)(S));const E=n.scale,T=n.color;if(o){a==B&&(v=G);const t=new y.A({anchor:h,anchorOrigin:d,anchorXUnits:u,anchorYUnits:c,crossOrigin:this.crossOrigin_,offset:g,offsetOrigin:"bottom-left",rotation:A,scale:E,size:v,src:this.iconUrlFunction_(a),color:T}),e=t.getScaleArray()[0],n=t.getSize();if(null===n){const n=t.getImageState();if(n===r.A.IDLE||n===r.A.LOADING){const i=function(){const n=t.getImageState();if(n!==r.A.IDLE&&n!==r.A.LOADING){const n=t.getSize();if(n&&2==n.length){const i=Z(n);t.setScale(e*i)}t.unlistenImageChange(i)}};t.listenImageChange(i),n===r.A.IDLE&&t.load()}}else if(2==n.length){const i=Z(n);t.setScale(e*i)}i.imageStyle=t}else i.imageStyle=q},LabelStyle:function(t,e){const n=(0,b.eY)({},lt,t,e);if(!n)return;const i=e[e.length-1],r=new x.A({fill:new m.A({color:"color"in n?n.color:k}),scale:n.scale});i.textStyle=r},LineStyle:function(t,e){const n=(0,b.eY)({},ht,t,e);if(!n)return;const i=e[e.length-1],r=new _.A({color:"color"in n?n.color:k,width:"width"in n?n.width:1});i.strokeStyle=r},PolyStyle:function(t,e){const n=(0,b.eY)({},ut,t,e);if(!n)return;const i=e[e.length-1],r=new m.A({color:"color"in n?n.color:k});i.fillStyle=r;const s=n.fill;void 0!==s&&(i.fill=s);const o=n.outline;void 0!==o&&(i.outline=o)}});function Mt(t,e){const n=(0,b.eY)({},Ct,t,e,this);if(!n)return null;let i="fillStyle"in n?n.fillStyle:z;const r=n.fill;let s;void 0===r||r||(i=null),"imageStyle"in n?n.imageStyle!=q&&(s=n.imageStyle):s=U;const o="textStyle"in n?n.textStyle:V,l="strokeStyle"in n?n.strokeStyle:$,h=n.outline;return void 0===h||h?[new v.Ay({fill:i,image:s,stroke:l,text:o,zIndex:void 0})]:[new v.Ay({geometry:function(t){const e=t.getGeometry(),n=e.getType();if("GeometryCollection"===n){const t=e;return new a.A(t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"!==e&&"MultiPolygon"!==e})))}if("Polygon"!==n&&"MultiPolygon"!==n)return e},fill:i,image:s,stroke:l,text:o,zIndex:void 0}),new v.Ay({geometry:function(t){const e=t.getGeometry(),n=e.getType();if("GeometryCollection"===n){const t=e;return new a.A(t.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})))}if("Polygon"===n||"MultiPolygon"===n)return e},fill:i,stroke:null,zIndex:void 0})]}function Lt(t,e){const n=e.length,i=new Array(e.length),r=new Array(e.length),s=new Array(e.length);let o,a,l;o=!1,a=!1,l=!1;for(let t=0;t<n;++t){const n=e[t];i[t]=n.get("extrude"),r[t]=n.get("tessellate"),s[t]=n.get("altitudeMode"),o=o||void 0!==i[t],a=a||void 0!==r[t],l=l||s[t]}o&&t.set("extrude",i),a&&t.set("tessellate",r),l&&t.set("altitudeMode",s)}const Pt=(0,b.Dm)(T,{displayName:(0,b.kW)(S.E3),value:(0,b.kW)(S.E3)});const Rt=(0,b.Dm)(T,{Data:function(t,e){const n=t.getAttribute("name");(0,b.UN)(Pt,t,e);const i=e[e.length-1];n&&i.displayName?i[n]={value:i.value,displayName:i.displayName,toString:function(){return i.value}}:null!==n?i[n]=i.value:null!==i.displayName&&(i[i.displayName]=i.value),delete i.value},SchemaData:function(t,e){(0,b.UN)(kt,t,e)}});function It(t,e){(0,b.UN)(Rt,t,e)}function Nt(t,e){(0,b.UN)(I,t,e)}const Ft=(0,b.Dm)(T,{Style:(0,b.kW)(Mt),key:(0,b.kW)(S.E3),styleUrl:(0,b.kW)(it)});const kt=(0,b.Dm)(T,{SimpleData:function(t,e){const n=t.getAttribute("name");if(null!==n){const i=(0,S.E3)(t);e[e.length-1][n]=i}}});const Dt=(0,b.Dm)(T,{altitudeMode:(0,b.kW)(S.E3),minAltitude:(0,b.kW)(S.e4),maxAltitude:(0,b.kW)(S.e4),north:(0,b.kW)(S.e4),south:(0,b.kW)(S.e4),east:(0,b.kW)(S.e4),west:(0,b.kW)(S.e4)});const Ot=(0,b.Dm)(T,{minLodPixels:(0,b.kW)(S.e4),maxLodPixels:(0,b.kW)(S.e4),minFadeExtent:(0,b.kW)(S.e4),maxFadeExtent:(0,b.kW)(S.e4)});const jt=(0,b.Dm)(T,{LinearRing:(0,b.VT)(dt)});const Gt=(0,b.Dm)(T,{LinearRing:(0,b.Tb)(dt)});function Bt(t,e){const n=(0,o._j)(e),i=[255*(4==n.length?n[3]:1),n[2],n[1],n[0]];for(let t=0;t<4;++t){const e=Math.floor(i[t]).toString(16);i[t]=1==e.length?"0"+e:e}(0,S.uB)(t,i.join(""))}const zt=(0,b.Dm)(T,{Data:(0,b.mm)((function(t,e,n){t.setAttribute("name",e.name);const i={node:t},r=e.value;"object"==typeof r?(null!==r&&r.displayName&&(0,b.NQ)(i,zt,b.OL,[r.displayName],n,["displayName"]),null!==r&&r.value&&(0,b.NQ)(i,zt,b.OL,[r.value],n,["value"])):(0,b.NQ)(i,zt,b.OL,[r],n,["value"])})),value:(0,b.mm)((function(t,e){(0,S.uB)(t,e)})),displayName:(0,b.mm)((function(t,e){(0,S.uB)(t,e)}))});const qt=(0,b.Dm)(T,{Placemark:(0,b.mm)(fe)}),Ut=function(t,e,n){const i=e[e.length-1].node;return(0,b.qq)(i.namespaceURI,"Placemark")};const Wt=(0,b.X1)("Data");const $t=(0,b.Dm)(T,["href"],(0,b.Dm)(E,["x","y","w","h"])),Vt=(0,b.Dm)(T,{href:(0,b.mm)(S.uB)},(0,b.Dm)(E,{x:(0,b.mm)(S.Ko),y:(0,b.mm)(S.Ko),w:(0,b.mm)(S.Ko),h:(0,b.mm)(S.Ko)})),Xt=function(t,e,n){return(0,b.qq)(E[0],"gx:"+n)};const Ht=(0,b.Dm)(T,["scale","heading","Icon","color","hotSpot"]),Yt=(0,b.Dm)(T,{Icon:(0,b.mm)((function(t,e,n){const i={node:t},r=n[n.length-1].node;let s=$t[r.namespaceURI],o=(0,b.Gl)(e,s);(0,b.NQ)(i,Vt,b.OL,o,n,s),s=$t[E[0]],o=(0,b.Gl)(e,s),(0,b.NQ)(i,Vt,Xt,o,n,s)})),color:(0,b.mm)(Bt),heading:(0,b.mm)(S.Ko),hotSpot:(0,b.mm)((function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)})),scale:(0,b.mm)(Ae)});const Zt=(0,b.Dm)(T,["color","scale"]),Kt=(0,b.Dm)(T,{color:(0,b.mm)(Bt),scale:(0,b.mm)(Ae)});const Jt=(0,b.Dm)(T,["color","width"]),Qt=(0,b.Dm)(T,{color:(0,b.mm)(Bt),width:(0,b.mm)(S.Ko)});const te={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},ee=function(t,e,n){if(t){const n=e[e.length-1].node;return(0,b.qq)(n.namespaceURI,te[t.getType()])}},ne=(0,b.X1)("Point"),ie=(0,b.X1)("LineString"),re=(0,b.X1)("LinearRing"),se=(0,b.X1)("Polygon"),oe=(0,b.Dm)(T,{LineString:(0,b.mm)(me),Point:(0,b.mm)(me),Polygon:(0,b.mm)(be),GeometryCollection:(0,b.mm)(ae)});function ae(t,e,n){const i={node:t},r=e.getType();let s,o=[];if("GeometryCollection"===r)e.getGeometriesArrayRecursive().forEach((function(t){const e=t.getType();if("MultiPoint"===e)o=o.concat(t.getPoints());else if("MultiLineString"===e)o=o.concat(t.getLineStrings());else if("MultiPolygon"===e)o=o.concat(t.getPolygons());else{if("Point"!==e&&"LineString"!==e&&"Polygon"!==e)throw new Error("Unknown geometry type");o.push(t)}})),s=ee;else if("MultiPoint"===r)o=e.getPoints(),s=ne;else if("MultiLineString"===r)o=e.getLineStrings(),s=ie;else{if("MultiPolygon"!==r)throw new Error("Unknown geometry type");o=e.getPolygons(),s=se}(0,b.NQ)(i,oe,s,o,n)}const le=(0,b.Dm)(T,{LinearRing:(0,b.mm)(me)});function he(t,e,n){const i={node:t};(0,b.NQ)(i,le,re,[e],n)}const ue=(0,b.Dm)(T,{ExtendedData:(0,b.mm)((function(t,e,n){const i={node:t},r=e.names,s=e.values,o=r.length;for(let t=0;t<o;t++)(0,b.NQ)(i,zt,Wt,[{name:r[t],value:s[t]}],n)})),MultiGeometry:(0,b.mm)(ae),LineString:(0,b.mm)(me),LinearRing:(0,b.mm)(me),Point:(0,b.mm)(me),Polygon:(0,b.mm)(be),Style:(0,b.mm)((function(t,e,n){const i={node:t},r={};if(e.pointStyles.length){const t=e.pointStyles[0].getText();t&&(r.LabelStyle=t);const n=e.pointStyles[0].getImage();n&&"function"==typeof n.getSrc&&(r.IconStyle=n)}if(e.lineStyles.length){const t=e.lineStyles[0].getStroke();t&&(r.LineStyle=t)}if(e.polyStyles.length){const t=e.polyStyles[0].getStroke();t&&!r.LineStyle&&(r.LineStyle=t),r.PolyStyle=e.polyStyles[0]}const s=n[n.length-1].node,o=Se[s.namespaceURI],a=(0,b.Gl)(r,o);(0,b.NQ)(i,Ee,b.OL,a,n,o)})),address:(0,b.mm)(S.uB),description:(0,b.mm)(S.uB),name:(0,b.mm)(S.uB),open:(0,b.mm)(S.Z3),phoneNumber:(0,b.mm)(S.uB),styleUrl:(0,b.mm)(S.uB),visibility:(0,b.mm)(S.Z3)}),ce=(0,b.Dm)(T,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),de=(0,b.X1)("ExtendedData");function fe(t,e,n){const i={node:t};e.getId()&&t.setAttribute("id",e.getId());const r=e.getProperties(),s={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};s[e.getGeometryName()]=1;const o=Object.keys(r||{}).sort().filter((function(t){return!s[t]})),a=e.getStyleFunction();if(a){const t=a(e,0);if(t){const n=Array.isArray(t)?t:[t];let i=n;if(e.getGeometry()&&(i=n.filter((function(t){const n=t.getGeometryFunction()(e);if(n){const t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Point"===e||"MultiPoint"===e})).length:"Point"===t||"MultiPoint"===t}}))),this.writeStyles_){let t=n,s=n;e.getGeometry()&&(t=n.filter((function(t){const n=t.getGeometryFunction()(e);if(n){const t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"LineString"===e||"MultiLineString"===e})).length:"LineString"===t||"MultiLineString"===t}})),s=n.filter((function(t){const n=t.getGeometryFunction()(e);if(n){const t=n.getType();return"GeometryCollection"===t?n.getGeometriesArrayRecursive().filter((function(t){const e=t.getType();return"Polygon"===e||"MultiPolygon"===e})).length:"Polygon"===t||"MultiPolygon"===t}}))),r.Style={pointStyles:i,lineStyles:t,polyStyles:s}}if(i.length&&void 0===r.name){const t=i[0].getText();t&&(r.name=t.getText())}}}const l=n[n.length-1].node,h=ce[l.namespaceURI],u=(0,b.Gl)(r,h);if((0,b.NQ)(i,ue,b.OL,u,n,h),o.length>0){const t={names:o,values:(0,b.Gl)(r,o)};(0,b.NQ)(i,ue,de,[t],n)}const c=n[0];let d=e.getGeometry();d&&(d=(0,w.hX)(d,!0,c)),(0,b.NQ)(i,ue,ee,[d],n)}const pe=(0,b.Dm)(T,["extrude","tessellate","altitudeMode","coordinates"]),ge=(0,b.Dm)(T,{extrude:(0,b.mm)(S.Z3),tessellate:(0,b.mm)(S.Z3),altitudeMode:(0,b.mm)(S.uB),coordinates:(0,b.mm)((function(t,e,n){const i=n[n.length-1],r=i.layout,s=i.stride;let o;if("XY"==r||"XYM"==r)o=2;else{if("XYZ"!=r&&"XYZM"!=r)throw new Error("Invalid geometry layout");o=3}const a=e.length;let l="";if(a>0){l+=e[0];for(let t=1;t<o;++t)l+=","+e[t];for(let t=s;t<a;t+=s){l+=" "+e[t];for(let n=1;n<o;++n)l+=","+e[t+n]}}(0,S.uB)(t,l)}))});function me(t,e,n){const i=e.getFlatCoordinates(),r={node:t};r.layout=e.getLayout(),r.stride=e.getStride();const s=e.getProperties();s.coordinates=i;const o=n[n.length-1].node,a=pe[o.namespaceURI],l=(0,b.Gl)(s,a);(0,b.NQ)(r,ge,b.OL,l,n,a)}const ye=(0,b.Dm)(T,["color","fill","outline"]),_e=(0,b.Dm)(T,{outerBoundaryIs:(0,b.mm)(he),innerBoundaryIs:(0,b.mm)(he)}),ve=(0,b.X1)("innerBoundaryIs"),xe=(0,b.X1)("outerBoundaryIs");function be(t,e,n){const i=e.getLinearRings(),r=i.shift(),s={node:t};(0,b.NQ)(s,_e,ve,i,n),(0,b.NQ)(s,_e,xe,[r],n)}const we=(0,b.Dm)(T,{color:(0,b.mm)(Bt),fill:(0,b.mm)(S.Z3),outline:(0,b.mm)(S.Z3)});function Ae(t,e){(0,S.Ko)(t,Math.round(1e6*e)/1e6)}const Se=(0,b.Dm)(T,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),Ee=(0,b.Dm)(T,{IconStyle:(0,b.mm)((function(t,e,n){const i={node:t},r={},s=e.getSrc(),o=e.getSize(),a=e.getImageSize(),l={href:s};if(o){l.w=o[0],l.h=o[1];const t=e.getAnchor(),n=e.getOrigin();if(n&&a&&0!==n[0]&&n[1]!==o[1]&&(l.x=n[0],l.y=a[1]-(n[1]+o[1])),t&&(t[0]!==o[0]/2||t[1]!==o[1]/2)){const e={x:t[0],xunits:"pixels",y:o[1]-t[1],yunits:"pixels"};r.hotSpot=e}}r.Icon=l;let h=e.getScaleArray()[0],u=o;if(null===u&&(u=G),2==u.length){h/=Z(u)}1!==h&&(r.scale=h);const c=e.getRotation();0!==c&&(r.heading=c);const d=e.getColor();d&&(r.color=d);const f=n[n.length-1].node,p=Ht[f.namespaceURI],g=(0,b.Gl)(r,p);(0,b.NQ)(i,Yt,b.OL,g,n,p)})),LabelStyle:(0,b.mm)((function(t,e,n){const i={node:t},r={},s=e.getFill();s&&(r.color=s.getColor());const o=e.getScale();o&&1!==o&&(r.scale=o);const a=n[n.length-1].node,l=Zt[a.namespaceURI],h=(0,b.Gl)(r,l);(0,b.NQ)(i,Kt,b.OL,h,n,l)})),LineStyle:(0,b.mm)((function(t,e,n){const i={node:t},r={color:e.getColor(),width:Number(e.getWidth())||1},s=n[n.length-1].node,o=Jt[s.namespaceURI],a=(0,b.Gl)(r,o);(0,b.NQ)(i,Qt,b.OL,a,n,o)})),PolyStyle:(0,b.mm)((function(t,e,n){const i={node:t},r=e.getFill(),s=e.getStroke(),o={color:r?r.getColor():void 0,fill:!!r&&void 0,outline:!!s&&void 0},a=n[n.length-1].node,l=ye[a.namespaceURI],h=(0,b.Gl)(o,l);(0,b.NQ)(i,we,b.OL,h,n,l)}))});e.Ay=J},30470:function(t,e,n){"use strict";n.d(e,{Tf:function(){return A},VY:function(){return b},kj:function(){return x},nD:function(){return w}});var i=n(44090),r=n(16235),s=n(31141),o=n(7074),a=n(62609),l=n(40878),h=n(96728),u=n(47129),c=n(64697),d=n(90405),f=n(93001),p=n(2337),g=n(98384),m=n(85398),y=n(66962),_=n(60447);class v extends h.Ay{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,void 0!==e&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?(0,i.X$)(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new v(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,r.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,c.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,c.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return(0,d.zb)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return(0,u.PK)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,y.ug)(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,(0,p.cD)(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=(0,r.q1)(this.getExtent());this.flatInteriorPoint_=(0,g.J)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new l.A(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new a.A(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,i=[];let r=0;for(let s=0,o=n.length;s<o;++s){const o=n[s],l=new a.A(e.slice(r,o),t);i.push(l),r=o}return i}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,y.PA)(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,y.ug)(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=(0,_.Hg)(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new v(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return(0,m.HT)(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=(0,f.KG)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}function x(t,e,n,r){n=n||32;const s=[];for(let a=0;a<n;++a)(0,i.X$)(s,(0,o.cY)(t,e,2*Math.PI*a/n,r));return s.push(s[0],s[1]),new v(s,"XY",[s.length])}function b(t){if((0,r.Im)(t))throw new Error("Cannot create polygon from empty extent");const e=t[0],n=t[1],i=t[2],s=t[3],o=[e,n,e,s,i,s,i,n,e,n];return new v(o,"XY",[o.length])}function w(t,e,n){e=e||32;const i=t.getStride(),r=t.getLayout(),s=t.getCenter(),o=i*(e+1),a=new Array(o);for(let t=0;t<o;t+=i){a[t]=0,a[t+1]=0;for(let e=2;e<i;e++)a[t+e]=s[e]}const l=[a.length],h=new v(a,r,l);return A(h,s,t.getRadius(),n),h}function A(t,e,n,i){const r=t.getFlatCoordinates(),o=t.getStride(),a=r.length/o-1,l=i||0;for(let t=0;t<=a;++t){const i=t*o,h=l+2*(0,s.xP)(t,a)*Math.PI/a;r[i]=e[0]+n*Math.cos(h),r[i+1]=e[1]+n*Math.sin(h)}t.changed()}e.Ay=v},30942:function(t,e){"use strict";e.A={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},31080:function(t,e,n){const i=n(97642),r=n(51650),s=n(88295);function o(t,e,n){const o=n&&n.debug||!1,a=!(n&&!1===typeof n.nested),l=n&&n.startIndex||0;o&&console.log("[xml-utils] starting findTagByName with",e," and ",n);const h=i(t,`<${e}[ \n>/]`,l);if(o&&console.log("[xml-utils] start:",h),-1===h)return;const u=t.slice(h+e.length);let c=r(u,"^[^<]*[ /]>",0);const d=-1!==c&&"/"===u[c-1];if(o&&console.log("[xml-utils] selfClosing:",d),!1===d)if(a){let t=0,n=1,i=0;for(;-1!==(c=r(u,"[ /]"+e+">",t));){const r=u.substring(t,c+1);if(n+=s(r,"<"+e+"[ \n\t>]"),i+=s(r,"</"+e+">"),i>=n)break;t=c}}else c=r(u,"[ /]"+e+">",0);const f=h+e.length+c+1;if(o&&console.log("[xml-utils] end:",f),-1===f)return;const p=t.slice(h,f);let g;return g=d?null:p.slice(p.indexOf(">")+1,p.lastIndexOf("<")),{inner:g,outer:p,start:h,end:f}}t.exports=o,t.exports.default=o},31141:function(t,e,n){"use strict";function i(t,e,n){return Math.min(Math.max(t,e),n)}function r(t,e,n,i,r,o){const a=r-n,l=o-i;if(0!==a||0!==l){const s=((t-n)*a+(e-i)*l)/(a*a+l*l);s>1?(n=r,i=o):s>0&&(n+=a*s,i+=l*s)}return s(t,e,n,i)}function s(t,e,n,i){const r=n-t,s=i-e;return r*r+s*s}function o(t){const e=t.length;for(let n=0;n<e;n++){let i=n,r=Math.abs(t[n][n]);for(let s=n+1;s<e;s++){const e=Math.abs(t[s][n]);e>r&&(r=e,i=s)}if(0===r)return null;const s=t[i];t[i]=t[n],t[n]=s;for(let i=n+1;i<e;i++){const r=-t[i][n]/t[n][n];for(let s=n;s<e+1;s++)n==s?t[i][s]=0:t[i][s]+=r*t[n][s]}}const n=new Array(e);for(let i=e-1;i>=0;i--){n[i]=t[i][e]/t[i][i];for(let r=i-1;r>=0;r--)t[r][e]-=t[r][i]*n[i]}return n}function a(t){return 180*t/Math.PI}function l(t){return t*Math.PI/180}function h(t,e){const n=t%e;return n*e<0?n+e:n}function u(t,e,n){return t+n*(e-t)}function c(t,e){const n=Math.pow(10,e);return Math.round(t*n)/n}function d(t,e){return Math.round(c(t,e))}function f(t,e){return Math.floor(c(t,e))}function p(t,e){return Math.ceil(c(t,e))}function g(t,e,n){if(t>=e&&t<n)return t;const i=n-e;return((t-e)%i+i)%i+e}n.d(e,{Cc:function(){return u},KU:function(){return o},LI:function(){return d},LV:function(){return g},Mg:function(){return c},Q1:function(){return r},RI:function(){return f},eh:function(){return l},hG:function(){return s},mk:function(){return p},qE:function(){return i},xP:function(){return h},xW:function(){return a}})},31516:function(t,e,n){"use strict";n.d(e,{FQ:function(){return r},O2:function(){return l},hm:function(){return a}});var i=n(37759);function r(t,e,n,r){const s=document.createElement("script"),o="olc_"+(0,i.v6)(e);function a(){delete window[o],s.parentNode.removeChild(s)}s.async=!0,s.src=t+(t.includes("?")?"&":"?")+(r||"callback")+"="+o;const l=setTimeout((function(){a(),n&&n()}),1e4);window[o]=function(t){clearTimeout(l),a(),e(t)},document.head.appendChild(s)}class s extends Error{constructor(t){super("Unexpected response status: "+t.status),this.name="ResponseError",this.response=t}}class o extends Error{constructor(t){super("Failed to issue request"),this.name="ClientError",this.client=t}}function a(t){return new Promise((function(e,n){const i=new XMLHttpRequest;i.addEventListener("load",(function(t){const i=t.target;if(!i.status||i.status>=200&&i.status<300){let t;try{t=JSON.parse(i.responseText)}catch(t){const e="Error parsing response text as JSON: "+t.message;return void n(new Error(e))}e(t)}else n(new s(i))})),i.addEventListener("error",(function(t){n(new o(t.target))})),i.open("GET",t),i.setRequestHeader("Accept","application/json"),i.send()}))}function l(t,e){return e.includes("://")?e:new URL(e,t).href}},31716:function(t,e,n){"use strict";var i=n(70192),r=n(25231);class s extends i.A{constructor(t){super(),this.projection=(0,r.Jt)(t.projection),this.attributions_=o(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise((function(t,n){e.viewResolver=t,e.viewRejector=n}))}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=o(t),this.changed()}setState(t){this.state_=t,this.changed()}}function o(t){return t?"function"==typeof t?t:(Array.isArray(t)||(t=[t]),e=>t):null}e.A=s},33220:function(t,e,n){"use strict";var i=n(94679),r=n(44090),s=n(61341),o=n(69791),a=n(16235),l=n(25231),h=n(280),u=n(8656),c=n(27527),d=n(21847),f=n(37759),p=n(55280),g=n(17881);class m extends g.A{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,a.S5)(),this.wrappedRenderedExtent_=(0,a.S5)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,n){const r=e.extent,s=e.viewState,o=s.center,l=s.resolution,h=s.projection,u=s.rotation,d=h.getExtent(),f=this.getLayer().getSource(),p=this.getLayer().getDeclutter(),g=e.pixelRatio,m=e.viewHints,y=!(m[i.A.ANIMATING]||m[i.A.INTERACTING]),_=this.context,v=Math.round((0,a.RG)(r)/l*g),x=Math.round((0,a.Oq)(r)/l*g),b=f.getWrapX()&&h.canWrapX(),w=b?(0,a.RG)(d):null,A=b?Math.ceil((r[2]-d[2])/w)+1:1;let S=b?Math.floor((r[0]-d[0])/w):0;do{let i=this.getRenderTransform(o,l,0,g,v,x,S*w);e.declutter&&(i=i.slice(0)),t.execute(_,[_.canvas.width,_.canvas.height],i,u,y,void 0===n?c.y2:n?c.$i:c.x$,n?p&&e.declutter[p]:void 0)}while(++S<A)}setDrawContext_(){1!==this.opacity_&&(this.targetContext_=this.context,this.context=(0,o.Y)(this.context.canvas.width,this.context.canvas.height,g.B))}resetDrawContext_(){if(1!==this.opacity_){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,(0,o.Yg)(this.context),g.B.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){this.replayGroup_&&this.getLayer().getDeclutter()&&this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const n=t.layerStatesArray[t.layerIndex];this.opacity_=n.opacity;const i=t.viewState;this.prepareContainer(t,e);const r=this.context,s=this.replayGroup_;let o=s&&!s.isEmpty();if(!o){if(!(this.getLayer().hasListener(h.A.PRERENDER)||this.getLayer().hasListener(h.A.POSTRENDER)))return this.container}this.setDrawContext_(),this.preRender(r,t);const u=i.projection;if(this.clipped_=!1,o&&n.extent&&this.clipping){const e=(0,l.SD)(n.extent,u);o=(0,a.HY)(e,t.extent),this.clipped_=o&&!(0,a.ms)(e,t.extent),this.clipped_&&this.clipUnrotated(r,t,e)}return o&&this.renderWorlds(s,t,!this.getLayer().getDeclutter()&&void 0),!t.declutter&&this.clipped_&&r.restore(),this.postRender(r,t),this.renderedRotation_!==i.rotation&&(this.renderedRotation_=i.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise((e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const t=this.frameState.size.slice(),e=this.renderedCenter_,n=this.renderedResolution_,i=this.renderedRotation_,r=this.renderedProjection_,s=this.wrappedRenderedExtent_,o=this.getLayer(),h=[],u=t[0]*d.tF,c=t[1]*d.tF;h.push(this.getRenderTransform(e,n,i,d.tF,u,c,0).slice());const f=o.getSource(),g=r.getExtent();if(f.getWrapX()&&r.canWrapX()&&!(0,a.ms)(g,s)){let t=s[0];const r=(0,a.RG)(g);let o,l=0;for(;t<g[0];)--l,o=r*l,h.push(this.getRenderTransform(e,n,i,d.tF,u,c,o).slice()),t+=r;for(l=0,t=s[2];t>g[2];)++l,o=r*l,h.push(this.getRenderTransform(e,n,i,d.tF,u,c,o).slice()),t-=r}const m=(0,l.Tf)();this.hitDetectionImageData_=(0,d._7)(t,h,this.renderedFeatures_,o.getStyleFunction(),s,n,i,(0,p.j)(n,this.renderedPixelRatio_),m?r:null)}e((0,d.F8)(t,this.renderedFeatures_,this.hitDetectionImageData_))}))}forEachFeatureAtCoordinate(t,e,n,i,r){if(!this.replayGroup_)return;const s=e.viewState.resolution,o=e.viewState.rotation,a=this.getLayer(),l={},h=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,s,o,n,(function(t,e,n){const s=(0,f.v6)(t),o=l[s];if(o){if(!0!==o&&n<o.distanceSq){if(0===n)return l[s]=!0,r.splice(r.lastIndexOf(o),1),i(t,a,e);o.geometry=e,o.distanceSq=n}}else{if(0===n)return l[s]=!0,i(t,a,e);r.push(l[s]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}}),h?e.declutter?.[h]?.all().map((t=>t.value)):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),n=e.getSource();if(!n)return!1;const o=t.viewHints[i.A.ANIMATING],h=t.viewHints[i.A.INTERACTING],d=e.getUpdateWhileAnimating(),f=e.getUpdateWhileInteracting();if(this.ready&&!d&&o||!f&&h)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const g=t.extent,m=t.viewState,y=m.projection,_=m.resolution,v=t.pixelRatio,x=e.getRevision(),b=e.getRenderBuffer();let w=e.getRenderOrder();void 0===w&&(w=p.Eo);const A=m.center.slice(),S=(0,a.r)(g,b*_),E=S.slice(),T=[S.slice()],C=y.getExtent();if(n.getWrapX()&&y.canWrapX()&&!(0,a.ms)(C,t.extent)){const t=(0,a.RG)(C),e=Math.max((0,a.RG)(S)/2,t);S[0]=C[0]-e,S[2]=C[2]+e,(0,s.Li)(A,y);const n=(0,a.Li)(T[0],y);n[0]<C[0]&&n[2]<C[2]?T.push([n[0]+t,n[1],n[2]+t,n[3]]):n[0]>C[0]&&n[2]>C[2]&&T.push([n[0]-t,n[1],n[2]-t,n[3]])}if(this.ready&&this.renderedResolution_==_&&this.renderedRevision_==x&&this.renderedRenderOrder_==w&&this.renderedFrameDeclutter_===!!t.declutter&&(0,a.ms)(this.wrappedRenderedExtent_,S))return(0,r.aI)(this.renderedExtent_,E)||(this.hitDetectionImageData_=null,this.renderedExtent_=E),this.renderedCenter_=A,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const M=new u.A((0,p.gY)(_,v),S,_,v),L=(0,l.Tf)();let P;if(L){for(let t=0,e=T.length;t<e;++t){const e=T[t],i=(0,l.JR)(e,y);n.loadFeatures(i,(0,l.vN)(_,y),L)}P=(0,l.FO)(L,y)}else for(let t=0,e=T.length;t<e;++t)n.loadFeatures(T[t],_,y);const R=(0,p.j)(_,v);let I=!0;const N=(t,n)=>{let i;const r=t.getStyleFunction()||e.getStyleFunction();if(r&&(i=r(t,_)),i){const e=this.renderFeature(t,R,i,M,P,this.getLayer().getDeclutter(),n);I=I&&!e}},F=(0,l.JR)(S,y),k=n.getFeaturesInExtent(F);w&&k.sort(w);for(let t=0,e=k.length;t<e;++t)N(k[t],t);this.renderedFeatures_=k,this.ready=I;const D=M.finish(),O=new c.Ay(S,_,v,n.getOverlaps(),D,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=_,this.renderedRevision_=x,this.renderedRenderOrder_=w,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=E,this.wrappedRenderedExtent_=S,this.renderedCenter_=A,this.renderedProjection_=y,this.renderedPixelRatio_=v,this.replayGroup_=O,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,n,i,r,s,o){if(!n)return!1;let a=!1;if(Array.isArray(n))for(let l=0,h=n.length;l<h;++l)a=(0,p.nl)(i,t,n[l],e,this.boundHandleStyleImageChange_,r,s,o)||a;else a=(0,p.nl)(i,t,n,e,this.boundHandleStyleImageChange_,r,s,o);return a}}e.A=m},33772:function(t,e,n){"use strict";var i=n(30942),r=n(69606),s=n(16649),o=n(37759),a=n(28025),l=n(27213);class h extends a.A{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===h.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,n=(0,o.v6)(e),r=e.getState();let s;r==i.A.LOADING?(this.tileLoadingKeys_[n]=!0,s=l.A.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=r==i.A.ERROR?l.A.TILELOADERROR:r==i.A.LOADED?l.A.TILELOADEND:void 0),null!=s&&this.dispatchEvent(new a.c(s,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,void 0!==e?this.setKey(e):this.changed()}setUrl(t){const e=(0,s.Uu)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,r.Qz)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,n){}}e.A=h},35369:function(t,e,n){"use strict";var i=n(16235),r=n(31141),s=n(25231),o=n(12911);e.A=class{constructor(t,e,n,r,a,l,h){this.sourceProj_=t,this.targetProj_=e;let u={};const c=h?(0,s.HU)((t=>(0,o.Bb)(h,(0,s.pd)(t,this.targetProj_,this.sourceProj_)))):(0,s.RG)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){const e=t[0]+"/"+t[1];return u[e]||(u[e]=c(t)),u[e]},this.maxSourceExtent_=r,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!r&&!!this.sourceProj_.getExtent()&&(0,i.RG)(r)>=(0,i.RG)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,i.RG)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,i.RG)(this.targetProj_.getExtent()):null;const d=(0,i.Py)(n),f=(0,i.WU)(n),p=(0,i.k_)(n),g=(0,i.R)(n),m=this.transformInv_(d),y=this.transformInv_(f),_=this.transformInv_(p),v=this.transformInv_(g),x=10+(l?Math.max(0,Math.ceil(Math.log2((0,i.UG)(n)/(l*l*256*256)))):0);if(this.addQuad_(d,f,p,g,m,y,_,v,x),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach((function(e,n,i){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])})),this.triangles_.forEach((e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){const n=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];n[0][0]-t>this.sourceWorldWidth_/2&&(n[0][0]-=this.sourceWorldWidth_),n[1][0]-t>this.sourceWorldWidth_/2&&(n[1][0]-=this.sourceWorldWidth_),n[2][0]-t>this.sourceWorldWidth_/2&&(n[2][0]-=this.sourceWorldWidth_);const i=Math.min(n[0][0],n[1][0],n[2][0]);Math.max(n[0][0],n[1][0],n[2][0])-i<this.sourceWorldWidth_/2&&(e.source=n)}}))}u={}}addTriangle_(t,e,n,i,r,s){this.triangles_.push({source:[i,r,s],target:[t,e,n]})}addQuad_(t,e,n,s,o,a,l,h,u){const c=(0,i.Tr)([o,a,l,h]),d=this.sourceWorldWidth_?(0,i.RG)(c)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&d>.5&&d<1;let g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const r=(0,i.Tr)([t,e,n,s]);g=(0,i.RG)(r)/this.targetWorldWidth_>.25||g}!p&&this.sourceProj_.isGlobal()&&d&&(g=d>.25||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!(0,i.HY)(c,this.maxSourceExtent_))return;let m=0;if(!(g||isFinite(o[0])&&isFinite(o[1])&&isFinite(a[0])&&isFinite(a[1])&&isFinite(l[0])&&isFinite(l[1])&&isFinite(h[0])&&isFinite(h[1])))if(u>0)g=!0;else if(m=(isFinite(o[0])&&isFinite(o[1])?0:8)+(isFinite(a[0])&&isFinite(a[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1),1!=m&&2!=m&&4!=m&&8!=m)return;if(u>0){if(!g){const e=[(t[0]+n[0])/2,(t[1]+n[1])/2],i=this.transformInv_(e);let s;if(p){s=((0,r.xP)(o[0],f)+(0,r.xP)(l[0],f))/2-(0,r.xP)(i[0],f)}else s=(o[0]+l[0])/2-i[0];const a=(o[1]+l[1])/2-i[1];g=s*s+a*a>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-n[0])<=Math.abs(t[1]-n[1])){const i=[(e[0]+n[0])/2,(e[1]+n[1])/2],r=this.transformInv_(i),c=[(s[0]+t[0])/2,(s[1]+t[1])/2],d=this.transformInv_(c);this.addQuad_(t,e,i,c,o,a,r,d,u-1),this.addQuad_(c,i,n,s,d,r,l,h,u-1)}else{const i=[(t[0]+e[0])/2,(t[1]+e[1])/2],r=this.transformInv_(i),c=[(n[0]+s[0])/2,(n[1]+s[1])/2],d=this.transformInv_(c);this.addQuad_(t,i,c,s,o,r,d,h,u-1),this.addQuad_(i,e,n,c,r,a,l,d,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}11&m||this.addTriangle_(t,n,s,o,l,h),14&m||this.addTriangle_(t,n,e,o,l,a),m&&(13&m||this.addTriangle_(e,s,t,a,h,o),7&m||this.addTriangle_(e,s,n,a,h,l))}calculateSourceExtent(){const t=(0,i.S5)();return this.triangles_.forEach((function(e,n,r){const s=e.source;(0,i.$C)(t,s[0]),(0,i.$C)(t,s[1]),(0,i.$C)(t,s[2])})),t}getTriangles(){return this.triangles_}}},35603:function(t,e,n){"use strict";n.d(e,{G:function(){return o}});var i=n(25231),r=n(45342);class s extends r.A{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}}function o(t,e,n){const r=[],o=[],a=[],l=[],h=[];n=void 0!==n?n:[];const u="TileMatrix",c="Identifier",d="ScaleDenominator",f="TopLeftCorner",p=t.SupportedCRS,g=(0,i.Jt)(p),m=g.getMetersPerUnit(),y=g.getAxisOrientation().startsWith("ne");return t[u].sort((function(t,e){return e[d]-t[d]})),t[u].forEach((function(e){let i;if(i=!(n.length>0)||n.find((function(n){return e[c]==n[u]||!e[c].includes(":")&&t[c]+":"+e[c]===n[u]})),i){o.push(e[c]);const t=28e-5*e[d]/m,n=e.TileWidth,i=e.TileHeight;y?a.push([e[f][1],e[f][0]]):a.push(e[f]),r.push(t),l.push(n==i?n:[n,i]),h.push([e.MatrixWidth,e.MatrixHeight])}})),new s({extent:e,origins:a,resolutions:r,matrixIds:o,tileSizes:l,sizes:h})}e.A=s},35947:function(t,e,n){"use strict";n.d(e,{N:function(){return k}});var i=n(73887);var r=class{constructor(t,e,n){this.decay_=t,this.minVelocity_=e,this.delay_=n,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let n=e-3;for(;n>0&&this.points_[n+2]>t;)n-=3;const i=this.points_[e+2]-this.points_[n+2];if(i<1e3/60)return!1;const r=this.points_[e]-this.points_[n],s=this.points_[e+1]-this.points_[n+1];return this.angle_=Math.atan2(s,r),this.initialVelocity_=Math.sqrt(r*r+s*s)/i,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}},s=n(25309),o=n(8860);class a extends o.Ay{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:250}handleEvent(t){let e=!1;if(t.type==s.A.DBLCLICK){const n=t.originalEvent,i=t.map,r=t.coordinate,s=n.shiftKey?-this.delta_:this.delta_,a=i.getView();(0,o.D2)(a,s,r,this.duration_),n.preventDefault(),e=!0}return!e}}var l=a,h=n(91713),u=n(38808),c=n(95702),d=n(41146),f=n(87113);class p extends f.A{constructor(t){t=t||{},super({stopDown:c.W8}),this.condition_=t.condition?t.condition:u.IO,this.lastAngle_=void 0,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){if(!(0,u.A4)(t))return;const e=t.map,n=e.getView();if(n.getConstraints().rotation===d.b8)return;const i=e.getSize(),r=t.pixel,s=Math.atan2(i[1]/2-r[1],r[0]-i[0]/2);if(void 0!==this.lastAngle_){const t=s-this.lastAngle_;n.adjustRotationInternal(-t)}this.lastAngle_=s}handleUpEvent(t){if(!(0,u.A4)(t))return!0;return t.map.getView().endInteraction(this.duration_),!1}handleDownEvent(t){if(!(0,u.A4)(t))return!1;if((0,u.at)(t)&&this.condition_(t)){return t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0}return!1}}var g=p,m=n(426),y=n(62126);class _ extends y.A{constructor(t){super({condition:(t=t||{}).condition?t.condition:u.Kg,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=void 0!==t.duration?t.duration:200,this.out_=void 0!==t.out&&t.out}onBoxEnd(t){const e=this.getMap().getView();let n=this.getGeometry();if(this.out_){const t=e.rotatedExtentForGeometry(n),i=e.getResolutionForExtentInternal(t),r=e.getResolution()/i;n=n.clone(),n.scale(r*r)}e.fitInternal(n,{duration:this.duration_,easing:m.vT})}}var v=_,x=n(61341),b=n(22685),w="ArrowLeft",A="ArrowUp",S="ArrowRight",E="ArrowDown";class T extends o.Ay{constructor(t){super(),t=t||{},this.defaultCondition_=function(t){return(0,u.TS)(t)&&(0,u.tE)(t)},this.condition_=void 0!==t.condition?t.condition:this.defaultCondition_,this.duration_=void 0!==t.duration?t.duration:100,this.pixelDelta_=void 0!==t.pixelDelta?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==b.A.KEYDOWN){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&(i==E||i==w||i==S||i==A)){const r=t.map.getView(),s=r.getResolution()*this.pixelDelta_;let a=0,l=0;i==E?l=-s:i==w?a=-s:i==S?a=s:l=s;const h=[a,l];(0,x.e$)(h,r.getRotation()),(0,o.e4)(r,h,this.duration_),n.preventDefault(),e=!0}}return!e}}var C=T;class M extends o.Ay{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(t){return!(0,u.GB)(t)&&(0,u.tE)(t)},this.delta_=t.delta?t.delta:1,this.duration_=void 0!==t.duration?t.duration:100}handleEvent(t){let e=!1;if(t.type==b.A.KEYDOWN||t.type==b.A.KEYPRESS){const n=t.originalEvent,i=n.key;if(this.condition_(t)&&("+"===i||"-"===i)){const r=t.map,s="+"===i?this.delta_:-this.delta_,a=r.getView();(0,o.D2)(a,s,void 0,this.duration_),n.preventDefault(),e=!0}}return!e}}var L=M,P=n(8631);class R extends f.A{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c.W8),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=void 0!==t.threshold?t.threshold:.3,this.duration_=void 0!==t.duration?t.duration:250}handleDragEvent(t){let e=0;const n=this.targetPointers[0],i=this.targetPointers[1],r=Math.atan2(i.clientY-n.clientY,i.clientX-n.clientX);if(void 0!==this.lastAngle_){const t=r-this.lastAngle_;this.rotationDelta_+=t,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=t}this.lastAngle_=r;const s=t.map,o=s.getView();o.getConstraints().rotation!==d.b8&&(this.anchor_=s.getCoordinateFromPixelInternal(s.getEventPixel((0,f.v)(this.targetPointers))),this.rotating_&&(s.render(),o.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){if(this.targetPointers.length<2){return t.map.getView().endInteraction(this.duration_),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var I=R;class N extends f.A{constructor(t){const e=t=t||{};e.stopDown||(e.stopDown=c.W8),super(e),this.anchor_=null,this.duration_=void 0!==t.duration?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const n=this.targetPointers[0],i=this.targetPointers[1],r=n.clientX-i.clientX,s=n.clientY-i.clientY,o=Math.sqrt(r*r+s*s);void 0!==this.lastDistance_&&(e=this.lastDistance_/o),this.lastDistance_=o;const a=t.map,l=a.getView();1!=e&&(this.lastScaleDelta_=e),this.anchor_=a.getCoordinateFromPixelInternal(a.getEventPixel((0,f.v)(this.targetPointers))),a.render(),l.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}var F=N;function k(t){t=t||{};const e=new i.A,n=new r(-.005,.05,100);(void 0===t.altShiftDragRotate||t.altShiftDragRotate)&&e.push(new g);(void 0===t.doubleClickZoom||t.doubleClickZoom)&&e.push(new l({delta:t.zoomDelta,duration:t.zoomDuration}));(void 0===t.dragPan||t.dragPan)&&e.push(new h.A({onFocusOnly:t.onFocusOnly,kinetic:n}));(void 0===t.pinchRotate||t.pinchRotate)&&e.push(new I);(void 0===t.pinchZoom||t.pinchZoom)&&e.push(new F({duration:t.zoomDuration}));(void 0===t.keyboard||t.keyboard)&&(e.push(new C),e.push(new L({delta:t.zoomDelta,duration:t.zoomDuration})));(void 0===t.mouseWheelZoom||t.mouseWheelZoom)&&e.push(new P.A({onFocusOnly:t.onFocusOnly,duration:t.zoomDuration}));return(void 0===t.shiftDragZoom||t.shiftDragZoom)&&e.push(new v({duration:t.zoomDuration})),e}},36018:function(t,e,n){"use strict";n.d(e,{M:function(){return y}});var i=n(51541),r=n(44090),s=n(99518),o=n(77833),a=n(62609),l=n(59286),h=n(7535),u=n(69727),c=n(40878),d=n(30470),f=n(25231),p=n(37246),g=n(72961),m=n(86858);const y="http://www.opengis.net/gml",_=/^\s*$/;class v extends m.A{constructor(t){super(),t=t||{},this.featureType=t.featureType,this.featureNS=t.featureNS,this.srsName=t.srsName,this.schemaLocation="",this.FEATURE_COLLECTION_PARSERS={},this.FEATURE_COLLECTION_PARSERS[this.namespace]={featureMember:(0,p.VT)(this.readFeaturesInternal),featureMembers:(0,p.Tb)(this.readFeaturesInternal)},this.supportedMediaTypes=["application/gml+xml"]}readFeaturesInternal(t,e){const n=t.localName;let i=null;if("FeatureCollection"==n)i=(0,p.eY)([],this.FEATURE_COLLECTION_PARSERS,t,e,this);else if("featureMembers"==n||"featureMember"==n||"member"==n){const r=e[0];let s=r.featureType,o=r.featureNS;const a="p",l="p0";if(!s&&t.childNodes){s=[],o={};for(let e=0,n=t.childNodes.length;e<n;++e){const n=t.childNodes[e];if(1===n.nodeType){const t=n.nodeName.split(":").pop();if(!s.includes(t)){let e="",i=0;const r=n.namespaceURI;for(const t in o){if(o[t]===r){e=t;break}++i}e||(e=a+i,o[e]=r),s.push(e+":"+t)}}}"featureMember"!=n&&(r.featureType=s,r.featureNS=o)}if("string"==typeof o){const t=o;o={},o[l]=t}const h={},u=Array.isArray(s)?s:[s];for(const t in o){const e={};for(let i=0,r=u.length;i<r;++i){(u[i].includes(":")?u[i].split(":")[0]:l)===t&&(e[u[i].split(":").pop()]="featureMembers"==n?(0,p.VT)(this.readFeatureElement,this):(0,p.Tb)(this.readFeatureElement,this))}h[o[t]]=e}i="featureMember"==n||"member"==n?(0,p.eY)(void 0,h,t,e):(0,p.eY)([],h,t,e)}return null===i&&(i=[]),i}readGeometryOrExtent(t,e){const n=e[0];return n.srsName=t.firstElementChild.getAttribute("srsName"),n.srsDimension=t.firstElementChild.getAttribute("srsDimension"),(0,p.eY)(null,this.GEOMETRY_PARSERS,t,e,this)}readExtentElement(t,e){const n=e[0],i=this.readGeometryOrExtent(t,e);return i?(0,g.zU)(i,n):void 0}readGeometryElement(t,e){const n=e[0],i=this.readGeometryOrExtent(t,e);return i?(0,g.hX)(i,!1,n):void 0}readFeatureElementInternal(t,e,n){let r;const o={};for(let i=t.firstElementChild;i;i=i.nextElementSibling){let t;const a=i.localName;0===i.childNodes.length||1===i.childNodes.length&&(3===i.firstChild.nodeType||4===i.firstChild.nodeType)?(t=(0,p.mT)(i,!1),_.test(t)&&(t=void 0)):(n&&(t="boundedBy"===a?this.readExtentElement(i,e):this.readGeometryElement(i,e)),t?"boundedBy"!==a&&(r=a):t=this.readFeatureElementInternal(i,e,!1));const l=i.attributes.length;if(l>0&&!(t instanceof s.A)){t={_content_:t};for(let e=0;e<l;e++){t[i.attributes[e].name]=i.attributes[e].value}}o[a]?(o[a]instanceof Array||(o[a]=[o[a]]),o[a].push(t)):o[a]=t}if(!n)return o;const a=new i.A(o);r&&a.setGeometryName(r);const l=t.getAttribute("fid")||(0,p.I8)(t,this.namespace,"id");return l&&a.setId(l),a}readFeatureElement(t,e){return this.readFeatureElementInternal(t,e,!0)}readPoint(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new c.A(n,"XYZ")}readMultiPoint(t,e){const n=(0,p.eY)([],this.MULTIPOINT_PARSERS,t,e,this);if(n)return new h.A(n)}readMultiLineString(t,e){const n=(0,p.eY)([],this.MULTILINESTRING_PARSERS,t,e,this);if(n)return new l.A(n)}readMultiPolygon(t,e){const n=(0,p.eY)([],this.MULTIPOLYGON_PARSERS,t,e,this);if(n)return new u.A(n)}pointMemberParser(t,e){(0,p.UN)(this.POINTMEMBER_PARSERS,t,e,this)}lineStringMemberParser(t,e){(0,p.UN)(this.LINESTRINGMEMBER_PARSERS,t,e,this)}polygonMemberParser(t,e){(0,p.UN)(this.POLYGONMEMBER_PARSERS,t,e,this)}readLineString(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n){return new o.A(n,"XYZ")}}readFlatLinearRing(t,e){const n=(0,p.eY)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this);if(n)return n}readLinearRing(t,e){const n=this.readFlatCoordinatesFromNode(t,e);if(n)return new a.A(n,"XYZ")}readPolygon(t,e){const n=(0,p.eY)([null],this.FLAT_LINEAR_RINGS_PARSERS,t,e,this);if(n&&n[0]){const t=n[0],e=[t.length];let i,s;for(i=1,s=n.length;i<s;++i)(0,r.X$)(t,n[i]),e.push(t.length);return new d.Ay(t,"XYZ",e)}}readFlatCoordinatesFromNode(t,e){return(0,p.eY)(null,this.GEOMETRY_FLAT_COORDINATES_PARSERS,t,e,this)}readGeometryFromNode(t,e){const n=this.readGeometryElement(t,[this.getReadOptions(t,e||{})]);return n||null}readFeaturesFromNode(t,e){const n={featureType:this.featureType,featureNS:this.featureNS};n&&Object.assign(n,this.getReadOptions(t,e));return this.readFeaturesInternal(t,[n])||[]}readProjectionFromNode(t){return(0,f.Jt)(this.srsName?this.srsName:t.firstElementChild.getAttribute("srsName"))}}v.prototype.namespace=y,v.prototype.FLAT_LINEAR_RINGS_PARSERS={"http://www.opengis.net/gml":{}},v.prototype.GEOMETRY_FLAT_COORDINATES_PARSERS={"http://www.opengis.net/gml":{}},v.prototype.GEOMETRY_PARSERS={"http://www.opengis.net/gml":{}},v.prototype.MULTIPOINT_PARSERS={"http://www.opengis.net/gml":{pointMember:(0,p.VT)(v.prototype.pointMemberParser),pointMembers:(0,p.VT)(v.prototype.pointMemberParser)}},v.prototype.MULTILINESTRING_PARSERS={"http://www.opengis.net/gml":{lineStringMember:(0,p.VT)(v.prototype.lineStringMemberParser),lineStringMembers:(0,p.VT)(v.prototype.lineStringMemberParser)}},v.prototype.MULTIPOLYGON_PARSERS={"http://www.opengis.net/gml":{polygonMember:(0,p.VT)(v.prototype.polygonMemberParser),polygonMembers:(0,p.VT)(v.prototype.polygonMemberParser)}},v.prototype.POINTMEMBER_PARSERS={"http://www.opengis.net/gml":{Point:(0,p.VT)(v.prototype.readFlatCoordinatesFromNode)}},v.prototype.LINESTRINGMEMBER_PARSERS={"http://www.opengis.net/gml":{LineString:(0,p.VT)(v.prototype.readLineString)}},v.prototype.POLYGONMEMBER_PARSERS={"http://www.opengis.net/gml":{Polygon:(0,p.VT)(v.prototype.readPolygon)}},v.prototype.RING_PARSERS={"http://www.opengis.net/gml":{LinearRing:(0,p.Tb)(v.prototype.readFlatLinearRing)}},e.A=v},36035:function(t,e,n){"use strict";n.d(e,{iA:function(){return p},my:function(){return f}});var i=n(42484),r=n(48729),s=n(91108),o=n(86630),a=n(77691);function l(t){return(JSON.stringify(t).split("").reduce(((t,e)=>(t<<5)-t+e.charCodeAt(0)),0)>>>0).toString()}function h(t,e,n,i){if(`${i}radius`in t&&"icon-"!==i){let s=(0,a.s2)(n,t[`${i}radius`],r.wl);if(`${i}radius2`in t){s=`max(${s}, ${(0,a.s2)(n,t[`${i}radius2`],r.wl)})`}`${i}stroke-width`in t&&(s=`(${s} + ${(0,a.s2)(n,t[`${i}stroke-width`],r.wl)} * 0.5)`),e.setSymbolSizeExpression(`vec2(${s} * 2. + 0.5)`)}if(`${i}scale`in t){const s=(0,a.s2)(n,t[`${i}scale`],r.qA);e.setSymbolSizeExpression(`${e.getSymbolSizeExpression()} * ${s}`)}`${i}displacement`in t&&e.setSymbolOffsetExpression((0,a.s2)(n,t[`${i}displacement`],r.Fq)),`${i}rotation`in t&&e.setSymbolRotationExpression((0,a.s2)(n,t[`${i}rotation`],r.wl)),`${i}rotate-with-view`in t&&e.setSymbolRotateWithView(!!t[`${i}rotate-with-view`])}function u(t,e,n,i,r){let s="vec4(0.)";if(null!==e&&(s=e),null!==n&&null!==i){s=`mix(${n}, ${s}, ${`smoothstep(-${i} + 0.63, -${i} - 0.58, ${t})`})`}let o=`${s} * vec4(1.0, 1.0, 1.0, ${`(1.0 - smoothstep(-0.63, 0.58, ${t}))`})`;return null!==r&&(o=`${o} * vec4(1.0, 1.0, 1.0, ${r})`),o}function c(t,e,n,r,s){const o=new Image;o.crossOrigin=void 0===t[`${r}cross-origin`]?"anonymous":t[`${r}cross-origin`],(0,i.v)("string"==typeof t[`${r}src`],`WebGL layers do not support expressions for the ${r}src style property`),o.src=t[`${r}src`],n[`u_texture${s}_size`]=()=>o.complete?[o.width,o.height]:[0,0],e.addUniform(`vec2 u_texture${s}_size`);const a=`u_texture${s}_size`;return n[`u_texture${s}`]=o,e.addUniform(`sampler2D u_texture${s}`),a}function d(t,e,n,i,s){let o=(0,a.s2)(n,t[`${e}offset`],r.Fq);if(`${e}offset-origin`in t)switch(t[`${e}offset-origin`]){case"top-right":o=`vec2(${i}.x, 0.) + ${s} * vec2(-1., 0.) + ${o} * vec2(-1., 1.)`;break;case"bottom-left":o=`vec2(0., ${i}.y) + ${s} * vec2(0., -1.) + ${o} * vec2(1., -1.)`;break;case"bottom-right":o=`${i} - ${s} - ${o}`}return o}function f(t,e,n){const i=(0,s.z0)(),f=new o.N,p={};if("icon-src"in t?function(t,e,n,i){let s="vec4(1.0)";"icon-color"in t&&(s=(0,a.s2)(i,t["icon-color"],r.mE)),"icon-opacity"in t&&(s=`${s} * vec4(1.0, 1.0, 1.0, ${(0,a.s2)(i,t["icon-opacity"],r.wl)})`);const o=l(t["icon-src"]),u=c(t,e,n,"icon-",o);if(e.setSymbolColorExpression(`${s} * texture2D(u_texture${o}, v_texCoord)`).setSymbolSizeExpression(u),"icon-width"in t&&"icon-height"in t&&e.setSymbolSizeExpression(`vec2(${(0,a.s2)(i,t["icon-width"],r.wl)}, ${(0,a.s2)(i,t["icon-height"],r.wl)})`),"icon-offset"in t&&"icon-size"in t){const n=(0,a.s2)(i,t["icon-size"],r.Fq),s=e.getSymbolSizeExpression();e.setSymbolSizeExpression(n);const o=d(t,"icon-",i,"v_quadSizePx",n);e.setTextureCoordinateExpression(`(vec4((${o}).xyxy) + vec4(0., 0., ${n})) / (${s}).xyxy`)}if(h(t,e,i,"icon-"),"icon-anchor"in t){const n=(0,a.s2)(i,t["icon-anchor"],r.Fq);let s,o="1.0";"icon-scale"in t&&(o=(0,a.s2)(i,t["icon-scale"],r.qA)),s="pixels"===t["icon-anchor-x-units"]&&"pixels"===t["icon-anchor-y-units"]?`${n} * ${o}`:"pixels"===t["icon-anchor-x-units"]?`${n} * vec2(vec2(${o}).x, v_quadSizePx.y)`:"pixels"===t["icon-anchor-y-units"]?`${n} * vec2(v_quadSizePx.x, vec2(${o}).x)`:`${n} * v_quadSizePx`;let l=`v_quadSizePx * vec2(0.5, -0.5) + ${s} * vec2(-1., 1.)`;if("icon-anchor-origin"in t)switch(t["icon-anchor-origin"]){case"top-right":l=`v_quadSizePx * -0.5 + ${s}`;break;case"bottom-left":l=`v_quadSizePx * 0.5 - ${s}`;break;case"bottom-right":l=`v_quadSizePx * vec2(-0.5, 0.5) + ${s} * vec2(1., -1.)`}e.setSymbolOffsetExpression(`${e.getSymbolOffsetExpression()} + ${l}`)}}(t,f,p,i):"shape-points"in t?function(t,e,n,i){i.functions.round="float round(float v) {\n  return sign(v) * floor(abs(v) + 0.5);\n}",i.functions.starDistanceField="float starDistanceField(vec2 point, float numPoints, float radius, float radius2, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round(beta / alpha) * alpha; // angle in sector\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  vec2 tipToPoint = inSector + vec2(-radius, 0.);\n  vec2 edgeNormal = vec2(radius2 * sin(alpha * 0.5), -radius2 * cos(alpha * 0.5) + radius);\n  return dot(normalize(edgeNormal), tipToPoint);\n}",i.functions.regularDistanceField="float regularDistanceField(vec2 point, float numPoints, float radius, float angle) {\n  float startAngle = -PI * 0.5 + angle; // tip starts upwards and rotates clockwise with angle\n  float c = cos(startAngle);\n  float s = sin(startAngle);\n  vec2 pointRotated = vec2(c * point.x - s * point.y, s * point.x + c * point.y);\n  float alpha = TWO_PI / numPoints; // the angle of one sector\n  float radiusIn = radius * cos(PI / numPoints);\n  float beta = atan(pointRotated.y, pointRotated.x);\n  float gamma = round((beta - alpha * 0.5) / alpha) * alpha + alpha * 0.5; // angle in sector from mid\n  c = cos(-gamma);\n  s = sin(-gamma);\n  vec2 inSector = vec2(c * pointRotated.x - s * pointRotated.y, abs(s * pointRotated.x + c * pointRotated.y));\n  return inSector.x - radiusIn;\n}",h(t,e,i,"shape-");let s=null;"shape-opacity"in t&&(s=(0,a.s2)(i,t["shape-opacity"],r.wl));let o="coordsPx";"shape-scale"in t&&(o=`coordsPx / ${(0,a.s2)(i,t["shape-scale"],r.qA)}`);let l=null;"shape-fill-color"in t&&(l=(0,a.s2)(i,t["shape-fill-color"],r.mE));let c=null;"shape-stroke-color"in t&&(c=(0,a.s2)(i,t["shape-stroke-color"],r.mE));let d=null;"shape-stroke-width"in t&&(d=(0,a.s2)(i,t["shape-stroke-width"],r.wl));const f=(0,a.s2)(i,t["shape-points"],r.wl);let p,g="0.";"shape-angle"in t&&(g=(0,a.s2)(i,t["shape-angle"],r.wl));let m=(0,a.s2)(i,t["shape-radius"],r.wl);if(null!==d&&(m=`${m} + ${d} * 0.5`),"shape-radius2"in t){let e=(0,a.s2)(i,t["shape-radius2"],r.wl);null!==d&&(e=`${e} + ${d} * 0.5`),p=`starDistanceField(${o}, ${f}, ${m}, ${e}, ${g})`}else p=`regularDistanceField(${o}, ${f}, ${m}, ${g})`;const y=u(p,l,c,d,s);e.setSymbolColorExpression(y)}(t,f,0,i):"circle-radius"in t&&function(t,e,n,i){i.functions.circleDistanceField="float circleDistanceField(vec2 point, float radius) {\n  return length(point) - radius;\n}",h(t,e,i,"circle-");let s=null;"circle-opacity"in t&&(s=(0,a.s2)(i,t["circle-opacity"],r.wl));let o="coordsPx";"circle-scale"in t&&(o=`coordsPx / ${(0,a.s2)(i,t["circle-scale"],r.qA)}`);let l=null;"circle-fill-color"in t&&(l=(0,a.s2)(i,t["circle-fill-color"],r.mE));let c=null;"circle-stroke-color"in t&&(c=(0,a.s2)(i,t["circle-stroke-color"],r.mE));let d=(0,a.s2)(i,t["circle-radius"],r.wl),f=null;"circle-stroke-width"in t&&(f=(0,a.s2)(i,t["circle-stroke-width"],r.wl),d=`(${d} + ${f} * 0.5)`);const p=u(`circleDistanceField(${o}, ${d})`,l,c,f,s);e.setSymbolColorExpression(p)}(t,f,0,i),function(t,e,n,i){if("stroke-color"in t&&e.setStrokeColorExpression((0,a.s2)(i,t["stroke-color"],r.mE)),"stroke-pattern-src"in t){const s=l(t["stroke-pattern-src"]),o=c(t,e,n,"stroke-pattern-",s);let h=o,u="vec2(0.)";"stroke-pattern-offset"in t&&"stroke-pattern-size"in t&&(h=(0,a.s2)(i,t["stroke-pattern-size"],r.Fq),u=d(t,"stroke-pattern-",i,o,h));let f="0.";"stroke-pattern-spacing"in t&&(f=(0,a.s2)(i,t["stroke-pattern-spacing"],r.wl)),i.functions.sampleStrokePattern="vec4 sampleStrokePattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, float spacingPx, float currentLengthPx, float currentRadiusRatio, float lineWidth) {\n  float currentLengthScaled = currentLengthPx * sampleSize.y / lineWidth;\n  float spacingScaled = spacingPx * sampleSize.y / lineWidth;\n  float uCoordPx = mod(currentLengthScaled, (sampleSize.x + spacingScaled));\n  // make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  uCoordPx = clamp(uCoordPx, 0.5, sampleSize.x - 0.5);\n  float vCoordPx = (-currentRadiusRatio * 0.5 + 0.5) * sampleSize.y;\n  vec2 texCoord = (vec2(uCoordPx, vCoordPx) + textureOffset) / textureSize;\n  return texture2D(texture, texCoord);\n}";const p=`u_texture${s}`;let g="1.";"stroke-color"in t&&(g=e.getStrokeColorExpression()),e.setStrokeColorExpression(`${g} * sampleStrokePattern(${p}, ${o}, ${u}, ${h}, ${f}, currentLengthPx, currentRadiusRatio, v_width)`)}if("stroke-width"in t&&e.setStrokeWidthExpression((0,a.s2)(i,t["stroke-width"],r.wl)),"stroke-offset"in t&&e.setStrokeOffsetExpression((0,a.s2)(i,t["stroke-offset"],r.wl)),"stroke-line-cap"in t&&e.setStrokeCapExpression((0,a.s2)(i,t["stroke-line-cap"],r.cT)),"stroke-line-join"in t&&e.setStrokeJoinExpression((0,a.s2)(i,t["stroke-line-join"],r.cT)),"stroke-miter-limit"in t&&e.setStrokeMiterLimitExpression((0,a.s2)(i,t["stroke-miter-limit"],r.wl)),"stroke-line-dash"in t){i.functions.getSingleDashDistance=`float getSingleDashDistance(float distance, float radius, float dashOffset, float dashLength, float dashLengthTotal, float capType, float lineWidth) {\n  float localDistance = mod(distance, dashLengthTotal);\n  float distanceSegment = abs(localDistance - dashOffset - dashLength * 0.5) - dashLength * 0.5;\n  distanceSegment = min(distanceSegment, dashLengthTotal - localDistance);\n  if (capType == ${(0,s.Tl)("square")}) {\n    distanceSegment -= lineWidth * 0.5;\n  } else if (capType == ${(0,s.Tl)("round")}) {\n    distanceSegment = min(distanceSegment, sqrt(distanceSegment * distanceSegment + radius * radius) - lineWidth * 0.5);\n  }\n  return distanceSegment;\n}`;let n=t["stroke-line-dash"].map((t=>(0,a.s2)(i,t,r.wl)));n.length%2==1&&(n=[...n,...n]);let o="0.";"stroke-line-dash-offset"in t&&(o=(0,a.s2)(i,t["stroke-line-dash-offset"],r.wl));const h=`dashDistanceField_${l(t["stroke-line-dash"])}`,u=n.map(((t,e)=>`float dashLength${e} = ${t};`)),c=n.map(((t,e)=>`dashLength${e}`)).join(" + ");let d="0.",f=`getSingleDashDistance(distance, radius, ${d}, dashLength0, totalDashLength, capType, lineWidth)`;for(let t=2;t<n.length;t+=2)d=`${d} + dashLength${t-2} + dashLength${t-1}`,f=`min(${f}, getSingleDashDistance(distance, radius, ${d}, dashLength${t}, totalDashLength, capType, lineWidth))`;i.functions[h]=`float ${h}(float distance, float radius, float capType, float lineWidth) {\n  ${u.join("\n  ")}\n  float totalDashLength = ${c};\n  return ${f};\n}`,e.setStrokeDistanceFieldExpression(`${h}(currentLengthPx + ${o}, currentRadiusPx, capType, v_width)`)}}(t,f,p,i),function(t,e,n,i){if("fill-color"in t&&e.setFillColorExpression((0,a.s2)(i,t["fill-color"],r.mE)),"fill-pattern-src"in t){const s=l(t["fill-pattern-src"]),o=c(t,e,n,"fill-pattern-",s);let h=o,u="vec2(0.)";"fill-pattern-offset"in t&&"fill-pattern-size"in t&&(h=(0,a.s2)(i,t["fill-pattern-size"],r.Fq),u=d(t,"fill-pattern-",i,o,h)),i.functions.sampleFillPattern="vec4 sampleFillPattern(sampler2D texture, vec2 textureSize, vec2 textureOffset, vec2 sampleSize, vec2 pxOrigin, vec2 pxPosition) {\n  float scaleRatio = pow(2., mod(u_zoom + 0.5, 1.) - 0.5);\n  vec2 pxRelativePos = pxPosition - pxOrigin;\n  // rotate the relative position from origin by the current view rotation\n  pxRelativePos = vec2(pxRelativePos.x * cos(u_rotation) - pxRelativePos.y * sin(u_rotation), pxRelativePos.x * sin(u_rotation) + pxRelativePos.y * cos(u_rotation));\n  // sample position is computed according to the sample offset & size\n  vec2 samplePos = mod(pxRelativePos / scaleRatio, sampleSize);\n  // also make sure that we're not sampling too close to the borders to avoid interpolation with outside pixels\n  samplePos = clamp(samplePos, vec2(0.5), sampleSize - vec2(0.5));\n  samplePos.y = sampleSize.y - samplePos.y; // invert y axis so that images appear upright\n  return texture2D(texture, (samplePos + textureOffset) / textureSize);\n}";const f=`u_texture${s}`;let p="1.";"fill-color"in t&&(p=e.getFillColorExpression()),e.setFillColorExpression(`${p} * sampleFillPattern(${f}, ${o}, ${u}, ${h}, pxOrigin, pxPos)`)}}(t,f,p,i),n){const t=(0,a.s2)(i,n,r.T8);f.setFragmentDiscardExpression(`!${t}`)}const g={};function m(t,e,n,r){if(!i[t])return;const s=(0,a.T0)(n),o=(0,a.Qi)(n);f.addAttribute(`a_${e}`,s),g[e]={size:o,callback:r}}return m("geometryType",s.M7,r.cT,(t=>(0,s.Lm)((0,r.Ye)(t.getGeometry())))),m("featureId",s.L$,r.cT|r.wl,(t=>{const e=t.getId()??null;return"string"==typeof e?(0,s.Lm)(e):e})),(0,a.mf)(f,i),{builder:f,attributes:{...g,...(0,a.mh)(i)},uniforms:{...p,...(0,a.kc)(i,e)}}}function p(t){const e=Array.isArray(t)?t:[t];if("style"in e[0]){const t=[],n=e,i=[];for(const e of n){const n=Array.isArray(e.style)?e.style:[e.style];let r=e.filter;e.else&&i.length&&(r=["all",...i.map((t=>["!",t]))],e.filter&&r.push(e.filter),r.length<3&&(r=r[1])),e.filter&&i.push(e.filter);const s=n.map((t=>({style:t,...r&&{filter:r}})));t.push(...s)}return t}return"builder"in e[0]?e:e.map((t=>({style:t})))}},36228:function(t,e,n){"use strict";n.d(e,{$:function(){return i},AC:function(){return h},Hm:function(){return d},NZ:function(){return s},S3:function(){return c},TZ:function(){return u},s$:function(){return a},ub:function(){return l}});const i={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams",50674:"LercParameters"},r={};for(const t in i)i.hasOwnProperty(t)&&(r[i[t]]=parseInt(t,10));const s=[r.BitsPerSample,r.ExtraSamples,r.SampleFormat,r.StripByteCounts,r.StripOffsets,r.StripRowCounts,r.TileByteCounts,r.TileOffsets,r.SubIFDs],o={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"},a={};for(const t in o)o.hasOwnProperty(t)&&(a[o[t]]=parseInt(t,10));const l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9},h={Unspecified:0,Assocalpha:1,Unassalpha:2},u={Version:0,AddCompression:1},c={None:0,Deflate:1,Zstandard:2},d={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"},f={};for(const t in d)d.hasOwnProperty(t)&&(f[d[t]]=parseInt(t,10))},36634:function(t,e,n){"use strict";n.d(e,{D4:function(){return f},Hh:function(){return c},RA:function(){return d},f6:function(){return u}});var i=n(61829),r=n(22685),s=n(37372),o=n(92662),a=n(95702),l=n(95907);class h extends s.A{constructor(t,e,n,r){super(),this.extent=t,this.pixelRatio_=n,this.resolution=e,this.state="function"==typeof r?i.A.IDLE:r,this.image_=null,this.loader="function"==typeof r?r:null}changed(){this.dispatchEvent(r.A.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==i.A.IDLE&&this.loader){this.state=i.A.LOADING,this.changed();const t=this.getResolution(),e=Array.isArray(t)?t[0]:t;(0,a.hq)((()=>this.loader(this.getExtent(),e,this.getPixelRatio()))).then((t=>{"image"in t&&(this.image_=t.image),"extent"in t&&(this.extent=t.extent),"resolution"in t&&(this.resolution=t.resolution),"pixelRatio"in t&&(this.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||l.XM&&t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(this.image_=t),this.state=i.A.LOADED})).catch((t=>{this.state=i.A.ERROR,console.error(t)})).finally((()=>this.changed()))}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function u(t,e,n){const i=t;let s=!0,a=!1,h=!1;const u=[(0,o.Jz)(i,r.A.LOAD,(function(){h=!0,a||e()}))];return i.src&&l.DT?(a=!0,i.decode().then((function(){s&&e()})).catch((function(t){s&&(h?e():n())}))):u.push((0,o.Jz)(i,r.A.ERROR,n)),function(){s=!1,u.forEach(o.JH)}}function c(t,e){return new Promise(((n,i)=>{function r(){o(),n(t)}function s(){o(),i(new Error("Image load error"))}function o(){t.removeEventListener("load",r),t.removeEventListener("error",s)}t.addEventListener("load",r),t.addEventListener("error",s),e&&(t.src=e)}))}function d(t,e){return e&&(t.src=e),t.src&&l.DT?new Promise(((e,n)=>t.decode().then((()=>e(t))).catch((i=>t.complete&&t.width?e(t):n(i))))):c(t)}function f(t,e){return e&&(t.src=e),t.src&&l.DT&&l.XM?t.decode().then((()=>createImageBitmap(t))).catch((e=>{if(t.complete&&t.width)return t;throw e})):d(t)}e.Ay=h},36804:function(t,e,n){"use strict";n.d(e,{l:function(){return d}});var i=n(87240),r=n(42484),s=n(22685),o=n(92662),a=n(16235),l=n(280),h=n(90324),u=n(99516);class c extends h.A{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(u.A.SOURCE,this.handleSourcePropertyChange_);const n=t.source?t.source:null;this.setSource(n)}getLayersArray(t){return(t=t||[]).push(this),t}getLayerStatesArray(t){return(t=t||[]).push(this.getLayerState()),t}getSource(){return this.get(u.A.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),this.sourceReady_||"ready"!==this.getSource().getState()||(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&((0,o.JH)(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=(0,o.KT)(t,s.A.CHANGE,this.handleSourceChange_,this),"ready"===t.getState()&&(this.sourceReady_=!0,setTimeout((()=>{this.dispatchEvent("sourceready")}),0)),this.clearRenderer()),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return this.renderer_&&this.rendered?this.renderer_.getData(t):null}isVisible(t){let e;const n=this.getMapInternal();let r;if(!t&&n&&(t=n.getView()),e=t instanceof i.Ay?{viewState:t.getState(),extent:t.calculateExtent()}:t,!e.layerStatesArray&&n&&(e.layerStatesArray=n.getLayerGroup().getLayerStatesArray()),e.layerStatesArray){if(r=e.layerStatesArray.find((t=>t.layer===this)),!r)return!1}else r=this.getLayerState();const s=this.getExtent();return d(r,e.viewState)&&(!s||(0,a.HY)(s,e.extent))}getAttributions(t){if(!this.isVisible(t))return[];const e=this.getSource()?.getAttributions();if(!e)return[];let n=e(t instanceof i.Ay?t.getViewStateAndExtent():t);return Array.isArray(n)||(n=[n]),n}render(t,e){const n=this.getRenderer();return n.prepareFrame(t)?(this.rendered=!0,n.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(u.A.MAP,t)}getMapInternal(){return this.get(u.A.MAP)}setMap(t){this.mapPrecomposeKey_&&((0,o.JH)(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&((0,o.JH)(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=(0,o.KT)(t,l.A.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=(0,o.KT)(this,s.A.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,n=this.getLayerState(!1);(0,r.v)(!e.some((t=>t.layer===n.layer)),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(n)}setSource(t){this.set(u.A.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function d(t,e){if(!t.visible)return!1;const n=e.resolution;if(n<t.minResolution||n>=t.maxResolution)return!1;const i=e.zoom;return i>t.minZoom&&i<=t.maxZoom}e.A=c},36958:function(t,e,n){"use strict";var i=n(73887),r=n(41564),s=n(81297),o=n(63188),a=n(75738),l=n(93595),h=n(87240),u=n(12239),c=n(67024),d=n(69791),f=n(22685),p=n(92662),g=n(16235),m=n(30470),y=n(73988);const _=.75,v=.1;class x extends y.A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.boundHandleRotationChanged_=this.handleRotationChanged_.bind(this),this.collapsed_=void 0===t.collapsed||t.collapsed,this.collapsible_=void 0===t.collapsible||t.collapsible,this.collapsible_||(this.collapsed_=!1),this.rotateWithView_=void 0!==t.rotateWithView&&t.rotateWithView,this.viewExtent_=void 0;const e=void 0!==t.className?t.className:"ol-overviewmap",n=void 0!==t.tipLabel?t.tipLabel:"Overview map",s=void 0!==t.collapseLabel?t.collapseLabel:"‹";"string"==typeof s?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s):this.collapseLabel_=s;const o=void 0!==t.label?t.label:"›";"string"==typeof o?(this.label_=document.createElement("span"),this.label_.textContent=o):this.label_=o;const a=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_,h=document.createElement("button");h.setAttribute("type","button"),h.title=n,h.appendChild(a),h.addEventListener(f.A.CLICK,this.handleClick_.bind(this),!1),this.ovmapDiv_=document.createElement("div"),this.ovmapDiv_.className="ol-overviewmap-map",this.view_=t.view;const u=new r.A({view:t.view,controls:new i.A,interactions:new i.A});this.ovmap_=u,t.layers&&t.layers.forEach((function(t){u.addLayer(t)}));const d=document.createElement("div");d.className="ol-overviewmap-box",d.style.boxSizing="border-box",this.boxOverlay_=new l.A({position:[0,0],positioning:"center-center",element:d}),this.ovmap_.addOverlay(this.boxOverlay_);const p=e+" "+c.XI+" "+c.$N+(this.collapsed_&&this.collapsible_?" "+c.nT:"")+(this.collapsible_?"":" ol-uncollapsible"),g=this.element;g.className=p,g.appendChild(this.ovmapDiv_),g.appendChild(h);const m=this.boxOverlay_,y=this.boxOverlay_.getElement(),_=function(t){const e={clientX:(n=t).clientX,clientY:n.clientY};var n;const i=u.getEventCoordinate(e);m.setPosition(i)},v=t=>{const e=u.getEventCoordinateInternal(t),n=this.getMap();n.getView().setCenterInternal(e);const i=n.getOwnerDocument();i.removeEventListener("pointermove",_),i.removeEventListener("pointerup",v)};this.ovmapDiv_.addEventListener("pointerdown",(t=>{const e=this.getMap().getOwnerDocument();t.target===y&&e.addEventListener("pointermove",_),e.addEventListener("pointerup",v)}))}setMap(t){const e=this.getMap();if(t!==e){if(e){const t=e.getView();t&&this.unbindView_(t),this.ovmap_.setTarget(null)}if(super.setMap(t),t){this.ovmap_.setTarget(this.ovmapDiv_),this.listenerKeys.push((0,p.KT)(t,a.A.PROPERTYCHANGE,this.handleMapPropertyChange_,this));const e=t.getView();e&&this.bindView_(e),this.ovmap_.isRendered()||this.updateBoxAfterOvmapIsRendered_()}}}handleMapPropertyChange_(t){if(t.key===o.A.VIEW){const e=t.oldValue;e&&this.unbindView_(e);const n=this.getMap().getView();this.bindView_(n)}else this.ovmap_.isRendered()||t.key!==o.A.TARGET&&t.key!==o.A.SIZE||this.ovmap_.updateSize()}bindView_(t){if(!this.view_){const e=new h.Ay({projection:t.getProjection()});this.ovmap_.setView(e)}t.addChangeListener(u.A.ROTATION,this.boundHandleRotationChanged_),this.handleRotationChanged_(),t.isDef()&&(this.ovmap_.updateSize(),this.resetExtent_())}unbindView_(t){t.removeChangeListener(u.A.ROTATION,this.boundHandleRotationChanged_)}handleRotationChanged_(){this.rotateWithView_&&this.ovmap_.getView().setRotation(this.getMap().getView().getRotation())}validateExtent_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView().calculateExtentInternal(n);if(this.viewExtent_&&(0,g.aI)(i,this.viewExtent_))return;this.viewExtent_=i;const r=e.getSize(),s=e.getView().calculateExtentInternal(r),o=e.getPixelFromCoordinateInternal((0,g.Py)(i)),a=e.getPixelFromCoordinateInternal((0,g.k_)(i)),l=Math.abs(o[0]-a[0]),h=Math.abs(o[1]-a[1]),u=r[0],c=r[1];l<u*v||h<c*v||l>u*_||h>c*_?this.resetExtent_():(0,g.ms)(s,i)||this.recenter_()}resetExtent_(){const t=this.getMap(),e=this.ovmap_,n=t.getSize(),i=t.getView().calculateExtentInternal(n),r=e.getView(),s=Math.log(7.5)/Math.LN2,o=1/(Math.pow(2,s/2)*v);(0,g.Af)(i,o),r.fitInternal((0,m.VY)(i))}recenter_(){const t=this.getMap(),e=this.ovmap_,n=t.getView();e.getView().setCenterInternal(n.getCenterInternal())}updateBox_(){const t=this.getMap(),e=this.ovmap_;if(!t.isRendered()||!e.isRendered())return;const n=t.getSize(),i=t.getView(),r=e.getView(),s=this.rotateWithView_?0:-i.getRotation(),o=this.boxOverlay_,a=this.boxOverlay_.getElement(),l=i.getCenter(),h=i.getResolution(),u=r.getResolution(),c=n[0]*h/u,d=n[1]*h/u;if(o.setPosition(l),a){a.style.width=c+"px",a.style.height=d+"px";const t="rotate("+s+"rad)";a.style.transform=t}}updateBoxAfterOvmapIsRendered_(){this.ovmapPostrenderKey_||(this.ovmapPostrenderKey_=(0,p.Jz)(this.ovmap_,s.A.POSTRENDER,(t=>{delete this.ovmapPostrenderKey_,this.updateBox_()})))}handleClick_(t){t.preventDefault(),this.handleToggle_()}handleToggle_(){this.element.classList.toggle(c.nT),this.collapsed_?(0,d.fo)(this.collapseLabel_,this.label_):(0,d.fo)(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_;const t=this.ovmap_;if(!this.collapsed_){if(t.isRendered())return this.viewExtent_=void 0,void t.render();t.updateSize(),this.resetExtent_(),this.updateBoxAfterOvmapIsRendered_()}}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),!t&&this.collapsed_&&this.handleToggle_())}setCollapsed(t){this.collapsible_&&this.collapsed_!==t&&this.handleToggle_()}getCollapsed(){return this.collapsed_}getRotateWithView(){return this.rotateWithView_}setRotateWithView(t){this.rotateWithView_!==t&&(this.rotateWithView_=t,0!==this.getMap().getView().getRotation()&&(this.rotateWithView_?this.handleRotationChanged_():this.ovmap_.getView().setRotation(0),this.viewExtent_=void 0,this.validateExtent_(),this.updateBox_()))}getOverviewMap(){return this.ovmap_}render(t){this.validateExtent_(),this.updateBox_()}}e.A=x},37246:function(t,e,n){"use strict";n.d(e,{Dm:function(){return b},Gl:function(){return x},I8:function(){return h},NQ:function(){return E},OL:function(){return v},Tb:function(){return f},UN:function(){return w},VT:function(){return d},Vh:function(){return c},X1:function(){return _},YE:function(){return L},c4:function(){return p},eY:function(){return A},gN:function(){return y},kW:function(){return g},mT:function(){return o},mc:function(){return M},mm:function(){return m},pF:function(){return r},qg:function(){return u},qq:function(){return s},wz:function(){return l}});var i=n(44090);const r="http://www.w3.org/2001/XMLSchema-instance";function s(t,e){return L().createElementNS(t,e)}function o(t,e){return a(t,e,[]).join("")}function a(t,e,n){if(t.nodeType==Node.CDATA_SECTION_NODE||t.nodeType==Node.TEXT_NODE)e?n.push(String(t.nodeValue).replace(/(\r\n|\r|\n)/g,"")):n.push(t.nodeValue);else{let i;for(i=t.firstChild;i;i=i.nextSibling)a(i,e,n)}return n}function l(t){return"documentElement"in t}function h(t,e,n){return t.getAttributeNS(e,n)||""}function u(t){return(new DOMParser).parseFromString(t,"application/xml")}function c(t,e){return function(n,r){const s=t.call(e??this,n,r);if(void 0!==s){const t=r[r.length-1];(0,i.X$)(t,s)}}}function d(t,e){return function(n,i){const r=t.call(e??this,n,i);if(void 0!==r){i[i.length-1].push(r)}}}function f(t,e){return function(n,i){const r=t.call(e??this,n,i);void 0!==r&&(i[i.length-1]=r)}}function p(t,e,n){return function(i,r){const s=t.call(n??this,i,r);if(void 0!==s){const t=r[r.length-1],n=void 0!==e?e:i.localName;let o;n in t?o=t[n]:(o=[],t[n]=o),o.push(s)}}}function g(t,e,n){return function(i,r){const s=t.call(n??this,i,r);if(void 0!==s){r[r.length-1][void 0!==e?e:i.localName]=s}}}function m(t,e){return function(n,i,r){t.call(e??this,n,i,r);r[r.length-1].node.appendChild(n)}}function y(t,e){let n,i;return function(e,r,s){if(void 0===n){n={};const r={};r[e.localName]=t,n[e.namespaceURI]=r,i=_(e.localName)}S(n,i,r,s)}}function _(t,e){return function(n,i,r){const o=i[i.length-1].node;let a=t;void 0===a&&(a=r);return s(void 0!==e?e:o.namespaceURI,a)}}const v=_();function x(t,e){const n=e.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=t[e[r]];return i}function b(t,e,n){let i,r;for(n=void 0!==n?n:{},i=0,r=t.length;i<r;++i)n[t[i]]=e;return n}function w(t,e,n,i){let r;for(r=e.firstElementChild;r;r=r.nextElementSibling){const e=t[r.namespaceURI];if(void 0!==e){const t=e[r.localName];void 0!==t&&t.call(i,r,n)}}}function A(t,e,n,i,r){return i.push(t),w(e,n,i,r),i.pop()}function S(t,e,n,i,r,s){const o=(void 0!==r?r:n).length;let a,l;for(let h=0;h<o;++h)a=n[h],void 0!==a&&(l=e.call(s,a,i,void 0!==r?r[h]:void 0),void 0!==l&&t[l.namespaceURI][l.localName].call(s,l,a,i))}function E(t,e,n,i,r,s,o){return r.push(t),S(e,n,i,r,s,o),r.pop()}let T,C;function M(){return void 0===T&&"undefined"!=typeof XMLSerializer&&(T=new XMLSerializer),T}function L(){return void 0===C&&"undefined"!=typeof document&&(C=document.implementation.createDocument("","",null)),C}},37372:function(t,e,n){"use strict";var i=n(54209),r=n(95702),s=n(45090),o=n(18381);class a extends i.A{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const n=this.listeners_||(this.listeners_={}),i=n[t]||(n[t]=[]);i.includes(e)||i.push(e)}dispatchEvent(t){const e="string"==typeof t,n=e?t:t.type,i=this.listeners_&&this.listeners_[n];if(!i)return;const s=e?new o.Ay(t):t;s.target||(s.target=this.eventTarget_||this);const a=this.dispatching_||(this.dispatching_={}),l=this.pendingRemovals_||(this.pendingRemovals_={});let h;n in a||(a[n]=0,l[n]=0),++a[n];for(let t=0,e=i.length;t<e;++t)if(h="handleEvent"in i[t]?i[t].handleEvent(s):i[t].call(this,s),!1===h||s.propagationStopped){h=!1;break}if(0==--a[n]){let t=l[n];for(delete l[n];t--;)this.removeEventListener(n,r.tV);delete a[n]}return h}disposeInternal(){this.listeners_&&(0,s.I)(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return!!this.listeners_&&(t?t in this.listeners_:Object.keys(this.listeners_).length>0)}removeEventListener(t,e){if(!this.listeners_)return;const n=this.listeners_[t];if(!n)return;const i=n.indexOf(e);-1!==i&&(this.pendingRemovals_&&t in this.pendingRemovals_?(n[i]=r.tV,++this.pendingRemovals_[t]):(n.splice(i,1),0===n.length&&delete this.listeners_[t]))}}e.A=a},37751:function(t,e,n){"use strict";var i=n(30942),r=n(426),s=n(22685),o=n(37372),a=n(37759);class l extends o.A{constructor(t,e,n){super(),n=n||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=void 0===n.transition?250:n.transition,this.transitionStarts_={},this.interpolate=!!n.interpolate}changed(){this.dispatchEvent(s.A.CHANGE)}release(){this.setState(i.A.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==i.A.EMPTY){if(this.state!==i.A.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){(0,a.b0)()}getAlpha(t,e){if(!this.transition_)return 1;let n=this.transitionStarts_[t];if(n){if(-1===n)return 1}else n=e,this.transitionStarts_[t]=n;const i=e-n+1e3/60;return i>=this.transition_?1:(0,r.a6)(i/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}e.A=l},37759:function(t,e,n){"use strict";function i(){throw new Error("Unimplemented abstract method.")}n.d(e,{b0:function(){return i},v6:function(){return s}});let r=0;function s(t){return t.ol_uid||(t.ol_uid=String(++r))}},38177:function(t,e,n){"use strict";n.d(e,{A:function(){return s},n:function(){return o}});var i=n(46928),r=n(48729);function s(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function o(t,e,n){return a((0,r.qg)(t,e,n),n)}function a(t,e){if(t instanceof r._D){if(t.type===r.mE&&"string"==typeof t.value){const e=(0,i.sH)(t.value);return function(){return e}}return function(){return t.value}}const n=t.operator;switch(n){case r.ZD.Number:case r.ZD.String:case r.ZD.Coalesce:return function(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let n=0;n<i;++n)s[n]=a(t.args[n],e);switch(n){case r.ZD.Coalesce:return t=>{for(let e=0;e<i;++e){const n=s[e](t);if(null!=n)return n}throw new Error("Expected one of the values to be non-null")};case r.ZD.Number:case r.ZD.String:return t=>{for(let e=0;e<i;++e){const i=s[e](t);if(typeof i===n)return i}throw new Error(`Expected one of the values to be a ${n}`)};default:throw new Error(`Unsupported assertion operator ${n}`)}}(t,e);case r.ZD.Get:case r.ZD.Var:case r.ZD.Has:return function(t){const e=t.args[0],n=e.value;switch(t.operator){case r.ZD.Get:return e=>{const i=t.args;let r=e.properties[n];for(let t=1,e=i.length;t<e;++t){r=r[i[t].value]}return r};case r.ZD.Var:return t=>t.variables[n];case r.ZD.Has:return e=>{const i=t.args;if(!(n in e.properties))return!1;let r=e.properties[n];for(let t=1,e=i.length;t<e;++t){const e=i[t].value;if(!r||!Object.hasOwn(r,e))return!1;r=r[e]}return!0};default:throw new Error(`Unsupported accessor operator ${t.operator}`)}}(t);case r.ZD.Id:return t=>t.featureId;case r.ZD.GeometryType:return t=>t.geometryType;case r.ZD.Concat:{const n=t.args.map((t=>a(t,e)));return t=>"".concat(...n.map((e=>e(t).toString())))}case r.ZD.Resolution:return t=>t.resolution;case r.ZD.Any:case r.ZD.All:case r.ZD.Between:case r.ZD.In:case r.ZD.Not:return function(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let n=0;n<i;++n)s[n]=a(t.args[n],e);switch(n){case r.ZD.Any:return t=>{for(let e=0;e<i;++e)if(s[e](t))return!0;return!1};case r.ZD.All:return t=>{for(let e=0;e<i;++e)if(!s[e](t))return!1;return!0};case r.ZD.Between:return t=>{const e=s[0](t),n=s[1](t),i=s[2](t);return e>=n&&e<=i};case r.ZD.In:return t=>{const e=s[0](t);for(let n=1;n<i;++n)if(e===s[n](t))return!0;return!1};case r.ZD.Not:return t=>!s[0](t);default:throw new Error(`Unsupported logical operator ${n}`)}}(t,e);case r.ZD.Equal:case r.ZD.NotEqual:case r.ZD.LessThan:case r.ZD.LessThanOrEqualTo:case r.ZD.GreaterThan:case r.ZD.GreaterThanOrEqualTo:return function(t,e){const n=t.operator,i=a(t.args[0],e),s=a(t.args[1],e);switch(n){case r.ZD.Equal:return t=>i(t)===s(t);case r.ZD.NotEqual:return t=>i(t)!==s(t);case r.ZD.LessThan:return t=>i(t)<s(t);case r.ZD.LessThanOrEqualTo:return t=>i(t)<=s(t);case r.ZD.GreaterThan:return t=>i(t)>s(t);case r.ZD.GreaterThanOrEqualTo:return t=>i(t)>=s(t);default:throw new Error(`Unsupported comparison operator ${n}`)}}(t,e);case r.ZD.Multiply:case r.ZD.Divide:case r.ZD.Add:case r.ZD.Subtract:case r.ZD.Clamp:case r.ZD.Mod:case r.ZD.Pow:case r.ZD.Abs:case r.ZD.Floor:case r.ZD.Ceil:case r.ZD.Round:case r.ZD.Sin:case r.ZD.Cos:case r.ZD.Atan:case r.ZD.Sqrt:return function(t,e){const n=t.operator,i=t.args.length,s=new Array(i);for(let n=0;n<i;++n)s[n]=a(t.args[n],e);switch(n){case r.ZD.Multiply:return t=>{let e=1;for(let n=0;n<i;++n)e*=s[n](t);return e};case r.ZD.Divide:return t=>s[0](t)/s[1](t);case r.ZD.Add:return t=>{let e=0;for(let n=0;n<i;++n)e+=s[n](t);return e};case r.ZD.Subtract:return t=>s[0](t)-s[1](t);case r.ZD.Clamp:return t=>{const e=s[0](t),n=s[1](t);if(e<n)return n;const i=s[2](t);return e>i?i:e};case r.ZD.Mod:return t=>s[0](t)%s[1](t);case r.ZD.Pow:return t=>Math.pow(s[0](t),s[1](t));case r.ZD.Abs:return t=>Math.abs(s[0](t));case r.ZD.Floor:return t=>Math.floor(s[0](t));case r.ZD.Ceil:return t=>Math.ceil(s[0](t));case r.ZD.Round:return t=>Math.round(s[0](t));case r.ZD.Sin:return t=>Math.sin(s[0](t));case r.ZD.Cos:return t=>Math.cos(s[0](t));case r.ZD.Atan:return 2===i?t=>Math.atan2(s[0](t),s[1](t)):t=>Math.atan(s[0](t));case r.ZD.Sqrt:return t=>Math.sqrt(s[0](t));default:throw new Error(`Unsupported numeric operator ${n}`)}}(t,e);case r.ZD.Case:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=a(t.args[r],e);return t=>{for(let e=0;e<n-1;e+=2){if(i[e](t))return i[e+1](t)}return i[n-1](t)}}(t,e);case r.ZD.Match:return function(t,e){const n=t.args.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=a(t.args[r],e);return t=>{const e=i[0](t);for(let r=1;r<n-1;r+=2)if(e===i[r](t))return i[r+1](t);return i[n-1](t)}}(t,e);case r.ZD.Interpolate:return function(t,e){const n=t.args.length,r=new Array(n);for(let i=0;i<n;++i)r[i]=a(t.args[i],e);return t=>{const e=r[0](t),s=r[1](t);let o,a;for(let u=2;u<n;u+=2){const n=r[u](t);let c=r[u+1](t);const d=Array.isArray(c);if(d&&(c=(0,i.fu)(c)),n>=s)return 2===u?c:d?h(e,s,o,a,n,c):l(e,s,o,a,n,c);o=n,a=c}return a}}(t,e);case r.ZD.ToString:return function(t,e){const n=t.operator,s=t.args.length,o=new Array(s);for(let n=0;n<s;++n)o[n]=a(t.args[n],e);if(n===r.ZD.ToString)return e=>{const n=o[0](e);return t.args[0].type===r.mE?(0,i.dI)(n):n.toString()};throw new Error(`Unsupported convert operator ${n}`)}(t,e);default:throw new Error(`Unsupported operator ${n}`)}}function l(t,e,n,i,r,s){const o=r-n;if(0===o)return i;const a=e-n;return i+(1===t?a/o:(Math.pow(t,a)-1)/(Math.pow(t,o)-1))*(s-i)}function h(t,e,n,r,s,o){if(0===s-n)return r;const a=(0,i.eE)(r),h=(0,i.eE)(o);let u=h[2]-a[2];u>180?u-=360:u<-180&&(u+=360);const c=[l(t,e,n,a[0],s,h[0]),l(t,e,n,a[1],s,h[1]),a[2]+l(t,e,n,0,s,u),l(t,e,n,r[3],s,o[3])];return(0,i.cD)(c)}},38276:function(t,e,n){"use strict";var i=n(61829),r=n(46928),s=n(37759),o=n(86603);class a{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,void 0!==t.color&&this.setColor(t.color)}clone(){const t=this.getColor();return new a({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(null!==t&&"object"==typeof t&&"src"in t){const e=(0,o.J)(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then((()=>{this.patternImage_=null})),e.getImageState()===i.A.IDLE&&e.load(),e.getImageState()===i.A.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?(0,s.v6)(t):"object"==typeof t&&"src"in t?t.src+":"+t.offset:(0,r._j)(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}e.A=a},38376:function(t,e,n){"use strict";var i=n(14390),r=n(30942),s=n(22685),o=n(25231),a=n(91460),l=n(10135),h=n(37759),u=n(33772);class c extends u.A{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:d,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:i.A,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!(0,o.tI)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,o.tI)(e,t)))return this.tileGrid;const n=(0,h.v6)(t);return n in this.tileGridForProjection||(this.tileGridForProjection[n]=(0,l.pr)(t)),this.tileGridForProjection[n]}createTile_(t,e,n,i,o,a){const l=[t,e,n],h=this.getTileCoordForTileUrlFunction(l,o),u=h?this.tileUrlFunction(h,i,o):void 0,c=new this.tileClass(l,void 0!==u?r.A.IDLE:r.A.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=a,c.addEventListener(s.A.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,n,i,r){const s=this.getProjection();if(!s||!r||(0,o.tI)(s,r))return this.getTileInternal(t,e,n,i,s||r);const l=[t,e,n],h=this.getKey(),u=this.getTileGridForProjection(s),c=this.getTileGridForProjection(r),d=this.getTileCoordForTileUrlFunction(l,r),f=new a.A(s,u,r,c,l,d,this.getTilePixelRatio(i),this.getGutter(),((t,e,n,i)=>this.getTileInternal(t,e,n,i,s)),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=h,f}getTileInternal(t,e,n,i,r){const s=this.getKey();return this.createTile_(t,e,n,i,r,s)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const n=(0,o.Jt)(t);if(n){const t=(0,h.v6)(n);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}}function d(t,e){t.getImage().src=e}e.A=c},38497:function(t,e,n){"use strict";function i(t){return Array.isArray(t)?Math.min(...t):t}n.d(e,{m:function(){return i}})},38808:function(t,e,n){"use strict";n.d(e,{A4:function(){return b},GB:function(){return _},Gk:function(){return u},IO:function(){return l},Js:function(){return a},Kg:function(){return v},N1:function(){return p},Q7:function(){return o},TS:function(){return m},Zm:function(){return f},at:function(){return d},eL:function(){return h},fs:function(){return w},jM:function(){return c},k5:function(){return y},t5:function(){return g},tE:function(){return x}});var i=n(25309),r=n(95702),s=n(95907);function o(t){const e=arguments;return function(t){let n=!0;for(let i=0,r=e.length;i<r&&(n=n&&e[i](t),n);++i);return n}}const a=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},l=function(t){const e=t.originalEvent;return e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},h=function(t){const e=t.map.getTargetElement(),n=e.getRootNode();return!(n instanceof ShadowRoot?n.host:e).hasAttribute("tabindex")||function(t){const e=t.map.getTargetElement(),n=e.getRootNode(),i=t.map.getOwnerDocument().activeElement;return n instanceof ShadowRoot?n.host.contains(i):e.contains(i)}(t)},u=r.rT,c=function(t){return t.type==i.A.CLICK},d=function(t){const e=t.originalEvent;return e instanceof PointerEvent&&0==e.button&&!(s.j&&s.ew&&e.ctrlKey)},f=r.W8,p=function(t){return"pointermove"==t.type},g=function(t){return t.type==i.A.SINGLECLICK},m=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&!e.shiftKey},y=function(t){const e=t.originalEvent;return!e.altKey&&(s.ew?e.metaKey:e.ctrlKey)&&!e.shiftKey},_=function(t){const e=t.originalEvent;return s.ew?e.metaKey:e.ctrlKey},v=function(t){const e=t.originalEvent;return!e.altKey&&!(e.metaKey||e.ctrlKey)&&e.shiftKey},x=function(t){const e=t.originalEvent,n=e.target.tagName;return"INPUT"!==n&&"SELECT"!==n&&"TEXTAREA"!==n&&!e.target.isContentEditable},b=function(t){const e=t.originalEvent;return e instanceof PointerEvent&&"mouse"==e.pointerType},w=function(t){const e=t.originalEvent;return e instanceof PointerEvent&&e.isPrimary&&0===e.button}},38941:function(t,e){"use strict";e.A={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"}},38993:function(t,e,n){"use strict";var i=n(54209),r=n(42484);e.A=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof i.A&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const n=this.entries_[t];return(0,r.v)(void 0!==n,"Tried to get a value for a key that does not exist in the cache"),n===this.newest_||(n===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(n.newer.older=n.older,n.older.newer=n.newer),n.newer=null,n.older=this.newest_,this.newest_.newer=n,this.newest_=n),n.value_}remove(t){const e=this.entries_[t];return(0,r.v)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.key_;return t}getValues(){const t=new Array(this.count_);let e,n=0;for(e=this.newest_;e;e=e.older)t[n++]=e.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,r.v)(!(t in this.entries_),"Tried to set a value for a key that is used already");const n={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=n:this.oldest_=n,this.newest_=n,this.entries_[t]=n,++this.count_}setSize(t){this.highWaterMark=t}}},39709:function(t,e,n){"use strict";var i=n(51541),r=n(29050),s=n(77833),o=n(59286),a=n(7535),l=n(69727),h=n(40878),u=n(30470),c=n(72961),d=n(92656);const f={POINT:h.A,LINESTRING:s.A,POLYGON:u.Ay,MULTIPOINT:a.A,MULTILINESTRING:o.A,MULTIPOLYGON:l.A},p="EMPTY",g=0,m=1,y=2,_=3,v=4,x=5,b=6,w={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class A{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return e=void 0!==e&&e,t>="0"&&t<="9"||"."==t&&!e}isWhiteSpace_(t){return" "==t||"\t"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){const t=this.nextChar_(),e=this.index_;let n,i=t;if("("==t)n=y;else if(","==t)n=x;else if(")"==t)n=_;else if(this.isNumeric_(t)||"-"==t)n=v,i=this.readNumber_();else if(this.isAlpha_(t))n=m,i=this.readText_();else{if(this.isWhiteSpace_(t))return this.nextToken();if(""!==t)throw new Error("Unexpected character: "+t);n=b}return{position:e,value:i,type:n}}readNumber_(){let t;const e=this.index_;let n=!1,i=!1;do{"."==t?n=!0:"e"!=t&&"E"!=t||(i=!0),t=this.nextChar_()}while(this.isNumeric_(t,n)||!i&&("e"==t||"E"==t)||i&&("-"==t||"+"==t));return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;const e=this.index_;do{t=this.nextChar_()}while(this.isAlpha_(t));return this.wkt.substring(e,this.index_--).toUpperCase()}}class S{constructor(t){this.lexer_=t,this.token_={position:0,type:g},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){const e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY";const e=this.token_;if(this.isTokenType(m)){const n=e.value;"Z"===n?t="XYZ":"M"===n?t="XYM":"ZM"===n&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(y)){const t=[];do{t.push(this.parseGeometry_())}while(this.match(x));if(this.match(_))return t}throw new Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(y)){const t=this.parsePoint_();if(this.match(_))return t}throw new Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(y)){const t=this.parsePointList_();if(this.match(_))return t}throw new Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(y)){const t=this.parseLineStringTextList_();if(this.match(_))return t}throw new Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(y)){let t;if(t=this.token_.type==y?this.parsePointTextList_():this.parsePointList_(),this.match(_))return t}throw new Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(y)){const t=this.parseLineStringTextList_();if(this.match(_))return t}throw new Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(y)){const t=this.parsePolygonTextList_();if(this.match(_))return t}throw new Error(this.formatErrorMessage_())}parsePoint_(){const t=[],e=this.layout_.length;for(let n=0;n<e;++n){const e=this.token_;if(!this.match(v))break;t.push(e.value)}if(t.length==e)return t;throw new Error(this.formatErrorMessage_())}parsePointList_(){const t=[this.parsePoint_()];for(;this.match(x);)t.push(this.parsePoint_());return t}parsePointTextList_(){const t=[this.parsePointText_()];for(;this.match(x);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){const t=[this.parseLineStringText_()];for(;this.match(x);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){const t=[this.parsePolygonText_()];for(;this.match(x);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){const t=this.isTokenType(m)&&this.token_.value==p;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){const t=this.token_;if(this.match(m)){const e=t.value;this.layout_=this.parseGeometryLayout_();const n=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==e){if(n)return new r.A([]);const t=this.parseGeometryCollectionText_();return new r.A(t)}const i=f[e];if(!i)throw new Error("Invalid geometry type: "+e);let s;if(n)s="POINT"==e?[NaN,NaN]:[];else switch(e){case"POINT":s=this.parsePointText_();break;case"LINESTRING":s=this.parseLineStringText_();break;case"POLYGON":s=this.parsePolygonText_();break;case"MULTIPOINT":s=this.parseMultiPointText_();break;case"MULTILINESTRING":s=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":s=this.parseMultiPolygonText_()}return new i(s,this.layout_)}throw new Error(this.formatErrorMessage_())}}class E extends d.A{constructor(t){super(),t=t||{},this.splitCollection_=void 0!==t.splitCollection&&t.splitCollection}parse_(t){const e=new A(t);return new S(e).parse()}readFeatureFromText(t,e){const n=this.readGeometryFromText(t,e),r=new i.A;return r.setGeometry(n),r}readFeaturesFromText(t,e){let n=[];const r=this.readGeometryFromText(t,e);n=this.splitCollection_&&"GeometryCollection"==r.getType()?r.getGeometriesArray():[r];const s=[];for(let t=0,e=n.length;t<e;++t){const e=new i.A;e.setGeometry(n[t]),s.push(e)}return s}readGeometryFromText(t,e){const n=this.parse_(t);return(0,c.hX)(n,!1,e)}writeFeatureText(t,e){const n=t.getGeometry();return n?this.writeGeometryText(n,e):""}writeFeaturesText(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);const n=[];for(let e=0,i=t.length;e<i;++e)n.push(t[e].getGeometry());const i=new r.A(n);return this.writeGeometryText(i,e)}writeGeometryText(t,e){return P((0,c.hX)(t,!0,e))}}function T(t){const e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function C(t){const e=t.getCoordinates(),n=[];for(let t=0,i=e.length;t<i;++t)n.push(e[t].join(" "));return n.join(",")}function M(t){const e=[],n=t.getLinearRings();for(let t=0,i=n.length;t<i;++t)e.push("("+C(n[t])+")");return e.join(",")}const L={Point:T,LineString:C,Polygon:M,MultiPoint:function(t){const e=[],n=t.getPoints();for(let t=0,i=n.length;t<i;++t)e.push("("+T(n[t])+")");return e.join(",")},MultiLineString:function(t){const e=[],n=t.getLineStrings();for(let t=0,i=n.length;t<i;++t)e.push("("+C(n[t])+")");return e.join(",")},MultiPolygon:function(t){const e=[],n=t.getPolygons();for(let t=0,i=n.length;t<i;++t)e.push("("+M(n[t])+")");return e.join(",")},GeometryCollection:function(t){const e=[],n=t.getGeometries();for(let t=0,i=n.length;t<i;++t)e.push(P(n[t]));return e.join(",")}};function P(t){const e=t.getType(),n=(0,L[e])(t);let i=w[e];if("function"==typeof t.getFlatCoordinates){const e=function(t){const e=t.getLayout();let n="";return"XYZ"!==e&&"XYZM"!==e||(n+="Z"),"XYM"!==e&&"XYZM"!==e||(n+="M"),n}(t);e.length>0&&(i+=" "+e)}return 0===n.length?i+" "+p:i+"("+n+")"}e.A=E},40132:function(t,e,n){"use strict";n.d(e,{E3:function(){return d},Ko:function(){return g},P9:function(){return h},Vf:function(){return s},Z3:function(){return f},_I:function(){return a},_X:function(){return c},cS:function(){return p},e4:function(){return l},gC:function(){return o},pE:function(){return m},uB:function(){return x},yg:function(){return u}});var i=n(28606),r=n(37246);function s(t){return o((0,r.mT)(t,!1))}function o(t){const e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return void 0!==e[1]||!1}function a(t){const e=(0,r.mT)(t,!1),n=Date.parse(e);return isNaN(n)?void 0:n/1e3}function l(t){return h((0,r.mT)(t,!1))}function h(t){const e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function u(t){return c((0,r.mT)(t,!1))}function c(t){const e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function d(t){return(0,r.mT)(t,!1).trim()}function f(t,e){x(t,e?"1":"0")}function p(t,e){const n=new Date(1e3*e),s=n.getUTCFullYear()+"-"+(0,i.H)(n.getUTCMonth()+1,2)+"-"+(0,i.H)(n.getUTCDate(),2)+"T"+(0,i.H)(n.getUTCHours(),2)+":"+(0,i.H)(n.getUTCMinutes(),2)+":"+(0,i.H)(n.getUTCSeconds(),2)+"Z";t.appendChild((0,r.YE)().createTextNode(s))}function g(t,e){const n=e.toPrecision();t.appendChild((0,r.YE)().createTextNode(n))}function m(t,e){const n=e.toString();t.appendChild((0,r.YE)().createTextNode(n))}const y=/^\s/,_=/\s$/,v=/(\n|\t|\r|<|&| {2})/;function x(t,e){"string"==typeof e&&(y.test(e)||_.test(e)||v.test(e))?e.split("]]>").forEach(((e,n,i)=>{n<i.length-1&&(e+="]]"),n>0&&(e=">"+e),function(t,e){t.appendChild((0,r.YE)().createCDATASection(e))}(t,e)})):t.appendChild((0,r.YE)().createTextNode(e))}},40237:function(t,e,n){"use strict";var i=n(51937);class r extends i.A{constructor(t,e,n,i,r,s){super(t,e,r),this.originalEvent=n,this.pixel_=null,this.coordinate_=null,this.dragging=void 0!==i&&i,this.activePointers=s}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}e.A=r},40694:function(t,e,n){"use strict";function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}n.d(e,{A:function(){return i}})},40878:function(t,e,n){"use strict";var i=n(16235),r=n(31141),s=n(96728),o=n(93001);class a extends s.Ay{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new a(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const s=this.flatCoordinates,o=(0,r.hG)(t,e,s[0],s[1]);if(o<i){const t=this.stride;for(let e=0;e<t;++e)n[e]=s[e];return n.length=t,o}return i}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return(0,i.dP)(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return(0,i.Rj)(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,o._n)(this.flatCoordinates,0,t,this.stride),this.changed()}}e.A=a},41146:function(t,e,n){"use strict";n.d(e,{a$:function(){return o},b8:function(){return r},cq:function(){return a},dv:function(){return s}});var i=n(31141);function r(t){if(void 0!==t)return 0}function s(t){if(void 0!==t)return t}function o(t){const e=2*Math.PI/t;return function(t,n){return n?t:void 0!==t?t=Math.floor(t/e+.5)*e:void 0}}function a(t){const e=void 0===t?(0,i.eh)(5):t;return function(t,n){return n||void 0===t?t:Math.abs(t)<=e?0:t}}},41564:function(t,e,n){"use strict";n.d(e,{A:function(){return K}});var i=n(73887),r=n(96479),s=n(40237),o=n(25309),a=n(22685),l=n(37372),h=n(92662),u=n(95907),c=n(38941);class d extends l.A{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=void 0===e?1:e,this.down_=null;const n=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=n,this.pointerdownListenerKey_=(0,h.KT)(n,c.A.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=(0,h.KT)(n,c.A.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(a.A.TOUCHMOVE,this.boundHandleTouchMove_,!!u.FT&&{passive:!1})}emulateClick_(t){let e=new s.A(o.A.CLICK,this.map_,t);this.dispatchEvent(e),void 0!==this.clickTimeoutId_?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new s.A(o.A.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout((()=>{this.clickTimeoutId_=void 0;const e=new s.A(o.A.SINGLECLICK,this.map_,t);this.dispatchEvent(e)}),250)}updateActivePointers_(t){const e=t,n=e.pointerId;if(e.type==o.A.POINTERUP||e.type==o.A.POINTERCANCEL){delete this.trackedTouches_[n];for(const t in this.trackedTouches_)if(this.trackedTouches_[t].target!==e.target){delete this.trackedTouches_[t];break}}else e.type!=o.A.POINTERDOWN&&e.type!=o.A.POINTERMOVE||(this.trackedTouches_[n]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new s.A(o.A.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),0===this.activePointers_.length&&(this.dragListenerKeys_.forEach(h.JH),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return 0===t.button}handlePointerDown_(t){this.emulateClicks_=0===this.activePointers_.length,this.updateActivePointers_(t);const e=new s.A(o.A.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),0===this.dragListenerKeys_.length){const t=this.map_.getOwnerDocument();this.dragListenerKeys_.push((0,h.KT)(t,o.A.POINTERMOVE,this.handlePointerMove_,this),(0,h.KT)(t,o.A.POINTERUP,this.handlePointerUp_,this),(0,h.KT)(this.element_,o.A.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==t&&this.dragListenerKeys_.push((0,h.KT)(this.element_.getRootNode(),o.A.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new s.A(o.A.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!(!this.down_||!this.isMoving_(t));this.dispatchEvent(new s.A(o.A.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;e&&!e.defaultPrevented||"boolean"==typeof t.cancelable&&!0!==t.cancelable||t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&((0,h.JH)(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(a.A.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&((0,h.JH)(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(h.JH),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}var f=d,p=n(51937),g=n(81297),m=n(63188),y=n(70192),_=n(75738),v=n(99157),x=n(87240),b=n(94679),w=n(44090),A=n(42484),S=n(92814),E=n(76825),T=n(16235),C=n(95702),M=n(35947),L=n(99110),P=n(36804),R=n(25231),I=n(280),N=n(67024),F=n(69791),k=n(7992),D=n(71552),O=n(27678),j=n(54209),G=n(61341),B=n(15353),z=n(12911),q=n(37759);class U extends j.A{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){(0,q.b0)()}calculateMatrices2D(t){const e=t.viewState,n=t.coordinateToPixelTransform,i=t.pixelToCoordinateTransform;(0,z.Zz)(n,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),(0,z.T9)(i,n)}forEachFeatureAtCoordinate(t,e,n,i,r,s,o,a){let l;const h=e.viewState;function u(t,e,n,i){return r.call(s,e,t?n:null,i)}const c=h.projection,d=(0,G.Li)(t.slice(),c),f=[[0,0]];if(c.canWrapX()&&i){const t=c.getExtent(),e=(0,T.RG)(t);f.push([-e,0],[e,0])}const p=e.layerStatesArray,g=p.length,m=[],y=[];for(let i=0;i<f.length;i++)for(let r=g-1;r>=0;--r){const s=p[r],c=s.layer;if(c.hasRenderer()&&(0,P.l)(s,h)&&o.call(a,c)){const r=c.getRenderer(),o=c.getSource();if(r&&o){const a=o.getWrapX()?d:t,h=u.bind(null,s.managed);y[0]=a[0]+f[i][0],y[1]=a[1]+f[i][1],l=r.forEachFeatureAtCoordinate(y,e,n,h,m)}if(l)return l}}if(0===m.length)return;const _=1/m.length;return m.forEach(((t,e)=>t.distanceSq+=e*_)),m.sort(((t,e)=>t.distanceSq-e.distanceSq)),m.some((t=>l=t.callback(t.feature,t.layer,t.geometry))),l}hasFeatureAtCoordinate(t,e,n,i,r,s){return void 0!==this.forEachFeatureAtCoordinate(t,e,n,i,C.rT,this,r,s)}getMap(){return this.map_}renderFrame(t){(0,q.b0)()}scheduleExpireIconCache(t){B.ue.canExpireCache()&&t.postRenderFunctions.push(W)}}function W(t,e){B.ue.expire()}var $=U;var V=class extends ${constructor(t){super(t),this.fontChangeListenerKey_=(0,h.KT)(O.yY,_.A.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=N.XI+" ol-layers";const n=t.getViewport();n.insertBefore(this.element_,n.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const n=this.getMap();if(n.hasListener(t)){const i=new D.A(t,void 0,e);n.dispatchEvent(i)}}disposeInternal(){(0,h.JH)(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t)return void(this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1));this.calculateMatrices2D(t),this.dispatchRenderEvent(I.A.PRECOMPOSE,t);const e=t.layerStatesArray.sort(((t,e)=>t.zIndex-e.zIndex));e.some((t=>t.layer instanceof k.A&&t.layer.getDeclutter()))&&(t.declutter={});const n=t.viewState;this.children_.length=0;const i=[];let r=null;for(let s=0,o=e.length;s<o;++s){const o=e[s];t.layerIndex=s;const a=o.layer,l=a.getSourceState();if(!(0,P.l)(o,n)||"ready"!=l&&"undefined"!=l){a.unrender();continue}const h=a.render(t,r);h&&(h!==r&&(this.children_.push(h),r=h),i.push(o))}this.declutter(t,i),(0,F.WM)(this.element_,this.children_),this.dispatchRenderEvent(I.A.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let n=e.length-1;n>=0;--n){const i=e[n],r=i.layer;r.getDeclutter()&&r.renderDeclutter(t,i)}e.forEach((e=>e.layer.renderDeferred(t)))}}},X=n(3974);function H(t){t instanceof P.A?t.setMapInternal(null):t instanceof L.A&&t.getLayers().forEach(H)}function Y(t,e){if(t instanceof P.A)t.setMapInternal(e);else if(t instanceof L.A){const n=t.getLayers().getArray();for(let t=0,i=n.length;t<i;++t)Y(n[t],e)}}class Z extends y.A{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=function(t){let e=null;void 0!==t.keyboardEventTarget&&(e="string"==typeof t.keyboardEventTarget?document.getElementById(t.keyboardEventTarget):t.keyboardEventTarget);const n={},r=t.layers&&"function"==typeof t.layers.getLayers?t.layers:new L.A({layers:t.layers});let s,o,a;n[m.A.LAYERGROUP]=r,n[m.A.TARGET]=t.target,n[m.A.VIEW]=t.view instanceof x.Ay?t.view:new x.Ay,void 0!==t.controls&&(Array.isArray(t.controls)?s=new i.A(t.controls.slice()):((0,A.v)("function"==typeof t.controls.getArray,"Expected `controls` to be an array or an `ol/Collection.js`"),s=t.controls));void 0!==t.interactions&&(Array.isArray(t.interactions)?o=new i.A(t.interactions.slice()):((0,A.v)("function"==typeof t.interactions.getArray,"Expected `interactions` to be an array or an `ol/Collection.js`"),o=t.interactions));void 0!==t.overlays?Array.isArray(t.overlays)?a=new i.A(t.overlays.slice()):((0,A.v)("function"==typeof t.overlays.getArray,"Expected `overlays` to be an array or an `ol/Collection.js`"),a=t.overlays):a=new i.A;return{controls:s,interactions:o,keyboardEventTarget:e,overlays:a,values:n}}(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=void 0!==t.maxTilesLoading?t.maxTilesLoading:16,this.pixelRatio_=void 0!==t.pixelRatio?t.pixelRatio:u.cr,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=(0,z.vt)(),this.pixelToCoordinateTransform_=(0,z.vt)(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver((()=>this.updateSize())),this.controls=e.controls||(0,E.N)(),this.interactions=e.interactions||(0,M.N)({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new v.A(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(m.A.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(m.A.VIEW,this.handleViewChanged_),this.addChangeListener(m.A.SIZE,this.handleSizeChanged_),this.addChangeListener(m.A.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const n=this;!t.view||t.view instanceof x.Ay||t.view.then((function(t){n.setView(new x.Ay(t))})),this.controls.addEventListener(r.A.ADD,(t=>{t.element.setMap(this)})),this.controls.addEventListener(r.A.REMOVE,(t=>{t.element.setMap(null)})),this.interactions.addEventListener(r.A.ADD,(t=>{t.element.setMap(this)})),this.interactions.addEventListener(r.A.REMOVE,(t=>{t.element.setMap(null)})),this.overlays_.addEventListener(r.A.ADD,(t=>{this.addOverlayInternal_(t.element)})),this.overlays_.addEventListener(r.A.REMOVE,(t=>{const e=t.element.getId();void 0!==e&&delete this.overlayIdIndex_[e.toString()],t.element.setMap(null)})),this.controls.forEach((t=>{t.setMap(this)})),this.interactions.forEach((t=>{t.setMap(this)})),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Y(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();void 0!==e&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,n){if(!this.frameState_||!this.renderer_)return;const i=this.getCoordinateFromPixelInternal(t),r=void 0!==(n=void 0!==n?n:{}).hitTolerance?n.hitTolerance:0,s=void 0!==n.layerFilter?n.layerFilter:C.rT,o=!1!==n.checkWrapped;return this.renderer_.forEachFeatureAtCoordinate(i,this.frameState_,r,o,e,null,s,null)}getFeaturesAtPixel(t,e){const n=[];return this.forEachFeatureAtPixel(t,(function(t){n.push(t)}),e),n}getAllLayers(){const t=[];return function e(n){n.forEach((function(n){n instanceof L.A?e(n.getLayers()):t.push(n)}))}(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const n=this.getCoordinateFromPixelInternal(t),i=void 0!==(e=void 0!==e?e:{}).layerFilter?e.layerFilter:C.rT,r=void 0!==e.hitTolerance?e.hitTolerance:0,s=!1!==e.checkWrapped;return this.renderer_.hasFeatureAtCoordinate(n,this.frameState_,r,s,i,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const e=this.viewport_.getBoundingClientRect(),n=this.getSize(),i=e.width/n[0],r=e.height/n[1],s="changedTouches"in t?t.changedTouches[0]:t;return[(s.clientX-e.left)/i,(s.clientY-e.top)/r]}getTarget(){return this.get(m.A.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return(0,R.te)(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?(0,z.Bb)(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return void 0!==e?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(m.A.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof i.A)return void e.setLayers(t);const n=e.getLayers();n.clear(),n.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e];if(!n.visible)continue;const i=n.layer.getRenderer();if(i&&!i.ready)return!0;const r=n.layer.getSource();if(r&&r.loading)return!0}return!1}getPixelFromCoordinate(t){const e=(0,R.Ad)(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?(0,z.Bb)(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(m.A.SIZE)}getView(){return this.get(m.A.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,n,i){return(0,v.z)(this.frameState_,t,e,n,i)}handleBrowserEvent(t,e){e=e||t.type;const n=new s.A(e,this,t);this.handleMapBrowserEvent(n)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,n=e.type;if(n===c.A.POINTERDOWN||n===a.A.WHEEL||n===a.A.KEYDOWN){const t=this.getOwnerDocument(),n=this.viewport_.getRootNode?this.viewport_.getRootNode():t,i=e.target,r=n instanceof ShadowRoot?n.host===i?n.host.ownerDocument:n:n===t?t.documentElement:n;if(this.overlayContainerStopEvent_.contains(i)||!r.contains(i))return}if(t.frameState=this.frameState_,!1!==this.dispatchEvent(t)){const e=this.getInteractions().getArray().slice();for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.getMap()!==this||!i.getActive()||!this.getTargetElement())continue;if(!i.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,i=n;if(t){const e=t.viewHints;if(e[b.A.ANIMATING]||e[b.A.INTERACTING]){const e=Date.now()-t.time>8;n=e?0:8,i=e?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,i))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(I.A.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(I.A.RENDERCOMPLETE,t),!1===this.loaded_&&(this.loaded_=!0,this.dispatchEvent(new p.A(g.A.LOADEND,this,t)))):!0===this.loaded_&&(this.loaded_=!1,this.dispatchEvent(new p.A(g.A.LOADSTART,this,t))));const n=this.postRenderFunctions_;if(t)for(let e=0,i=n.length;e<i;++e)n[e](this,t);n.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let t=0,e=this.targetChangeHandlerKeys_.length;t<e;++t)(0,h.JH)(this.targetChangeHandlerKeys_[t]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(a.A.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(a.A.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const t=this.targetElement_.getRootNode();t instanceof ShadowRoot&&this.resizeObserver_.unobserve(t.host),this.setSize(void 0)}const t=this.getTarget(),e="string"==typeof t?document.getElementById(t):t;if(this.targetElement_=e,e){e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new V(this)),this.mapBrowserEventHandler_=new f(this,this.moveTolerance_);for(const t in o.A)this.mapBrowserEventHandler_.addEventListener(o.A[t],this.handleMapBrowserEvent.bind(this));let t;if(this.viewport_.addEventListener(a.A.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(a.A.WHEEL,this.boundHandleBrowserEvent_,!!u.FT&&{passive:!1}),this.keyboardEventTarget_)t=this.keyboardEventTarget_;else{const n=e.getRootNode();t=n instanceof ShadowRoot?n.host:e}this.targetChangeHandlerKeys_=[(0,h.KT)(t,a.A.KEYDOWN,this.handleBrowserEvent,this),(0,h.KT)(t,a.A.KEYPRESS,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}else this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&((0,h.JH)(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&((0,h.JH)(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=(0,h.KT)(t,_.A.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=(0,h.KT)(t,a.A.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(h.JH),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new L.i("addlayer",t)),this.layerGroupPropertyListenerKeys_=[(0,h.KT)(t,_.A.PROPERTYCHANGE,this.render,this),(0,h.KT)(t,a.A.CHANGE,this.render,this),(0,h.KT)(t,"addlayer",this.handleLayerAdd_,this),(0,h.KT)(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,n=t.length;e<n;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&void 0===this.animationDelayKey_&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){H(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),n=this.getView(),i=this.frameState_;let r=null;if(void 0!==e&&(0,X.Ie)(e)&&n&&n.isDef()){const i=n.getHints(this.frameState_?this.frameState_.viewHints:void 0),s=n.getState();if(r={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:(0,T.Bg)(s.center,s.resolution,s.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:s,viewHints:i,wantedTiles:{},mapId:(0,q.v6)(this),renderTargets:{}},s.nextCenter&&s.nextResolution){const t=isNaN(s.nextRotation)?s.rotation:s.nextRotation;r.nextExtent=(0,T.Bg)(s.nextCenter,s.nextResolution,t,e)}}if(this.frameState_=r,this.renderer_.renderFrame(r),r){if(r.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,r.postRenderFunctions),i){(!this.previousExtent_||!(0,T.Im)(this.previousExtent_)&&!(0,T.aI)(r.extent,this.previousExtent_))&&(this.dispatchEvent(new p.A(g.A.MOVESTART,this,i)),this.previousExtent_=(0,T.aZ)(this.previousExtent_))}this.previousExtent_&&!r.viewHints[b.A.ANIMATING]&&!r.viewHints[b.A.INTERACTING]&&!(0,T.aI)(r.extent,this.previousExtent_)&&(this.dispatchEvent(new p.A(g.A.MOVEEND,this,r)),(0,T.o8)(r.extent,this.previousExtent_))}this.dispatchEvent(new p.A(g.A.POSTRENDER,this,r)),this.renderComplete_=(this.hasListener(g.A.LOADSTART)||this.hasListener(g.A.LOADEND)||this.hasListener(I.A.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout((()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()}),0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new L.i("removelayer",e)),this.set(m.A.LAYERGROUP,t)}setSize(t){this.set(m.A.SIZE,t)}setTarget(t){this.set(m.A.TARGET,t)}setView(t){if(!t||t instanceof x.Ay)return void this.set(m.A.VIEW,t);this.set(m.A.VIEW,new x.Ay);const e=this;t.then((function(t){e.setView(new x.Ay(t))}))}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),i=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),r=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);isNaN(i)||isNaN(r)||(e=[Math.max(0,i),Math.max(0,r)],!(0,X.Ie)(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&(0,S.R8)("No map visible because the map container's width or height are 0."))}const n=this.getSize();!e||n&&(0,w.aI)(e,n)||(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}}var K=Z},42484:function(t,e,n){"use strict";function i(t,e){if(!t)throw new Error(e)}n.d(e,{v:function(){return i}})},43003:function(t,e,n){"use strict";var i=n(19136),r=n(36804);class s extends r.A{constructor(t){super(Object.assign({},t)),this.styleVariables_=t.variables||{},this.style_=t.style,this.hitDetectionDisabled_=!!t.disableHitDetection}createRenderer(){return new i.A(this,{style:this.style_,variables:this.styleVariables_,disableHitDetection:this.hitDetectionDisabled_})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}setStyle(t){this.style_=t,this.clearRenderer(),this.changed()}}e.A=s},43357:function(t,e,n){"use strict";n.d(e,{A:function(){return A}});var i=n(73887),r=n(51541),s=n(61341),o=n(16235),a=n(77833),l=n(40878),h=n(31141),u=n(25231);function c(t,e,n){const i=[];let r=t(0),s=t(1),o=e(r),a=e(s);const l=[s,r],u=[a,o],c=[1,0],d={};let f,p,g,m,y,_,v=1e5;for(;--v>0&&c.length>0;)g=c.pop(),r=l.pop(),o=u.pop(),_=g.toString(),_ in d||(i.push(o[0],o[1]),d[_]=!0),m=c.pop(),s=l.pop(),a=u.pop(),y=(g+m)/2,f=t(y),p=e(f),(0,h.Q1)(p[0],p[1],o[0],o[1],a[0],a[1])<n?(i.push(a[0],a[1]),_=m.toString(),d[_]=!0):(c.push(m,y,y,g),u.push(a,p,p,o),l.push(s,f,f,r));return i}var d=n(280),f=n(66267),p=n(29810),g=n(38276),m=n(44689),y=n(88292),_=n(59194),v=n(23986);const x=new m.A({color:"rgba(0,0,0,0.2)"}),b=[90,45,30,20,10,5,2,1,.5,20/60,10/60,5/60,2/60,1/60,30/3600,20/3600,10/3600,5/3600,2/3600,1/3600];class w extends v.A{constructor(t){t=t||{};const e=Object.assign({updateWhileAnimating:!0,updateWhileInteracting:!0,renderBuffer:0},t);delete e.maxLines,delete e.strokeStyle,delete e.targetSize,delete e.showLabels,delete e.lonLabelFormatter,delete e.latLabelFormatter,delete e.lonLabelPosition,delete e.latLabelPosition,delete e.lonLabelStyle,delete e.latLabelStyle,delete e.intervals,super(e),this.projection_=null,this.maxLat_=1/0,this.maxLon_=1/0,this.minLat_=-1/0,this.minLon_=-1/0,this.maxX_=1/0,this.maxY_=1/0,this.minX_=-1/0,this.minY_=-1/0,this.targetSize_=void 0!==t.targetSize?t.targetSize:100,this.maxLines_=void 0!==t.maxLines?t.maxLines:100,this.meridians_=[],this.parallels_=[],this.strokeStyle_=void 0!==t.strokeStyle?t.strokeStyle:x,this.fromLonLatTransform_=void 0,this.toLonLatTransform_=void 0,this.projectionCenterLonLat_=null,this.bottomLeft_=null,this.bottomRight_=null,this.topLeft_=null,this.topRight_=null,this.meridiansLabels_=null,this.parallelsLabels_=null,t.showLabels&&(this.lonLabelFormatter_=null==t.lonLabelFormatter?s.aP.bind(this,"EW"):t.lonLabelFormatter,this.latLabelFormatter_=null==t.latLabelFormatter?s.aP.bind(this,"NS"):t.latLabelFormatter,this.lonLabelPosition_=null==t.lonLabelPosition?0:t.lonLabelPosition,this.latLabelPosition_=null==t.latLabelPosition?1:t.latLabelPosition,this.lonLabelStyleBase_=new y.Ay({text:void 0!==t.lonLabelStyle?t.lonLabelStyle.clone():new _.A({font:"12px Calibri,sans-serif",textBaseline:"bottom",fill:new g.A({color:"rgba(0,0,0,1)"}),stroke:new m.A({color:"rgba(255,255,255,1)",width:3})})}),this.lonLabelStyle_=t=>{const e=t.get("graticule_label");return this.lonLabelStyleBase_.getText().setText(e),this.lonLabelStyleBase_},this.latLabelStyleBase_=new y.Ay({text:void 0!==t.latLabelStyle?t.latLabelStyle.clone():new _.A({font:"12px Calibri,sans-serif",textAlign:"right",fill:new g.A({color:"rgba(0,0,0,1)"}),stroke:new m.A({color:"rgba(255,255,255,1)",width:3})})}),this.latLabelStyle_=t=>{const e=t.get("graticule_label");return this.latLabelStyleBase_.getText().setText(e),this.latLabelStyleBase_},this.meridiansLabels_=[],this.parallelsLabels_=[],this.addEventListener(d.A.POSTRENDER,this.drawLabels_.bind(this))),this.intervals_=void 0!==t.intervals?t.intervals:b,this.setSource(new p.A({loader:this.loaderFunction.bind(this),strategy:this.strategyFunction.bind(this),features:new i.A,overlaps:!1,useSpatialIndex:!1,wrapX:t.wrapX})),this.featurePool_=[],this.lineStyle_=new y.Ay({stroke:this.strokeStyle_}),this.loadedExtent_=null,this.renderedExtent_=null,this.renderedResolution_=null,this.setRenderOrder(null)}strategyFunction(t,e){let n=t.slice();return this.projection_&&this.getSource().getWrapX()&&(0,o.Li)(n,this.projection_),this.loadedExtent_&&((0,o.bE)(this.loadedExtent_,n,e)?n=this.loadedExtent_.slice():this.getSource().removeLoadedExtent(this.loadedExtent_)),[n]}loaderFunction(t,e,n){this.loadedExtent_=t;const i=this.getSource(),s=this.getExtent()||[-1/0,-1/0,1/0,1/0],a=(0,o._N)(s,t);if(this.renderedExtent_&&(0,o.aI)(this.renderedExtent_,a)&&this.renderedResolution_===e)return;if(this.renderedExtent_=a,this.renderedResolution_=e,(0,o.Im)(a))return;const l=(0,o.q1)(a),h=e*e/4;(!this.projection_||!(0,u.tI)(this.projection_,n))&&this.updateProjectionInfo_(n),this.createGraticule_(a,l,e,h);let c,d=this.meridians_.length+this.parallels_.length;for(this.meridiansLabels_&&(d+=this.meridians_.length),this.parallelsLabels_&&(d+=this.parallels_.length);d>this.featurePool_.length;)c=new r.A,this.featurePool_.push(c);const f=i.getFeaturesCollection();f.clear();let p,g,m=0;for(p=0,g=this.meridians_.length;p<g;++p)c=this.featurePool_[m++],c.setGeometry(this.meridians_[p]),c.setStyle(this.lineStyle_),f.push(c);for(p=0,g=this.parallels_.length;p<g;++p)c=this.featurePool_[m++],c.setGeometry(this.parallels_[p]),c.setStyle(this.lineStyle_),f.push(c)}addMeridian_(t,e,n,i,r,s){const a=this.getMeridian_(t,e,n,i,s);if((0,o.HY)(a.getExtent(),r)){if(this.meridiansLabels_){const e=this.lonLabelFormatter_(t);s in this.meridiansLabels_?this.meridiansLabels_[s].text=e:this.meridiansLabels_[s]={geom:new l.A([]),text:e}}this.meridians_[s++]=a}return s}addParallel_(t,e,n,i,r,s){const a=this.getParallel_(t,e,n,i,s);if((0,o.HY)(a.getExtent(),r)){if(this.parallelsLabels_){const e=this.latLabelFormatter_(t);s in this.parallelsLabels_?this.parallelsLabels_[s].text=e:this.parallelsLabels_[s]={geom:new l.A([]),text:e}}this.parallels_[s++]=a}return s}drawLabels_(t){const e=t.frameState.viewState.rotation,n=t.frameState.viewState.resolution,i=t.frameState.size,r=t.frameState.extent,s=(0,o.q1)(r);let a=r;if(e){const t=i[0]*n,e=i[1]*n;a=[s[0]-t/2,s[1]-e/2,s[0]+t/2,s[1]+e/2]}let l=0,h=0,u=this.latLabelPosition_<.5;const c=this.projection_.getExtent(),d=(0,o.RG)(c);if(this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,o.ms)(c,r)){l=Math.floor((r[0]-c[0])/d),h=Math.ceil((r[2]-c[2])/d);u=u!==Math.abs(e)>Math.PI/2}const p=(0,f.r2)(t);for(let t=l;t<=h;++t){let n,i,o,c,f=this.meridians_.length+this.parallels_.length;if(this.meridiansLabels_)for(i=0,o=this.meridiansLabels_.length;i<o;++i){const o=this.meridians_[i];if(e||0!==t){const n=o.clone();n.translate(t*d,0),n.rotate(-e,s),c=this.getMeridianPoint_(n,a,i),c.rotate(e,s)}else c=this.getMeridianPoint_(o,r,i);n=this.featurePool_[f++],n.setGeometry(c),n.set("graticule_label",this.meridiansLabels_[i].text),p.drawFeature(n,this.lonLabelStyle_(n))}if(this.parallelsLabels_&&(t===l&&u||t===h&&!u))for(i=0,o=this.parallels_.length;i<o;++i){const o=this.parallels_[i];if(e||0!==t){const n=o.clone();n.translate(t*d,0),n.rotate(-e,s),c=this.getParallelPoint_(n,a,i),c.rotate(e,s)}else c=this.getParallelPoint_(o,r,i);n=this.featurePool_[f++],n.setGeometry(c),n.set("graticule_label",this.parallelsLabels_[i].text),p.drawFeature(n,this.latLabelStyle_(n))}}}createGraticule_(t,e,n,i){const r=this.getInterval_(n);if(-1==r)return this.meridians_.length=0,this.parallels_.length=0,this.meridiansLabels_&&(this.meridiansLabels_.length=0),void(this.parallelsLabels_&&(this.parallelsLabels_.length=0));let s=!1;const a=this.projection_.getExtent(),l=(0,o.RG)(a);this.getSource().getWrapX()&&this.projection_.canWrapX()&&!(0,o.ms)(a,t)&&((0,o.RG)(t)>=l?(t[0]=a[0],t[2]=a[2]):s=!0);const u=[(0,h.qE)(e[0],this.minX_,this.maxX_),(0,h.qE)(e[1],this.minY_,this.maxY_)],c=this.toLonLatTransform_(u);isNaN(c[1])&&(c[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_);let d=(0,h.qE)(c[0],this.minLon_,this.maxLon_),f=(0,h.qE)(c[1],this.minLat_,this.maxLat_);const p=this.maxLines_;let g,m,y,_,v=t;s||(v=[(0,h.qE)(t[0],this.minX_,this.maxX_),(0,h.qE)(t[1],this.minY_,this.maxY_),(0,h.qE)(t[2],this.minX_,this.maxX_),(0,h.qE)(t[3],this.minY_,this.maxY_)]);const x=(0,o.NW)(v,this.toLonLatTransform_,void 0,8);let b=x[3],w=x[2],A=x[1],S=x[0];if(s||((0,o.Ym)(v,this.bottomLeft_)&&(S=this.minLon_,A=this.minLat_),(0,o.Ym)(v,this.bottomRight_)&&(w=this.maxLon_,A=this.minLat_),(0,o.Ym)(v,this.topLeft_)&&(S=this.minLon_,b=this.maxLat_),(0,o.Ym)(v,this.topRight_)&&(w=this.maxLon_,b=this.maxLat_),b=(0,h.qE)(b,f,this.maxLat_),w=(0,h.qE)(w,d,this.maxLon_),A=(0,h.qE)(A,this.minLat_,f),S=(0,h.qE)(S,this.minLon_,d)),d=Math.floor(d/r)*r,_=(0,h.qE)(d,this.minLon_,this.maxLon_),m=this.addMeridian_(_,A,b,i,t,0),g=0,s)for(;(_-=r)>=S&&g++<p;)m=this.addMeridian_(_,A,b,i,t,m);else for(;_!=this.minLon_&&g++<p;)_=Math.max(_-r,this.minLon_),m=this.addMeridian_(_,A,b,i,t,m);if(_=(0,h.qE)(d,this.minLon_,this.maxLon_),g=0,s)for(;(_+=r)<=w&&g++<p;)m=this.addMeridian_(_,A,b,i,t,m);else for(;_!=this.maxLon_&&g++<p;)_=Math.min(_+r,this.maxLon_),m=this.addMeridian_(_,A,b,i,t,m);for(this.meridians_.length=m,this.meridiansLabels_&&(this.meridiansLabels_.length=m),f=Math.floor(f/r)*r,y=(0,h.qE)(f,this.minLat_,this.maxLat_),m=this.addParallel_(y,S,w,i,t,0),g=0;y!=this.minLat_&&g++<p;)y=Math.max(y-r,this.minLat_),m=this.addParallel_(y,S,w,i,t,m);for(y=(0,h.qE)(f,this.minLat_,this.maxLat_),g=0;y!=this.maxLat_&&g++<p;)y=Math.min(y+r,this.maxLat_),m=this.addParallel_(y,S,w,i,t,m);this.parallels_.length=m,this.parallelsLabels_&&(this.parallelsLabels_.length=m)}getInterval_(t){const e=this.projectionCenterLonLat_[0],n=this.projectionCenterLonLat_[1];let i=-1;const r=Math.pow(this.targetSize_*t,2),s=[],o=[];for(let t=0,a=this.intervals_.length;t<a;++t){const a=(0,h.qE)(this.intervals_[t]/2,0,90),l=(0,h.qE)(n,-90+a,90-a);s[0]=e-a,s[1]=l-a,o[0]=e+a,o[1]=l+a,this.fromLonLatTransform_(s,s),this.fromLonLatTransform_(o,o);if(Math.pow(o[0]-s[0],2)+Math.pow(o[1]-s[1],2)<=r)break;i=this.intervals_[t]}return i}getMeridian_(t,e,n,i,r){const s=function(t,e,n,i,r){const s=(0,u.Jt)("EPSG:4326");return c((function(i){return[t,e+(n-e)*i]}),(0,u.RG)(s,i),r)}(t,e,n,this.projection_,i);let o=this.meridians_[r];return o?(o.setFlatCoordinates("XY",s),o.changed()):(o=new a.A(s,"XY"),this.meridians_[r]=o),o}getMeridianPoint_(t,e,n){const i=t.getFlatCoordinates();let r=1,s=i.length-1;i[r]>i[s]&&(r=s,s=1);const o=Math.max(e[1],i[r]),a=Math.min(e[3],i[s]),l=(0,h.qE)(e[1]+Math.abs(e[1]-e[3])*this.lonLabelPosition_,o,a),u=[i[r-1]+(i[s-1]-i[r-1])*(l-i[r])/(i[s]-i[r]),l],c=this.meridiansLabels_[n].geom;return c.setCoordinates(u),c}getMeridians(){return this.meridians_}getParallel_(t,e,n,i,r){const s=function(t,e,n,i,r){const s=(0,u.Jt)("EPSG:4326");return c((function(i){return[e+(n-e)*i,t]}),(0,u.RG)(s,i),r)}(t,e,n,this.projection_,i);let o=this.parallels_[r];return o?(o.setFlatCoordinates("XY",s),o.changed()):o=new a.A(s,"XY"),o}getParallelPoint_(t,e,n){const i=t.getFlatCoordinates();let r=0,s=i.length-2;i[r]>i[s]&&(r=s,s=0);const o=Math.max(e[0],i[r]),a=Math.min(e[2],i[s]),l=(0,h.qE)(e[0]+Math.abs(e[0]-e[2])*this.latLabelPosition_,o,a),u=[l,i[r+1]+(i[s+1]-i[r+1])*(l-i[r])/(i[s]-i[r])],c=this.parallelsLabels_[n].geom;return c.setCoordinates(u),c}getParallels(){return this.parallels_}updateProjectionInfo_(t){const e=(0,u.Jt)("EPSG:4326"),n=t.getWorldExtent();this.maxLat_=n[3],this.maxLon_=n[2],this.minLat_=n[1],this.minLon_=n[0];const i=(0,u.RG)(t,e);if(this.minLon_<this.maxLon_)this.toLonLatTransform_=i;else{const t=this.minLon_+this.maxLon_/2;this.maxLon_+=360,this.toLonLatTransform_=function(e,n,r){const s=i(e,n,r=r||2);for(let e=0,n=s.length;e<n;e+=r)s[e]<t&&(s[e]+=360);return s}}this.fromLonLatTransform_=(0,u.RG)(e,t);const r=(0,o.NW)([this.minLon_,this.minLat_,this.maxLon_,this.maxLat_],this.fromLonLatTransform_,void 0,8);this.minX_=r[0],this.maxX_=r[2],this.minY_=r[1],this.maxY_=r[3],this.bottomLeft_=this.fromLonLatTransform_([this.minLon_,this.minLat_]),this.bottomRight_=this.fromLonLatTransform_([this.maxLon_,this.minLat_]),this.topLeft_=this.fromLonLatTransform_([this.minLon_,this.maxLat_]),this.topRight_=this.fromLonLatTransform_([this.maxLon_,this.maxLat_]),this.projectionCenterLonLat_=this.toLonLatTransform_((0,o.q1)(t.getExtent())),isNaN(this.projectionCenterLonLat_[1])&&(this.projectionCenterLonLat_[1]=Math.abs(this.maxLat_)>=Math.abs(this.minLat_)?this.maxLat_:this.minLat_),this.projection_=t}}var A=w},43438:function(t,e,n){"use strict";var i=n(55612);e.A=class{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=void 0!==t.extent?t.extent:null,this.worldExtent_=void 0!==t.worldExtent?t.worldExtent:null,this.axisOrientation_=void 0!==t.axisOrientation?t.axisOrientation:"enu",this.global_=void 0!==t.global&&t.global,this.canWrapX_=!(!this.global_||!this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||i.I[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!(!t||!this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!(!this.global_||!t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}},43987:function(t,e,n){"use strict";var i=n(37759),r=n(72961);class s extends r.Ay{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(o(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(o(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return(0,i.b0)()}readFeaturesFromObject(t,e){return(0,i.b0)()}readGeometry(t,e){return this.readGeometryFromObject(o(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return(0,i.b0)()}readProjection(t){return this.readProjectionFromObject(o(t))}readProjectionFromObject(t){return(0,i.b0)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return(0,i.b0)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return(0,i.b0)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return(0,i.b0)()}}function o(t){if("string"==typeof t){const e=JSON.parse(t);return e||null}return null!==t?t:null}e.A=s},44090:function(t,e,n){"use strict";function i(t,e,n){let i,s;n=n||r;let o=0,a=t.length,l=!1;for(;o<a;)i=o+(a-o>>1),s=+n(t[i],e),s<0?o=i+1:(a=i,l=!s);return l?o:~o}function r(t,e){return t>e?1:t<e?-1:0}function s(t,e){return t<e?1:t>e?-1:0}function o(t,e,n){if(t[0]<=e)return 0;const i=t.length;if(e<=t[i-1])return i-1;if("function"==typeof n){for(let r=1;r<i;++r){const i=t[r];if(i===e)return r;if(i<e)return n(e,t[r-1],i)>0?r-1:r}return i-1}if(n>0){for(let n=1;n<i;++n)if(t[n]<e)return n-1;return i-1}if(n<0){for(let n=1;n<i;++n)if(t[n]<=e)return n;return i-1}for(let n=1;n<i;++n){if(t[n]==e)return n;if(t[n]<e)return t[n-1]-e<e-t[n]?n-1:n}return i-1}function a(t,e,n){for(;e<n;){const i=t[e];t[e]=t[n],t[n]=i,++e,--n}}function l(t,e){const n=Array.isArray(e)?e:[e],i=n.length;for(let e=0;e<i;e++)t[t.length]=n[e]}function h(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}function u(t,e,n){const i=e||r;return t.every((function(e,r){if(0===r)return!0;const s=i(t[r-1],e);return!(s>0||n&&0===s)}))}n.d(e,{El:function(){return i},FT:function(){return o},V_:function(){return r},WC:function(){return u},X$:function(){return l},aI:function(){return h},gI:function(){return a},rG:function(){return s}})},44689:function(t,e){"use strict";class n{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new n({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}e.A=n},45090:function(t,e,n){"use strict";function i(t){for(const e in t)delete t[e]}function r(t){let e;for(e in t)return!1;return!e}n.d(e,{I:function(){return i},p:function(){return r}})},45342:function(t,e,n){"use strict";var i=n(24366),r=n(44090),s=n(42484),o=n(16235),a=n(85398),l=n(31141),h=n(3974),u=n(62994),c=n(80547);const d=[0,0,0];e.A=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,s.v)((0,r.WC)(this.resolutions_,((t,e)=>e-t),!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let t=0,n=this.resolutions_.length-1;t<n;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,s.v)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const n=t.extent;void 0===n||this.origin_||this.origins_||(this.origin_=(0,o.Py)(n)),(0,s.v)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,s.v)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:c.R,(0,s.v)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==n?n:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map(((t,e)=>{const r=new i.A(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(n){const t=this.getTileRangeForExtentAndZ(n,e);r.minX=Math.max(t.minX,r.minX),r.maxX=Math.min(t.maxX,r.maxX),r.minY=Math.max(t.minY,r.minY),r.maxY=Math.min(t.maxY,r.maxY)}return r})):n&&this.calculateTileRanges_(n)}forEachTileCoord(t,e,n){const i=this.getTileRangeForExtentAndZ(t,e);for(let t=i.minX,r=i.maxX;t<=r;++t)for(let r=i.minY,s=i.maxY;r<=s;++r)n([e,t,r])}forEachTileCoordParentTileRange(t,e,n,r){let s,o,a,l=null,h=t[0]-1;for(2===this.zoomFactor_?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,r);h>=this.minZoom;){if(void 0!==o&&void 0!==a?(o=Math.floor(o/2),a=Math.floor(a/2),s=(0,i.N)(o,o,a,a,n)):s=this.getTileRangeForExtentAndZ(l,h,n),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,n){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){const n=2*t[1],r=2*t[2];return(0,i.N)(n,n+1,r,r+1,e)}const r=this.getTileCoordExtent(t,n||this.tmpExtent_);return this.getTileRangeForExtentAndZ(r,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,n){if(e>this.maxZoom||e<this.minZoom)return null;const r=t[0],s=t[1],o=t[2];if(e===r)return(0,i.N)(s,o,s,o,n);if(this.zoomFactor_){const t=Math.pow(this.zoomFactor_,e-r),a=Math.floor(s*t),l=Math.floor(o*t);if(e<r)return(0,i.N)(a,a,l,l,n);const h=Math.floor(t*(s+1))-1,u=Math.floor(t*(o+1))-1;return(0,i.N)(a,h,l,u,n)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,n)}getTileRangeForExtentAndZ(t,e,n){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,d);const r=d[1],s=d[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,d);const o=d[1],a=d[2];return(0,i.N)(r,o,s,a,n)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),n=this.getResolution(t[0]),i=(0,h.xq)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*i[0]*n,e[1]-(t[2]+.5)*i[1]*n]}getTileCoordExtent(t,e){const n=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=(0,h.xq)(this.getTileSize(t[0]),this.tmpSize_),s=n[0]+t[1]*r[0]*i,a=n[1]-(t[2]+1)*r[1]*i,l=s+r[0]*i,u=a+r[1]*i;return(0,o.N)(s,a,l,u,e)}getTileCoordForCoordAndResolution(t,e,n){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,n)}getTileCoordForXYAndResolution_(t,e,n,i,r){const s=this.getZForResolution(n),o=n/this.getResolution(s),a=this.getOrigin(s),c=(0,h.xq)(this.getTileSize(s),this.tmpSize_);let d=o*(t-a[0])/n/c[0],f=o*(a[1]-e)/n/c[1];return i?(d=(0,l.mk)(d,5)-1,f=(0,l.mk)(f,5)-1):(d=(0,l.RI)(d,5),f=(0,l.RI)(f,5)),(0,u.N)(s,d,f,r)}getTileCoordForXYAndZ_(t,e,n,i,r){const s=this.getOrigin(n),o=this.getResolution(n),a=(0,h.xq)(this.getTileSize(n),this.tmpSize_);let c=(t-s[0])/o/a[0],d=(s[1]-e)/o/a[1];return i?(c=(0,l.mk)(c,5)-1,d=(0,l.mk)(d,5)-1):(c=(0,l.RI)(c,5),d=(0,l.RI)(d,5)),(0,u.N)(n,c,d,r)}getTileCoordForCoordAndZ(t,e,n){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,n)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const n=(0,r.FT)(this.resolutions_,t,e||0);return(0,l.qE)(n,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,a.sj)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,n=new Array(e);for(let i=this.minZoom;i<e;++i)n[i]=this.getTileRangeForExtentAndZ(t,i);this.fullTileRanges_=n}}},46921:function(t,e,n){"use strict";n.d(e,{L8:function(){return a},SH:function(){return s},gr:function(){return o}});var i=n(44090),r=n(31141);function s(t,e,n,s,o,a,l){let h,u;const c=(n-e)/s;if(1===c)h=e;else if(2===c)h=e,u=o;else if(0!==c){let r=t[e],a=t[e+1],l=0;const c=[0];for(let i=e+s;i<n;i+=s){const e=t[i],n=t[i+1];l+=Math.sqrt((e-r)*(e-r)+(n-a)*(n-a)),c.push(l),r=e,a=n}const d=o*l,f=(0,i.El)(c,d);f<0?(u=(d-c[-f-2])/(c[-f-1]-c[-f-2]),h=e+(-f-2)*s):h=e+f*s}l=l>1?l:2,a=a||new Array(l);for(let e=0;e<l;++e)a[e]=void 0===h?NaN:void 0===u?t[h+e]:(0,r.Cc)(t[h+e],t[h+s+e],u);return a}function o(t,e,n,i,s,o){if(n==e)return null;let a;if(s<t[e+i-1])return o?(a=t.slice(e,e+i),a[i-1]=s,a):null;if(t[n-1]<s)return o?(a=t.slice(n-i,n),a[i-1]=s,a):null;if(s==t[e+i-1])return t.slice(e,e+i);let l=e/i,h=n/i;for(;l<h;){const e=l+h>>1;s<t[(e+1)*i-1]?h=e:l=e+1}const u=t[l*i-1];if(s==u)return t.slice((l-1)*i,(l-1)*i+i);const c=(s-u)/(t[(l+1)*i-1]-u);a=[];for(let e=0;e<i-1;++e)a.push((0,r.Cc)(t[(l-1)*i+e],t[l*i+e],c));return a.push(s),a}function a(t,e,n,i,r,s,a){if(a)return o(t,e,n[n.length-1],i,r,s);let l;if(r<t[i-1])return s?(l=t.slice(0,i),l[i-1]=r,l):null;if(t[t.length-1]<r)return s?(l=t.slice(t.length-i),l[i-1]=r,l):null;for(let s=0,a=n.length;s<a;++s){const a=n[s];if(e!=a){if(r<t[e+i-1])return null;if(r<=t[a-1])return o(t,e,a,i,r,!1);e=a}}return null}},46928:function(t,e,n){"use strict";n.d(e,{_j:function(){return T},cD:function(){return S},dI:function(){return C},eE:function(){return A},fu:function(){return _},oJ:function(){return p},qV:function(){return s},sH:function(){return E}});var i=n(69791),r=n(31141);const s=[NaN,NaN,NaN,0];let o;const a=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,l=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,h=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,u=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function c(t,e){return t.endsWith("%")?Number(t.substring(0,t.length-1))/e:Number(t)}function d(t){throw new Error('failed to parse "'+t+'" as color')}function f(t){if(t.toLowerCase().startsWith("rgb")){const e=t.match(l)||t.match(a)||t.match(h);if(e){const t=e[4],n=100/255;return[(0,r.qE)(c(e[1],n)+.5|0,0,255),(0,r.qE)(c(e[2],n)+.5|0,0,255),(0,r.qE)(c(e[3],n)+.5|0,0,255),void 0!==t?(0,r.qE)(c(t,100),0,1):1]}d(t)}if(t.startsWith("#")){if(u.test(t)){const e=t.substring(1),n=e.length<=4?1:2,i=[0,0,0,255];for(let t=0,r=e.length;t<r;t+=n){let r=parseInt(e.substring(t,t+n),16);1===n&&(r+=r<<4),i[t/n]=r}return i[3]=i[3]/255,i}d(t)}const e=(o||(o=(0,i.Y)(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),o);e.fillStyle="#abcdef";let n=e.fillStyle;e.fillStyle=t,e.fillStyle===n&&(e.fillStyle="#fedcba",n=e.fillStyle,e.fillStyle=t,e.fillStyle===n&&d(t));const s=e.fillStyle;if(s.startsWith("#")||s.startsWith("rgba"))return f(s);e.clearRect(0,0,1,1),e.fillRect(0,0,1,1);const p=Array.from(e.getImageData(0,0,1,1).data);return p[3]=(0,r.Mg)(p[3]/255,3),p}function p(t){return"string"==typeof t?t:C(t)}const g=1024,m={};let y=0;function _(t){if(4===t.length)return t;const e=t.slice();return e[3]=1,e}function v(t){return t>.0031308?269.025*Math.pow(t,1/2.4)-14.025:3294.6*t}function x(t){return t>.2068965?Math.pow(t,3):108/841*(t-4/29)}function b(t){return t>10.314724?Math.pow((t+14.025)/269.025,2.4):t/3294.6}function w(t){return t>.0088564?Math.pow(t,1/3):t/(108/841)+4/29}function A(t){const e=b(t[0]),n=b(t[1]),i=b(t[2]),r=w(.222488403*e+.716873169*n+.06060791*i),s=500*(w(.452247074*e+.399439023*n+.148375274*i)-r),o=200*(r-w(.016863605*e+.117638439*n+.865350722*i)),a=Math.atan2(o,s)*(180/Math.PI);return[116*r-16,Math.sqrt(s*s+o*o),a<0?a+360:a,t[3]]}function S(t){const e=(t[0]+16)/116,n=t[1],i=t[2]*Math.PI/180,s=x(e),o=x(e+n/500*Math.cos(i)),a=x(e-n/200*Math.sin(i)),l=v(3.021973625*o-1.617392459*s-.404875592*a),h=v(-.943766287*o+1.916279586*s+.027607165*a),u=v(.069407491*o-.22898585*s+1.159737864*a);return[(0,r.qE)(l+.5|0,0,255),(0,r.qE)(h+.5|0,0,255),(0,r.qE)(u+.5|0,0,255),t[3]]}function E(t){if("none"===t)return s;if(m.hasOwnProperty(t))return m[t];if(y>=g){let t=0;for(const e in m)3&t++||(delete m[e],--y)}const e=f(t);4!==e.length&&d(t);for(const n of e)isNaN(n)&&d(t);return m[t]=e,++y,e}function T(t){return Array.isArray(t)?t:E(t)}function C(t){let e=t[0];e!=(0|e)&&(e=e+.5|0);let n=t[1];n!=(0|n)&&(n=n+.5|0);let i=t[2];i!=(0|i)&&(i=i+.5|0);return"rgba("+e+","+n+","+i+","+(void 0===t[3]?1:Math.round(1e3*t[3])/1e3)+")"}},47085:function(t,e,n){"use strict";n.d(e,{A:function(){return a}});var i=n(19276),r=n(36804);class s extends r.A{constructor(t){super(t=t||{})}}var o=s;var a=class extends o{constructor(t){super(t)}createRenderer(){return new i.A(this)}getData(t){return super.getData(t)}}},47129:function(t,e,n){"use strict";function i(t,e,n,i){let r=0;const s=t[n-i],o=t[n-i+1];let a=0,l=0;for(;e<n;e+=i){const n=t[e]-s,i=t[e+1]-o;r+=l*n-a*i,a=n,l=i}return r/2}function r(t,e,n,r){let s=0;for(let o=0,a=n.length;o<a;++o){const a=n[o];s+=i(t,e,a,r),e=a}return s}function s(t,e,n,i){let s=0;for(let o=0,a=n.length;o<a;++o){const a=n[o];s+=r(t,e,a,i),e=a[a.length-1]}return s}n.d(e,{Cs:function(){return s},PK:function(){return r},eN:function(){return i}})},48729:function(t,e,n){"use strict";n.d(e,{DG:function(){return x},Fq:function(){return c},SR:function(){return b},T8:function(){return a},Ye:function(){return N},ZD:function(){return A},_D:function(){return v},cT:function(){return h},go:function(){return m},mE:function(){return u},qA:function(){return d},qg:function(){return w},wl:function(){return l}});var i=n(44090),r=n(46928),s=n(3974);let o=0;const a=1<<o++,l=1<<o++,h=1<<o++,u=1<<o++,c=1<<o++,d=1<<o++,f=Math.pow(2,6)-1,p={[a]:"boolean",[l]:"number",[h]:"string",[u]:"color",[c]:"number[]",[d]:"size"},g=Object.keys(p).map(Number).sort(i.V_);function m(t){const e=[];for(const n of g)y(t,n)&&e.push(p[n]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function y(t,e){return(t&e)===e}function _(t,e){return t===e}class v{constructor(t,e){if(!function(t){return t in p}(t))throw new Error(`literal expressions must have a specific type, got ${m(t)}`);this.type=t,this.value=e}}class x{constructor(t,e,...n){this.type=t,this.operator=e,this.args=n}}function b(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function w(t,e,n){switch(typeof t){case"boolean":if(_(e,h))return new v(h,t?"true":"false");if(!y(e,a))throw new Error(`got a boolean, but expected ${m(e)}`);return new v(a,t);case"number":if(_(e,d))return new v(d,(0,s.xq)(t));if(_(e,a))return new v(a,!!t);if(_(e,h))return new v(h,t.toString());if(!y(e,l))throw new Error(`got a number, but expected ${m(e)}`);return new v(l,t);case"string":if(_(e,u))return new v(u,(0,r.sH)(t));if(_(e,a))return new v(a,!!t);if(!y(e,h))throw new Error(`got a string, but expected ${m(e)}`);return new v(h,t)}if(!Array.isArray(t))throw new Error("expression must be an array or a primitive value");if(0===t.length)throw new Error("empty expression");if("string"==typeof t[0])return function(t,e,n){const i=t[0],r=S[i];if(!r)throw new Error(`unknown operator: ${i}`);return r(t,e,n)}(t,e,n);for(const e of t)if("number"!=typeof e)throw new Error("expected an array of numbers");if(_(e,d)){if(2!==t.length)throw new Error(`expected an array of two values for a size, got ${t.length}`);return new v(d,t)}if(_(e,u)){if(3===t.length)return new v(u,[...t,1]);if(4===t.length)return new v(u,t);throw new Error(`expected an array of 3 or 4 values for a color, got ${t.length}`)}if(!y(e,c))throw new Error(`got an array of numbers, but expected ${m(e)}`);return new v(c,t)}const A={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},S={[A.Get]:I(M(1,1/0),E),[A.Var]:I(M(1,1),(function(t,e,n){const i=t[1];if("string"!=typeof i)throw new Error("expected a string argument for var operation");return n.variables.add(i),[new v(h,i)]})),[A.Has]:I(M(1,1/0),E),[A.Id]:I((function(t,e,n){n.featureId=!0}),C),[A.Concat]:I(M(2,1/0),P(h)),[A.GeometryType]:I((function(t,e,n){n.geometryType=!0}),C),[A.LineMetric]:I(C),[A.Resolution]:I(T,C),[A.Zoom]:I(T,C),[A.Time]:I(T,C),[A.Any]:I(M(2,1/0),P(a)),[A.All]:I(M(2,1/0),P(a)),[A.Not]:I(M(1,1),P(a)),[A.Equal]:I(M(2,2),P(f)),[A.NotEqual]:I(M(2,2),P(f)),[A.GreaterThan]:I(M(2,2),P(l)),[A.GreaterThanOrEqualTo]:I(M(2,2),P(l)),[A.LessThan]:I(M(2,2),P(l)),[A.LessThanOrEqualTo]:I(M(2,2),P(l)),[A.Multiply]:I(M(2,1/0),L),[A.Coalesce]:I(M(2,1/0),L),[A.Divide]:I(M(2,2),P(l)),[A.Add]:I(M(2,1/0),P(l)),[A.Subtract]:I(M(2,2),P(l)),[A.Clamp]:I(M(3,3),P(l)),[A.Mod]:I(M(2,2),P(l)),[A.Pow]:I(M(2,2),P(l)),[A.Abs]:I(M(1,1),P(l)),[A.Floor]:I(M(1,1),P(l)),[A.Ceil]:I(M(1,1),P(l)),[A.Round]:I(M(1,1),P(l)),[A.Sin]:I(M(1,1),P(l)),[A.Cos]:I(M(1,1),P(l)),[A.Atan]:I(M(1,2),P(l)),[A.Sqrt]:I(M(1,1),P(l)),[A.Match]:I(M(4,1/0),R,(function(t,e,n){const i=t.length-1,r=h|l|a,s=w(t[1],r,n),o=w(t[t.length-1],e,n),u=new Array(i-2);for(let e=0;e<i-2;e+=2){try{const i=w(t[e+2],s.type,n);u[e]=i}catch(t){throw new Error(`failed to parse argument ${e+1} of match expression: ${t.message}`)}try{const i=w(t[e+3],o.type,n);u[e+1]=i}catch(t){throw new Error(`failed to parse argument ${e+2} of match expression: ${t.message}`)}}return[s,...u,o]})),[A.Between]:I(M(3,3),P(l)),[A.Interpolate]:I(M(6,1/0),R,(function(t,e,n){const i=t[1];let r;switch(i[0]){case"linear":r=1;break;case"exponential":const t=i[1];if("number"!=typeof t||t<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(t)} instead`);r=t;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new v(l,r);let o;try{o=w(t[2],l,n)}catch(t){throw new Error(`failed to parse argument 1 in interpolate expression: ${t.message}`)}const a=new Array(t.length-3);for(let i=0;i<a.length;i+=2){try{const e=w(t[i+3],l,n);a[i]=e}catch(t){throw new Error(`failed to parse argument ${i+2} for interpolate expression: ${t.message}`)}try{const r=w(t[i+4],e,n);a[i+1]=r}catch(t){throw new Error(`failed to parse argument ${i+3} for interpolate expression: ${t.message}`)}}return[s,o,...a]})),[A.Case]:I(M(3,1/0),(function(t,e,n){const i=t[0],r=t.length-1;if(r%2==0)throw new Error(`expected an odd number of arguments for ${i}, got ${r} instead`)}),(function(t,e,n){const i=w(t[t.length-1],e,n),r=new Array(t.length-1);for(let e=0;e<r.length-1;e+=2){try{const i=w(t[e+1],a,n);r[e]=i}catch(t){throw new Error(`failed to parse argument ${e} of case expression: ${t.message}`)}try{const s=w(t[e+2],i.type,n);r[e+1]=s}catch(t){throw new Error(`failed to parse argument ${e+1} of case expression: ${t.message}`)}}return r[r.length-1]=i,r})),[A.In]:I(M(2,2),(function(t,e,n){let i,r=t[2];if(!Array.isArray(r))throw new Error('the second argument for the "in" operator must be an array');if("string"==typeof r[0]){if("literal"!==r[0])throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(r[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');r=r[1],i=h}else i=l;const s=new Array(r.length);for(let t=0;t<s.length;t++)try{const e=w(r[t],i,n);s[t]=e}catch(e){throw new Error(`failed to parse haystack item ${t} for "in" expression: ${e.message}`)}return[w(t[1],i,n),...s]})),[A.Number]:I(M(1,1/0),P(f)),[A.String]:I(M(1,1/0),P(f)),[A.Array]:I(M(1,1/0),P(l)),[A.Color]:I(M(1,4),P(l)),[A.Band]:I(M(1,3),P(l)),[A.Palette]:I(M(2,2),(function(t,e,n){let i;try{i=w(t[1],l,n)}catch(t){throw new Error(`failed to parse first argument in palette expression: ${t.message}`)}const r=t[2];if(!Array.isArray(r))throw new Error("the second argument of palette must be an array");const s=new Array(r.length);for(let t=0;t<s.length;t++){let e;try{e=w(r[t],u,n)}catch(e){throw new Error(`failed to parse color at index ${t} in palette expression: ${e.message}`)}if(!(e instanceof v))throw new Error(`the palette color at index ${t} must be a literal value`);s[t]=e}return[i,...s]})),[A.ToString]:I(M(1,1),P(a|l|h|u))};function E(t,e,n){const i=t.length-1,r=new Array(i);for(let e=0;e<i;++e){const i=t[e+1];switch(typeof i){case"number":r[e]=new v(l,i);break;case"string":r[e]=new v(h,i);break;default:throw new Error(`expected a string key or numeric array index for a get operation, got ${i}`)}0===e&&n.properties.add(String(i))}return r}function T(t,e,n){n.mapState=!0}function C(t,e,n){const i=t[0];if(1!==t.length)throw new Error(`expected no arguments for ${i} operation`);return[]}function M(t,e){return function(n,i,r){const s=n[0],o=n.length-1;if(t===e){if(o!==t){throw new Error(`expected ${t} argument${1===t?"":"s"} for ${s}, got ${o}`)}}else if(o<t||o>e){throw new Error(`expected ${e===1/0?`${t} or more`:`${t} to ${e}`} arguments for ${s}, got ${o}`)}}}function L(t,e,n){const i=t.length-1,r=new Array(i);for(let s=0;s<i;++s){const i=w(t[s+1],e,n);r[s]=i}return r}function P(t){return function(e,n,i){const r=e.length-1,s=new Array(r);for(let n=0;n<r;++n){const r=w(e[n+1],t,i);s[n]=r}return s}}function R(t,e,n){const i=t[0],r=t.length-1;if(r%2==1)throw new Error(`expected an even number of arguments for operation ${i}, got ${r} instead`)}function I(...t){return function(e,n,i){const r=e[0];let s;for(let r=0;r<t.length;r++){const o=t[r](e,n,i);if(r==t.length-1){if(!o)throw new Error("expected last argument validator to return the parsed args");s=o}}return new x(n,r,...s)}}function N(t){if(!t)return"";const e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return N(t.getGeometries()[0]);default:return""}}},49208:function(t,e,n){"use strict";var i=n(51541),r=n(96728),s=n(93001),o=n(45090),a=n(25231),l=n(71442),h=n(72961),u=n(43987);class c extends u.A{constructor(t){t=t||{},super(),this.dataProjection=(0,a.Jt)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,a.Jt)(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;n="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null};const r=d(n.geometry,e);if(this.featureClass===l.Ay)return(0,h.Bs)({geometry:r,id:n.id,properties:n.properties},e);const s=new i.A;return this.geometryName_?s.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&s.setGeometryName(n.geometry_name),s.setGeometry((0,h.te)(r,e)),"id"in n&&s.setId(n.id),n.properties&&s.setProperties(n.properties,!0),s}readFeaturesFromObject(t,e){let n=null;if("FeatureCollection"===t.type){n=[];const i=t.features;for(let t=0,r=i.length;t<r;++t){const r=this.readFeatureFromObject(i[t],e);r&&n.push(r)}}else n=[this.readFeatureFromObject(t,e)];return n.flat()}readGeometryFromObject(t,e){return function(t,e){const n=d(t,e);return(0,h.te)(n,e)}(t,e)}readProjectionFromObject(t){const e=t.crs;let n;if(e)if("name"==e.type)n=(0,a.Jt)(e.properties.name);else{if("EPSG"!==e.type)throw new Error("Unknown SRS type");n=(0,a.Jt)("EPSG:"+e.properties.code)}else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},i=t.getId();if(void 0!==i&&(n.id=i),!t.hasProperties())return n;const r=t.getProperties(),s=t.getGeometry();return s&&(n.geometry=f(s,e),delete r[t.getGeometryName()]),(0,o.p)(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let i=0,r=t.length;i<r;++i)n.push(this.writeFeatureObject(t[i],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return f(t,this.adaptOptions(e))}}function d(t,e){if(!t)return null;let n;switch(t.type){case"Point":n=function(t){const e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:(0,r.p0)(e.length)}}(t);break;case"LineString":n=function(t){const e=t.coordinates,n=e.flat();return{type:"LineString",flatCoordinates:n,ends:[n.length],layout:(0,r.p0)(e[0]?.length||2)}}(t);break;case"Polygon":n=function(t){const e=t.coordinates,n=[],i=e[0]?.[0]?.length,o=(0,s.KG)(n,0,e,i);return{type:"Polygon",flatCoordinates:n,ends:o,layout:(0,r.p0)(i)}}(t);break;case"MultiPoint":n=function(t){const e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:(0,r.p0)(e[0]?.length||2)}}(t);break;case"MultiLineString":n=function(t){const e=t.coordinates,n=e[0]?.[0]?.length||2,i=[],o=(0,s.KG)(i,0,e,n);return{type:"MultiLineString",flatCoordinates:i,ends:o,layout:(0,r.p0)(n)}}(t);break;case"MultiPolygon":n=function(t){const e=t.coordinates,n=[],i=e[0]?.[0]?.[0].length||2,o=(0,s.d6)(n,0,e,i);return{type:"MultiPolygon",flatCoordinates:n,ends:o,layout:(0,r.p0)(i)}}(t);break;case"GeometryCollection":n=function(t,e){const n=t.geometries.map((function(t){return d(t,e)}));return n}(t);break;default:throw new Error("Unsupported GeoJSON type: "+t.type)}return n}function f(t,e){const n=(t=(0,h.hX)(t,!0,e)).getType();let i;switch(n){case"Point":i=function(t){return{type:"Point",coordinates:t.getCoordinates()}}(t);break;case"LineString":i=function(t){return{type:"LineString",coordinates:t.getCoordinates()}}(t);break;case"Polygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"Polygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"MultiPoint":i=function(t){return{type:"MultiPoint",coordinates:t.getCoordinates()}}(t);break;case"MultiLineString":i=function(t){return{type:"MultiLineString",coordinates:t.getCoordinates()}}(t);break;case"MultiPolygon":i=function(t,e){let n;e&&(n=e.rightHanded);return{type:"MultiPolygon",coordinates:t.getCoordinates(n)}}(t,e);break;case"GeometryCollection":i=function(t,e){e=Object.assign({},e),delete e.featureProjection;const n=t.getGeometriesArray().map((function(t){return f(t,e)}));return{type:"GeometryCollection",geometries:n}}(t,e);break;case"Circle":i={type:"GeometryCollection",geometries:[]};break;default:throw new Error("Unsupported geometry type: "+n)}return i}e.A=c},51541:function(t,e,n){"use strict";var i=n(70192),r=n(42484),s=n(22685),o=n(92662);class a extends i.A{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if("function"==typeof t.getSimplifiedGeometry){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new a(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,o.JH)(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=(0,o.KT)(t,s.A.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?function(t){if("function"==typeof t)return t;let e;if(Array.isArray(t))e=t;else{(0,r.v)("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`");e=[t]}return function(){return e}}(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}e.A=a},51650:function(t){function e(t,e,n){const i=new RegExp(e).exec(t.slice(n));return i?n+i.index+i[0].length-1:-1}t.exports=e,t.exports.default=e},51754:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n(85305);function r(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),i.A.hasOwnProperty(e)?{space:i.A[e],local:t}:t}},51937:function(t,e,n){"use strict";var i=n(18381);class r extends i.Ay{constructor(t,e,n){super(t),this.map=e,this.frameState=void 0!==n?n:null}}e.A=r},52151:function(t,e,n){const i=n(31080);function r(t,e,n){const r=[],s=n&&n.debug||!1,o=!n||"boolean"!=typeof n.nested||n.nested;let a,l=n&&n.startIndex||0;for(;a=i(t,e,{debug:s,startIndex:l});)l=o?a.start+1+e.length:a.end,r.push(a);return s&&console.log("findTagsByName found",r.length,"tags"),r}t.exports=r,t.exports.default=r},52382:function(t,e,n){"use strict";var i=n(81297),r=n(22685),s=n(92662),o=n(31141),a=n(8860);function l(t){return parseFloat(t)}function h(t){return function(t){return(0,o.Mg)(t,5)}(t).toString()}function u(t,e){return!isNaN(t)&&t!==l(h(e))}class c extends a.Ay{constructor(t){let e;super(),e=!0===(t=Object.assign({animate:!0,params:["x","y","z","r","l"],replace:!1,prefix:""},t||{})).animate?{duration:250}:t.animate?t.animate:null,this.animationOptions_=e,this.params_=t.params.reduce(((t,e)=>(t[e]=!0,t)),{}),this.replace_=t.replace,this.prefix_=t.prefix,this.listenerKeys_=[],this.initial_=!0,this.updateState_=this.updateState_.bind(this),this.trackedCallbacks_={},this.trackedValues_={}}getParamName_(t){return this.prefix_?this.prefix_+t:t}get_(t,e){return t.get(this.getParamName_(e))}set_(t,e,n){e in this.params_&&t.set(this.getParamName_(e),n)}delete_(t,e){e in this.params_&&t.delete(this.getParamName_(e))}setMap(t){const e=this.getMap();super.setMap(t),t!==e&&(e&&this.unregisterListeners_(e),t&&(this.initial_=!0,this.updateState_(),this.registerListeners_(t)))}registerListeners_(t){this.listenerKeys_.push((0,s.KT)(t,i.A.MOVEEND,this.updateUrl_,this),(0,s.KT)(t.getLayerGroup(),r.A.CHANGE,this.updateUrl_,this),(0,s.KT)(t,"change:layergroup",this.handleChangeLayerGroup_,this)),this.replace_||addEventListener("popstate",this.updateState_)}unregisterListeners_(t){for(let t=0,e=this.listenerKeys_.length;t<e;++t)(0,s.JH)(this.listenerKeys_[t]);this.listenerKeys_.length=0,this.replace_||removeEventListener("popstate",this.updateState_);const e=new URL(window.location.href),n=e.searchParams;this.delete_(n,"x"),this.delete_(n,"y"),this.delete_(n,"z"),this.delete_(n,"r"),this.delete_(n,"l"),window.history.replaceState(null,"",e)}handleChangeLayerGroup_(){const t=this.getMap();t&&(this.unregisterListeners_(t),this.registerListeners_(t),this.initial_=!0,this.updateUrl_())}updateState_(){const t=new URL(window.location.href).searchParams;for(const e in this.trackedCallbacks_){const n=t.get(e);e in this.trackedCallbacks_&&n!==this.trackedValues_[e]&&(this.trackedValues_[e]=n,this.trackedCallbacks_[e](n))}const e=this.getMap();if(!e)return;const n=e.getView();if(!n)return;let i=!1;const r={},s=l(this.get_(t,"z"));"z"in this.params_&&u(s,n.getZoom())&&(i=!0,r.zoom=s);const o=l(this.get_(t,"r"));"r"in this.params_&&u(o,n.getRotation())&&(i=!0,r.rotation=o);const a=[l(this.get_(t,"x")),l(this.get_(t,"y"))];var h,c;("x"in this.params_||"y"in this.params_)&&(h=a,c=n.getCenter(),u(h[0],c[0])||u(h[1],c[1]))&&(i=!0,r.center=a),i&&(!this.initial_&&this.animationOptions_?n.animate(Object.assign(r,this.animationOptions_)):(r.center&&n.setCenter(r.center),"zoom"in r&&n.setZoom(r.zoom),"rotation"in r&&n.setRotation(r.rotation)));const d=e.getAllLayers(),f=this.get_(t,"l");if("l"in this.params_&&f&&f.length===d.length)for(let t=0,e=d.length;t<e;++t){const e=parseInt(f[t]);if(!isNaN(e)){const n=Boolean(e),i=d[t];i.getVisible()!==n&&i.setVisible(n)}}}track(t,e){this.trackedCallbacks_[t]=e;const n=new URL(window.location.href).searchParams.get(t);return this.trackedValues_[t]=n,n}update(t,e){const n=new URL(window.location.href),i=n.searchParams;null===e?i.delete(t):i.set(t,e),t in this.trackedValues_&&(this.trackedValues_[t]=e),this.updateHistory_(n)}updateUrl_(){const t=this.getMap();if(!t)return;const e=t.getView();if(!e)return;const n=e.getCenter(),i=e.getZoom(),r=e.getRotation(),s=t.getAllLayers(),o=new Array(s.length);for(let t=0,e=s.length;t<e;++t)o[t]=s[t].getVisible()?"1":"0";const a=new URL(window.location.href),l=a.searchParams;this.set_(l,"x",h(n[0])),this.set_(l,"y",h(n[1])),this.set_(l,"z",h(i)),this.set_(l,"r",h(r)),this.set_(l,"l",o.join("")),this.updateHistory_(a),this.initial_=!1}updateHistory_(t){t.href!==window.location.href&&(this.initial_||this.replace_?window.history.replaceState(history.state,"",t):window.history.pushState(null,"",t))}}e.A=c},52401:function(t,e,n){"use strict";n.d(e,{A:function(){return De}});var i=n(36228);const r=new Map;function s(t,e){Array.isArray(t)||(t=[t]),t.forEach((t=>r.set(t,e)))}async function o(t){const e=r.get(t.Compression);if(!e)throw new Error(`Unknown compression method identifier: ${t.Compression}`);return new(await e())(t)}s([void 0,1],(()=>n.e(223).then(n.bind(n,10223)).then((t=>t.default)))),s(5,(()=>n.e(2).then(n.bind(n,70002)).then((t=>t.default)))),s(6,(()=>{throw new Error("old style JPEG compression is not supported.")})),s(7,(()=>n.e(9243).then(n.bind(n,49243)).then((t=>t.default)))),s([8,32946],(()=>n.e(5530).then(n.bind(n,15530)).then((t=>t.default)))),s(32773,(()=>n.e(7320).then(n.bind(n,77320)).then((t=>t.default)))),s(34887,(()=>n.e(8468).then(n.bind(n,48468)).then((async t=>(await t.zstd.init(),t))).then((t=>t.default)))),s(50001,(()=>n.e(9702).then(n.bind(n,9702)).then((t=>t.default))));const a="undefined"!=typeof navigator&&navigator.hardwareConcurrency||2;var l=class{constructor(t=a,e){this.workers=null,this._awaitingDecoder=null,this.size=t,this.messageId=0,t&&(this._awaitingDecoder=e?Promise.resolve(e):new Promise((t=>{n.e(1032).then(n.bind(n,11032)).then((e=>{t(e.create)}))})),this._awaitingDecoder.then((e=>{this._awaitingDecoder=null,this.workers=[];for(let n=0;n<t;n++)this.workers.push({worker:e(),idle:!0})})))}async decode(t,e){return this._awaitingDecoder&&await this._awaitingDecoder,0===this.size?o(t).then((n=>n.decode(t,e))):new Promise((n=>{const i=this.workers.find((t=>t.idle))||this.workers[Math.floor(Math.random()*this.size)];i.idle=!1;const r=this.messageId++,s=t=>{t.data.id===r&&(i.idle=!0,n(t.data.decoded),i.worker.removeEventListener("message",s))};i.worker.addEventListener("message",s),i.worker.postMessage({fileDirectory:t,buffer:e,id:r},[e])}))}destroy(){this.workers&&(this.workers.forEach((t=>{t.worker.terminate()})),this.workers=null)}};function h(t){return(e,...n)=>c(t,e,n)}function u(t,e){return h(g(t,e).get)}const{apply:c,construct:d,defineProperty:f,get:p,getOwnPropertyDescriptor:g,getPrototypeOf:m,has:y,ownKeys:_,set:v,setPrototypeOf:x}=Reflect,{EPSILON:b,MAX_SAFE_INTEGER:w,isFinite:A,isNaN:S}=Number,{iterator:E,species:T,toStringTag:C,for:M}=Symbol,L=Object,{create:P,defineProperty:R,freeze:I,is:N}=L,F=L.prototype,k=(F.__lookupGetter__&&h(F.__lookupGetter__),L.hasOwn||h(F.hasOwnProperty)),D=Array,O=(D.isArray,D.prototype),j=(h(O.join),h(O.push),h(O.toLocaleString),O[E]),G=h(j),{abs:B,trunc:z}=Math,q=ArrayBuffer,U=(q.isView,q.prototype),W=(h(U.slice),u(U,"byteLength"),"undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:null),$=(W&&u(W.prototype,"byteLength"),m(Uint8Array)),V=($.from,$.prototype),X=(V[E],h(V.keys),h(V.values),h(V.entries),h(V.set),h(V.reverse),h(V.fill),h(V.copyWithin),h(V.sort),h(V.slice),h(V.subarray),u(V,"buffer"),u(V,"byteOffset"),u(V,"length"),u(V,C),Uint8Array),H=Uint16Array,Y=Uint32Array,Z=Float32Array,K=m([][E]()),J=h(K.next),Q=h(function*(){}().next),tt=m(K),et=DataView.prototype,nt=h(et.getUint16),it=(h(et.setUint16),TypeError),rt=WeakSet.prototype,st=(h(rt.add),h(rt.has),WeakMap),ot=st.prototype,at=h(ot.get),lt=(h(ot.has),h(ot.set)),ht=new st,ut=P(null,{next:{value:function(){const t=at(ht,this);return J(t)}},[E]:{value:function(){return this}}});const ct=new st,dt=P(tt,{next:{value:function(){const t=at(ct,this);return Q(t)},writable:!0,configurable:!0}});for(const t of _(K))"next"!==t&&R(dt,t,g(K,t));const ft=new q(4),pt=new Z(ft),gt=new Y(ft),mt=new H(512),yt=new X(512);for(let t=0;t<256;++t){const e=t-127;e<-27?(mt[t]=0,mt[256|t]=32768,yt[t]=24,yt[256|t]=24):e<-14?(mt[t]=1024>>-e-14,mt[256|t]=1024>>-e-14|32768,yt[t]=-e-1,yt[256|t]=-e-1):e<=15?(mt[t]=e+15<<10,mt[256|t]=e+15<<10|32768,yt[t]=13,yt[256|t]=13):e<128?(mt[t]=31744,mt[256|t]=64512,yt[t]=24,yt[256|t]=24):(mt[t]=31744,mt[256|t]=64512,yt[t]=13,yt[256|t]=13)}const _t=new Y(2048);for(let t=1;t<1024;++t){let e=t<<13,n=0;for(;!(8388608&e);)e<<=1,n-=8388608;e&=-8388609,n+=947912704,_t[t]=e|n}for(let t=1024;t<2048;++t)_t[t]=939524096+(t-1024<<13);const vt=new Y(64);for(let t=1;t<31;++t)vt[t]=t<<23;vt[31]=1199570944,vt[32]=2147483648;for(let t=33;t<63;++t)vt[t]=2147483648+(t-32<<23);vt[63]=3347054592;const xt=new H(64);for(let t=1;t<64;++t)32!==t&&(xt[t]=1024);function bt(t,e,...n){return function(t){const e=t>>10;return gt[0]=_t[xt[e]+(1023&t)]+vt[e],pt[0]}(nt(t,e,...function(t){if(t[E]===j&&K.next===J)return t;const e=P(ut);return lt(ht,e,G(t)),e}(n)))}var wt=n(18215),At=n(52151);function St(t,e,n,i=1){return new(Object.getPrototypeOf(t).constructor)(e*n*i)}function Et(t,e,n){return(1-n)*t+n*e}function Tt(t,e,n,i,r,s="nearest"){switch(s.toLowerCase()){case"nearest":return function(t,e,n,i,r){const s=e/i,o=n/r;return t.map((t=>{const a=St(t,i,r);for(let l=0;l<r;++l){const r=Math.min(Math.round(o*l),n-1);for(let n=0;n<i;++n){const o=Math.min(Math.round(s*n),e-1),h=t[r*e+o];a[l*i+n]=h}}return a}))}(t,e,n,i,r);case"bilinear":case"linear":return function(t,e,n,i,r){const s=e/i,o=n/r;return t.map((t=>{const a=St(t,i,r);for(let l=0;l<r;++l){const r=o*l,h=Math.floor(r),u=Math.min(Math.ceil(r),n-1);for(let n=0;n<i;++n){const o=s*n,c=o%1,d=Math.floor(o),f=Math.min(Math.ceil(o),e-1),p=t[h*e+d],g=t[h*e+f],m=t[u*e+d],y=t[u*e+f],_=Et(Et(p,g,c),Et(m,y,c),r%1);a[l*i+n]=_}}return a}))}(t,e,n,i,r);default:throw new Error(`Unsupported resampling method: '${s}'`)}}function Ct(t,e,n,i,r,s,o="nearest"){switch(o.toLowerCase()){case"nearest":return function(t,e,n,i,r,s){const o=e/i,a=n/r,l=St(t,i,r,s);for(let h=0;h<r;++h){const r=Math.min(Math.round(a*h),n-1);for(let n=0;n<i;++n){const a=Math.min(Math.round(o*n),e-1);for(let o=0;o<s;++o){const u=t[r*e*s+a*s+o];l[h*i*s+n*s+o]=u}}}return l}(t,e,n,i,r,s);case"bilinear":case"linear":return function(t,e,n,i,r,s){const o=e/i,a=n/r,l=St(t,i,r,s);for(let h=0;h<r;++h){const r=a*h,u=Math.floor(r),c=Math.min(Math.ceil(r),n-1);for(let n=0;n<i;++n){const a=o*n,d=a%1,f=Math.floor(a),p=Math.min(Math.ceil(a),e-1);for(let o=0;o<s;++o){const a=t[u*e*s+f*s+o],g=t[u*e*s+p*s+o],m=t[c*e*s+f*s+o],y=t[c*e*s+p*s+o],_=Et(Et(a,g,d),Et(m,y,d),r%1);l[h*i*s+n*s+o]=_}}}return l}(t,e,n,i,r,s);default:throw new Error(`Unsupported resampling method: '${o}'`)}}function Mt(t,e,n){let i=0;for(let r=e;r<n;++r)i+=t[r];return i}function Lt(t,e,n){switch(t){case 1:if(e<=8)return new Uint8Array(n);if(e<=16)return new Uint16Array(n);if(e<=32)return new Uint32Array(n);break;case 2:if(8===e)return new Int8Array(n);if(16===e)return new Int16Array(n);if(32===e)return new Int32Array(n);break;case 3:switch(e){case 16:case 32:return new Float32Array(n);case 64:return new Float64Array(n)}}throw Error("Unsupported data format/bitsPerSample")}var Pt=class{constructor(t,e,n,i,r,s){this.fileDirectory=t,this.geoKeys=e,this.dataView=n,this.littleEndian=i,this.tiles=r?{}:null,this.isTiled=!t.StripOffsets;const o=t.PlanarConfiguration;if(this.planarConfiguration=void 0===o?1:o,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=s}getFileDirectory(){return this.fileDirectory}getGeoKeys(){return this.geoKeys}getWidth(){return this.fileDirectory.ImageWidth}getHeight(){return this.fileDirectory.ImageLength}getSamplesPerPixel(){return void 0!==this.fileDirectory.SamplesPerPixel?this.fileDirectory.SamplesPerPixel:1}getTileWidth(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}getTileHeight(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}getBlockWidth(){return this.getTileWidth()}getBlockHeight(t){return this.isTiled||(t+1)*this.getTileHeight()<=this.getHeight()?this.getTileHeight():this.getHeight()-t*this.getTileHeight()}getBytesPerPixel(){let t=0;for(let e=0;e<this.fileDirectory.BitsPerSample.length;++e)t+=this.getSampleByteSize(e);return t}getSampleByteSize(t){if(t>=this.fileDirectory.BitsPerSample.length)throw new RangeError(`Sample index ${t} is out of range.`);return Math.ceil(this.fileDirectory.BitsPerSample[t]/8)}getReaderForSample(t){const e=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1,n=this.fileDirectory.BitsPerSample[t];switch(e){case 1:if(n<=8)return DataView.prototype.getUint8;if(n<=16)return DataView.prototype.getUint16;if(n<=32)return DataView.prototype.getUint32;break;case 2:if(n<=8)return DataView.prototype.getInt8;if(n<=16)return DataView.prototype.getInt16;if(n<=32)return DataView.prototype.getInt32;break;case 3:switch(n){case 16:return function(t,e){return bt(this,t,e)};case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}getSampleFormat(t=0){return this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[t]:1}getBitsPerSample(t=0){return this.fileDirectory.BitsPerSample[t]}getArrayForSample(t,e){return Lt(this.getSampleFormat(t),this.getBitsPerSample(t),e)}async getTileOrStrip(t,e,n,i,r){const s=Math.ceil(this.getWidth()/this.getTileWidth()),o=Math.ceil(this.getHeight()/this.getTileHeight());let a;const{tiles:l}=this;let h,u;1===this.planarConfiguration?a=e*s+t:2===this.planarConfiguration&&(a=n*s*o+e*s+t),this.isTiled?(h=this.fileDirectory.TileOffsets[a],u=this.fileDirectory.TileByteCounts[a]):(h=this.fileDirectory.StripOffsets[a],u=this.fileDirectory.StripByteCounts[a]);const c=(await this.source.fetch([{offset:h,length:u}],r))[0];let d;return null!==l&&l[a]?d=l[a]:(d=(async()=>{let t=await i.decode(this.fileDirectory,c);const n=this.getSampleFormat(),r=this.getBitsPerSample();return function(t,e){return(1!==t&&2!==t||!(e<=32)||e%8!=0)&&(3!==t||16!==e&&32!==e&&64!==e)}(n,r)&&(t=function(t,e,n,i,r,s,o){const a=new DataView(t),l=2===n?1:i,h=Lt(e,r,2===n?o*s:o*s*i),u=parseInt("1".repeat(r),2);if(1===e){let t;t=1===n?i*r:r;let e=s*t;7&e&&(e=e+7&-8);for(let t=0;t<o;++t){const n=t*e;for(let e=0;e<s;++e){const i=n+e*l*r;for(let n=0;n<l;++n){const o=i+n*r,c=(t*s+e)*l+n,d=Math.floor(o/8),f=o%8;if(f+r<=8)h[c]=a.getUint8(d)>>8-r-f&u;else if(f+r<=16)h[c]=a.getUint16(d)>>16-r-f&u;else if(f+r<=24){const t=a.getUint16(d)<<8|a.getUint8(d+2);h[c]=t>>24-r-f&u}else h[c]=a.getUint32(d)>>32-r-f&u}}}}return h.buffer}(t,n,this.planarConfiguration,this.getSamplesPerPixel(),r,this.getTileWidth(),this.getBlockHeight(e))),t})(),null!==l&&(l[a]=d)),{x:t,y:e,sample:n,data:await d}}async _readRaster(t,e,n,i,r,s,o,a,l){const h=this.getTileWidth(),u=this.getTileHeight(),c=this.getWidth(),d=this.getHeight(),f=Math.max(Math.floor(t[0]/h),0),p=Math.min(Math.ceil(t[2]/h),Math.ceil(c/h)),g=Math.max(Math.floor(t[1]/u),0),m=Math.min(Math.ceil(t[3]/u),Math.ceil(d/u)),y=t[2]-t[0];let _=this.getBytesPerPixel();const v=[],x=[];for(let t=0;t<e.length;++t)1===this.planarConfiguration?v.push(Mt(this.fileDirectory.BitsPerSample,0,e[t])/8):v.push(0),x.push(this.getReaderForSample(e[t]));const b=[],{littleEndian:w}=this;for(let s=g;s<m;++s)for(let o=f;o<p;++o){let a;1===this.planarConfiguration&&(a=this.getTileOrStrip(o,s,0,r,l));for(let f=0;f<e.length;++f){const p=f,g=e[f];2===this.planarConfiguration&&(_=this.getSampleByteSize(g),a=this.getTileOrStrip(o,s,g,r,l));const m=a.then((r=>{const s=r.data,o=new DataView(s),a=this.getBlockHeight(r.y),l=r.y*u,f=r.x*h,g=l+a,m=(r.x+1)*h,b=x[p],A=Math.min(a,a-(g-t[3]),d-l),S=Math.min(h,h-(m-t[2]),c-f);for(let r=Math.max(0,t[1]-l);r<A;++r)for(let s=Math.max(0,t[0]-f);s<S;++s){const a=(r*h+s)*_,u=b.call(o,a+v[p],w);let c;i?(c=(r+l-t[1])*y*e.length+(s+f-t[0])*e.length+p,n[c]=u):(c=(r+l-t[1])*y+s+f-t[0],n[p][c]=u)}}));b.push(m)}}if(await Promise.all(b),s&&t[2]-t[0]!==s||o&&t[3]-t[1]!==o){let r;return r=i?Ct(n,t[2]-t[0],t[3]-t[1],s,o,e.length,a):Tt(n,t[2]-t[0],t[3]-t[1],s,o,a),r.width=s,r.height=o,r}return n.width=s||t[2]-t[0],n.height=o||t[3]-t[1],n}async readRasters({window:t,samples:e=[],interleave:n,pool:i=null,width:r,height:s,resampleMethod:a,fillValue:l,signal:h}={}){const u=t||[0,0,this.getWidth(),this.getHeight()];if(u[0]>u[2]||u[1]>u[3])throw new Error("Invalid subsets");const c=(u[2]-u[0])*(u[3]-u[1]),d=this.getSamplesPerPixel();if(e&&e.length){for(let t=0;t<e.length;++t)if(e[t]>=d)return Promise.reject(new RangeError(`Invalid sample index '${e[t]}'.`))}else for(let t=0;t<d;++t)e.push(t);let f;if(n){f=Lt(this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,Math.max.apply(null,this.fileDirectory.BitsPerSample),c*e.length),l&&f.fill(l)}else{f=[];for(let t=0;t<e.length;++t){const n=this.getArrayForSample(e[t],c);Array.isArray(l)&&t<l.length?n.fill(l[t]):l&&!Array.isArray(l)&&n.fill(l),f.push(n)}}const p=i||await o(this.fileDirectory);return await this._readRaster(u,e,f,n,p,r,s,a,h)}async readRGB({window:t,interleave:e=!0,pool:n=null,width:r,height:s,resampleMethod:o,enableAlpha:a=!1,signal:l}={}){const h=t||[0,0,this.getWidth(),this.getHeight()];if(h[0]>h[2]||h[1]>h[3])throw new Error("Invalid subsets");const u=this.fileDirectory.PhotometricInterpretation;if(u===i.ub.RGB){let h=[0,1,2];if(this.fileDirectory.ExtraSamples!==i.AC.Unspecified&&a){h=[];for(let t=0;t<this.fileDirectory.BitsPerSample.length;t+=1)h.push(t)}return this.readRasters({window:t,interleave:e,samples:h,pool:n,width:r,height:s,resampleMethod:o,signal:l})}let c;switch(u){case i.ub.WhiteIsZero:case i.ub.BlackIsZero:case i.ub.Palette:c=[0];break;case i.ub.CMYK:c=[0,1,2,3];break;case i.ub.YCbCr:case i.ub.CIELab:c=[0,1,2];break;default:throw new Error("Invalid or unsupported photometric interpretation.")}const d={window:h,interleave:!0,samples:c,pool:n,width:r,height:s,resampleMethod:o,signal:l},{fileDirectory:f}=this,p=await this.readRasters(d),g=2**this.fileDirectory.BitsPerSample[0];let m;switch(u){case i.ub.WhiteIsZero:m=function(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);let s;for(let n=0,i=0;n<t.length;++n,i+=3)s=256-t[n]/e*256,r[i]=s,r[i+1]=s,r[i+2]=s;return r}(p,g);break;case i.ub.BlackIsZero:m=function(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3);let s;for(let n=0,i=0;n<t.length;++n,i+=3)s=t[n]/e*256,r[i]=s,r[i+1]=s,r[i+2]=s;return r}(p,g);break;case i.ub.Palette:m=function(t,e){const{width:n,height:i}=t,r=new Uint8Array(n*i*3),s=e.length/3,o=e.length/3*2;for(let n=0,i=0;n<t.length;++n,i+=3){const a=t[n];r[i]=e[a]/65536*256,r[i+1]=e[a+s]/65536*256,r[i+2]=e[a+o]/65536*256}return r}(p,f.ColorMap);break;case i.ub.CMYK:m=function(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3);for(let e=0,n=0;e<t.length;e+=4,n+=3){const r=t[e],s=t[e+1],o=t[e+2],a=t[e+3];i[n]=(255-r)/256*255*((255-a)/256),i[n+1]=(255-s)/256*255*((255-a)/256),i[n+2]=(255-o)/256*255*((255-a)/256)}return i}(p);break;case i.ub.YCbCr:m=function(t){const{width:e,height:n}=t,i=new Uint8ClampedArray(e*n*3);for(let e=0,n=0;e<t.length;e+=3,n+=3){const r=t[e],s=t[e+1],o=t[e+2];i[n]=r+1.402*(o-128),i[n+1]=r-.34414*(s-128)-.71414*(o-128),i[n+2]=r+1.772*(s-128)}return i}(p);break;case i.ub.CIELab:m=function(t){const{width:e,height:n}=t,i=new Uint8Array(e*n*3);for(let e=0,n=0;e<t.length;e+=3,n+=3){let r,s,o,a=(t[e+0]+16)/116,l=(t[e+1]<<24>>24)/500+a,h=a-(t[e+2]<<24>>24)/200;l=.95047*(l*l*l>.008856?l*l*l:(l-16/116)/7.787),a=1*(a*a*a>.008856?a*a*a:(a-16/116)/7.787),h=1.08883*(h*h*h>.008856?h*h*h:(h-16/116)/7.787),r=3.2406*l+-1.5372*a+-.4986*h,s=-.9689*l+1.8758*a+.0415*h,o=.0557*l+-.204*a+1.057*h,r=r>.0031308?1.055*r**(1/2.4)-.055:12.92*r,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,i[n]=255*Math.max(0,Math.min(1,r)),i[n+1]=255*Math.max(0,Math.min(1,s)),i[n+2]=255*Math.max(0,Math.min(1,o))}return i}(p);break;default:throw new Error("Unsupported photometric interpretation.")}if(!e){const t=new Uint8Array(m.length/3),e=new Uint8Array(m.length/3),n=new Uint8Array(m.length/3);for(let i=0,r=0;i<m.length;i+=3,++r)t[r]=m[i],e[r]=m[i+1],n[r]=m[i+2];m=[t,e,n]}return m.width=p.width,m.height=p.height,m}getTiePoints(){if(!this.fileDirectory.ModelTiepoint)return[];const t=[];for(let e=0;e<this.fileDirectory.ModelTiepoint.length;e+=6)t.push({i:this.fileDirectory.ModelTiepoint[e],j:this.fileDirectory.ModelTiepoint[e+1],k:this.fileDirectory.ModelTiepoint[e+2],x:this.fileDirectory.ModelTiepoint[e+3],y:this.fileDirectory.ModelTiepoint[e+4],z:this.fileDirectory.ModelTiepoint[e+5]});return t}getGDALMetadata(t=null){const e={};if(!this.fileDirectory.GDAL_METADATA)return null;const n=this.fileDirectory.GDAL_METADATA;let i=At(n,"Item");i=null===t?i.filter((t=>void 0===wt(t,"sample"))):i.filter((e=>Number(wt(e,"sample"))===t));for(let t=0;t<i.length;++t){const n=i[t];e[wt(n,"name")]=n.inner}return e}getGDALNoData(){if(!this.fileDirectory.GDAL_NODATA)return null;const t=this.fileDirectory.GDAL_NODATA;return Number(t.substring(0,t.length-1))}getOrigin(){const t=this.fileDirectory.ModelTiepoint,e=this.fileDirectory.ModelTransformation;if(t&&6===t.length)return[t[3],t[4],t[5]];if(e)return[e[3],e[7],e[11]];throw new Error("The image does not have an affine transformation.")}getResolution(t=null){const e=this.fileDirectory.ModelPixelScale,n=this.fileDirectory.ModelTransformation;if(e)return[e[0],-e[1],e[2]];if(n)return 0===n[1]&&0===n[4]?[n[0],-n[5],n[10]]:[Math.sqrt(n[0]*n[0]+n[4]*n[4]),-Math.sqrt(n[1]*n[1]+n[5]*n[5]),n[10]];if(t){const[e,n,i]=t.getResolution();return[e*t.getWidth()/this.getWidth(),n*t.getHeight()/this.getHeight(),i*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}pixelIsArea(){return 1===this.geoKeys.GTRasterTypeGeoKey}getBoundingBox(t=!1){const e=this.getHeight(),n=this.getWidth();if(this.fileDirectory.ModelTransformation&&!t){const[t,i,r,s,o,a,l,h]=this.fileDirectory.ModelTransformation,u=[[0,0],[0,e],[n,0],[n,e]].map((([e,n])=>[s+t*e+i*n,h+o*e+a*n])),c=u.map((t=>t[0])),d=u.map((t=>t[1]));return[Math.min(...c),Math.min(...d),Math.max(...c),Math.max(...d)]}{const t=this.getOrigin(),i=this.getResolution(),r=t[0],s=t[1],o=r+i[0]*n,a=s+i[1]*e;return[Math.min(r,o),Math.min(s,a),Math.max(r,o),Math.max(s,a)]}}};class Rt{constructor(t){this._dataView=new DataView(t)}get buffer(){return this._dataView.buffer}getUint64(t,e){const n=this.getUint32(t,e),i=this.getUint32(t+4,e);let r;if(e){if(r=n+2**32*i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}if(r=2**32*n+i,!Number.isSafeInteger(r))throw new Error(`${r} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return r}getInt64(t,e){let n=0;const i=(128&this._dataView.getUint8(t+(e?7:0)))>0;let r=!0;for(let s=0;s<8;s++){let o=this._dataView.getUint8(t+(e?s:7-s));i&&(r?0!==o&&(o=255&~(o-1),r=!1):o=255&~o),n+=o*256**s}return i&&(n=-n),n}getUint8(t,e){return this._dataView.getUint8(t,e)}getInt8(t,e){return this._dataView.getInt8(t,e)}getUint16(t,e){return this._dataView.getUint16(t,e)}getInt16(t,e){return this._dataView.getInt16(t,e)}getUint32(t,e){return this._dataView.getUint32(t,e)}getInt32(t,e){return this._dataView.getInt32(t,e)}getFloat16(t,e){return bt(this._dataView,t,e)}getFloat32(t,e){return this._dataView.getFloat32(t,e)}getFloat64(t,e){return this._dataView.getFloat64(t,e)}}class It{constructor(t,e,n,i){this._dataView=new DataView(t),this._sliceOffset=e,this._littleEndian=n,this._bigTiff=i}get sliceOffset(){return this._sliceOffset}get sliceTop(){return this._sliceOffset+this.buffer.byteLength}get littleEndian(){return this._littleEndian}get bigTiff(){return this._bigTiff}get buffer(){return this._dataView.buffer}covers(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}readUint8(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}readInt8(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}readUint16(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}readInt16(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}readUint32(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}readInt32(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}readFloat32(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}readFloat64(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}readUint64(t){const e=this.readUint32(t),n=this.readUint32(t+4);let i;if(this._littleEndian){if(i=e+2**32*n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}if(i=2**32*e+n,!Number.isSafeInteger(i))throw new Error(`${i} exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues`);return i}readInt64(t){let e=0;const n=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0;let i=!0;for(let r=0;r<8;r++){let s=this._dataView.getUint8(t+(this._littleEndian?r:7-r));n&&(i?0!==s&&(s=255&~(s-1),i=!1):s=255&~s),e+=s*256**r}return n&&(e=-e),e}readOffset(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}}const Nt="\r\n\r\n";function Ft(t){if(void 0!==Object.fromEntries)return Object.fromEntries(t);const e={};for(const[n,i]of t)e[n.toLowerCase()]=i;return e}function kt(t){return Ft(t.split("\r\n").map((t=>{const e=t.split(":").map((t=>t.trim()));return e[0]=e[0].toLowerCase(),e})))}function Dt(t){let e,n,i;return t&&([,e,n,i]=t.match(/bytes (\d+)-(\d+)\/(\d+)/),e=parseInt(e,10),n=parseInt(n,10),i=parseInt(i,10)),{start:e,end:n,total:i}}class Ot{async fetch(t,e=void 0){return Promise.all(t.map((t=>this.fetchSlice(t,e))))}async fetchSlice(t){throw new Error(`fetching of slice ${t} not possible, not implemented`)}get fileSize(){return null}async close(){}}class jt extends Map{constructor(t={}){if(super(),!(t.maxSize&&t.maxSize>0))throw new TypeError("`maxSize` must be a number greater than 0");if("number"==typeof t.maxAge&&0===t.maxAge)throw new TypeError("`maxAge` must be a number greater than 0");this.maxSize=t.maxSize,this.maxAge=t.maxAge||Number.POSITIVE_INFINITY,this.onEviction=t.onEviction,this.cache=new Map,this.oldCache=new Map,this._size=0}_emitEvictions(t){if("function"==typeof this.onEviction)for(const[e,n]of t)this.onEviction(e,n.value)}_deleteIfExpired(t,e){return"number"==typeof e.expiry&&e.expiry<=Date.now()&&("function"==typeof this.onEviction&&this.onEviction(t,e.value),this.delete(t))}_getOrDeleteIfExpired(t,e){if(!1===this._deleteIfExpired(t,e))return e.value}_getItemValue(t,e){return e.expiry?this._getOrDeleteIfExpired(t,e):e.value}_peek(t,e){const n=e.get(t);return this._getItemValue(t,n)}_set(t,e){this.cache.set(t,e),this._size++,this._size>=this.maxSize&&(this._size=0,this._emitEvictions(this.oldCache),this.oldCache=this.cache,this.cache=new Map)}_moveToRecent(t,e){this.oldCache.delete(t),this._set(t,e)}*_entriesAscending(){for(const t of this.oldCache){const[e,n]=t;if(!this.cache.has(e)){!1===this._deleteIfExpired(e,n)&&(yield t)}}for(const t of this.cache){const[e,n]=t;!1===this._deleteIfExpired(e,n)&&(yield t)}}get(t){if(this.cache.has(t)){const e=this.cache.get(t);return this._getItemValue(t,e)}if(this.oldCache.has(t)){const e=this.oldCache.get(t);if(!1===this._deleteIfExpired(t,e))return this._moveToRecent(t,e),e.value}}set(t,e,{maxAge:n=this.maxAge}={}){const i="number"==typeof n&&n!==Number.POSITIVE_INFINITY?Date.now()+n:void 0;return this.cache.has(t)?this.cache.set(t,{value:e,expiry:i}):this._set(t,{value:e,expiry:i}),this}has(t){return this.cache.has(t)?!this._deleteIfExpired(t,this.cache.get(t)):!!this.oldCache.has(t)&&!this._deleteIfExpired(t,this.oldCache.get(t))}peek(t){return this.cache.has(t)?this._peek(t,this.cache):this.oldCache.has(t)?this._peek(t,this.oldCache):void 0}delete(t){const e=this.cache.delete(t);return e&&this._size--,this.oldCache.delete(t)||e}clear(){this.cache.clear(),this.oldCache.clear(),this._size=0}resize(t){if(!(t&&t>0))throw new TypeError("`maxSize` must be a number greater than 0");const e=[...this._entriesAscending()],n=e.length-t;n<0?(this.cache=new Map(e),this.oldCache=new Map,this._size=e.length):(n>0&&this._emitEvictions(e.slice(0,n)),this.oldCache=new Map(e.slice(n)),this.cache=new Map,this._size=0),this.maxSize=t}*keys(){for(const[t]of this)yield t}*values(){for(const[,t]of this)yield t}*[Symbol.iterator](){for(const t of this.cache){const[e,n]=t;!1===this._deleteIfExpired(e,n)&&(yield[e,n.value])}for(const t of this.oldCache){const[e,n]=t;if(!this.cache.has(e)){!1===this._deleteIfExpired(e,n)&&(yield[e,n.value])}}}*entriesDescending(){let t=[...this.cache];for(let e=t.length-1;e>=0;--e){const n=t[e],[i,r]=n;!1===this._deleteIfExpired(i,r)&&(yield[i,r.value])}t=[...this.oldCache];for(let e=t.length-1;e>=0;--e){const n=t[e],[i,r]=n;if(!this.cache.has(i)){!1===this._deleteIfExpired(i,r)&&(yield[i,r.value])}}}*entriesAscending(){for(const[t,e]of this._entriesAscending())yield[t,e.value]}get size(){if(!this._size)return this.oldCache.size;let t=0;for(const e of this.oldCache.keys())this.cache.has(e)||t++;return Math.min(this._size+t,this.maxSize)}entries(){return this.entriesAscending()}forEach(t,e=this){for(const[n,i]of this.entriesAscending())t.call(e,i,n,this)}get[Symbol.toStringTag](){return JSON.stringify([...this.entriesAscending()])}}class Gt extends Error{constructor(t){super(t),Error.captureStackTrace&&Error.captureStackTrace(this,Gt),this.name="AbortError"}}class Bt extends Error{constructor(t,e){super(e),this.errors=t,this.message=e,this.name="AggregateError"}}const zt=Bt;class qt{constructor(t,e,n=null){this.offset=t,this.length=e,this.data=n}get top(){return this.offset+this.length}}class Ut{constructor(t,e,n){this.offset=t,this.length=e,this.blockIds=n}}class Wt extends Ot{constructor(t,{blockSize:e=65536,cacheSize:n=100}={}){super(),this.source=t,this.blockSize=e,this.blockCache=new jt({maxSize:n,onEviction:(t,e)=>{this.evictedBlocks.set(t,e)}}),this.evictedBlocks=new Map,this.blockRequests=new Map,this.blockIdsToFetch=new Set,this.abortedBlockIds=new Set}get fileSize(){return this.source.fileSize}async fetch(t,e){const n=[],i=[],r=[];this.evictedBlocks.clear();for(const{offset:e,length:s}of t){let t=e+s;const{fileSize:o}=this;null!==o&&(t=Math.min(t,o));for(let s=Math.floor(e/this.blockSize)*this.blockSize;s<t;s+=this.blockSize){const t=Math.floor(s/this.blockSize);this.blockCache.has(t)||this.blockRequests.has(t)||(this.blockIdsToFetch.add(t),i.push(t)),this.blockRequests.has(t)&&n.push(this.blockRequests.get(t)),r.push(t)}}await async function(t){return new Promise((e=>setTimeout(e,t)))}(),this.fetchBlocks(e);const s=[];for(const t of i)this.blockRequests.has(t)&&s.push(this.blockRequests.get(t));await Promise.allSettled(n),await Promise.allSettled(s);const o=[],a=r.filter((t=>this.abortedBlockIds.has(t)||!this.blockCache.has(t)));if(a.forEach((t=>this.blockIdsToFetch.add(t))),a.length>0&&e&&!e.aborted){this.fetchBlocks(null);for(const t of a){const e=this.blockRequests.get(t);if(!e)throw new Error(`Block ${t} is not in the block requests`);o.push(e)}await Promise.allSettled(o)}if(e&&e.aborted)throw new Gt("Request was aborted");const l=r.map((t=>this.blockCache.get(t)||this.evictedBlocks.get(t))),h=l.filter((t=>!t));if(h.length)throw new zt(h,"Request failed");const u=new Map(function(t,e){const n=Array.isArray(t)?t:Array.from(t),i=Array.isArray(e)?e:Array.from(e);return n.map(((t,e)=>[t,i[e]]))}(r,l));return this.readSliceData(t,u)}fetchBlocks(t){if(this.blockIdsToFetch.size>0){const e=this.groupBlocks(this.blockIdsToFetch),n=this.source.fetch(e,t);for(let i=0;i<e.length;++i){const r=e[i];for(const e of r.blockIds)this.blockRequests.set(e,(async()=>{try{const t=(await n)[i],r=e*this.blockSize,s=r-t.offset,o=Math.min(s+this.blockSize,t.data.byteLength),a=t.data.slice(s,o),l=new qt(r,a.byteLength,a,e);this.blockCache.set(e,l),this.abortedBlockIds.delete(e)}catch(n){if("AbortError"!==n.name)throw n;n.signal=t,this.blockCache.delete(e),this.abortedBlockIds.add(e)}finally{this.blockRequests.delete(e)}})())}this.blockIdsToFetch.clear()}}groupBlocks(t){const e=Array.from(t).sort(((t,e)=>t-e));if(0===e.length)return[];let n=[],i=null;const r=[];for(const t of e)null===i||i+1===t?(n.push(t),i=t):(r.push(new Ut(n[0]*this.blockSize,n.length*this.blockSize,n)),n=[t],i=t);return r.push(new Ut(n[0]*this.blockSize,n.length*this.blockSize,n)),r}readSliceData(t,e){return t.map((t=>{let n=t.offset+t.length;null!==this.fileSize&&(n=Math.min(this.fileSize,n));const i=Math.floor(t.offset/this.blockSize),r=Math.floor(n/this.blockSize),s=new ArrayBuffer(t.length),o=new Uint8Array(s);for(let s=i;s<=r;++s){const i=e.get(s),r=i.offset-t.offset;let a,l=0,h=0;r<0?l=-r:r>0&&(h=r),a=i.top-n<0?i.length-l:n-i.offset-l;const u=new Uint8Array(i.data,l,a);o.set(u,h)}return s}))}}class $t{get ok(){return this.status>=200&&this.status<=299}get status(){throw new Error("not implemented")}getHeader(t){throw new Error("not implemented")}async getData(){throw new Error("not implemented")}}class Vt{constructor(t){this.url=t}async request({headers:t,signal:e}={}){throw new Error("request is not implemented")}}class Xt extends $t{constructor(t){super(),this.response=t}get status(){return this.response.status}getHeader(t){return this.response.headers.get(t)}async getData(){return this.response.arrayBuffer?await this.response.arrayBuffer():(await this.response.buffer()).buffer}}class Ht extends Vt{constructor(t,e){super(t),this.credentials=e}async request({headers:t,signal:e}={}){const n=await fetch(this.url,{headers:t,credentials:this.credentials,signal:e});return new Xt(n)}}class Yt extends $t{constructor(t,e){super(),this.xhr=t,this.data=e}get status(){return this.xhr.status}getHeader(t){return this.xhr.getResponseHeader(t)}async getData(){return this.data}}class Zt extends Vt{constructRequest(t,e){return new Promise(((n,i)=>{const r=new XMLHttpRequest;r.open("GET",this.url),r.responseType="arraybuffer";for(const[e,n]of Object.entries(t))r.setRequestHeader(e,n);r.onload=()=>{const t=r.response;n(new Yt(r,t))},r.onerror=i,r.onabort=()=>i(new Gt("Request aborted")),r.send(),e&&(e.aborted&&r.abort(),e.addEventListener("abort",(()=>r.abort())))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}var Kt=n(71141),Jt=n(52564),Qt=n(13440);class te extends $t{constructor(t,e){super(),this.response=t,this.dataPromise=e}get status(){return this.response.statusCode}getHeader(t){return this.response.headers[t]}async getData(){return await this.dataPromise}}class ee extends Vt{constructor(t){super(t),this.parsedUrl=Qt.parse(this.url),this.httpApi="http:"===this.parsedUrl.protocol?Kt:Jt}constructRequest(t,e){return new Promise(((n,i)=>{const r=this.httpApi.get({...this.parsedUrl,headers:t},(t=>{const e=new Promise((e=>{const n=[];t.on("data",(t=>{n.push(t)})),t.on("end",(()=>{const t=Buffer.concat(n).buffer;e(t)})),t.on("error",i)}));n(new te(t,e))}));r.on("error",i),e&&(e.aborted&&r.destroy(new Gt("Request aborted")),e.addEventListener("abort",(()=>r.destroy(new Gt("Request aborted")))))}))}async request({headers:t,signal:e}={}){return await this.constructRequest(t,e)}}class ne extends Ot{constructor(t,e,n,i){super(),this.client=t,this.headers=e,this.maxRanges=n,this.allowFullFile=i,this._fileSize=null}async fetch(t,e){return this.maxRanges>=t.length?this.fetchSlices(t,e):(this.maxRanges>0&&t.length,Promise.all(t.map((t=>this.fetchSlice(t,e)))))}async fetchSlices(t,e){const n=await this.client.request({headers:{...this.headers,Range:`bytes=${t.map((({offset:t,length:e})=>`${t}-${t+e}`)).join(",")}`},signal:e});if(n.ok){if(206===n.status){const{type:i,params:r}=function(t){const[e,...n]=t.split(";").map((t=>t.trim()));return{type:e,params:Ft(n.map((t=>t.split("="))))}}(n.getHeader("content-type"));if("multipart/byteranges"===i){const t=function(t,e){let n=null;const i=new TextDecoder("ascii"),r=[],s=`--${e}`,o=`${s}--`;for(let e=0;e<10;++e)i.decode(new Uint8Array(t,e,s.length))===s&&(n=e);if(null===n)throw new Error("Could not find initial boundary");for(;n<t.byteLength;){const e=i.decode(new Uint8Array(t,n,Math.min(s.length+1024,t.byteLength-n)));if(0===e.length||e.startsWith(o))break;if(!e.startsWith(s))throw new Error("Part does not start with boundary");const a=e.substr(s.length+2);if(0===a.length)break;const l=a.indexOf(Nt),h=kt(a.substr(0,l)),{start:u,end:c,total:d}=Dt(h["content-range"]),f=n+s.length+l+4,p=parseInt(c,10)+1-parseInt(u,10);r.push({headers:h,data:t.slice(f,f+p),offset:u,length:p,fileSize:d}),n=f+p+4}return r}(await n.getData(),r.boundary);return this._fileSize=t[0].fileSize||null,t}const s=await n.getData(),{start:o,end:a,total:l}=Dt(n.getHeader("content-range"));this._fileSize=l||null;const h=[{data:s,offset:o,length:a-o}];if(t.length>1){const n=await Promise.all(t.slice(1).map((t=>this.fetchSlice(t,e))));return h.concat(n)}return h}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await n.getData();return this._fileSize=t.byteLength,[{data:t,offset:0,length:t.byteLength}]}}throw new Error("Error fetching data.")}async fetchSlice(t,e){const{offset:n,length:i}=t,r=await this.client.request({headers:{...this.headers,Range:`bytes=${n}-${n+i}`},signal:e});if(r.ok){if(206===r.status){const t=await r.getData(),{total:e}=Dt(r.getHeader("content-range"));return this._fileSize=e||null,{data:t,offset:n,length:i}}{if(!this.allowFullFile)throw new Error("Server responded with full file");const t=await r.getData();return this._fileSize=t.byteLength,{data:t,offset:0,length:t.byteLength}}}throw new Error("Error fetching data.")}get fileSize(){return this._fileSize}}function ie(t,{blockSize:e,cacheSize:n}){return null===e?t:new Wt(t,{blockSize:e,cacheSize:n})}function re(t,{forceXHR:e=!1,...n}={}){return"function"!=typeof fetch||e?"undefined"!=typeof XMLHttpRequest?function(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const s=new Zt(t);return ie(new ne(s,e,n,i),r)}(t,n):function(t,{headers:e={},maxRanges:n=0,allowFullFile:i=!1,...r}={}){const s=new ee(t);return ie(new ne(s,e,n,i),r)}(t,n):function(t,{headers:e={},credentials:n,maxRanges:i=0,allowFullFile:r=!1,...s}={}){const o=new Ht(t,n);return ie(new ne(o,e,i,r),s)}(t,n)}class se extends Ot{constructor(t){super(),this.file=t}async fetchSlice(t,e){return new Promise(((n,i)=>{const r=this.file.slice(t.offset,t.offset+t.length),s=new FileReader;s.onload=t=>n(t.target.result),s.onerror=i,s.onabort=i,s.readAsArrayBuffer(r),e&&e.addEventListener("abort",(()=>s.abort()))}))}}function oe(t){switch(t){case i.s$.BYTE:case i.s$.ASCII:case i.s$.SBYTE:case i.s$.UNDEFINED:return 1;case i.s$.SHORT:case i.s$.SSHORT:return 2;case i.s$.LONG:case i.s$.SLONG:case i.s$.FLOAT:case i.s$.IFD:return 4;case i.s$.RATIONAL:case i.s$.SRATIONAL:case i.s$.DOUBLE:case i.s$.LONG8:case i.s$.SLONG8:case i.s$.IFD8:return 8;default:throw new RangeError(`Invalid field type: ${t}`)}}function ae(t,e,n,r){let s=null,o=null;const a=oe(e);switch(e){case i.s$.BYTE:case i.s$.ASCII:case i.s$.UNDEFINED:s=new Uint8Array(n),o=t.readUint8;break;case i.s$.SBYTE:s=new Int8Array(n),o=t.readInt8;break;case i.s$.SHORT:s=new Uint16Array(n),o=t.readUint16;break;case i.s$.SSHORT:s=new Int16Array(n),o=t.readInt16;break;case i.s$.LONG:case i.s$.IFD:s=new Uint32Array(n),o=t.readUint32;break;case i.s$.SLONG:s=new Int32Array(n),o=t.readInt32;break;case i.s$.LONG8:case i.s$.IFD8:s=new Array(n),o=t.readUint64;break;case i.s$.SLONG8:s=new Array(n),o=t.readInt64;break;case i.s$.RATIONAL:s=new Uint32Array(2*n),o=t.readUint32;break;case i.s$.SRATIONAL:s=new Int32Array(2*n),o=t.readInt32;break;case i.s$.FLOAT:s=new Float32Array(n),o=t.readFloat32;break;case i.s$.DOUBLE:s=new Float64Array(n),o=t.readFloat64;break;default:throw new RangeError(`Invalid field type: ${e}`)}if(e!==i.s$.RATIONAL&&e!==i.s$.SRATIONAL)for(let e=0;e<n;++e)s[e]=o.call(t,r+e*a);else for(let e=0;e<n;e+=2)s[e]=o.call(t,r+e*a),s[e+1]=o.call(t,r+(e*a+4));return e===i.s$.ASCII?new TextDecoder("utf-8").decode(s):s}class le{constructor(t,e,n){this.fileDirectory=t,this.geoKeyDirectory=e,this.nextIFDByteOffset=n}}class he extends Error{constructor(t){super(`No image at index ${t}`),this.index=t}}class ue{async readRasters(t={}){const{window:e,width:n,height:i}=t;let{resX:r,resY:s,bbox:o}=t;const a=await this.getImage();let l=a;const h=await this.getImageCount(),u=a.getBoundingBox();if(e&&o)throw new Error('Both "bbox" and "window" passed.');if(n||i){if(e){const[t,n]=a.getOrigin(),[i,r]=a.getResolution();o=[t+e[0]*i,n+e[1]*r,t+e[2]*i,n+e[3]*r]}const t=o||u;if(n){if(r)throw new Error("Both width and resX passed");r=(t[2]-t[0])/n}if(i){if(s)throw new Error("Both width and resY passed");s=(t[3]-t[1])/i}}if(r||s){const t=[];for(let e=0;e<h;++e){const n=await this.getImage(e),{SubfileType:i,NewSubfileType:r}=n.fileDirectory;(0===e||2===i||1&r)&&t.push(n)}t.sort(((t,e)=>t.getWidth()-e.getWidth()));for(let e=0;e<t.length;++e){const n=t[e],i=(u[2]-u[0])/n.getWidth(),o=(u[3]-u[1])/n.getHeight();if(l=n,r&&r>i||s&&s>o)break}}let c=e;if(o){const[t,e]=a.getOrigin(),[n,i]=l.getResolution(a);c=[Math.round((o[0]-t)/n),Math.round((o[1]-e)/i),Math.round((o[2]-t)/n),Math.round((o[3]-e)/i)],c=[Math.min(c[0],c[2]),Math.min(c[1],c[3]),Math.max(c[0],c[2]),Math.max(c[1],c[3])]}return l.readRasters({...t,window:c})}}class ce extends ue{constructor(t,e,n,i,r={}){super(),this.source=t,this.littleEndian=e,this.bigTiff=n,this.firstIFDOffset=i,this.cache=r.cache||!1,this.ifdRequests=[],this.ghostValues=null}async getSlice(t,e){const n=this.bigTiff?4048:1024;return new It((await this.source.fetch([{offset:t,length:void 0!==e?e:n}]))[0],t,this.littleEndian,this.bigTiff)}async parseFileDirectoryAt(t){const e=this.bigTiff?20:12,n=this.bigTiff?8:2;let r=await this.getSlice(t);const s=this.bigTiff?r.readUint64(t):r.readUint16(t),o=s*e+(this.bigTiff?16:6);r.covers(t,o)||(r=await this.getSlice(t,o));const a={};let l=t+(this.bigTiff?8:2);for(let t=0;t<s;l+=e,++t){const t=r.readUint16(l),e=r.readUint16(l+2),n=this.bigTiff?r.readUint64(l+4):r.readUint32(l+4);let s,o;const h=oe(e),u=l+(this.bigTiff?12:8);if(h*n<=(this.bigTiff?8:4))s=ae(r,e,n,u);else{const t=r.readOffset(u),i=oe(e)*n;if(r.covers(t,i))s=ae(r,e,n,t);else{s=ae(await this.getSlice(t,i),e,n,t)}}o=1===n&&-1===i.NZ.indexOf(t)&&e!==i.s$.RATIONAL&&e!==i.s$.SRATIONAL?s[0]:s,a[i.$[t]]=o}const h=function(t){const e=t.GeoKeyDirectory;if(!e)return null;const n={};for(let r=4;r<=4*e[3];r+=4){const s=i.Hm[e[r]],o=e[r+1]?i.$[e[r+1]]:null,a=e[r+2],l=e[r+3];let h=null;if(o){if(h=t[o],null==h)throw new Error(`Could not get value of geoKey '${s}'.`);"string"==typeof h?h=h.substring(l,l+a-1):h.subarray&&(h=h.subarray(l,l+a),1===a&&(h=h[0]))}else h=l;n[s]=h}return n}(a),u=r.readOffset(t+n+e*s);return new le(a,h,u)}async requestIFD(t){if(this.ifdRequests[t])return this.ifdRequests[t];if(0===t)return this.ifdRequests[t]=this.parseFileDirectoryAt(this.firstIFDOffset),this.ifdRequests[t];if(!this.ifdRequests[t-1])try{this.ifdRequests[t-1]=this.requestIFD(t-1)}catch(e){if(e instanceof he)throw new he(t);throw e}return this.ifdRequests[t]=(async()=>{const e=await this.ifdRequests[t-1];if(0===e.nextIFDByteOffset)throw new he(t);return this.parseFileDirectoryAt(e.nextIFDByteOffset)})(),this.ifdRequests[t]}async getImage(t=0){const e=await this.requestIFD(t);return new Pt(e.fileDirectory,e.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source)}async getImageCount(){let t=0,e=!0;for(;e;)try{await this.requestIFD(t),++t}catch(t){if(!(t instanceof he))throw t;e=!1}return t}async getGhostValues(){const t=this.bigTiff?16:8;if(this.ghostValues)return this.ghostValues;const e="GDAL_STRUCTURAL_METADATA_SIZE=";let n=await this.getSlice(t,130);if(e===ae(n,i.s$.ASCII,30,t)){const e=ae(n,i.s$.ASCII,130,t).split("\n")[0],r=Number(e.split("=")[1].split(" ")[0])+e.length;r>130&&(n=await this.getSlice(t,r));const s=ae(n,i.s$.ASCII,r,t);this.ghostValues={},s.split("\n").filter((t=>t.length>0)).map((t=>t.split("="))).forEach((([t,e])=>{this.ghostValues[t]=e}))}return this.ghostValues}static async fromSource(t,e,n){const i=(await t.fetch([{offset:0,length:1024}],n))[0],r=new Rt(i),s=r.getUint16(0,0);let o;if(18761===s)o=!0;else{if(19789!==s)throw new TypeError("Invalid byte order value.");o=!1}const a=r.getUint16(2,o);let l;if(42===a)l=!1;else{if(43!==a)throw new TypeError("Invalid magic number.");l=!0;if(8!==r.getUint16(4,o))throw new Error("Unsupported offset byte-size.")}const h=l?r.getUint64(8,o):r.getUint32(4,o);return new ce(t,o,l,h,e)}close(){return"function"==typeof this.source.close&&this.source.close()}}class de extends ue{constructor(t,e){super(),this.mainFile=t,this.overviewFiles=e,this.imageFiles=[t].concat(e),this.fileDirectoriesPerFile=null,this.fileDirectoriesPerFileParsing=null,this.imageCount=null}async parseFileDirectoriesPerFile(){const t=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map((t=>t.parseFileDirectoryAt(t.firstIFDOffset))));return this.fileDirectoriesPerFile=await Promise.all(t),this.fileDirectoriesPerFile}async getImage(t=0){await this.getImageCount(),await this.parseFileDirectoriesPerFile();let e=0,n=0;for(let i=0;i<this.imageFiles.length;i++){const r=this.imageFiles[i];for(let s=0;s<this.imageCounts[i];s++){if(t===e){const t=await r.requestIFD(n);return new Pt(t.fileDirectory,t.geoKeyDirectory,r.dataView,r.littleEndian,r.cache,r.source)}e++,n++}n=0}throw new RangeError("Invalid image index")}async getImageCount(){if(null!==this.imageCount)return this.imageCount;const t=[this.mainFile.getImageCount()].concat(this.overviewFiles.map((t=>t.getImageCount())));return this.imageCounts=await Promise.all(t),this.imageCount=this.imageCounts.reduce(((t,e)=>t+e),0),this.imageCount}}async function fe(t,e){return ce.fromSource(new se(t),e)}var pe=n(92814),ge=n(16235),me=n(31141),ye=n(55612),_e=n(25231),ve=n(45342),xe=n(12911),be=n(77779);function we(t,e){if(!t)return!1;if(!0===t)return!0;if(3!==e.getSamplesPerPixel())return!1;const n=e.fileDirectory.PhotometricInterpretation,r=i.ub;return n===r.CMYK||n===r.YCbCr||n===r.CIELab||n===r.ICCLab}const Ae="STATISTICS_MAXIMUM",Se="STATISTICS_MINIMUM";let Ee;function Te(){return Ee||(Ee=new l),Ee}function Ce(t){try{return t.getBoundingBox(!0)}catch{return[0,0,t.getWidth(),t.getHeight()]}}function Me(t){try{return t.getOrigin().slice(0,2)}catch{return[0,t.getHeight()]}}function Le(t,e){try{return t.getResolution(e)}catch{return[e.getWidth()/t.getWidth(),e.getHeight()/t.getHeight()]}}function Pe(t){const e=t.geoKeys;if(!e)return null;if(e.ProjectedCSTypeGeoKey&&32767!==e.ProjectedCSTypeGeoKey){const t="EPSG:"+e.ProjectedCSTypeGeoKey;let n=(0,_e.Jt)(t);if(!n){const i=(0,ye.q)(e.ProjLinearUnitsGeoKey);i&&(n=new _e.MF({code:t,units:i}))}return n}if(e.GeographicTypeGeoKey&&32767!==e.GeographicTypeGeoKey){const t="EPSG:"+e.GeographicTypeGeoKey;let n=(0,_e.Jt)(t);if(!n){const i=(0,ye.q)(e.GeogAngularUnitsGeoKey);i&&(n=new _e.MF({code:t,units:i}))}return n}return null}function Re(t){return t.getImageCount().then((function(e){const n=new Array(e);for(let i=0;i<e;++i)n[i]=t.getImage(i);return Promise.all(n)}))}function Ie(t,e){let n;return n=t.blob?fe(t.blob):t.overviews?async function(t,e=[],n={},i){const r=await ce.fromSource(re(t,n),i),s=await Promise.all(e.map((t=>ce.fromSource(re(t,n)))));return new de(r,s)}(t.url,t.overviews,e):async function(t,e={},n){return ce.fromSource(re(t,e),n)}(t.url,e),n.then(Re)}function Ne(t,e,n,i,r){if(Array.isArray(t)){const s=t.length;if(!Array.isArray(e)||s!=e.length){const t=new Error(i);throw r(t),t}for(let o=0;o<s;++o)Ne(t[o],e[o],n,i,r)}else if(Math.abs(t-e)>n*t)throw new Error(i)}function Fe(t){return t instanceof Int8Array?127:t instanceof Uint8Array||t instanceof Uint8ClampedArray?255:t instanceof Int16Array?32767:t instanceof Uint16Array?65535:t instanceof Int32Array?2147483647:t instanceof Uint32Array?4294967295:t instanceof Float32Array?34e37:255}class ke extends be.A{constructor(t){super({state:"loading",tileGrid:null,projection:t.projection||null,transition:t.transition,interpolate:!1!==t.interpolate,wrapX:t.wrapX}),this.sourceInfo_=t.sources;const e=this.sourceInfo_.length;this.sourceOptions_=t.sourceOptions,this.sourceImagery_=new Array(e),this.sourceMasks_=new Array(e),this.resolutionFactors_=new Array(e),this.samplesPerPixel_,this.nodataValues_,this.metadata_,this.normalize_=!1!==t.normalize,this.addAlpha_=!1,this.error_=null,this.convertToRGB_=t.convertToRGB||!1,this.setKey(this.sourceInfo_.map((t=>t.url)).join(","));const n=this,i=new Array(e);for(let t=0;t<e;++t)i[t]=Ie(this.sourceInfo_[t],this.sourceOptions_);Promise.all(i).then((function(t){n.configure_(t)})).catch((function(t){(0,pe.z3)(t),n.error_=t,n.setState("error")}))}getError(){return this.error_}determineProjection(t){const e=t[0];for(let t=e.length-1;t>=0;--t){const n=Pe(e[t]);if(n){this.projection=n;break}}}determineTransformMatrix(t){const e=t[0];for(let t=e.length-1;t>=0;--t){const n=e[t].fileDirectory.ModelTransformation;if(n){const[t,e,i,r,s,o,a,l]=n,h=(0,xe.lw)((0,xe.lw)([1/Math.sqrt(t*t+s*s),0,0,-1/Math.sqrt(e*e+o*o),r,l],[t,s,e,o,0,0]),[1,0,0,1,-r,-l]);this.transformMatrix=h,this.addAlpha_=!0;break}}}configure_(t){let e,n,i,r,s;const o=new Array(t.length),a=new Array(t.length),l=new Array(t.length);let h=0;const u=t.length;for(let c=0;c<u;++c){const u=[],d=[];t[c].forEach((t=>{4&~(t.fileDirectory.NewSubfileType||0)?u.push(t):d.push(t)}));const f=u.length;if(d.length>0&&d.length!==f)throw new Error(`Expected one mask per image found ${d.length} masks and ${f} images`);let p,g;const m=new Array(f),y=new Array(f),_=new Array(f);a[c]=new Array(f),l[c]=new Array(f);for(let t=0;t<f;++t){const e=u[t],n=e.getGDALNoData();l[c][t]=e.getGDALMetadata(0),a[c][t]=n;const i=this.sourceInfo_[c].bands;o[c]=i?i.length:e.getSamplesPerPixel();const r=f-(t+1);p||(p=Ce(e)),g||(g=Me(e));const s=Le(e,u[0]);_[r]=s[0];const h=[e.getTileWidth(),e.getTileHeight()];h[0]!==h[1]&&h[1]<256&&(h[0]=256,h[1]=256),m[r]=h;const d=s[0]/Math.abs(s[1]);y[r]=[h[0],h[1]/d]}if(e?(0,ge._N)(e,p,e):e=p,n){Ne(n,g,0,`Origin mismatch for source ${c}, got [${g}] but expected [${n}]`,this.viewRejector)}else n=g;if(s){s.length-h>_.length&&(h=s.length-_.length);const t=s[s.length-1]/_[_.length-1];this.resolutionFactors_[c]=t;const e=_.map((e=>e*t)),n=`Resolution mismatch for source ${c}, got [${e}] but expected [${s}]`;Ne(s.slice(h,s.length),e,.02,n,this.viewRejector)}else s=_,this.resolutionFactors_[c]=1;i?Ne(i.slice(h,i.length),y,.01,`Tile size mismatch for source ${c}`,this.viewRejector):i=y,r?Ne(r.slice(h,r.length),m,0,`Tile size mismatch for source ${c}`,this.viewRejector):r=m,this.sourceImagery_[c]=u.reverse(),this.sourceMasks_[c]=d.reverse()}for(let t=0,e=this.sourceImagery_.length;t<e;++t){const e=this.sourceImagery_[t];for(;e.length<s.length;)e.unshift(void 0)}this.getProjection()||this.determineProjection(t),this.determineTransformMatrix(t),this.samplesPerPixel_=o,this.nodataValues_=a,this.metadata_=l;t:for(let t=0;t<u;++t){if(void 0!==this.sourceInfo_[t].nodata){this.addAlpha_=!0;break}if(this.sourceMasks_[t].length){this.addAlpha_=!0;break}const e=a[t],n=this.sourceInfo_[t].bands;if(n){for(let t=0;t<n.length;++t)if(null!==e[n[t]-1]){this.addAlpha_=!0;break t}}else for(let t=0;t<e.length;++t)if(null!==e[t]){this.addAlpha_=!0;break t}}let c=this.addAlpha_?1:0;for(let t=0;t<u;++t)c+=o[t];this.bandCount=c;const d=new ve.A({extent:e,minZoom:h,origin:n,resolutions:s,tileSizes:i});this.tileGrid=d,this.setTileSizes(r),this.setLoader(this.loadTile_.bind(this)),this.setState("ready");2===s.length?s=[s[0],s[1],s[1]/2]:1===s.length&&(s=[2*s[0],s[0],s[0]/2]);let f=e;if(this.transformMatrix){const t=(0,xe.T9)((0,xe.vt)(),this.transformMatrix.slice()),n=(0,_e.HU)((e=>(0,xe.Bb)(t,e)));f=(0,ge.NW)(e,n)}this.viewResolver({showFullExtent:!0,projection:this.projection,resolutions:s,center:(0,_e.te)((0,ge.q1)(f),this.projection),extent:(0,_e.JR)(f,this.projection),zoom:1})}loadTile_(t,e,n,i){const r=this.getTileSize(t),s=this.sourceImagery_.length,o=new Array(2*s),a=this.nodataValues_,l=this.sourceInfo_,h=Te();for(let u=0;u<s;++u){const c=l[u],d=this.resolutionFactors_[u],f=[Math.round(e*(r[0]*d)),Math.round(n*(r[1]*d)),Math.round((e+1)*(r[0]*d)),Math.round((n+1)*(r[1]*d))],p=this.sourceImagery_[u][t];let g,m;c.bands&&(g=c.bands.map((function(t){return t-1}))),m="nodata"in c&&null!==c.nodata?c.nodata:g?g.map((function(t){return a[u][t]})):a[u];const y={window:f,width:r[0],height:r[1],samples:g,fillValue:m,pool:h,interleave:!1,signal:i.signal};we(this.convertToRGB_,p)?o[u]=p.readRGB(y):o[u]=p.readRasters(y);const _=s+u,v=this.sourceMasks_[u][t];v?o[_]=v.readRasters({window:f,width:r[0],height:r[1],samples:[0],pool:h,interleave:!1}):o[_]=Promise.resolve(null)}return Promise.all(o).then(this.composeTile_.bind(this,r)).catch((function(t){throw(0,pe.z3)(t),t}))}composeTile_(t,e){const n=this.metadata_,i=this.sourceInfo_,r=this.sourceImagery_.length,s=this.bandCount,o=this.samplesPerPixel_,a=this.nodataValues_,l=this.normalize_,h=this.addAlpha_,u=t[0]*t[1],c=u*s;let d;d=l?new Uint8Array(c):new Float32Array(c);let f=0;for(let t=0;t<u;++t){let s=h;for(let u=0;u<r;++u){const c=i[u];let g,m,y=c.min,_=c.max;if(l){const t=n[u][0];void 0===y&&(y=t&&Se in t?parseFloat(t[Se]):(p=e[u][0])instanceof Int8Array?-128:p instanceof Int16Array?-32768:p instanceof Int32Array?-2147483648:p instanceof Float32Array?12e-39:0),void 0===_&&(_=t&&Ae in t?parseFloat(t[Ae]):Fe(e[u][0])),g=255/(_-y),m=-y*g}for(let n=0;n<o[u];++n){const i=e[u][n][t];let r;if(r=l?(0,me.qE)(g*i+m,0,255):i,h){let t=c.nodata;if(void 0===t){let e;e=c.bands?c.bands[n]-1:n,t=a[u][e]}const e=isNaN(t);(!e&&i!==t||e&&!isNaN(i))&&(s=!1,d[f]=r)}else d[f]=r;f++}if(!s){const n=e[r+u];n&&!n[0][t]&&(s=!0)}}h&&(s||(d[f]=255),f++)}var p;return d}}ke.prototype.getView;var De=ke},52564:function(){},52613:function(t,e,n){"use strict";var i=n(69791),r=n(48729),s=n(91108),o=n(31141),a=n(86630),l=n(77691),h=n(19136),u=n(7992);const c="blur",d="gradient",f="radius",p=["#00f","#0ff","#0f0","#ff0","#f00"];class g extends u.A{constructor(t){t=t||{};const e=Object.assign({},t);delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.filter_=t.filter??!0,this.styleVariables_=t.variables||{},this.gradient_=null,this.addChangeListener(d,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:p),this.setBlur(void 0!==t.blur?t.blur:15),this.setRadius(void 0!==t.radius?t.radius:8);const n=t.weight?t.weight:"weight";this.weight_=n,this.setRenderOrder(null)}getBlur(){return this.get(c)}getGradient(){return this.get(d)}getRadius(){return this.get(f)}handleGradientChanged_(){this.gradient_=function(t){const e=1,n=256,r=(0,i.Y)(e,n),s=r.createLinearGradient(0,0,e,n),o=1/(t.length-1);for(let e=0,n=t.length;e<n;++e)s.addColorStop(e*o,t[e]);return r.fillStyle=s,r.fillRect(0,0,e,n),r.canvas}(this.getGradient())}setBlur(t){const e=this.get(c);this.set(c,t),"number"!=typeof t||"number"!=typeof e?this.clearRenderer():this.changed()}setGradient(t){this.set(d,t)}setRadius(t){const e=this.get(f);this.set(f,t),"number"!=typeof t||"number"!=typeof e?this.clearRenderer():this.changed()}setFilter(t){this.filter_=t,this.changed(),this.clearRenderer()}setWeight(t){this.weight_=t,this.changed(),this.clearRenderer()}createRenderer(){const t=new a.N,e=(0,s.z0)(),n=(0,l.s2)(e,this.filter_,r.T8);let i=(0,l.s2)(e,this.getRadius(),r.wl),u=(0,l.s2)(e,this.getBlur(),r.wl);const c={};"number"==typeof this.getBlur()&&(u="a_blur",c.a_blur=()=>this.getBlur(),t.addUniform("float a_blur")),"number"==typeof this.getRadius()&&(i="a_radius",c.a_radius=()=>this.getRadius(),t.addUniform("float a_radius"));const d={};let f=null;if("string"==typeof this.weight_||"function"==typeof this.weight_){const e="string"==typeof this.weight_?t=>t.get(this.weight_):this.weight_;d.prop_weight={size:1,callback:t=>{const n=e(t);return void 0!==n?(0,o.qE)(n,0,1):1}},f="a_prop_weight",t.addAttribute("a_prop_weight","float")}else{const t=["clamp",this.weight_,0,1];f=(0,l.s2)(e,t,r.wl)}t.addFragmentShaderFunction(`float getBlurSlope() {\n  float blur = max(1., ${u});\n  float radius = ${i};\n  return radius / blur;\n}`).setSymbolSizeExpression(`vec2(${i} + ${u}) * 2.`).setSymbolColorExpression(`vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * getBlurSlope()) * ${f})`).setStrokeColorExpression(`vec4(smoothstep(0., 1., (1. - length(currentRadiusPx * 2. / v_width)) * getBlurSlope()) * ${f})`).setStrokeWidthExpression(`(${i} + ${u}) * 2.`).setFillColorExpression(`vec4(${f})`).setFragmentDiscardExpression(`!${n}`),(0,l.mf)(t,e);const p=(0,l.mh)(e),g=(0,l.kc)(e,this.styleVariables_);return new h.A(this,{className:this.getClassName(),variables:this.styleVariables_,style:{builder:t,attributes:{...p,...d},uniforms:{...g,...c}},disableHitDetection:!1,postProcesses:[{fragmentShader:"\n            precision mediump float;\n\n            uniform sampler2D u_image;\n            uniform sampler2D u_gradientTexture;\n            uniform float u_opacity;\n\n            varying vec2 v_texCoord;\n\n            void main() {\n              vec4 color = texture2D(u_image, v_texCoord);\n              gl_FragColor.a = color.a * u_opacity;\n              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;\n              gl_FragColor.rgb *= gl_FragColor.a;\n            }",uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}renderDeclutter(){}}e.A=g},52724:function(t,e,n){"use strict";n.d(e,{A:function(){return R}});var i=n(38177),r=n(48729),s=n(12911),o=n(77163),a=n(77801),l=n(4666);const h="GENERATE_POLYGON_BUFFERS",u="GENERATE_POINT_BUFFERS",c="GENERATE_LINE_STRING_BUFFERS";var d=n(92982),f=n(91108),p=n(26238);function g(t,e,n,i){let r=0;for(const s in e){const o=e[s],a=o.callback.call(n,n.feature);let l=a?.[0]??a;l===f.t7&&console.warn('The "has" operator might return false positives.'),void 0===l?l=f.t7:null===l&&(l=0),t[i+r++]=l,o.size&&1!==o.size&&(t[i+r++]=a[1],o.size<3||(t[i+r++]=a[2],o.size<4||(t[i+r++]=a[3])))}return r}function m(t){return Object.keys(t).reduce(((e,n)=>e+(t[n].size||1)),0)}var y=n(36035);const _=[];let v;function x(){return v||(v=function(){const t='function t(t,n,x=2){const o=n&&n.length,i=o?n[0]*x:t.length;let u=e(t,0,i,x,!0);const l=[];if(!u||u.next===u.prev)return l;let c,h,y;if(o&&(u=function(t,n,r,x){const o=[];for(let r=0,i=n.length;r<i;r++){const u=e(t,n[r]*x,r<i-1?n[r+1]*x:t.length,x,!1);u===u.next&&(u.steiner=!0),o.push(a(u))}o.sort(f);for(let t=0;t<o.length;t++)r=s(o[t],r);return r}(t,n,u,x)),t.length>80*x){c=1/0,h=1/0;let e=-1/0,n=-1/0;for(let r=x;r<i;r+=x){const x=t[r],o=t[r+1];x<c&&(c=x),o<h&&(h=o),x>e&&(e=x),o>n&&(n=o)}y=Math.max(e-c,n-h),y=0!==y?32767/y:0}return r(u,l,x,c,h,y,0),l}function e(t,e,n,r,x){let o;if(x===function(t,e,n,r){let x=0;for(let o=e,i=n-r;o<n;o+=r)x+=(t[i]-t[o])*(t[o+1]+t[i+1]),i=o;return x}(t,e,n,r)>0)for(let x=e;x<n;x+=r)o=w(x/r|0,t[x],t[x+1],o);else for(let x=n-r;x>=e;x-=r)o=w(x/r|0,t[x],t[x+1],o);return o&&g(o,o.next)&&(A(o),o=o.next),o}function n(t,e){if(!t)return t;e||(e=t);let n,r=t;do{if(n=!1,r.steiner||!g(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(A(r),r=e=r.prev,r===r.next)break;n=!0}}while(n||r!==e);return e}function r(t,e,f,s,l,a,h){if(!t)return;!h&&a&&function(t,e,n,r){let x=t;do{0===x.z&&(x.z=c(x.x,x.y,e,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==t);x.prevZ.nextZ=null,x.prevZ=null,function(t){let e,n=1;do{let r,x=t;t=null;let o=null;for(e=0;x;){e++;let i=x,u=0;for(let t=0;t<n&&(u++,i=i.nextZ,i);t++);let f=n;for(;u>0||f>0&&i;)0!==u&&(0===f||!i||x.z<=i.z)?(r=x,x=x.nextZ,u--):(r=i,i=i.nextZ,f--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;x=i}o.nextZ=null,n*=2}while(e>1)}(x)}(t,s,l,a);let y=t;for(;t.prev!==t.next;){const c=t.prev,p=t.next;if(a?o(t,s,l,a):x(t))e.push(c.i,t.i,p.i),A(t),t=p.next,y=p.next;else if((t=p)===y){h?1===h?r(t=i(n(t),e),e,f,s,l,a,2):2===h&&u(t,e,f,s,l,a):r(n(t),e,f,s,l,a,1);break}}}function x(t){const e=t.prev,n=t,r=t.next;if(v(e,n,r)>=0)return!1;const x=e.x,o=n.x,i=r.x,u=e.y,f=n.y,s=r.y,l=Math.min(x,o,i),c=Math.min(u,f,s),a=Math.max(x,o,i),h=Math.max(u,f,s);let p=r.next;for(;p!==e;){if(p.x>=l&&p.x<=a&&p.y>=c&&p.y<=h&&y(x,u,o,f,i,s,p.x,p.y)&&v(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function o(t,e,n,r){const x=t.prev,o=t,i=t.next;if(v(x,o,i)>=0)return!1;const u=x.x,f=o.x,s=i.x,l=x.y,a=o.y,h=i.y,p=Math.min(u,f,s),g=Math.min(l,a,h),b=Math.max(u,f,s),M=Math.max(l,a,h),m=c(p,g,e,n,r),Z=c(b,M,e,n,r);let d=t.prevZ,w=t.nextZ;for(;d&&d.z>=m&&w&&w.z<=Z;){if(d.x>=p&&d.x<=b&&d.y>=g&&d.y<=M&&d!==x&&d!==i&&y(u,l,f,a,s,h,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,w.x>=p&&w.x<=b&&w.y>=g&&w.y<=M&&w!==x&&w!==i&&y(u,l,f,a,s,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.nextZ}for(;d&&d.z>=m;){if(d.x>=p&&d.x<=b&&d.y>=g&&d.y<=M&&d!==x&&d!==i&&y(u,l,f,a,s,h,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;w&&w.z<=Z;){if(w.x>=p&&w.x<=b&&w.y>=g&&w.y<=M&&w!==x&&w!==i&&y(u,l,f,a,s,h,w.x,w.y)&&v(w.prev,w,w.next)>=0)return!1;w=w.nextZ}return!0}function i(t,e){let r=t;do{const n=r.prev,x=r.next.next;!g(n,x)&&b(n,r,r.next,x)&&Z(n,x)&&Z(x,n)&&(e.push(n.i,r.i,x.i),A(r),A(r.next),r=t=x),r=r.next}while(r!==t);return n(r)}function u(t,e,x,o,i,u){let f=t;do{let t=f.next.next;for(;t!==f.prev;){if(f.i!==t.i&&p(f,t)){let s=d(f,t);return f=n(f,f.next),s=n(s,s.next),r(f,e,x,o,i,u,0),void r(s,e,x,o,i,u,0)}t=t.next}f=f.next}while(f!==t)}function f(t,e){let n=t.x-e.x;if(0===n&&(n=t.y-e.y,0===n)){n=(t.next.y-t.y)/(t.next.x-t.x)-(e.next.y-e.y)/(e.next.x-e.x)}return n}function s(t,e){const r=function(t,e){let n=e;const r=t.x,x=t.y;let o,i=-1/0;if(g(t,n))return n;do{if(g(t,n.next))return n.next;if(x<=n.y&&x>=n.next.y&&n.next.y!==n.y){const t=n.x+(x-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=r&&t>i&&(i=t,o=n.x<n.next.x?n:n.next,t===r))return o}n=n.next}while(n!==e);if(!o)return null;const u=o,f=o.x,s=o.y;let c=1/0;n=o;do{if(r>=n.x&&n.x>=f&&r!==n.x&&h(x<s?r:i,x,f,s,x<s?i:r,x,n.x,n.y)){const e=Math.abs(x-n.y)/(r-n.x);Z(n,t)&&(e<c||e===c&&(n.x>o.x||n.x===o.x&&l(o,n)))&&(o=n,c=e)}n=n.next}while(n!==u);return o}(t,e);if(!r)return e;const x=d(r,t);return n(x,x.next),n(r,r.next)}function l(t,e){return v(t.prev,t,e.prev)<0&&v(e.next,t,t.next)<0}function c(t,e,n,r,x){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-n)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function a(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function h(t,e,n,r,x,o,i,u){return(x-i)*(e-u)>=(t-i)*(o-u)&&(t-i)*(r-u)>=(n-i)*(e-u)&&(n-i)*(o-u)>=(x-i)*(r-u)}function y(t,e,n,r,x,o,i,u){return!(t===i&&e===u)&&h(t,e,n,r,x,o,i,u)}function p(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&b(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}(t,e)&&(Z(t,e)&&Z(e,t)&&function(t,e){let n=t,r=!1;const x=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&x<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==t);return r}(t,e)&&(v(t.prev,t,e.prev)||v(t,e.prev,e))||g(t,e)&&v(t.prev,t,t.next)>0&&v(e.prev,e,e.next)>0)}function v(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function g(t,e){return t.x===e.x&&t.y===e.y}function b(t,e,n,r){const x=m(v(t,e,n)),o=m(v(t,e,r)),i=m(v(n,r,t)),u=m(v(n,r,e));return x!==o&&i!==u||(!(0!==x||!M(t,n,e))||(!(0!==o||!M(t,r,e))||(!(0!==i||!M(n,t,r))||!(0!==u||!M(n,e,r)))))}function M(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function m(t){return t>0?1:t<0?-1:0}function Z(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function d(t,e){const n=E(t.i,t.x,t.y),r=E(e.i,e.x,e.y),x=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=x,x.prev=n,r.next=n,n.prev=r,o.next=r,r.prev=o,r}function w(t,e,n,r){const x=E(t,e,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function A(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function E(t,e,n){return{i:t,x:e,y:n,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function I(t,e){const n=e[0],r=e[1];return e[0]=t[0]*n+t[2]*r+t[4],e[1]=t[1]*n+t[3]*r+t[5],e}function z(t,e){const n=(r=e)[0]*r[3]-r[1]*r[2];var r;!function(t,e){if(!t)throw new Error(e)}(0!==n,"Transformation matrix cannot be inverted");const x=e[0],o=e[1],i=e[2],u=e[3],f=e[4],s=e[5];return t[0]=u/n,t[1]=-o/n,t[2]=-i/n,t[3]=x/n,t[4]=(i*s-u*f)/n,t[5]=-(x*s-o*f)/n,t}new Array(6);const F=[],P={vertexPosition:0,indexPosition:0};function B(t,e,n,r,x){t[e+0]=n,t[e+1]=r,t[e+2]=x}function N(t,e,n,r,x,o){const i=3+x,u=t[e+0],f=t[e+1],s=F;s.length=x;for(let n=0;n<s.length;n++)s[n]=t[e+2+n];let l=o?o.vertexPosition:0,c=o?o.indexPosition:0;const a=l/i;return B(n,l,u,f,0),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,1),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,2),s.length&&n.set(s,l+3),l+=i,B(n,l,u,f,3),s.length&&n.set(s,l+3),l+=i,r[c++]=a,r[c++]=a+1,r[c++]=a+3,r[c++]=a+1,r[c++]=a+2,r[c++]=a+3,P.vertexPosition=l,P.indexPosition=c,P}function R(t,e,n,r,x,o,i,u,f,s,l){const c=10+u.length,a=o.length/c,h=[t[e+0],t[e+1]],y=[t[n],t[n+1]],p=t[e+2],v=t[n+2],g=I(f,[...h]),b=I(f,[...y]);function M(t,e,n){const r=Math.sqrt((e[0]-t[0])*(e[0]-t[0])+(e[1]-t[1])*(e[1]-t[1])),x=[(e[0]-t[0])/r,(e[1]-t[1])/r],o=[-x[1],x[0]],i=Math.sqrt((n[0]-t[0])*(n[0]-t[0])+(n[1]-t[1])*(n[1]-t[1])),u=[(n[0]-t[0])/i,(n[1]-t[1])/i],f=0===r||0===i?0:Math.acos((s=u[0]*x[0]+u[1]*x[1],l=-1,c=1,Math.min(Math.max(s,l),c)));var s,l,c;return u[0]*o[0]+u[1]*o[1]>0?f:2*Math.PI-f}let m=-1,Z=-1,d=l;const w=null!==x;if(null!==r){m=M(g,b,I(f,[...[t[r],t[r+1]]])),Math.cos(m)<=.985&&(d+=Math.tan((m-Math.PI)/2))}if(w){Z=M(b,g,I(f,[...[t[x],t[x+1]]])),Math.cos(Z)<=.985&&(d+=Math.tan((Math.PI-Z)/2))}function A(t,e){return 0===e?1e4*t:Math.sign(e)*(1e4*t+Math.abs(e))}return o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(0,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(1,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(2,l)),o.push(...u),o.push(h[0],h[1],p,y[0],y[1],v,m,Z,s,A(3,l)),o.push(...u),i.push(a,a+1,a+2,a+1,a+3,a+2),{length:s+Math.sqrt((b[0]-g[0])*(b[0]-g[0])+(b[1]-g[1])*(b[1]-g[1])),angle:d}}function S(e,n,r,x,o){const i=2+o;let u=n;const f=e.slice(u,u+o);u+=o;const s=e[u++];let l=0;const c=new Array(s-1);for(let t=0;t<s;t++)l+=e[u++],t<s-1&&(c[t]=l);const a=e.slice(u,u+2*l),h=t(a,c,2);for(let t=0;t<h.length;t++)x.push(h[t]+r.length/i);for(let t=0;t<a.length;t+=2)r.push(a[t],a[t+1],...f);return u+2*l}const T="GENERATE_POLYGON_BUFFERS",_="GENERATE_POINT_BUFFERS",O="GENERATE_LINE_STRING_BUFFERS",U=self;U.onmessage=t=>{const e=t.data;switch(e.type){case _:{const t=3,n=2,r=e.customAttributesSize,x=n+r,o=new Float32Array(e.renderInstructions),i=o.length/x,u=4*i*(r+t),f=new Uint32Array(6*i),s=new Float32Array(u);let l;for(let t=0;t<o.length;t+=x)l=N(o,t,s,f,r,l);const c=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:o.buffer},e);U.postMessage(c,[s.buffer,f.buffer,o.buffer]);break}case O:{const t=[],n=[],r=e.customAttributesSize,x=3,o=new Float32Array(e.renderInstructions);let i=0;const u=[1,0,0,1,0,0];let f,s;for(z(u,e.renderInstructionsTransform);i<o.length;){s=Array.from(o.slice(i,i+r)),i+=r,f=o[i++];const e=i,l=i+(f-1)*x,c=o[e]===o[l]&&o[e+1]===o[l+1];let a=0,h=0;for(let r=0;r<f-1;r++){let y=null;r>0?y=i+(r-1)*x:c&&(y=l-x);let p=null;r<f-2?p=i+(r+2)*x:c&&(p=e+x);const v=R(o,i+r*x,i+(r+1)*x,y,p,t,n,s,u,a,h);a=v.length,h=v.angle}i+=f*x}const l=Uint32Array.from(n),c=Float32Array.from(t),a=Object.assign({vertexBuffer:c.buffer,indexBuffer:l.buffer,renderInstructions:o.buffer},e);U.postMessage(a,[c.buffer,l.buffer,o.buffer]);break}case T:{const t=[],n=[],r=e.customAttributesSize,x=new Float32Array(e.renderInstructions);let o=0;for(;o<x.length;)o=S(x,o,t,n,r);const i=Uint32Array.from(n),u=Float32Array.from(t),f=Object.assign({vertexBuffer:u.buffer,indexBuffer:i.buffer,renderInstructions:x.buffer},e);U.postMessage(f,[u.buffer,i.buffer,x.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+Buffer.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}()),v}let b=0;const w="a_position",A="a_index",S="a_segmentStart",E="a_segmentEnd",T="a_measureStart",C="a_measureEnd",M="a_parameters",L="a_joinAngles",P="a_distance";var R=class{constructor(t,e,n,i,r){this.helper_,this.hitDetectionEnabled_=!!i;let s=t;if(!("builder"in t)){const n=t,i=(0,y.my)(n.style,e,n.filter);s={builder:i.builder,attributes:i.attributes,uniforms:i.uniforms}}this.fillProgram_,this.strokeProgram_,this.symbolProgram_,this.hasFill_=!!s.builder.getFillVertexShader(),this.hasFill_&&(this.fillVertexShader_=s.builder.getFillVertexShader(),this.fillFragmentShader_=s.builder.getFillFragmentShader()),this.hasStroke_=!!s.builder.getStrokeVertexShader(),this.hasStroke_&&(this.strokeVertexShader_=s.builder.getStrokeVertexShader(),this.strokeFragmentShader_=s.builder.getStrokeFragmentShader()),this.hasSymbol_=!!s.builder.getSymbolVertexShader(),this.hasSymbol_&&(this.symbolVertexShader_=s.builder.getSymbolVertexShader(),this.symbolFragmentShader_=s.builder.getSymbolFragmentShader()),this.featureFilter_=null,r&&(this.featureFilter_=this.computeFeatureFilter(r));const o=this.hitDetectionEnabled_?{hitColor:{callback(){return(0,d.b)(this.ref,_)},size:4}}:{};this.customAttributes_=Object.assign({},o,s.attributes),this.uniforms_=s.uniforms;const l=Object.entries(this.customAttributes_).map((([t,e])=>({name:`a_${t}`,size:e.size||1,type:a.jQ.FLOAT})));this.polygonAttributesDesc_=[{name:w,size:2,type:a.jQ.FLOAT},...l],this.lineStringAttributesDesc_=[{name:S,size:2,type:a.jQ.FLOAT},{name:T,size:1,type:a.jQ.FLOAT},{name:E,size:2,type:a.jQ.FLOAT},{name:C,size:1,type:a.jQ.FLOAT},{name:L,size:2,type:a.jQ.FLOAT},{name:P,size:1,type:a.jQ.FLOAT},{name:M,size:1,type:a.jQ.FLOAT},...l],this.pointAttributesDesc_=[{name:w,size:2,type:a.jQ.FLOAT},{name:A,size:1,type:a.jQ.FLOAT},...l],this.setHelper(n)}computeFeatureFilter(t){const e=(0,r.SR)();let n;try{n=(0,i.n)(t,r.T8,e)}catch{return null}if(e.mapState||e.variables.size>0)return null;const s=(0,i.A)();return t=>{if(s.properties=t.getPropertiesInternal(),e.featureId){const e=t.getId();s.featureId=void 0!==e?e:null}return s.geometryType=(0,r.Ye)(t.getGeometry()),n(s)}}async generateBuffers(t,e){let n=t;if(this.featureFilter_&&(n=n.filter(this.featureFilter_),n.isEmpty()))return null;const i=this.generateRenderInstructions_(n,e),[r,o,a]=await Promise.all([this.generateBuffersForType_(i.polygonInstructions,"Polygon",e),this.generateBuffersForType_(i.lineStringInstructions,"LineString",e),this.generateBuffersForType_(i.pointInstructions,"Point",e)]);return{polygonBuffers:r,lineStringBuffers:o,pointBuffers:a,invertVerticesTransform:(0,s.T9)((0,s.vt)(),e)}}generateRenderInstructions_(t,e){const n=this.hasFill_?function(t,e,n,i){const r=2*t.verticesCount+(1+m(n))*t.geometriesCount+t.ringsCount;e&&e.length===r||(e=new Float32Array(r));const s=[];let o=0;for(const r in t.entries){const a=t.entries[r];for(let t=0,r=a.flatCoordss.length;t<r;t++){s.length=a.flatCoordss[t].length,(0,p.Rc)(a.flatCoordss[t],0,s.length,2,i,s),o+=g(e,n,a,o),e[o++]=a.ringsVerticesCounts[t].length;for(let n=0,i=a.ringsVerticesCounts[t].length;n<i;n++)e[o++]=a.ringsVerticesCounts[t][n];for(let t=0,n=s.length;t<n;t+=2)e[o++]=s[t],e[o++]=s[t+1]}}return e}(t.polygonBatch,new Float32Array(0),this.customAttributes_,e):null,i=this.hasStroke_?function(t,e,n,i){const r=3*t.verticesCount+(1+m(n))*t.geometriesCount;e&&e.length===r||(e=new Float32Array(r));const s=[];let o=0;for(const r in t.entries){const a=t.entries[r];for(let t=0,r=a.flatCoordss.length;t<r;t++){s.length=a.flatCoordss[t].length,(0,p.Rc)(a.flatCoordss[t],0,s.length,3,i,s,3),o+=g(e,n,a,o),e[o++]=s.length/3;for(let t=0,n=s.length;t<n;t+=3)e[o++]=s[t],e[o++]=s[t+1],e[o++]=s[t+2]}}return e}(t.lineStringBatch,new Float32Array(0),this.customAttributes_,e):null,r=this.hasSymbol_?function(t,e,n,i){const r=(2+m(n))*t.geometriesCount;e&&e.length===r||(e=new Float32Array(r));const o=[];let a=0;for(const r in t.entries){const l=t.entries[r];for(let t=0,r=l.flatCoordss.length;t<r;t++)o[0]=l.flatCoordss[t][0],o[1]=l.flatCoordss[t][1],(0,s.Bb)(i,o),e[a++]=o[0],e[a++]=o[1],a+=g(e,n,l,a)}return e}(t.pointBatch,new Float32Array(0),this.customAttributes_,e):null;return{polygonInstructions:n,lineStringInstructions:i,pointInstructions:r}}generateBuffersForType_(t,e,n){if(null===t)return null;const i=b++;let r;switch(e){case"Polygon":r=h;break;case"LineString":r=c;break;case"Point":r=u}const s={id:i,type:r,renderInstructions:t.buffer,renderInstructionsTransform:n,customAttributesSize:m(this.customAttributes_)},a=x();return a.postMessage(s,[t.buffer]),t=null,new Promise((t=>{const e=n=>{const r=n.data;if(r.id!==i)return;if(a.removeEventListener("message",e),!this.helper_.getGL())return;const s=new o.Ay(l.H7,l.Be).fromArrayBuffer(r.vertexBuffer),h=new o.Ay(l.IP,l.Be).fromArrayBuffer(r.indexBuffer);this.helper_.flushBufferData(s),this.helper_.flushBufferData(h),t([h,s])};a.addEventListener("message",e)}))}render(t,e,n){this.hasFill_&&this.renderInternal_(t.polygonBuffers[0],t.polygonBuffers[1],this.fillProgram_,this.polygonAttributesDesc_,e,n),this.hasStroke_&&this.renderInternal_(t.lineStringBuffers[0],t.lineStringBuffers[1],this.strokeProgram_,this.lineStringAttributesDesc_,e,n),this.hasSymbol_&&this.renderInternal_(t.pointBuffers[0],t.pointBuffers[1],this.symbolProgram_,this.pointAttributesDesc_,e,n)}renderInternal_(t,e,n,i,r,s){const o=t.getSize();0!==o&&(this.helper_.useProgram(n,r),this.helper_.bindBuffer(e),this.helper_.bindBuffer(t),this.helper_.enableAttributes(i),s(),this.helper_.drawElements(0,o))}setHelper(t,e=null){this.helper_=t,this.hasFill_&&(this.fillProgram_=this.helper_.getProgram(this.fillFragmentShader_,this.fillVertexShader_)),this.hasStroke_&&(this.strokeProgram_=this.helper_.getProgram(this.strokeFragmentShader_,this.strokeVertexShader_)),this.hasSymbol_&&(this.symbolProgram_=this.helper_.getProgram(this.symbolFragmentShader_,this.symbolVertexShader_)),this.helper_.addUniforms(this.uniforms_),e&&(e.polygonBuffers&&(this.helper_.flushBufferData(e.polygonBuffers[0]),this.helper_.flushBufferData(e.polygonBuffers[1])),e.lineStringBuffers&&(this.helper_.flushBufferData(e.lineStringBuffers[0]),this.helper_.flushBufferData(e.lineStringBuffers[1])),e.pointBuffers&&(this.helper_.flushBufferData(e.pointBuffers[0]),this.helper_.flushBufferData(e.pointBuffers[1])))}}},53285:function(t,e,n){"use strict";function i(){return[]}function r(t){return null==t?i:function(){return this.querySelectorAll(t)}}n.d(e,{A:function(){return r}})},53815:function(t,e,n){"use strict";n.d(e,{A:function(){return F}});const i=4294967296,r=1/i,s="undefined"==typeof TextDecoder?null:new TextDecoder("utf-8");class o{constructor(t=new Uint8Array(16)){this.buf=ArrayBuffer.isView(t)?t:new Uint8Array(t),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(t,e,n=this.length){for(;this.pos<n;){const n=this.readVarint(),i=n>>3,r=this.pos;this.type=7&n,t(i,e,this),this.pos===r&&this.skip(n)}return e}readMessage(t,e){return this.readFields(t,e,this.readVarint()+this.pos)}readFixed32(){const t=this.dataView.getUint32(this.pos,!0);return this.pos+=4,t}readSFixed32(){const t=this.dataView.getInt32(this.pos,!0);return this.pos+=4,t}readFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*i;return this.pos+=8,t}readSFixed64(){const t=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*i;return this.pos+=8,t}readFloat(){const t=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,t}readDouble(){const t=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,t}readVarint(t){const e=this.buf;let n,i;return i=e[this.pos++],n=127&i,i<128?n:(i=e[this.pos++],n|=(127&i)<<7,i<128?n:(i=e[this.pos++],n|=(127&i)<<14,i<128?n:(i=e[this.pos++],n|=(127&i)<<21,i<128?n:(i=e[this.pos],n|=(15&i)<<28,function(t,e,n){const i=n.buf;let r,s;if(s=i[n.pos++],r=(112&s)>>4,s<128)return a(t,r,e);if(s=i[n.pos++],r|=(127&s)<<3,s<128)return a(t,r,e);if(s=i[n.pos++],r|=(127&s)<<10,s<128)return a(t,r,e);if(s=i[n.pos++],r|=(127&s)<<17,s<128)return a(t,r,e);if(s=i[n.pos++],r|=(127&s)<<24,s<128)return a(t,r,e);if(s=i[n.pos++],r|=(1&s)<<31,s<128)return a(t,r,e);throw new Error("Expected varint not more than 10 bytes")}(n,t,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const t=this.readVarint();return t%2==1?(t+1)/-2:t/2}readBoolean(){return Boolean(this.readVarint())}readString(){const t=this.readVarint()+this.pos,e=this.pos;return this.pos=t,t-e>=12&&s?s.decode(this.buf.subarray(e,t)):function(t,e,n){let i="",r=e;for(;r<n;){const e=t[r];let s,o,a,l=null,h=e>239?4:e>223?3:e>191?2:1;if(r+h>n)break;1===h?e<128&&(l=e):2===h?(s=t[r+1],128==(192&s)&&(l=(31&e)<<6|63&s,l<=127&&(l=null))):3===h?(s=t[r+1],o=t[r+2],128==(192&s)&&128==(192&o)&&(l=(15&e)<<12|(63&s)<<6|63&o,(l<=2047||l>=55296&&l<=57343)&&(l=null))):4===h&&(s=t[r+1],o=t[r+2],a=t[r+3],128==(192&s)&&128==(192&o)&&128==(192&a)&&(l=(15&e)<<18|(63&s)<<12|(63&o)<<6|63&a,(l<=65535||l>=1114112)&&(l=null))),null===l?(l=65533,h=1):l>65535&&(l-=65536,i+=String.fromCharCode(l>>>10&1023|55296),l=56320|1023&l),i+=String.fromCharCode(l),r+=h}return i}(this.buf,e,t)}readBytes(){const t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e}readPackedVarint(t=[],e){const n=this.readPackedEnd();for(;this.pos<n;)t.push(this.readVarint(e));return t}readPackedSVarint(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSVarint());return t}readPackedBoolean(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readBoolean());return t}readPackedFloat(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFloat());return t}readPackedDouble(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readDouble());return t}readPackedFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed32());return t}readPackedSFixed32(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed32());return t}readPackedFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readFixed64());return t}readPackedSFixed64(t=[]){const e=this.readPackedEnd();for(;this.pos<e;)t.push(this.readSFixed64());return t}readPackedEnd(){return 2===this.type?this.readVarint()+this.pos:this.pos+1}skip(t){const e=7&t;if(0===e)for(;this.buf[this.pos++]>127;);else if(2===e)this.pos=this.readVarint()+this.pos;else if(5===e)this.pos+=4;else{if(1!==e)throw new Error(`Unimplemented type: ${e}`);this.pos+=8}}writeTag(t,e){this.writeVarint(t<<3|e)}realloc(t){let e=this.length||16;for(;e<this.pos+t;)e*=2;if(e!==this.length){const t=new Uint8Array(e);t.set(this.buf),this.buf=t,this.dataView=new DataView(t.buffer),this.length=e}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeSFixed32(t){this.realloc(4),this.dataView.setInt32(this.pos,t,!0),this.pos+=4}writeFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*r),!0),this.pos+=8}writeSFixed64(t){this.realloc(8),this.dataView.setInt32(this.pos,-1&t,!0),this.dataView.setInt32(this.pos+4,Math.floor(t*r),!0),this.pos+=8}writeVarint(t){(t=+t||0)>268435455||t<0?function(t,e){let n,i;t>=0?(n=t%4294967296|0,i=t/4294967296|0):(n=~(-t%4294967296),i=~(-t/4294967296),4294967295^n?n=n+1|0:(n=0,i=i+1|0));if(t>=0x10000000000000000||t<-0x10000000000000000)throw new Error("Given varint doesn't fit into 10 bytes");e.realloc(10),function(t,e,n){n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos++]=127&t|128,t>>>=7,n.buf[n.pos]=127&t}(n,0,e),function(t,e){const n=(7&t)<<4;if(e.buf[e.pos++]|=n|((t>>>=3)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;if(e.buf[e.pos++]=127&t|((t>>>=7)?128:0),!t)return;e.buf[e.pos++]=127&t}(i,e)}(t,this):(this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127))))}writeSVarint(t){this.writeVarint(t<0?2*-t-1:2*t)}writeBoolean(t){this.writeVarint(+t)}writeString(t){t=String(t),this.realloc(4*t.length),this.pos++;const e=this.pos;this.pos=function(t,e,n){for(let i,r,s=0;s<e.length;s++){if(i=e.charCodeAt(s),i>55295&&i<57344){if(!r){i>56319||s+1===e.length?(t[n++]=239,t[n++]=191,t[n++]=189):r=i;continue}if(i<56320){t[n++]=239,t[n++]=191,t[n++]=189,r=i;continue}i=r-55296<<10|i-56320|65536,r=null}else r&&(t[n++]=239,t[n++]=191,t[n++]=189,r=null);i<128?t[n++]=i:(i<2048?t[n++]=i>>6|192:(i<65536?t[n++]=i>>12|224:(t[n++]=i>>18|240,t[n++]=i>>12&63|128),t[n++]=i>>6&63|128),t[n++]=63&i|128)}return n}(this.buf,t,this.pos);const n=this.pos-e;n>=128&&l(e,n,this),this.pos=e-1,this.writeVarint(n),this.pos+=n}writeFloat(t){this.realloc(4),this.dataView.setFloat32(this.pos,t,!0),this.pos+=4}writeDouble(t){this.realloc(8),this.dataView.setFloat64(this.pos,t,!0),this.pos+=8}writeBytes(t){const e=t.length;this.writeVarint(e),this.realloc(e);for(let n=0;n<e;n++)this.buf[this.pos++]=t[n]}writeRawMessage(t,e){this.pos++;const n=this.pos;t(e,this);const i=this.pos-n;i>=128&&l(n,i,this),this.pos=n-1,this.writeVarint(i),this.pos+=i}writeMessage(t,e,n){this.writeTag(t,2),this.writeRawMessage(e,n)}writePackedVarint(t,e){e.length&&this.writeMessage(t,h,e)}writePackedSVarint(t,e){e.length&&this.writeMessage(t,u,e)}writePackedBoolean(t,e){e.length&&this.writeMessage(t,f,e)}writePackedFloat(t,e){e.length&&this.writeMessage(t,c,e)}writePackedDouble(t,e){e.length&&this.writeMessage(t,d,e)}writePackedFixed32(t,e){e.length&&this.writeMessage(t,p,e)}writePackedSFixed32(t,e){e.length&&this.writeMessage(t,g,e)}writePackedFixed64(t,e){e.length&&this.writeMessage(t,m,e)}writePackedSFixed64(t,e){e.length&&this.writeMessage(t,y,e)}writeBytesField(t,e){this.writeTag(t,2),this.writeBytes(e)}writeFixed32Field(t,e){this.writeTag(t,5),this.writeFixed32(e)}writeSFixed32Field(t,e){this.writeTag(t,5),this.writeSFixed32(e)}writeFixed64Field(t,e){this.writeTag(t,1),this.writeFixed64(e)}writeSFixed64Field(t,e){this.writeTag(t,1),this.writeSFixed64(e)}writeVarintField(t,e){this.writeTag(t,0),this.writeVarint(e)}writeSVarintField(t,e){this.writeTag(t,0),this.writeSVarint(e)}writeStringField(t,e){this.writeTag(t,2),this.writeString(e)}writeFloatField(t,e){this.writeTag(t,5),this.writeFloat(e)}writeDoubleField(t,e){this.writeTag(t,1),this.writeDouble(e)}writeBooleanField(t,e){this.writeVarintField(t,+e)}}function a(t,e,n){return n?4294967296*e+(t>>>0):4294967296*(e>>>0)+(t>>>0)}function l(t,e,n){const i=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));n.realloc(i);for(let e=n.pos-1;e>=t;e--)n.buf[e+i]=n.buf[e]}function h(t,e){for(let n=0;n<t.length;n++)e.writeVarint(t[n])}function u(t,e){for(let n=0;n<t.length;n++)e.writeSVarint(t[n])}function c(t,e){for(let n=0;n<t.length;n++)e.writeFloat(t[n])}function d(t,e){for(let n=0;n<t.length;n++)e.writeDouble(t[n])}function f(t,e){for(let n=0;n<t.length;n++)e.writeBoolean(t[n])}function p(t,e){for(let n=0;n<t.length;n++)e.writeFixed32(t[n])}function g(t,e){for(let n=0;n<t.length;n++)e.writeSFixed32(t[n])}function m(t,e){for(let n=0;n<t.length;n++)e.writeFixed64(t[n])}function y(t,e){for(let n=0;n<t.length;n++)e.writeSFixed64(t[n])}var _=n(77833),v=n(59286),x=n(7535),b=n(69727),w=n(40878),A=n(30470),S=n(66962),E=n(43438),T=n(25231),C=n(71442),M=n(72961);class L extends M.Ay{constructor(t){super(),t=t||{},this.dataProjection=new E.A({code:"",units:"tile-pixels"}),this.featureClass=t.featureClass?t.featureClass:C.Ay,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,n,i){t.pos=e.geometry;const r=t.readVarint()+t.pos;let s=1,o=0,a=0,l=0,h=0,u=0;for(;t.pos<r;){if(!o){const e=t.readVarint();s=7&e,o=e>>3}if(o--,1===s||2===s)a+=t.readSVarint(),l+=t.readSVarint(),1===s&&h>u&&(i.push(h),u=h),n.push(a,l),h+=2;else{if(7!==s)throw new Error("Invalid command found in the PBF");h>u&&(n.push(n[u],n[u+1]),h+=2)}}h>u&&(i.push(h),u=h)}createFeature_(t,e,n){const i=e.type;if(0===i)return null;let r;const s=e.properties;let o;this.idProperty_?(o=s[this.idProperty_],delete s[this.idProperty_]):o=e.id,s[this.layerName_]=e.layer.name;const a=[],l=[];this.readRawGeometry_(t,e,a,l);const h=function(t,e){let n;1===t?n=1===e?"Point":"MultiPoint":2===t?n=1===e?"LineString":"MultiLineString":3===t&&(n="Polygon");return n}(i,l.length);if(this.featureClass===C.Ay)r=new this.featureClass(h,a,l,2,s,o),r.transform(n.dataProjection);else{let t;if("Polygon"==h){const e=(0,S.yJ)(a,l);t=e.length>1?new b.A(a,"XY",e):new A.Ay(a,"XY",l)}else t="Point"===h?new w.A(a,"XY"):"LineString"===h?new _.A(a,"XY"):"MultiPoint"===h?new x.A(a,"XY"):"MultiLineString"===h?new v.A(a,"XY",l):null;r=new(0,this.featureClass),this.geometryName_&&r.setGeometryName(this.geometryName_);const e=(0,M.hX)(t,!1,n);r.setGeometry(e),void 0!==o&&r.setId(o),r.setProperties(s,!0)}return r}getType(){return"arraybuffer"}readFeatures(t,e){const n=this.layers_;e=this.adaptOptions(e);const i=(0,T.Jt)(e.dataProjection);i.setWorldExtent(e.extent),e.dataProjection=i;const r=new o(t),s=r.readFields(P,{}),a=[];for(const t in s){if(n&&!n.includes(t))continue;const o=s[t],l=o?[0,0,o.extent,o.extent]:null;i.setExtent(l);for(let t=0,n=o.length;t<n;++t){const n=N(r,o,t),i=this.createFeature_(r,n,e);null!==i&&a.push(i)}}return a}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function P(t,e,n){if(3===t){const t={keys:[],values:[],features:[]},i=n.readVarint()+n.pos;n.readFields(R,t,i),t.length=t.features.length,t.length&&(e[t.name]=t)}}function R(t,e,n){if(15===t)e.version=n.readVarint();else if(1===t)e.name=n.readString();else if(5===t)e.extent=n.readVarint();else if(2===t)e.features.push(n.pos);else if(3===t)e.keys.push(n.readString());else if(4===t){let i=null;const r=n.readVarint()+n.pos;for(;n.pos<r;)i=1===(t=n.readVarint()>>3)?n.readString():2===t?n.readFloat():3===t?n.readDouble():4===t?n.readVarint64():5===t?n.readVarint():6===t?n.readSVarint():7===t?n.readBoolean():null;e.values.push(i)}}function I(t,e,n){if(1==t)e.id=n.readVarint();else if(2==t){const t=n.readVarint()+n.pos;for(;n.pos<t;){const t=e.layer.keys[n.readVarint()],i=e.layer.values[n.readVarint()];e.properties[t]=i}}else 3==t?e.type=n.readVarint():4==t&&(e.geometry=n.pos)}function N(t,e,n){t.pos=e.features[n];const i=t.readVarint()+t.pos,r={layer:e,type:0,properties:{}};return t.readFields(I,r,i),r}var F=L},54209:function(t,e){"use strict";e.A=class{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}},54272:function(t,e,n){"use strict";var i=n(54209),r=n(56430),s=n(99157),o=n(69791),a=n(18381),l=n(22685),h=n(16235),u=n(47085),c=n(12185),d=n(12911),f=n(37759),p=n(73465),g=n(31716),m=n(28025);function y(t){return function(e){const n=e.buffers,i=e.meta,r=e.imageOps,s=e.width,o=e.height,a=n.length,l=n[0].byteLength;if(r){const e=new Array(a);for(let t=0;t<a;++t)e[t]=new ImageData(new Uint8ClampedArray(n[t]),s,o);return t(e,i).data.buffer}const h=new Uint8ClampedArray(l),u=new Array(a),c=new Array(a);for(let t=0;t<a;++t)u[t]=new Uint8ClampedArray(n[t]),c[t]=[0,0,0,0];for(let e=0;e<l;e+=4){for(let t=0;t<a;++t){const n=u[t];c[t][0]=n[e],c[t][1]=n[e+1],c[t][2]=n[e+2],c[t][3]=n[e+3]}const n=t(c,i);h[e]=n[0],h[e+1]=n[1],h[e+2]=n[2],h[e+3]=n[3]}return h.buffer}}function _(t,e){const n=Object.keys(t.lib||{}).map((function(e){return"const "+e+" = "+t.lib[e].toString()+";"})).concat(["const __minion__ = ("+y.toString()+")(",t.operation.toString(),");",'self.addEventListener("message", function(event) {',"  const buffer = __minion__(event.data);","  self.postMessage({buffer: buffer, meta: event.data.meta}, [buffer]);","});"]),i=new Worker("undefined"==typeof Blob?"data:text/javascript;base64,"+Buffer.from(n.join("\n"),"binary").toString("base64"):URL.createObjectURL(new Blob(n,{type:"text/javascript"})));return i.addEventListener("message",e),i}class v extends i.A{constructor(t){let e;super(),this.imageOps_=!!t.imageOps,e=0===t.threads?0:this.imageOps_?1:t.threads||1;const n=new Array(e);if(e)for(let i=0;i<e;++i)n[i]=_(t,this.onWorkerMessage_.bind(this,i));else n[0]=function(t,e){const n=y(t.operation);let i=!1;return{postMessage:function(t){setTimeout((function(){i||e({data:{buffer:n(t),meta:t.meta}})}),0)},terminate:function(){i=!0}}}(t,this.onWorkerMessage_.bind(this,0));this.workers_=n,this.queue_=[],this.maxQueueLength_=t.queue||1/0,this.running_=0,this.dataLookup_={},this.job_=null}process(t,e,n){this.enqueue_({inputs:t,meta:e,callback:n}),this.dispatch_()}enqueue_(t){for(this.queue_.push(t);this.queue_.length>this.maxQueueLength_;)this.queue_.shift().callback(null,null)}dispatch_(){if(this.running_||0===this.queue_.length)return;const t=this.queue_.shift();this.job_=t;const e=t.inputs[0].width,n=t.inputs[0].height,i=t.inputs.map((function(t){return t.data.buffer})),r=this.workers_.length;if(this.running_=r,1===r)return void this.workers_[0].postMessage({buffers:i,meta:t.meta,imageOps:this.imageOps_,width:e,height:n},i);const s=t.inputs[0].data.length,o=4*Math.ceil(s/4/r);for(let s=0;s<r;++s){const r=s*o,a=[];for(let t=0,e=i.length;t<e;++t)a.push(i[t].slice(r,r+o));this.workers_[s].postMessage({buffers:a,meta:t.meta,imageOps:this.imageOps_,width:e,height:n},a)}}onWorkerMessage_(t,e){this.disposed||(this.dataLookup_[t]=e.data,--this.running_,0===this.running_&&this.resolveJob_())}resolveJob_(){const t=this.job_,e=this.workers_.length;let n,i;if(1===e)n=new Uint8ClampedArray(this.dataLookup_[0].buffer),i=this.dataLookup_[0].meta;else{const r=t.inputs[0].data.length;n=new Uint8ClampedArray(r),i=new Array(e);const s=4*Math.ceil(r/4/e);for(let t=0;t<e;++t){const e=this.dataLookup_[t].buffer,r=t*s;n.set(new Uint8ClampedArray(e),r),i[t]=this.dataLookup_[t].meta}}this.job_=null,this.dataLookup_={},t.callback(null,new ImageData(n,t.inputs[0].width,t.inputs[0].height),i),this.dispatch_()}disposeInternal(){for(let t=0;t<this.workers_.length;++t)this.workers_[t].terminate();this.workers_.length=0}}const x="beforeoperations",b="afteroperations";class w extends a.Ay{constructor(t,e,n){super(t),this.extent=e.extent,this.resolution=e.viewState.resolution/e.pixelRatio,this.data=n}}class A extends p.Ay{constructor(t){super({projection:null}),this.on,this.once,this.un,this.processor_=null,this.operationType_=void 0!==t.operationType?t.operationType:"pixel",this.threads_=void 0!==t.threads?t.threads:1,this.layers_=function(t){const e=t.length,n=new Array(e);for(let i=0;i<e;++i)n[i]=T(t[i]);return n}(t.sources);const e=this.changed.bind(this);for(let t=0,n=this.layers_.length;t<n;++t)this.layers_[t].addEventListener(l.A.CHANGE,e);var n;this.useResolutions_=null!==t.resolutions,this.tileQueue_=new s.A((function(){return 1}),this.processSources_.bind(this)),this.requestedFrameState_,this.renderedImageCanvas_=null,this.renderedRevision_,this.frameState_={animate:!1,coordinateToPixelTransform:(0,d.vt)(),declutter:null,extent:null,index:0,layerIndex:0,layerStatesArray:(n=this.layers_,n.map((function(t){return t.getLayerState()}))),pixelRatio:1,pixelToCoordinateTransform:(0,d.vt)(),postRenderFunctions:[],size:[0,0],tileQueue:this.tileQueue_,time:Date.now(),usedTiles:{},viewState:{rotation:0},viewHints:[],wantedTiles:{},mapId:(0,f.v6)(this),renderTargets:{}},this.setAttributions((function(e){const n=[];for(let i=0,r=t.sources.length;i<r;++i){const r=t.sources[i],s=r instanceof g.A?r:r.getSource();if(!s)continue;const o=s.getAttributions()?.(e);"string"==typeof o?n.push(o):void 0!==o&&n.push(...o)}return n})),void 0!==t.operation&&this.setOperation(t.operation,t.lib)}setOperation(t,e){this.processor_&&this.processor_.dispose(),this.processor_=new v({operation:t,imageOps:"image"===this.operationType_,queue:1,lib:e,threads:this.threads_}),this.changed()}updateFrameState_(t,e,n){const i=Object.assign({},this.frameState_);i.viewState=Object.assign({},i.viewState);const r=(0,h.q1)(t);i.size[0]=Math.ceil((0,h.RG)(t)/e),i.size[1]=Math.ceil((0,h.Oq)(t)/e),i.extent=[r[0]-i.size[0]*e/2,r[1]-i.size[1]*e/2,r[0]+i.size[0]*e/2,r[1]+i.size[1]*e/2],i.time=Date.now();const s=i.viewState;return s.center=r,s.projection=n,s.resolution=e,i}allSourcesReady_(){let t,e=!0;for(let n=0,i=this.layers_.length;n<i;++n)if(t=this.layers_[n].getSource(),!t||"ready"!==t.getState()){e=!1;break}return e}getImage(t,e,n,i){if(!this.allSourcesReady_())return null;this.tileQueue_.loadMoreTiles(16,16),e=this.findNearestResolution(e);const r=this.updateFrameState_(t,e,i);if(this.requestedFrameState_=r,this.renderedImageCanvas_){const t=this.renderedImageCanvas_.getResolution(),n=this.renderedImageCanvas_.getExtent();e===t&&(0,h.aI)(r.extent,n)||(this.renderedImageCanvas_=null)}return this.renderedImageCanvas_&&this.getRevision()===this.renderedRevision_||this.processSources_(),r.animate&&requestAnimationFrame(this.changed.bind(this)),this.renderedImageCanvas_}processSources_(){const t=this.requestedFrameState_,e=this.layers_.length,n=new Array(e);for(let i=0;i<e;++i){t.layerIndex=i,t.renderTargets={};const e=E(this.layers_[i],t);if(!e)return;n[i]=e}const i={};this.dispatchEvent(new w(x,t,i)),this.processor_.process(n,i,this.onWorkerComplete_.bind(this,t))}onWorkerComplete_(t,e,n,i){if(e||!n)return;const s=t.extent,a=t.viewState.resolution;if(a!==this.requestedFrameState_.viewState.resolution||!(0,h.aI)(s,this.requestedFrameState_.extent))return;let l;if(this.renderedImageCanvas_)l=this.renderedImageCanvas_.getImage().getContext("2d");else{const t=Math.round((0,h.RG)(s)/a),e=Math.round((0,h.Oq)(s)/a);l=(0,o.Y)(t,e),this.renderedImageCanvas_=new r.A(s,a,1,l.canvas)}l.putImageData(n,0,0),t.animate?requestAnimationFrame(this.changed.bind(this)):this.changed(),this.renderedRevision_=this.getRevision(),this.dispatchEvent(new w(b,t,i))}getResolutions(t){if(!this.useResolutions_)return null;let e=super.getResolutions();if(!e)for(let n=0,i=this.layers_.length;n<i;++n){if(e=this.layers_[n].getSource().getResolutions(t),e)break}return e}disposeInternal(){this.processor_&&this.processor_.dispose(),super.disposeInternal()}}A.prototype.dispose;let S=null;function E(t,e){const n=t.getRenderer();if(!n)throw new Error("Unsupported layer type: "+t);if(!n.prepareFrame(e))return null;const i=e.size[0],r=e.size[1];if(0===i||0===r)return null;const s=n.renderFrame(e,null);let a;if(s instanceof HTMLCanvasElement)a=s;else{if(s&&(a=s.firstElementChild),!(a instanceof HTMLCanvasElement))throw new Error("Unsupported rendered element: "+a);if(a.width===i&&a.height===r){return a.getContext("2d").getImageData(0,0,i,r)}}if(S){const t=S.canvas;t.width!==i||t.height!==r?S=(0,o.Y)(i,r,void 0,{willReadFrequently:!0}):S.clearRect(0,0,i,r)}else S=(0,o.Y)(i,r,void 0,{willReadFrequently:!0});return S.drawImage(a,0,0,i,r),S.getImageData(0,0,i,r)}function T(t){let e;return t instanceof g.A?t instanceof m.A?e=new c.A({source:t}):t instanceof p.Ay&&(e=new u.A({source:t})):e=t,e}e.Ay=A},55238:function(t,e,n){"use strict";var i=n(10135),r=n(38376);class s extends r.A{constructor(t){const e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857",n=void 0!==t.tileGrid?t.tileGrid:(0,i.EN)({extent:(0,i.kZ)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}e.A=s},55280:function(t,e,n){"use strict";n.d(e,{Eo:function(){return a},gY:function(){return h},j:function(){return l},nl:function(){return u}});var i=n(61829),r=n(37759);const s=.5,o={Point:function(t,e,n,r,s,o){const a=n.getImage(),l=n.getText(),h=l&&l.getText(),u=o&&a&&h?{}:void 0;if(a){if(a.getImageState()!=i.A.LOADED)return;const o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(a,u),o.drawPoint(e,r,s)}if(h){const i=t.getBuilder(n.getZIndex(),"Text");i.setTextStyle(l,u),i.drawText(e,r,s)}},LineString:function(t,e,n,i,r){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,i,r)}},Polygon:function(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i,r)}},MultiPoint:function(t,e,n,r,s,o){const a=n.getImage(),l=a&&0!==a.getOpacity(),h=n.getText(),u=h&&h.getText(),c=o&&l&&u?{}:void 0;if(l){if(a.getImageState()!=i.A.LOADED)return;const o=t.getBuilder(n.getZIndex(),"Image");o.setImageStyle(a,c),o.drawMultiPoint(e,r,s)}if(u){const i=t.getBuilder(n.getZIndex(),"Text");i.setTextStyle(h,c),i.drawText(e,r,s)}},MultiLineString:function(t,e,n,i,r){const s=n.getStroke();if(s){const o=t.getBuilder(n.getZIndex(),"LineString");o.setFillStrokeStyle(null,s),o.drawMultiLineString(e,i,r)}const o=n.getText();if(o&&o.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(o),s.drawText(e,i,r)}},MultiPolygon:function(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(o||s){const a=t.getBuilder(n.getZIndex(),"Polygon");a.setFillStrokeStyle(s,o),a.drawMultiPolygon(e,i,r)}const a=n.getText();if(a&&a.getText()){const s=t.getBuilder(n.getZIndex(),"Text");s.setTextStyle(a),s.drawText(e,i,r)}},GeometryCollection:function(t,e,n,i,r,s){const a=e.getGeometriesArray();let l,h;for(l=0,h=a.length;l<h;++l){(0,o[a[l].getType()])(t,a[l],n,i,r,s)}},Circle:function(t,e,n,i,r){const s=n.getFill(),o=n.getStroke();if(s||o){const a=t.getBuilder(n.getZIndex(),"Circle");a.setFillStrokeStyle(s,o),a.drawCircle(e,i,r)}const a=n.getText();if(a&&a.getText()){const r=t.getBuilder(n.getZIndex(),"Text");r.setTextStyle(a),r.drawText(e,i)}}};function a(t,e){return parseInt((0,r.v6)(t),10)-parseInt((0,r.v6)(e),10)}function l(t,e){const n=h(t,e);return n*n}function h(t,e){return s*t/e}function u(t,e,n,r,s,a,l,h){const u=[],d=n.getImage();if(d){let t=!0;const e=d.getImageState();e==i.A.LOADED||e==i.A.ERROR?t=!1:e==i.A.IDLE&&d.load(),t&&u.push(d.ready())}const f=n.getFill();f&&f.loading()&&u.push(f.ready());const p=u.length>0;return p&&Promise.all(u).then((()=>s(null))),function(t,e,n,i,r,s,a){const l=n.getGeometryFunction()(e);if(!l)return;const h=l.simplifyTransformed(i,r),u=n.getRenderer();if(u)c(t,h,n,e,a);else{(0,o[h.getType()])(t,h,n,e,a,s)}}(t,e,n,r,a,l,h),p}function c(t,e,n,i,r){if("GeometryCollection"==e.getType()){const s=e.getGeometries();for(let e=0,o=s.length;e<o;++e)c(t,s[e],n,i,r);return}t.getBuilder(n.getZIndex(),"Default").drawCustom(e,i,n.getRenderer(),n.getHitDetectionRenderer(),r)}},55612:function(t,e,n){"use strict";n.d(e,{I:function(){return s},q:function(){return r}});const i={9001:"m",9002:"ft",9003:"us-ft",9101:"radians",9102:"degrees"};function r(t){return i[t]}const s={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937}},55721:function(t,e,n){"use strict";n.d(e,{et:function(){return x},gF:function(){return g}});var i=n(24366),r=n(30942),s=n(44090),o=n(16235),a=n(25231),l=n(3974),h=n(38993),u=n(62994),c=n(12911),d=n(37759),f=n(9466),p=n(93908);const g={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"};function m(t){return 1/(t+2)}function y(t,e){return t.tileIds.has((0,d.v6)(e))}function _(t,e,n){const i=t.representationsByZ;n in i||(i[n]=new Set),i[n].add(e),t.tileIds.add((0,d.v6)(e.tile))}function v(t,e){const n=t.layerStatesArray[t.layerIndex];n.extent&&(e=(0,o._N)(e,(0,a.SD)(n.extent,t.viewState.projection)));const i=n.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(t.viewState.projection).getExtent();n&&(e=(0,o._N)(e,n))}return e}function x(t,e){return`${t.getKey()},${t.getRevision()},${(0,u.i7)(e)}`}class b extends p.A{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=(0,c.vt)(),this.tempMat4=(0,f.vt)(),this.tempTileRange_=new i.A(0,0,0,0),this.tempTileCoord_=(0,u.N)(0,0,0),this.tempSize_=[0,0];const n=void 0!==e.cacheSize?e.cacheSize:512;this.tileRepresentationCache=new h.A(n),this.frameState=null,this.renderedProjection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}prepareFrameInternal(t){this.renderedProjection_?t.viewState.projection!==this.renderedProjection_&&(this.clearCache(),this.renderedProjection_=t.viewState.projection):this.renderedProjection_=t.viewState.projection;const e=this.getLayer().getRenderSource();return!!e&&(!(0,o.Im)(v(t,t.extent))&&"ready"===e.getState())}createTileRepresentation(t){return(0,d.b0)()}enqueueTiles(t,e,n,i,s){const a=t.viewState,l=this.getLayer(),h=l.getRenderSource(),c=h.getTileGridForProjection(a.projection),f=h.getGutterForProjection(a.projection),p=(0,d.v6)(h);p in t.wantedTiles||(t.wantedTiles[p]={});const g=t.wantedTiles[p],m=this.tileRepresentationCache,v=l.getMapInternal(),b=Math.max(n-s,c.getMinZoom(),c.getZForResolution(Math.min(l.getMaxResolution(),v?v.getView().getResolutionForZoom(Math.max(l.getMinZoom(),0)):c.getResolution(0)),h.zDirection)),w=a.rotation,A=w?(0,o.Yw)(a.center,a.resolution,w,t.size):void 0;for(let s=n;s>=b;--s){const n=c.getTileRangeForExtentAndZ(e,s,this.tempTileRange_),o=c.getResolution(s);for(let e=n.minX;e<=n.maxX;++e)for(let l=n.minY;l<=n.maxY;++l){if(w&&!c.tileCoordIntersectsViewport([s,e,l],A))continue;const n=(0,u.N)(s,e,l,this.tempTileCoord_),d=x(h,n);let v,b;if(m.containsKey(d)&&(v=m.get(d),b=v.tile),!(v&&v.tile.key===h.getKey()||(b=h.getTile(s,e,l,t.pixelRatio,a.projection),b)))continue;if(y(i,b))continue;v?v.setTile(b):(v=this.createTileRepresentation({tile:b,grid:c,helper:this.helper,gutter:f}),m.set(d,v)),_(i,v,s);const S=b.getKey();g[S]=!0,b.getState()===r.A.IDLE&&(t.tileQueue.isKeyQueued(S)||t.tileQueue.enqueue([b,p,c.getTileCoordCenter(n),o]))}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,e,n,i,r,s,o,a,l,h,u){}renderTileMask(t,e,n,i){}drawTile_(t,e,n,i,r,s,o){if(!e.ready)return;const a=e.tile.tileCoord,h=(0,u.i7)(a),d=h in s?s[h]:1,f=o.getResolution(n),p=(0,l.xq)(o.getTileSize(n),this.tempSize_),g=o.getOrigin(n),y=o.getTileCoordExtent(a),_=d<1?-1:m(n);d<1&&(t.animate=!0);const v=t.viewState,x=v.center[0],b=v.center[1],w=p[0]+2*i,A=p[1]+2*i,S=w/A,E=(x-g[0])/(p[0]*f),T=(g[1]-b)/(p[1]*f),C=v.resolution/f,M=a[1],L=a[2];(0,c.cL)(this.tileTransform_),(0,c.hs)(this.tileTransform_,2/(t.size[0]*C/w),-2/(t.size[1]*C/w)),(0,c.e$)(this.tileTransform_,v.rotation),(0,c.hs)(this.tileTransform_,1,1/S),(0,c.Tl)(this.tileTransform_,(p[0]*(M-E)-i)/w,(p[1]*(L-T)-i)/A),this.renderTile(e,this.tileTransform_,t,r,f,p,g,y,_,i,d)}renderFrame(t){this.frameState=t,this.renderComplete=!0;const e=this.helper.getGL();this.preRender(e,t);const n=t.viewState,i=this.getLayer(),o=i.getRenderSource(),a=o.getTileGridForProjection(n.projection),l=o.getGutterForProjection(n.projection),h=v(t,t.extent),c=a.getZForResolution(n.resolution,o.zDirection),f={tileIds:new Set,representationsByZ:{}},p=i.getPreload();if(t.nextExtent){const e=a.getZForResolution(n.nextResolution,o.zDirection),i=v(t,t.nextExtent);this.enqueueTiles(t,i,e,f,p)}this.enqueueTiles(t,h,c,f,0),p>0&&setTimeout((()=>{this.enqueueTiles(t,h,c-1,f,p-1)}),0);const g={};let y=!1;const _=f.representationsByZ;if(c in _){const e=(0,d.v6)(this),n=t.time;for(const t of _[c]){const i=t.tile;if(i.getState()===r.A.EMPTY)continue;const s=i.tileCoord;if(t.ready){const t=i.getAlpha(e,n);if(1===t){i.endTransition(e);continue}y=!0;g[(0,u.i7)(s)]=t}this.renderComplete=!1;if(this.findAltTiles_(a,s,c+1,f))continue;const o=a.getMinZoom();for(let t=c-1;t>=o;--t){if(this.findAltTiles_(a,s,t,f))break}}}const x=Object.keys(_).map(Number).sort(s.rG);if(this.beforeTilesMaskRender(t))for(let t=0,e=x.length;t<e;++t){const e=x[t];for(const t of _[e]){const n=t.tile.tileCoord;if((0,u.i7)(n)in g)continue;const i=a.getTileCoordExtent(n);this.renderTileMask(t,e,i,m(e))}}this.beforeTilesRender(t,y);for(let e=0,n=x.length;e<n;++e){const n=x[e];for(const e of _[n]){const i=e.tile.tileCoord;(0,u.i7)(i)in g||this.drawTile_(t,e,n,l,h,g,a)}}if(c in _)for(const e of _[c]){const n=e.tile.tileCoord;(0,u.i7)(n)in g&&this.drawTile_(t,e,c,l,h,g,a)}this.beforeFinalize(t),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);const b=this.helper.getCanvas(),w=this.tileRepresentationCache;for(;w.canExpireCache();){w.pop().dispose()}return this.postRender(e,t),b}beforeFinalize(t){}findAltTiles_(t,e,n,i){const r=t.getTileRangeForTileCoordAndZ(e,n,this.tempTileRange_);if(!r)return!1;let s=!0;const o=this.tileRepresentationCache,a=this.getLayer().getRenderSource();for(let t=r.minX;t<=r.maxX;++t)for(let e=r.minY;e<=r.maxY;++e){const r=x(a,[n,t,e]);let l=!1;if(o.containsKey(r)){const t=o.get(r);t.ready&&!y(i,t.tile)&&(_(i,t,n),l=!0)}l||(s=!1)}return s}clearCache(){super.clearCache();const t=this.tileRepresentationCache;t.forEach((t=>t.dispose())),t.clear()}afterHelperCreated(){super.afterHelperCreated(),this.tileRepresentationCache.forEach((t=>t.setHelper(this.helper)))}disposeInternal(){super.disposeInternal(),delete this.frameState}}e.Ay=b},56037:function(t,e,n){"use strict";n.d(e,{I5:function(){return r},VD:function(){return s},kx:function(){return a},th:function(){return o}});const i={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},r=[i.FILL],s=[i.STROKE],o=[i.BEGIN_PATH],a=[i.CLOSE_PATH];e.Ay=i},56182:function(t,e,n){"use strict";var i=n(18381),r=n(22685),s=n(92662),o=n(95702),a=n(25231),l=n(8860);const h="addfeatures";class u extends i.Ay{constructor(t,e,n,i){super(t),this.features=n,this.file=e,this.projection=i}}class c extends l.Ay{constructor(t){t=t||{},super({handleEvent:o.rT}),this.on,this.once,this.un,this.readAsBuffer_=!1,this.formats_=[];const e=t.formatConstructors?t.formatConstructors:[];for(let t=0,n=e.length;t<n;++t){let n=e[t];"function"==typeof n&&(n=new n),this.formats_.push(n),this.readAsBuffer_=this.readAsBuffer_||"arraybuffer"===n.getType()}this.projection_=t.projection?(0,a.Jt)(t.projection):null,this.dropListenKeys_=null,this.source_=t.source||null,this.target=t.target?t.target:null}handleResult_(t,e){const n=e.target.result,i=this.getMap();let r,s=this.projection_;if(!s&&(s=(0,a.Tf)(),!s)){s=i.getView().getProjection()}const o=this.formats_;for(let e=0,i=o.length;e<i;++e){const i=o[e];let a=n;this.readAsBuffer_&&"arraybuffer"!==i.getType()&&(void 0===r&&(r=(new TextDecoder).decode(n)),a=r);const l=this.tryReadFeatures_(i,a,{featureProjection:s});if(l&&l.length>0){this.source_&&(this.source_.clear(),this.source_.addFeatures(l)),this.dispatchEvent(new u(h,t,l,s));break}}}registerListeners_(){const t=this.getMap();if(t){const e=this.target?this.target:t.getViewport();this.dropListenKeys_=[(0,s.KT)(e,r.A.DROP,this.handleDrop,this),(0,s.KT)(e,r.A.DRAGENTER,this.handleStop,this),(0,s.KT)(e,r.A.DRAGOVER,this.handleStop,this),(0,s.KT)(e,r.A.DROP,this.handleStop,this)]}}setActive(t){!this.getActive()&&t&&this.registerListeners_(),this.getActive()&&!t&&this.unregisterListeners_(),super.setActive(t)}setMap(t){this.unregisterListeners_(),super.setMap(t),this.getActive()&&this.registerListeners_()}tryReadFeatures_(t,e,n){try{return t.readFeatures(e,n)}catch{return null}}unregisterListeners_(){this.dropListenKeys_&&(this.dropListenKeys_.forEach(s.JH),this.dropListenKeys_=null)}handleDrop(t){const e=t.dataTransfer.files;for(let t=0,n=e.length;t<n;++t){const n=e.item(t),i=new FileReader;i.addEventListener(r.A.LOAD,this.handleResult_.bind(this,n)),this.readAsBuffer_?i.readAsArrayBuffer(n):i.readAsText(n)}}handleStop(t){t.stopPropagation(),t.preventDefault(),t.dataTransfer.dropEffect="copy"}}e.A=c},56430:function(t,e,n){"use strict";var i=n(36634),r=n(61829);class s extends i.Ay{constructor(t,e,n,i,s){super(t,e,n,void 0!==s?r.A.IDLE:r.A.LOADED),this.loader_=void 0!==s?s:null,this.canvas_=i,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=r.A.ERROR):this.state=r.A.LOADED,this.changed()}load(){this.state==r.A.IDLE&&(this.state=r.A.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}e.A=s},56495:function(t,e,n){"use strict";function i(t){return function(){return this.matches(t)}}function r(t){return function(e){return e.matches(t)}}n.d(e,{A:function(){return i},j:function(){return r}})},56934:function(t,e,n){"use strict";n.d(e,{A:function(){return h}});var i=n(36634),r=n(22685),s=n(16235),o=n(25231),a=n(73465);class l extends a.Ay{constructor(t){const e=void 0!==t.crossOrigin?t.crossOrigin:null,n=void 0!==t.imageLoadFunction?t.imageLoadFunction:a.VV;super({attributions:t.attributions,interpolate:t.interpolate,projection:(0,o.Jt)(t.projection)}),this.url_=t.url,this.imageExtent_=t.imageExtent,this.image=null,this.image=new i.Ay(this.imageExtent_,void 0,1,function(t){const e=t.load||i.D4,n=t.imageExtent,r=t.crossOrigin??null;return()=>{const i=new Image;return i.crossOrigin=r,e(i,t.url).then((t=>{const e=(0,s.RG)(n)/t.width,i=(0,s.Oq)(n)/t.height;return{image:t,extent:n,resolution:e!==i?[e,i]:i,pixelRatio:1}}))}}({url:t.url,imageExtent:t.imageExtent,crossOrigin:e,load:(t,e)=>(this.image.setImage(t),n(this.image,e),(0,i.D4)(t))})),this.image.addEventListener(r.A.CHANGE,this.handleImageChange.bind(this))}getImageExtent(){return this.imageExtent_}getImageInternal(t,e,n,i){return(0,s.HY)(t,this.image.getExtent())?this.image:null}getUrl(){return this.url_}}var h=l},58212:function(t,e,n){"use strict";n.d(e,{t:function(){return u}});var i=n(16235),r=n(25231),s=n(35603),o=n(69606),a=n(16649),l=n(38376);class h extends l.A{constructor(t){const e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",n=t.tileGrid;let i=t.urls;void 0===i&&void 0!==t.url&&(i=(0,a.Uu)(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:n,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:i,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),i&&i.length>0&&(this.tileUrlFunction=(0,o.FD)(i.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;const e=t.join("\n");this.setTileUrlFunction((0,o.FD)(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){const t=this.urls?this.urls.slice(0):[];for(const e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){const e=this.requestEncoding_,n={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(n,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?(0,a.LW)(t,n):t.replace(/\{(\w+?)\}/g,(function(t,e){return e.toLowerCase()in n?n[e.toLowerCase()]:t}));const i=this.tileGrid,r=this.dimensions_;return function(n,s,o){if(!n)return;const l={TileMatrix:i.getMatrixId(n[0]),TileCol:n[1],TileRow:n[2]};Object.assign(l,r);let h=t;return h="KVP"==e?(0,a.LW)(h,l):h.replace(/\{(\w+?)\}/g,(function(t,e){return encodeURIComponent(l[e])})),h}}}function u(t,e){const n=t.Contents.Layer,o=n?.find((function(t){return t.Identifier==e.layer}));if(!o)return null;const a=t.Contents.TileMatrixSet;let l;l=o.TileMatrixSetLink.length>1?"projection"in e?o.TileMatrixSetLink.findIndex((function(t){const n=a.find((function(e){return e.Identifier==t.TileMatrixSet})).SupportedCRS,i=(0,r.Jt)(n),s=(0,r.Jt)(e.projection);return i&&s?(0,r.tI)(i,s):n==e.projection})):o.TileMatrixSetLink.findIndex((function(t){return t.TileMatrixSet==e.matrixSet})):0,l<0&&(l=0);const h=o.TileMatrixSetLink[l].TileMatrixSet,u=o.TileMatrixSetLink[l].TileMatrixSetLimits;let c=o.Format[0];"format"in e&&(c=e.format),l=o.Style.findIndex((function(t){return"style"in e?t.Title==e.style:t.isDefault})),l<0&&(l=0);const d=o.Style[l].Identifier,f={};"Dimension"in o&&o.Dimension.forEach((function(t,e,n){const i=t.Identifier;let r=t.Default;void 0===r&&(r=t.Value[0]),f[i]=r}));const p=t.Contents.TileMatrixSet.find((function(t){return t.Identifier==h}));let g;const m=p.SupportedCRS;if(m&&(g=(0,r.Jt)(m)),"projection"in e){const t=(0,r.Jt)(e.projection);t&&(g&&!(0,r.tI)(t,g)||(g=t))}let y=!1;const _=g.getAxisOrientation().startsWith("ne");let v=p.TileMatrix[0],x={MinTileCol:0,MinTileRow:0,MaxTileCol:v.MatrixWidth-1,MaxTileRow:v.MatrixHeight-1};if(u){x=u[u.length-1];const t=p.TileMatrix.find((t=>t.Identifier===x.TileMatrix||p.Identifier+":"+t.Identifier===x.TileMatrix));t&&(v=t)}const b=28e-5*v.ScaleDenominator/g.getMetersPerUnit(),w=_?[v.TopLeftCorner[1],v.TopLeftCorner[0]]:v.TopLeftCorner,A=v.TileWidth*b,S=v.TileHeight*b;let E=p.BoundingBox;E&&_&&(E=[E[1],E[0],E[3],E[2]]);let T=[w[0]+A*x.MinTileCol,w[1]-S*(1+x.MaxTileRow),w[0]+A*(1+x.MaxTileCol),w[1]-S*x.MinTileRow];if(void 0!==E&&!(0,i.ms)(E,T)){const t=o.WGS84BoundingBox,e=(0,r.Jt)("EPSG:4326").getExtent();if(T=E,t)y=t[0]===e[0]&&t[2]===e[2];else{const t=(0,r.DI)(E,p.SupportedCRS,"EPSG:4326");y=t[0]-1e-10<=e[0]&&t[2]+1e-10>=e[2]}}const C=(0,s.G)(p,T,u),M=[];let L=e.requestEncoding;if(L=void 0!==L?L:"","OperationsMetadata"in t&&"GetTile"in t.OperationsMetadata){const e=t.OperationsMetadata.GetTile.DCP.HTTP.Get;for(let t=0,n=e.length;t<n;++t)if(e[t].Constraint){const n=e[t].Constraint.find((function(t){return"GetEncoding"==t.name})).AllowedValues.Value;if(""===L&&(L=n[0]),"KVP"!==L)break;n.includes("KVP")&&M.push(e[t].href)}else e[t].href&&(L="KVP",M.push(e[t].href))}return 0===M.length&&(L="REST",o.ResourceURL.forEach((function(t){"tile"===t.resourceType&&(c=t.format,M.push(t.template))}))),{urls:M,layer:e.layer,matrixSet:h,format:c,projection:g,requestEncoding:L,tileGrid:C,style:d,dimensions:f,wrapX:y,crossOrigin:e.crossOrigin}}e.A=h},58215:function(t,e,n){"use strict";n.d(e,{q:function(){return r}});const i="http://www.w3.org/1999/xlink";function r(t){return t.getAttributeNS(i,"href")}},58273:function(t,e,n){"use strict";function i(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}n.d(e,{A:function(){return i}})},59194:function(t,e,n){"use strict";var i=n(3974),r=n(38276);class s{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=(0,i.xq)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new r.A({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new s({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,i.xq)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}e.A=s},59286:function(t,e,n){"use strict";var i=n(44090),r=n(16235),s=n(77833),o=n(96728),a=n(64697),l=n(93001),h=n(2337),u=n(46921),c=n(85398),d=n(78368),f=n(60447);class p extends o.Ay{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const e=t,n=[],r=[];for(let t=0,s=e.length;t<s;++t){const s=e[t];(0,i.X$)(n,s.getFlatCoordinates()),r.push(n.length)}const s=0===e.length?this.getLayout():e[0].getLayout();this.setFlatCoordinates(s,n),this.ends_=r}}appendLineString(t){(0,i.X$)(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new p(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,r.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.HX)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.oW)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,i))}getCoordinateAtM(t,e,n){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,n=void 0!==n&&n,(0,u.L8)(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return(0,h.cD)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new s.A(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,i=[];let r=0;for(let o=0,a=e.length;o<a;++o){const a=e[o],l=new s.A(t.slice(r,a),n);i.push(l),r=a}return i}getLength(){const t=this.ends_;let e=0,n=0;for(let i=0,r=t.length;i<r;++i)n+=(0,d.k)(this.flatCoordinates,e,t[i],this.stride),e=t[i];return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const r=this.ends_,s=this.stride;for(let o=0,a=r.length;o<a;++o){const a=r[o],l=(0,u.SH)(e,n,a,s,.5);(0,i.X$)(t,l),n=a}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=(0,f.AL)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new p(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,c.fB)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=(0,l.KG)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===n.length?0:n[n.length-1],this.changed()}}e.A=p},59469:function(t,e,n){"use strict";n.d(e,{A:function(){return r}});var i=n(93053);function r(t){return"string"==typeof t?new i.LN([[document.querySelector(t)]],[document.documentElement]):new i.LN([[t]],i.zr)}},60447:function(t,e,n){"use strict";n.d(e,{AL:function(){return s},Hg:function(){return l},P4:function(){return r},n$:function(){return o},sx:function(){return h}});var i=n(31141);function r(t,e,n,r,s,o,a){const l=(n-e)/r;if(l<3){for(;e<n;e+=r)o[a++]=t[e],o[a++]=t[e+1];return a}const h=new Array(l);h[0]=1,h[l-1]=1;const u=[e,n-r];let c=0;for(;u.length>0;){const n=u.pop(),o=u.pop();let a=0;const l=t[o],d=t[o+1],f=t[n],p=t[n+1];for(let e=o+r;e<n;e+=r){const n=t[e],r=t[e+1],s=(0,i.Q1)(n,r,l,d,f,p);s>a&&(c=e,a=s)}a>s&&(h[(c-e)/r]=1,o+r<c&&u.push(o,c),c+r<n&&u.push(c,n))}for(let n=0;n<l;++n)h[n]&&(o[a++]=t[e+n*r],o[a++]=t[e+n*r+1]);return a}function s(t,e,n,i,s,o,a,l){for(let h=0,u=n.length;h<u;++h){const u=n[h];a=r(t,e,u,i,s,o,a),l.push(a),e=u}return a}function o(t,e){return e*Math.round(t/e)}function a(t,e,n,i,r,s,a){if(e==n)return a;let l,h,u=o(t[e],r),c=o(t[e+1],r);e+=i,s[a++]=u,s[a++]=c;do{if(l=o(t[e],r),h=o(t[e+1],r),(e+=i)==n)return s[a++]=l,s[a++]=h,a}while(l==u&&h==c);for(;e<n;){const n=o(t[e],r),d=o(t[e+1],r);if(e+=i,n==l&&d==h)continue;const f=l-u,p=h-c,g=n-u,m=d-c;f*m==p*g&&(f<0&&g<f||f==g||f>0&&g>f)&&(p<0&&m<p||p==m||p>0&&m>p)?(l=n,h=d):(s[a++]=l,s[a++]=h,u=l,c=h,l=n,h=d)}return s[a++]=l,s[a++]=h,a}function l(t,e,n,i,r,s,o,l){for(let h=0,u=n.length;h<u;++h){const u=n[h];o=a(t,e,u,i,r,s,o),l.push(o),e=u}return o}function h(t,e,n,i,r,s,o,a){for(let h=0,u=n.length;h<u;++h){const u=n[h],c=[];o=l(t,e,u,i,r,s,o,c),a.push(c),e=u[u.length-1]}return o}},61341:function(t,e,n){"use strict";n.d(e,{$x:function(){return m},Io:function(){return g},Li:function(){return _},U$:function(){return v},WQ:function(){return o},aI:function(){return c},aP:function(){return u},e$:function(){return d},hG:function(){return p},hs:function(){return f},hw:function(){return a},sG:function(){return l},xi:function(){return y},z:function(){return h}});var i=n(16235),r=n(31141),s=n(28606);function o(t,e){return t[0]+=+e[0],t[1]+=+e[1],t}function a(t,e){const n=e.getRadius(),i=e.getCenter(),r=i[0],s=i[1];let o=t[0]-r;const a=t[1]-s;0===o&&0===a&&(o=1);const l=Math.sqrt(o*o+a*a);return[r+n*o/l,s+n*a/l]}function l(t,e){const n=t[0],i=t[1],r=e[0],s=e[1],o=r[0],a=r[1],l=s[0],h=s[1],u=l-o,c=h-a,d=0===u&&0===c?0:(u*(n-o)+c*(i-a))/(u*u+c*c||0);let f,p;return d<=0?(f=o,p=a):d>=1?(f=l,p=h):(f=o+d*u,p=a+d*c),[f,p]}function h(t){return function(e){return function(t,e){return function(t,e,n){if(t)return e.replace("{x}",t[0].toFixed(n)).replace("{y}",t[1].toFixed(n));return""}(t,"{x}, {y}",e)}(e,t)}}function u(t,e,n){const i=(0,r.xP)(e+180,360)-180,o=Math.abs(3600*i),a=n||0;let l=Math.floor(o/3600),h=Math.floor((o-3600*l)/60),u=(0,r.Mg)(o-3600*l-60*h,a);u>=60&&(u=0,h+=1),h>=60&&(h=0,l+=1);let c=l+"°";return 0===h&&0===u||(c+=" "+(0,s.H)(h,2)+"′"),0!==u&&(c+=" "+(0,s.H)(u,2,a)+"″"),0!==i&&(c+=" "+t.charAt(i<0?1:0)),c}function c(t,e){let n=!0;for(let i=t.length-1;i>=0;--i)if(t[i]!=e[i]){n=!1;break}return n}function d(t,e){const n=Math.cos(e),i=Math.sin(e),r=t[0]*n-t[1]*i,s=t[1]*n+t[0]*i;return t[0]=r,t[1]=s,t}function f(t,e){return t[0]*=e,t[1]*=e,t}function p(t,e){const n=t[0]-e[0],i=t[1]-e[1];return n*n+i*i}function g(t,e){return Math.sqrt(p(t,e))}function m(t,e){return p(t,l(t,e))}function y(t,e){return t?u("NS",t[1],e)+" "+u("EW",t[0],e):""}function _(t,e){if(e.canWrapX()){const n=(0,i.RG)(e.getExtent()),r=v(t,e,n);r&&(t[0]-=r*n)}return t}function v(t,e,n){const r=e.getExtent();let s=0;return e.canWrapX()&&(t[0]<r[0]||t[0]>r[2])&&(n=n||(0,i.RG)(r),s=Math.floor((t[0]-r[0])/n)),s}},61748:function(t,e,n){"use strict";var i=n(44090),r=n(23463),s=n(16235),o=n(96728),a=n(26238),l=n(31141),h=n(12911),u=n(89762),c=n(27678);class d extends u.A{constructor(t,e,n,i,r,s,o){super(),this.context_=t,this.pixelRatio_=e,this.extent_=n,this.transform_=i,this.transformRotation_=i?(0,l.Mg)(Math.atan2(i[1],i[0]),10):0,this.viewRotation_=r,this.squaredTolerance_=s,this.userTransform_=o,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,h.vt)()}drawImages_(t,e,n,i){if(!this.image_)return;const r=(0,a.Rc)(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_,o=this.tmpLocalTransform_,l=s.globalAlpha;1!=this.imageOpacity_&&(s.globalAlpha=l*this.imageOpacity_);let u=this.imageRotation_;0===this.transformRotation_&&(u-=this.viewRotation_),this.imageRotateWithView_&&(u+=this.viewRotation_);for(let t=0,e=r.length;t<e;t+=2){const e=r[t]-this.imageAnchorX_,n=r[t+1]-this.imageAnchorY_;if(0!==u||1!=this.imageScale_[0]||1!=this.imageScale_[1]){const t=e+this.imageAnchorX_,i=n+this.imageAnchorY_;(0,h.Zz)(o,t,i,1,1,u,-t,-i),s.save(),s.transform.apply(s,o),s.translate(t,i),s.scale(this.imageScale_[0],this.imageScale_[1]),s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),s.restore()}else s.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,n,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(s.globalAlpha=l)}drawText_(t,e,n,i){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const r=(0,a.Rc)(t,e,n,i,this.transform_,this.pixelCoordinates_),s=this.context_;let o=this.textRotation_;for(0===this.transformRotation_&&(o-=this.viewRotation_),this.textRotateWithView_&&(o+=this.viewRotation_);e<n;e+=i){const t=r[e]+this.textOffsetX_,n=r[e+1]+this.textOffsetY_;0!==o||1!=this.textScale_[0]||1!=this.textScale_[1]?(s.save(),s.translate(t-this.textOffsetX_,n-this.textOffsetY_),s.rotate(o),s.translate(this.textOffsetX_,this.textOffsetY_),s.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&s.strokeText(this.text_,0,0),this.textFillState_&&s.fillText(this.text_,0,0),s.restore()):(this.textStrokeState_&&s.strokeText(this.text_,t,n),this.textFillState_&&s.fillText(this.text_,t,n))}}moveToLineTo_(t,e,n,i,r){const s=this.context_,o=(0,a.Rc)(t,e,n,i,this.transform_,this.pixelCoordinates_);s.moveTo(o[0],o[1]);let l=o.length;r&&(l-=2);for(let t=2;t<l;t+=2)s.lineTo(o[t],o[t+1]);return r&&s.closePath(),n}drawRings_(t,e,n,i){for(let r=0,s=n.length;r<s;++r)e=this.moveToLineTo_(t,e,n[r],i,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,s.HY)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=(0,o.v7)(t,this.transform_,this.pixelCoordinates_),n=e[2]-e[0],i=e[3]-e[1],r=Math.sqrt(n*n+i*i),s=this.context_;s.beginPath(),s.arc(e[0],e[1],r,0,2*Math.PI),this.fillState_&&s.fill(),this.strokeState_&&s.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){const n=e.getGeometryFunction()(t);n&&(this.setStyle(e),this.drawGeometry(n))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let t=0,n=e.length;t<n;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),n=t.getStride();this.image_&&this.drawImages_(e,0,e.length,n),""!==this.text_&&this.drawText_(e,0,e.length,n)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,s.HY)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(n,0,n.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if((0,s.HY)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getFlatCoordinates();let i=0;const r=t.getEnds(),s=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t)i=this.moveToLineTo_(n,i,r[t],s,!1);e.stroke()}if(""!==this.text_){const e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,s.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,s.HY)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,n=t.getOrientedFlatCoordinates();let i=0;const r=t.getEndss(),s=t.getStride();e.beginPath();for(let t=0,e=r.length;t<e;++t){const e=r[t];i=this.drawRings_(n,i,e,s)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,n=this.contextFillState_;n?n.fillStyle!=t.fillStyle&&(n.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,n=this.contextStrokeState_;n?(n.lineCap!=t.lineCap&&(n.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,i.aI)(n.lineDash,t.lineDash)||e.setLineDash(n.lineDash=t.lineDash),n.lineDashOffset!=t.lineDashOffset&&(n.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),n.lineJoin!=t.lineJoin&&(n.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),n.lineWidth!=t.lineWidth&&(n.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),n.miterLimit!=t.miterLimit&&(n.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),n.strokeStyle!=t.strokeStyle&&(n.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,n=this.contextTextState_,i=t.textAlign?t.textAlign:c.MY;n?(n.font!=t.font&&(n.font=t.font,e.font=t.font),n.textAlign!=i&&(n.textAlign=i,e.textAlign=i),n.textBaseline!=t.textBaseline&&(n.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=i,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:i,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){const e=t.getColor();this.fillState_={fillStyle:(0,r.F)(e||c.qY)}}else this.fillState_=null;if(e){const t=e.getColor(),n=e.getLineCap(),i=e.getLineDash(),s=e.getLineDashOffset(),o=e.getLineJoin(),a=e.getWidth(),l=e.getMiterLimit(),h=i||c.Oq;this.strokeState_={lineCap:void 0!==n?n:c._m,lineDash:1===this.pixelRatio_?h:h.map((t=>t*this.pixelRatio_)),lineDashOffset:(s||c.vk)*this.pixelRatio_,lineJoin:void 0!==o?o:c._K,lineWidth:(void 0!==a?a:c.aq)*this.pixelRatio_,miterLimit:void 0!==l?l:c.eL,strokeStyle:(0,r.F)(t||c.NT)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize()))return void(this.image_=null);const n=t.getPixelRatio(this.pixelRatio_),i=t.getAnchor(),r=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=i[0]*n,this.imageAnchorY_=i[1]*n,this.imageHeight_=e[1]*n,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=r[0],this.imageOriginY_=r[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const s=t.getScaleArray();this.imageScale_=[s[0]*this.pixelRatio_/n,s[1]*this.pixelRatio_/n],this.imageWidth_=e[0]*n}setTextStyle(t){if(t){const e=t.getFill();if(e){const t=e.getColor();this.textFillState_={fillStyle:(0,r.F)(t||c.qY)}}else this.textFillState_=null;const n=t.getStroke();if(n){const t=n.getColor(),e=n.getLineCap(),i=n.getLineDash(),s=n.getLineDashOffset(),o=n.getLineJoin(),a=n.getWidth(),l=n.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:c._m,lineDash:i||c.Oq,lineDashOffset:s||c.vk,lineJoin:void 0!==o?o:c._K,lineWidth:void 0!==a?a:c.aq,miterLimit:void 0!==l?l:c.eL,strokeStyle:(0,r.F)(t||c.NT)}}else this.textStrokeState_=null;const i=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),u=t.getText(),d=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:void 0!==i?i:c.ZV,textAlign:void 0!==d?d:c.MY,textBaseline:void 0!==f?f:c.M8},this.text_=void 0!==u?Array.isArray(u)?u.reduce(((t,e,n)=>t+(n%2?" ":e)),""):u:"",this.textOffsetX_=void 0!==s?this.pixelRatio_*s:0,this.textOffsetY_=void 0!==o?this.pixelRatio_*o:0,this.textRotateWithView_=void 0!==a&&a,this.textRotation_=void 0!==l?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}else this.text_=""}}e.A=d},61829:function(t,e){"use strict";e.A={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4}},62126:function(t,e,n){"use strict";n.d(e,{A:function(){return m}});var i=n(18381),r=n(38808),s=n(54209),o=n(30470);class a extends s.A{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,n="px",i=this.element_.style;i.left=Math.min(t[0],e[0])+n,i.top=Math.min(t[1],e[1])+n,i.width=Math.abs(e[0]-t[0])+n,i.height=Math.abs(e[1]-t[1])+n}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const t=this.element_.style;t.left="inherit",t.top="inherit",t.width="inherit",t.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new o.Ay([n])}getGeometry(){return this.geometry_}}var l=a,h=n(87113);const u="boxstart",c="boxdrag",d="boxend",f="boxcancel";class p extends i.Ay{constructor(t,e,n){super(t),this.coordinate=e,this.mapBrowserEvent=n}}class g extends h.A{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new l(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??r.at,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,n){const i=n[0]-e[0],r=n[1]-e[1];return i*i+r*r>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new p(c,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new p(e?d:f,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return!!this.condition_(t)&&(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new p(u,t.coordinate,t)),!0)}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new p(f,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new p(f,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}var m=g},62609:function(t,e,n){"use strict";var i=n(16235),r=n(96728),s=n(47129),o=n(64697),a=n(93001),l=n(2337),h=n(60447);class u extends r.Ay{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}clone(){return new u(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,r){return r<(0,i.Ld)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,r))}getArea(){return(0,s.eN)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return(0,l.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,h.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new u(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}e.A=u},62994:function(t,e,n){"use strict";function i(t,e,n,i){return void 0!==i?(i[0]=t,i[1]=e,i[2]=n,i):[t,e,n]}function r(t,e,n){return t+"/"+e+"/"+n}function s(t){return r(t[0],t[1],t[2])}function o(t){return a(t[0],t[1],t[2])}function a(t,e,n){return(e<<t)+n}function l(t,e){const n=t[0],i=t[1],r=t[2];if(e.getMinZoom()>n||n>e.getMaxZoom())return!1;const s=e.getFullTileRange(n);return!s||s.containsXY(i,r)}n.d(e,{N:function(){return i},N5:function(){return l},_T:function(){return a},dp:function(){return r},i7:function(){return s},tW:function(){return o}})},63188:function(t,e){"use strict";e.A={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"}},64618:function(t,e,n){"use strict";var i=n(69791),r=n(22685),s=n(25231),o=n(3974),a=n(16649),l=n(77779),h=n(15264);class u extends h.A{constructor(t){const e=(t=t||{}).template||"z:{z} x:{x} y:{y}",n=t.source;super({transition:0,wrapX:void 0!==t.wrapX?t.wrapX:void 0!==n?n.getWrapX():void 0});const h=()=>{this.projection=void 0!==t.projection?(0,s.Jt)(t.projection):void 0!==n?n.getProjection():this.projection,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:void 0!==n?n.getTileGrid():this.tileGrid,this.zDirection=void 0!==t.zDirection?t.zDirection:void 0!==n?n.zDirection:this.zDirection,n instanceof l.A&&(this.transformMatrix=n.transformMatrix?.slice()||null);const r=this.tileGrid;r&&this.setTileSizes(r.getResolutions().map(((t,e)=>(0,o.xq)(r.getTileSize(e)).map((t=>Math.max(Math.floor(t),1)))))),this.setLoader(((t,n,r,s)=>{const o=(0,a.M)(e,t,n,r,s.maxY),[l,h]=this.getTileSize(t),u=(0,i.Y)(l,h);return u.strokeStyle="grey",u.strokeRect(.5,.5,l+.5,h+.5),u.fillStyle="grey",u.strokeStyle="white",u.textAlign="center",u.textBaseline="middle",u.font="24px sans-serif",u.lineWidth=4,u.strokeText(o,l/2,h/2,l),u.fillText(o,l/2,h/2,l),Promise.resolve(u.canvas)})),this.setState("ready")};if(void 0===n||"ready"===n.getState())h();else{const t=()=>{"ready"===n.getState()&&(n.removeEventListener(r.A.CHANGE,t),h())};n.addEventListener(r.A.CHANGE,t)}}}e.A=u},64697:function(t,e,n){"use strict";n.d(e,{HX:function(){return o},MD:function(){return s},c:function(){return a},n:function(){return l},oW:function(){return h},te:function(){return u}});var i=n(31141);function r(t,e,n,r,s,o,a){const l=t[e],h=t[e+1],u=t[n]-l,c=t[n+1]-h;let d;if(0===u&&0===c)d=e;else{const f=((s-l)*u+(o-h)*c)/(u*u+c*c);if(f>1)d=n;else{if(f>0){for(let s=0;s<r;++s)a[s]=(0,i.Cc)(t[e+s],t[n+s],f);return void(a.length=r)}d=e}}for(let e=0;e<r;++e)a[e]=t[d+e];a.length=r}function s(t,e,n,r,s){let o=t[e],a=t[e+1];for(e+=r;e<n;e+=r){const n=t[e],r=t[e+1],l=(0,i.hG)(o,a,n,r);l>s&&(s=l),o=n,a=r}return s}function o(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){const a=n[o];r=s(t,e,a,i,r),e=a}return r}function a(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){const a=n[s];r=o(t,e,a,i,r),e=a[a.length-1]}return r}function l(t,e,n,s,o,a,l,h,u,c,d){if(e==n)return c;let f,p;if(0===o){if(p=(0,i.hG)(l,h,t[e],t[e+1]),p<c){for(f=0;f<s;++f)u[f]=t[e+f];return u.length=s,p}return c}d=d||[NaN,NaN];let g=e+s;for(;g<n;)if(r(t,g-s,g,s,l,h,d),p=(0,i.hG)(l,h,d[0],d[1]),p<c){for(c=p,f=0;f<s;++f)u[f]=d[f];u.length=s,g+=s}else g+=s*Math.max((Math.sqrt(p)-Math.sqrt(c))/o|0,1);if(a&&(r(t,n-s,e,s,l,h,d),p=(0,i.hG)(l,h,d[0],d[1]),p<c)){for(c=p,f=0;f<s;++f)u[f]=d[f];u.length=s}return c}function h(t,e,n,i,r,s,o,a,h,u,c){c=c||[NaN,NaN];for(let d=0,f=n.length;d<f;++d){const f=n[d];u=l(t,e,f,i,r,s,o,a,h,u,c),e=f}return u}function u(t,e,n,i,r,s,o,a,l,u,c){c=c||[NaN,NaN];for(let d=0,f=n.length;d<f;++d){const f=n[d];u=h(t,e,f,i,r,s,o,a,l,u,c),e=f[f.length-1]}return u}},64740:function(t,e,n){"use strict";n.d(e,{$q:function(){return _},AE:function(){return p},Eq:function(){return m},W3:function(){return g},jD:function(){return c},y4:function(){return y}});var i=n(36634),r=n(16235),s=n(31141),o=n(25231),a=n(28606),l=n(16649),h=n(73465),u=n(17656);const c="1.3.0",d=[101,101];function f(t,e,n,i,r){r.WIDTH=n[0],r.HEIGHT=n[1];const s=i.getAxisOrientation(),o=(0,a.Z)(r.VERSION,"1.3")>=0;r[o?"CRS":"SRS"]=i.getCode();const h=o&&s.startsWith("ne")?[e[1],e[0],e[3],e[2]]:e;return r.BBOX=h.join(","),(0,l.LW)(t,r)}function p(t,e,n,i,o,a,l){a=Object.assign({REQUEST:"GetMap"},a);const h=e/n,c=[(0,s.LI)((0,r.RG)(t)/h,u.B),(0,s.LI)((0,r.Oq)(t)/h,u.B)];if(1!=n)switch(l){case"geoserver":const t=90*n+.5|0;"FORMAT_OPTIONS"in a?a.FORMAT_OPTIONS+=";dpi:"+t:a.FORMAT_OPTIONS="dpi:"+t;break;case"mapserver":a.MAP_RESOLUTION=90*n;break;case"carmentaserver":case"qgis":a.DPI=90*n;break;default:throw new Error("Unknown `serverType` configured")}return f(o,t,c,i,a)}function g(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:c,FORMAT:"image/png",STYLES:"",TRANSPARENT:"TRUE"},t)}function m(t){const e=void 0===t.hidpi||t.hidpi,n=(0,o.Jt)(t.projection||"EPSG:3857"),r=t.ratio||1.5,s=t.load||i.D4,a=t.crossOrigin??null;return(i,o,l)=>{i=(0,h.QD)(i,o,l,r),1==l||e&&void 0!==t.serverType||(l=1);const u=p(i,o,l,n,t.url,g(t.params,"GetMap"),t.serverType),c=new Image;return c.crossOrigin=a,s(c,u).then((t=>({image:t,extent:i,pixelRatio:l})))}}function y(t,e,n){if(void 0===t.url)return;const i=(0,o.Jt)(t.projection||"EPSG:3857"),l=(0,r.Bg)(e,n,0,d),h={QUERY_LAYERS:t.params.LAYERS,INFO_FORMAT:"application/json"};Object.assign(h,g(t.params,"GetFeatureInfo"),t.params);const c=(0,s.RI)((e[0]-l[0])/n,u.B),p=(0,s.RI)((l[3]-e[1])/n,u.B),m=(0,a.Z)(h.VERSION,"1.3")>=0;return h[m?"I":"X"]=c,h[m?"J":"Y"]=p,f(t.url,l,d,i,h)}function _(t,e){if(void 0===t.url)return;const n={SERVICE:"WMS",VERSION:c,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0!==e){const i=(0,o.Jt)(t.projection||"EPSG:3857").getMetersPerUnit()||1,r=28e-5;n.SCALE=e*i/r}if(Object.assign(n,t.params),void 0!==t.params&&void 0===n.LAYER){const t=n.LAYERS;if(!(!Array.isArray(t)||1!==t.length))return;n.LAYER=t}return(0,l.LW)(t.url,n)}},66267:function(t,e,n){"use strict";n.d(e,{FY:function(){return u},J7:function(){return l},r2:function(){return h}});var i=n(95907),r=n(25231),s=n(61748),o=n(55280),a=n(12911);function l(t,e){const n=t.canvas,r=(e=e||{}).pixelRatio||i.cr,o=e.size;o&&(n.width=o[0]*r,n.height=o[1]*r,n.style.width=o[0]+"px",n.style.height=o[1]+"px");const l=[0,0,n.width,n.height],h=(0,a.hs)((0,a.vt)(),r,r);return new s.A(t,r,l,h,0)}function h(t){if(!(t.context instanceof CanvasRenderingContext2D))throw new Error("Only works for render events from Canvas 2D layers");const e=t.inversePixelTransform[0],n=t.inversePixelTransform[1],i=Math.sqrt(e*e+n*n),l=t.frameState,h=(0,a.lw)(t.inversePixelTransform.slice(),l.coordinateToPixelTransform),u=(0,o.j)(l.viewState.resolution,i);let c;const d=(0,r.Tf)();return d&&(c=(0,r.FO)(d,l.viewState.projection)),new s.A(t.context,i,l.extent,h,l.viewState.rotation,u,c)}function u(t,e){return(0,a.Bb)(t.inversePixelTransform,e.slice(0))}},66962:function(t,e,n){"use strict";function i(t,e,n,i){for(;e<n-i;){for(let r=0;r<i;++r){const s=t[e+r];t[e+r]=t[n-i+r],t[n-i+r]=s}e+=i,n-=i}}function r(t,e,n,i){let r=0,s=t[n-i],o=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];r+=(n-s)*(i+o),s=n,o=i}return 0===r?void 0:r>0}function s(t,e,n,i,s){s=void 0!==s&&s;for(let o=0,a=n.length;o<a;++o){const a=n[o],l=r(t,e,a,i);if(0===o){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;e=a}return!0}function o(t,e,n,i,r){for(let o=0,a=n.length;o<a;++o){const a=n[o];if(!s(t,e,a,i,r))return!1;a.length&&(e=a[a.length-1])}return!0}function a(t,e,n,s,o){o=void 0!==o&&o;for(let a=0,l=n.length;a<l;++a){const l=n[a],h=r(t,e,l,s);(0===a?o&&h||!o&&!h:o&&!h||!o&&h)&&i(t,e,l,s),e=l}return e}function l(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s)e=a(t,e,n[s],i,r);return e}function h(t,e){const n=[];let i,s=0,o=0;for(let a=0,l=e.length;a<l;++a){const l=e[a],h=r(t,s,l,2);if(void 0===i&&(i=h),h===i)n.push(e.slice(o,a+1));else{if(0===n.length)continue;n[n.length-1].push(e[o])}o=a+1,s=l}return n}n.d(e,{yJ:function(){return h},uQ:function(){return r},PA:function(){return s},mb:function(){return o},ug:function(){return a},NK:function(){return l}})},67024:function(t,e,n){"use strict";n.d(e,{$N:function(){return a},K5:function(){return c},Q5:function(){return r},Si:function(){return i},Vv:function(){return o},XI:function(){return s},nT:function(){return l}});const i="ol-hidden",r="ol-selectable",s="ol-unselectable",o="ol-unsupported",a="ol-control",l="ol-collapsed",h=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))","?\\s*([-,\\\"\\'\\sa-z0-9]+?)\\s*$"].join(""),"i"),u=["style","variant","weight","size","lineHeight","family"],c=function(t){const e=t.match(h);if(!e)return null;const n={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let t=0,i=u.length;t<i;++t){const i=e[t+1];void 0!==i&&(n[u[t]]=i)}return n.families=n.family.split(/,\s?/),n}},67102:function(t,e,n){"use strict";n.d(e,{Jt:function(){return s},WQ:function(){return r}});let i={};function r(t,e,n){const r=t.getCode(),s=e.getCode();r in i||(i[r]={}),i[r][s]=n}function s(t,e){return t in i&&e in i[t]?i[t][e]:null}},68266:function(t,e,n){"use strict";var i=n(73887),r=n(96479),s=n(51541),o=n(44090),a=n(18381),l=n(38808),h=n(95702),u=n(23986),c=n(45090),d=n(88292),f=n(37759),p=n(8860);const g="select";class m extends a.Ay{constructor(t,e,n,i){super(t),this.selected=e,this.deselected=n,this.mapBrowserEvent=i}}const y={};class _ extends p.Ay{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:l.t5,this.addCondition_=t.addCondition?t.addCondition:l.Zm,this.removeCondition_=t.removeCondition?t.removeCondition:l.Zm,this.toggleCondition_=t.toggleCondition?t.toggleCondition:l.Kg,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:h.rT,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){const t=(0,d.mY)();return(0,o.X$)(t.Polygon,t.LineString),(0,o.X$)(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new i.A,t.layers)if("function"==typeof t.layers)e=t.layers;else{const n=t.layers;e=function(t){return n.includes(t)}}else e=h.rT;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[(0,f.v6)(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[(0,f.v6)(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(r.A.ADD,this.boundAddFeature_),this.features_.addEventListener(r.A.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(r.A.ADD,this.boundAddFeature_),this.features_.removeEventListener(r.A.REMOVE,this.boundRemoveFeature_))}addFeature_(t){const e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){const t=this.getMap().getAllLayers().find((function(t){if(t instanceof u.A&&t.getSource()&&t.getSource().hasFeature(e))return t}));t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){const e=(0,f.v6)(t);e in y||(y[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){const e=this.getMap().getInteractions().getArray();for(let n=e.length-1;n>=0;--n){const i=e[n];if(i!==this&&i instanceof _&&i.getStyle()&&-1!==i.getFeatures().getArray().lastIndexOf(t))return void t.setStyle(i.getStyle())}const n=(0,f.v6)(t);t.setStyle(y[n]),delete y[n]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[(0,f.v6)(t)]}handleEvent(t){if(!this.condition_(t))return!0;const e=this.addCondition_(t),n=this.removeCondition_(t),i=this.toggleCondition_(t),r=!e&&!n&&!i,o=t.map,a=this.getFeatures(),l=[],h=[];if(r){(0,c.I)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,((t,e)=>{if(t instanceof s.A&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),h.push(t),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.getLength()-1;t>=0;--t){const e=a.item(t),n=h.indexOf(e);n>-1?h.splice(n,1):(a.remove(e),l.push(e))}0!==h.length&&a.extend(h)}else{o.forEachFeatureAtPixel(t.pixel,((t,r)=>{if(t instanceof s.A&&this.filter_(t,r))return!e&&!i||a.getArray().includes(t)?(n||i)&&a.getArray().includes(t)&&(l.push(t),this.removeFeatureLayerAssociation_(t)):(this.addFeatureLayerAssociation_(t,r),h.push(t)),!this.multi_}),{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=l.length-1;t>=0;--t)a.remove(l[t]);a.extend(h)}return(h.length>0||l.length>0)&&this.dispatchEvent(new m(g,h,l,t)),!0}}e.A=_},69606:function(t,e,n){"use strict";n.d(e,{FD:function(){return l},Qz:function(){return a},lg:function(){return h}});var i=n(31141),r=n(62994),s=n(16649);function o(t,e){return function(n,i,r){if(!n)return;let o;const a=n[0];if(e){const t=e.getFullTileRange(a);t&&(o=t.getHeight()-1)}return(0,s.M)(t,a,n[1],n[2],o)}}function a(t,e){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=o(t[r],e);return l(i)}function l(t){return 1===t.length?t[0]:function(e,n,s){if(!e)return;const o=(0,r.tW)(e),a=(0,i.xP)(o,t.length);return t[a](e,n,s)}}function h(t,e,n){}},69727:function(t,e,n){"use strict";var i=n(44090),r=n(16235),s=n(7535),o=n(30470),a=n(96728),l=n(47129),h=n(1097),u=n(64697),c=n(90405),d=n(93001),f=n(2337),p=n(98384),g=n(85398),m=n(66962),y=n(60447);class _ extends a.Ay{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const r=t,s=[],o=[];for(let t=0,e=r.length;t<e;++t){const e=r[t],n=s.length,a=e.getEnds();for(let t=0,e=a.length;t<e;++t)a[t]+=n;(0,i.X$)(s,e.getFlatCoordinates()),o.push(a)}e=0===r.length?this.getLayout():r[0].getLayout(),t=s,n=o}void 0!==e&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){const n=this.flatCoordinates.length;(0,i.X$)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,i=e.length;t<i;++t)e[t]+=n}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let n=0;n<t;++n)e[n]=this.endss_[n].slice();const n=new _(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,i){return i<(0,r.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,u.c)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,u.te)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,i))}containsXY(t,e){return(0,c.Gd)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,l.Cs)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,m.NK)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.Dz)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=(0,h.C)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,p.p)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new s.A(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;(0,m.mb)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,m.NK)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=(0,y.sx)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new _(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(0===t)e=0;else{const n=this.endss_[t-1];e=n[n.length-1]}const n=this.endss_[t].slice(),i=n[n.length-1];if(0!==e)for(let t=0,i=n.length;t<i;++t)n[t]-=e;return new o.Ay(this.flatCoordinates.slice(e,i),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,i=[];let r=0;for(let s=0,a=n.length;s<a;++s){const a=n[s].slice(),l=a[a.length-1];if(0!==r)for(let t=0,e=a.length;t<e;++t)a[t]-=r;const h=new o.Ay(e.slice(r,l),t,a);i.push(h),r=l}return i}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,g.Wp)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=(0,d.d6)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===n.length)this.flatCoordinates.length=0;else{const t=n[n.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}e.A=_},69791:function(t,e,n){"use strict";n.d(e,{DK:function(){return h},Gq:function(){return l},WM:function(){return d},Y:function(){return r},Yg:function(){return a},fo:function(){return u},gS:function(){return c},lr:function(){return o}});var i=n(95907);function r(t,e,n,r){let s;return s=n&&n.length?n.shift():i.Wl?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(s.width=t),e&&(s.height=e),s.getContext("2d",r)}let s;function o(){return s||(s=r(1,1)),s}function a(t){const e=t.canvas;e.width=1,e.height=1,t.clearRect(0,0,1,1)}function l(t){let e=t.offsetWidth;const n=getComputedStyle(t);return e+=parseInt(n.marginLeft,10)+parseInt(n.marginRight,10),e}function h(t){let e=t.offsetHeight;const n=getComputedStyle(t);return e+=parseInt(n.marginTop,10)+parseInt(n.marginBottom,10),e}function u(t,e){const n=e.parentNode;n&&n.replaceChild(t,e)}function c(t){for(;t.lastChild;)t.lastChild.remove()}function d(t,e){const n=t.childNodes;for(let i=0;;++i){const r=n[i],s=e[i];if(!r&&!s)break;r!==s&&(r?s?t.insertBefore(s,r):(t.removeChild(r),--i):t.appendChild(s))}}},69878:function(t,e,n){"use strict";n.d(e,{e:function(){return a}});var i=n(22685),r=n(37372),s=n(92662);class o extends r.A{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(i.A.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const n=t.length,i=new Array(n);for(let r=0;r<n;++r)i[r]=(0,s.KT)(this,t[r],e);return i}return(0,s.KT)(this,t,e)}onceInternal(t,e){let n;if(Array.isArray(t)){const i=t.length;n=new Array(i);for(let r=0;r<i;++r)n[r]=(0,s.Jz)(this,t[r],e)}else n=(0,s.Jz)(this,t,e);return e.ol_key=n,n}unInternal(t,e){const n=e.ol_key;if(n)a(n);else if(Array.isArray(t))for(let n=0,i=t.length;n<i;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}function a(t){if(Array.isArray(t))for(let e=0,n=t.length;e<n;++e)(0,s.JH)(t[e]);else(0,s.JH)(t)}o.prototype.on,o.prototype.once,o.prototype.un,e.A=o},69892:function(t,e){"use strict";e.A={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16}},70026:function(t,e,n){"use strict";n.d(e,{E:function(){return c},r:function(){return u}});var i=n(36634),r=n(16235),s=n(31141),o=n(25231),a=n(16649),l=n(73465),h=n(17656);function u(t,e,n,i,o,l){const u=o.getCode().split(/:(?=\d+$)/).pop(),c=n/i,d=[(0,s.LI)((0,r.RG)(e)/c,h.B),(0,s.LI)((0,r.Oq)(e)/c,h.B)];l.SIZE=d[0]+","+d[1],l.BBOX=e.join(","),l.BBOXSR=u,l.IMAGESR=u,l.DPI=Math.round(l.DPI?l.DPI*i:90*i);const f=t.replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage");return(0,a.LW)(f,l)}function c(t){const e=t.load?t.load:i.D4,n=(0,o.Jt)(t.projection||"EPSG:3857"),s=t.ratio??1.5,a=t.crossOrigin??null;return function(i,o,h){h=t.hidpi?h:1;const c={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};Object.assign(c,t.params),i=(0,l.QD)(i,o,h,s);const d=u(t.url,i,o,h,n,c),f=new Image;return f.crossOrigin=a,e(f,d).then((t=>{const e=(0,r.RG)(i)/t.width*h;return{image:t,extent:i,resolution:e,pixelRatio:h}}))}}},70192:function(t,e,n){"use strict";var i=n(75738),r=n(69878),s=n(18381),o=n(45090),a=n(37759);class l extends s.Ay{constructor(t,e,n){super(t),this.key=e,this.oldValue=n}}class h extends r.A{constructor(t){super(),this.on,this.once,this.un,(0,a.v6)(this),this.values_=null,void 0!==t&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let n;n=`change:${t}`,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e)),n=i.A.PROPERTYCHANGE,this.hasListener(n)&&this.dispatchEvent(new l(n,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,n){const i=this.values_||(this.values_={});if(n)i[t]=e;else{const n=i[t];i[t]=e,n!==e&&this.notify(t,n)}}setProperties(t,e){for(const n in t)this.set(n,t[n],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const n=this.values_[t];delete this.values_[t],(0,o.p)(this.values_)&&(this.values_=null),e||this.notify(t,n)}}}e.A=h},71141:function(){},71442:function(t,e,n){"use strict";var i=n(44090),r=n(16235),s=n(95702),o=n(1097),a=n(98384),l=n(46921),h=n(66962),u=n(60447),c=n(26238),d=n(25231),f=n(12911);const p=(0,f.vt)();class g{constructor(t,e,n,i,r,s){this.styleFunction,this.extent_,this.id_=s,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.squaredTolerance_,this.stride_=i,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,r.dP)(this.flatCoordinates_):(0,r.Vy)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=(0,r.q1)(this.getExtent());this.flatInteriorPoints_=(0,a.J)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=(0,h.yJ)(this.flatCoordinates_,this.ends_),e=(0,o.C)(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=(0,a.p)(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,l.SH)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let r=0,s=n.length;r<s;++r){const s=n[r],o=(0,l.SH)(t,e,s,2,.5);(0,i.X$)(this.flatMidpoints_,o),e=s}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){const e=(t=(0,d.Jt)(t)).getExtent(),n=t.getWorldExtent();if(e&&n){const t=(0,r.Oq)(n)/(0,r.Oq)(e);(0,f.Zz)(p,n[0],n[3],t,-t,0,0,0),(0,c.Rc)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,p,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new g(this.type_,this.flatCoordinates_.slice(),this.ends_?.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,s.B4)(((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let i;switch(this.type_){case"LineString":n.length=(0,u.P4)(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),i=[n.length];break;case"MultiLineString":i=[],n.length=(0,u.AL)(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,i);break;case"Polygon":i=[],n.length=(0,u.Hg)(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,i)}return i&&(this.simplifiedGeometry_=new g(this.type_,n,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_})),this}}g.prototype.getFlatCoordinates=g.prototype.getOrientedFlatCoordinates,e.Ay=g},71552:function(t,e,n){"use strict";var i=n(18381);class r extends i.Ay{constructor(t,e,n,i){super(t),this.inversePixelTransform=e,this.frameState=n,this.context=i}}e.A=r},72961:function(t,e,n){"use strict";n.d(e,{Bs:function(){return _},hX:function(){return g},te:function(){return v},zU:function(){return m}});var i=n(51541),r=n(66962),s=n(40878),o=n(77833),a=n(30470),l=n(7535),h=n(59286),u=n(69727),c=n(29050),d=n(25231),f=n(71442),p=n(37759);function g(t,e,n){const i=n?(0,d.Jt)(n.featureProjection):null,r=n?(0,d.Jt)(n.dataProjection):null;let s=t;if(i&&r&&!(0,d.tI)(i,r)){e&&(s=t.clone());const n=e?i:r,o=e?r:i;"tile-pixels"===n.getUnits()?s.transform(n,o):s.applyTransform((0,d.RG)(n,o))}if(e&&n&&void 0!==n.decimals){const e=Math.pow(10,n.decimals),i=function(t){for(let n=0,i=t.length;n<i;++n)t[n]=Math.round(t[n]*e)/e;return t};s===t&&(s=t.clone()),s.applyTransform(i)}return s}function m(t,e){const n=e?(0,d.Jt)(e.featureProjection):null,i=e?(0,d.Jt)(e.dataProjection):null;return n&&i&&!(0,d.tI)(n,i)?(0,d.DI)(t,i,n):t}e.Ay=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=i.A,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?(0,d.Jt)(e.dataProjection):this.readProjection(t);e.extent&&n&&"tile-pixels"===n.getUnits()&&(n=(0,d.Jt)(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return(0,p.b0)()}readFeature(t,e){return(0,p.b0)()}readFeatures(t,e){return(0,p.b0)()}readGeometry(t,e){return(0,p.b0)()}readProjection(t){return(0,p.b0)()}writeFeature(t,e){return(0,p.b0)()}writeFeatures(t,e){return(0,p.b0)()}writeGeometry(t,e){return(0,p.b0)()}};const y={Point:s.A,LineString:o.A,Polygon:a.Ay,MultiPoint:l.A,MultiLineString:h.A,MultiPolygon:u.A};function _(t,e){const n=t.geometry;if(!n)return[];if(Array.isArray(n))return n.map((e=>_({...t,geometry:e}))).flat();const i="MultiPolygon"===n.type?"Polygon":n.type;if("GeometryCollection"===i||"Circle"===i)throw new Error("Unsupported geometry type: "+i);const s=n.layout.length;return g(new f.Ay(i,"Polygon"===i?function(t,e,n){return Array.isArray(e[0])?((0,r.mb)(t,0,e,n)||(t=t.slice(),(0,r.NK)(t,0,e,n)),t):((0,r.PA)(t,0,e,n)||(t=t.slice(),(0,r.ug)(t,0,e,n)),t)}(n.flatCoordinates,n.ends,s):n.flatCoordinates,n.ends?.flat(),s,t.properties||{},t.id).enableSimplifyTransformed(),!1,e)}function v(t,e){if(!t)return null;if(Array.isArray(t)){const n=t.map((t=>v(t,e)));return new c.A(n)}return g(new(0,y[t.type])(t.flatCoordinates,t.layout||"XY",t.ends),!1,e)}},73465:function(t,e,n){"use strict";n.d(e,{Ay:function(){return C},VV:function(){return E},QD:function(){return T}});var i=n(36634),r=n(61829),s=n(44090),o=n(18381),a=n(22685),l=n(16235),h=n(31141),u=n(25231),c=n(92662),d=n(96081),f=n(38497),p=n(35369),g=n(12165);class m extends i.Ay{constructor(t,e,n,i,s,o,a){let h=t.getExtent();h&&t.canWrapX()&&(h=h.slice(),h[0]=-1/0,h[2]=1/0);let u=e.getExtent();u&&e.canWrapX()&&(u=u.slice(),u[0]=-1/0,u[2]=1/0);const c=u?(0,l._N)(n,u):n,f=(0,l.q1)(c),m=(0,d.KQ)(t,e,f,i),y=g.l,_=new p.A(t,e,c,h,m*y,i),v=_.calculateSourceExtent(),x=(0,l.Im)(v)?null:o(v,m,s),b=x?r.A.IDLE:r.A.EMPTY,w=x?x.getPixelRatio():1;super(n,i,w,b),this.targetProj_=e,this.maxSourceExtent_=h,this.triangulation_=_,this.targetResolution_=i,this.targetExtent_=n,this.sourceImage_=x,this.sourcePixelRatio_=w,this.interpolate_=a,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==r.A.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){const t=this.sourceImage_.getState();if(t==r.A.LOADED){const t=(0,l.RG)(this.targetExtent_)/this.targetResolution_,e=(0,l.Oq)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,d.XX)(t,e,this.sourcePixelRatio_,(0,f.m)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==r.A.IDLE){this.state=r.A.LOADING,this.changed();const t=this.sourceImage_.getState();t==r.A.LOADED||t==r.A.ERROR?this.reproject_():(this.sourceListenerKey_=(0,c.KT)(this.sourceImage_,a.A.CHANGE,(t=>{const e=this.sourceImage_.getState();e!=r.A.LOADED&&e!=r.A.ERROR||(this.unlistenSource_(),this.reproject_())})),this.sourceImage_.load())}}unlistenSource_(){(0,c.JH)(this.sourceListenerKey_),this.sourceListenerKey_=null}}var y=m,_=n(31716),v=n(17656);const x="imageloadstart",b="imageloadend",w="imageloaderror";class A extends o.Ay{constructor(t,e){super(t),this.image=e}}class S extends _.A{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){const e=this.getResolutions();if(e){t=e[(0,s.FT)(e,t,0)]}return t}getImage(t,e,n,i){const r=this.getProjection();if(!r||!i||(0,u.tI)(r,i))return r&&(i=r),this.getImageInternal(t,e,n,i);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,u.tI)(this.reprojectedImage_.getProjection(),i)&&this.reprojectedImage_.getResolution()==e&&(0,l.aI)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new y(r,i,t,e,n,((t,e,n)=>this.getImageInternal(t,e,n,r)),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,n,r){if(this.loader){const s=T(t,e,n,1),o=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&(0,l.ms)(this.wantedExtent_,s)||(0,l.ms)(this.image.getExtent(),s))&&(this.wantedResolution_&&(0,f.m)(this.wantedResolution_)===o||(0,f.m)(this.image.getResolution())===o)))return this.image;this.wantedProjection_=r,this.wantedExtent_=s,this.wantedResolution_=o,this.image=new i.Ay(s,o,n,this.loader),this.image.addEventListener(a.A.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){const e=t.target;let n;switch(e.getState()){case r.A.LOADING:this.loading=!0,n=x;break;case r.A.LOADED:this.loading=!1,n=b;break;case r.A.ERROR:this.loading=!1,n=w;break;default:return}this.hasListener(n)&&this.dispatchEvent(new A(n,e))}}function E(t,e){t.getImage().src=e}function T(t,e,n,i){const r=e/n,s=(0,l.q1)(t),o=(0,h.mk)((0,l.RG)(t)/r,v.B),a=(0,h.mk)((0,l.Oq)(t)/r,v.B),u=o+2*(0,h.mk)((i-1)*o/2,v.B),c=a+2*(0,h.mk)((i-1)*a/2,v.B);return(0,l.Bg)(s,r,0,[u,c])}var C=S},73808:function(t,e,n){"use strict";var i=n(69791);e.A=class{constructor(){this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy((0,i.lr)(),{get:(t,e)=>{if("function"==typeof(0,i.lr)()[e])return this.push_(e),this.pushMethodArgs_},set:(t,e,n)=>(this.push_(e,n),!0)})}push_(...t){const e=this.instructions_,n=this.zIndex+this.offset_;e[n]||(e[n]=[]),e[n].push(...t)}pushMethodArgs_=(...t)=>(this.push_(t),this);pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach((e=>{for(let n=0,i=e.length;n<i;++n){const i=e[n];if("function"==typeof i){i(t);continue}const r=e[++n];if("function"==typeof t[i])t[i](...r);else{if("function"==typeof r){t[i]=r(t);continue}t[i]=r}}}))}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}},73887:function(t,e,n){"use strict";var i=n(96479),r=n(70192),s=n(18381);const o="length";class a extends s.Ay{constructor(t,e,n){super(t),this.element=e,this.index=n}}class l extends r.A{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let t=0,e=this.array_.length;t<e;++t)this.assertUnique_(this.array_[t],t);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,n=t.length;e<n;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)t(e[n],n,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(o)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new a(i.A.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let n=0,i=e.length;n<i;++n)if(e[n]===t)return this.removeAt(n)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new a(i.A.REMOVE,e,t)),e}setAt(t,e){if(t>=this.getLength())return void this.insertAt(t,e);if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new a(i.A.REMOVE,n,t)),this.dispatchEvent(new a(i.A.ADD,e,t))}updateLength_(){this.set(o,this.array_.length)}assertUnique_(t,e){for(let n=0,i=this.array_.length;n<i;++n)if(this.array_[n]===t&&n!==e)throw new Error("Duplicate item added to a unique collection")}}e.A=l},73988:function(t,e,n){"use strict";var i=n(81297),r=n(70192),s=n(92662),o=n(95702);class a extends r.A{constructor(t){super();const e=t.element;!e||t.target||e.style.pointerEvents||(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){this.element?.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){this.map_&&this.element?.remove();for(let t=0,e=this.listenerKeys.length;t<e;++t)(0,s.JH)(this.listenerKeys[t]);if(this.listenerKeys.length=0,this.map_=t,t){const e=this.target_??t.getOverlayContainerStopEvent();this.element&&e.appendChild(this.element),this.render!==o.tV&&this.listenerKeys.push((0,s.KT)(t,i.A.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_="string"==typeof t?document.getElementById(t):t}}e.A=a},74568:function(t,e){"use strict";e.A={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}},74676:function(t,e,n){"use strict";var i=n(73887),r=n(96479),s=n(51541),o=n(25309),a=n(44090),l=n(61341),h=n(18381),u=n(22685),c=n(38808),d=n(16235),f=n(40878),p=n(30470),g=n(23986),m=n(25231),y=n(29810),_=n(9424),v=n(12918),x=n(88292),b=n(37759),w=n(87113);const A=[0,0,0,0],S=[],E="modifystart",T="modifyend";class C extends h.Ay{constructor(t,e,n){super(t),this.features=e,this.mapBrowserEvent=n}}class M extends w.A{constructor(t){let e;if(super(t),this.on,this.once,this.un,this.boundHandleFeatureChange_=this.handleFeatureChange_.bind(this),this.condition_=t.condition?t.condition:c.fs,this.defaultDeleteCondition_=function(t){return(0,c.Js)(t)&&(0,c.t5)(t)},this.deleteCondition_=t.deleteCondition?t.deleteCondition:this.defaultDeleteCondition_,this.insertVertexCondition_=t.insertVertexCondition?t.insertVertexCondition:c.Gk,this.vertexFeature_=null,this.vertexSegments_=null,this.lastPixel_=[0,0],this.ignoreNextSingleClick_=!1,this.featuresBeingModified_=null,this.rBush_=new v.A,this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.snappedToVertex_=!1,this.changingFeature_=!1,this.dragSegments_=[],this.overlay_=new g.A({source:new y.A({useSpatialIndex:!1,wrapX:!!t.wrapX}),style:t.style?t.style:I(),updateWhileAnimating:!0,updateWhileInteracting:!0}),this.SEGMENT_WRITERS_={Point:this.writePointGeometry_.bind(this),LineString:this.writeLineStringGeometry_.bind(this),LinearRing:this.writeLineStringGeometry_.bind(this),Polygon:this.writePolygonGeometry_.bind(this),MultiPoint:this.writeMultiPointGeometry_.bind(this),MultiLineString:this.writeMultiLineStringGeometry_.bind(this),MultiPolygon:this.writeMultiPolygonGeometry_.bind(this),Circle:this.writeCircleGeometry_.bind(this),GeometryCollection:this.writeGeometryCollectionGeometry_.bind(this)},this.source_=null,this.hitDetection_=null,t.features?e=t.features:t.source&&(this.source_=t.source,e=new i.A(this.source_.getFeatures()),this.source_.addEventListener(_.A.ADDFEATURE,this.handleSourceAdd_.bind(this)),this.source_.addEventListener(_.A.REMOVEFEATURE,this.handleSourceRemove_.bind(this))),!e)throw new Error("The modify interaction requires features, a source or a layer");t.hitDetection&&(this.hitDetection_=t.hitDetection),this.features_=e,this.features_.forEach(this.addFeature_.bind(this)),this.features_.addEventListener(r.A.ADD,this.handleFeatureAdd_.bind(this)),this.features_.addEventListener(r.A.REMOVE,this.handleFeatureRemove_.bind(this)),this.lastPointerEvent_=null,this.delta_=[0,0],this.snapToPointer_=void 0===t.snapToPointer?!this.hitDetection_:t.snapToPointer}addFeature_(t){const e=t.getGeometry();if(e){const n=this.SEGMENT_WRITERS_[e.getType()];n&&n(t,e)}const n=this.getMap();n&&n.isRendered()&&this.getActive()&&this.handlePointerAtPixel_(n.getCoordinateFromPixel(this.lastPixel_)),t.addEventListener(u.A.CHANGE,this.boundHandleFeatureChange_)}willModifyFeatures_(t,e){if(!this.featuresBeingModified_){this.featuresBeingModified_=new i.A;const n=this.featuresBeingModified_.getArray();for(let t=0,i=e.length;t<i;++t){const i=e[t].feature;i&&!n.includes(i)&&this.featuresBeingModified_.push(i)}0===this.featuresBeingModified_.getLength()?this.featuresBeingModified_=null:this.dispatchEvent(new C(E,this.featuresBeingModified_,t))}}removeFeature_(t){this.removeFeatureSegmentData_(t),this.vertexFeature_&&0===this.features_.getLength()&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.removeEventListener(u.A.CHANGE,this.boundHandleFeatureChange_)}removeFeatureSegmentData_(t){const e=this.rBush_,n=[];e.forEach((function(e){t===e.feature&&n.push(e)}));for(let t=n.length-1;t>=0;--t){const i=n[t];for(let t=this.dragSegments_.length-1;t>=0;--t)this.dragSegments_[t][0]===i&&this.dragSegments_.splice(t,1);e.remove(i)}}setActive(t){this.vertexFeature_&&!t&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),super.setActive(t)}setMap(t){this.overlay_.setMap(t),super.setMap(t)}getOverlay(){return this.overlay_}handleSourceAdd_(t){t.feature&&this.features_.push(t.feature)}handleSourceRemove_(t){t.feature&&this.features_.remove(t.feature)}handleFeatureAdd_(t){this.addFeature_(t.element)}handleFeatureChange_(t){if(!this.changingFeature_){const e=t.target;this.removeFeature_(e),this.addFeature_(e)}}handleFeatureRemove_(t){this.removeFeature_(t.element)}writePointGeometry_(t,e){const n=e.getCoordinates(),i={feature:t,geometry:e,segment:[n,n]};this.rBush_.insert(e.getExtent(),i)}writeMultiPointGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i],s={feature:t,geometry:e,depth:[i],index:i,segment:[r,r]};this.rBush_.insert(e.getExtent(),s)}}writeLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length-1;i<r;++i){const r=n.slice(i,i+2),s={feature:t,geometry:e,index:i,segment:r};this.rBush_.insert((0,d.Tr)(r),s)}}writeMultiLineStringGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,s=r.length-1;n<s;++n){const s=r.slice(n,n+2),o={feature:t,geometry:e,depth:[i],index:n,segment:s};this.rBush_.insert((0,d.Tr)(s),o)}}}writePolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,s=r.length-1;n<s;++n){const s=r.slice(n,n+2),o={feature:t,geometry:e,depth:[i],index:n,segment:s};this.rBush_.insert((0,d.Tr)(s),o)}}}writeMultiPolygonGeometry_(t,e){const n=e.getCoordinates();for(let i=0,r=n.length;i<r;++i){const r=n[i];for(let n=0,s=r.length;n<s;++n){const s=r[n];for(let r=0,o=s.length-1;r<o;++r){const o=s.slice(r,r+2),a={feature:t,geometry:e,depth:[n,i],index:r,segment:o};this.rBush_.insert((0,d.Tr)(o),a)}}}}writeCircleGeometry_(t,e){const n=e.getCenter(),i={feature:t,geometry:e,index:0,segment:[n,n]},r={feature:t,geometry:e,index:1,segment:[n,n]},s=[i,r];i.featureSegments=s,r.featureSegments=s,this.rBush_.insert((0,d.dP)(n),i);let o=e;const a=(0,m.Tf)();if(a&&this.getMap()){const t=this.getMap().getView().getProjection();o=o.clone().transform(a,t),o=(0,p.nD)(o).transform(t,a)}this.rBush_.insert(o.getExtent(),r)}writeGeometryCollectionGeometry_(t,e){const n=e.getGeometriesArray();for(let e=0;e<n.length;++e){const i=n[e];(0,this.SEGMENT_WRITERS_[i.getType()])(t,i)}}createOrUpdateVertexFeature_(t,e,n,i){let r=this.vertexFeature_;if(r){r.getGeometry().setCoordinates(t)}else r=new s.A(new f.A(t)),this.vertexFeature_=r,this.overlay_.getSource().addFeature(r);return r.set("features",e),r.set("geometries",n),r.set("existing",i),r}handleEvent(t){if(!t.originalEvent)return!0;let e;return this.lastPointerEvent_=t,t.map.getView().getInteracting()||t.type!=o.A.POINTERMOVE||this.handlingDownUpSequence||this.handlePointerMove_(t),this.vertexFeature_&&this.deleteCondition_(t)&&(e=!(t.type!=o.A.SINGLECLICK||!this.ignoreNextSingleClick_)||this.removePoint()),t.type==o.A.SINGLECLICK&&(this.ignoreNextSingleClick_=!1),super.handleEvent(t)&&!e}findInsertVerticesAndUpdateDragSegments_(t){this.handlePointerAtPixel_(t),this.dragSegments_.length=0,this.featuresBeingModified_=null;const e=this.vertexFeature_;if(!e)return;const n=this.getMap().getView().getProjection(),i=[],r=e.getGeometry().getCoordinates(),s=(0,d.Tr)([r]),o=this.rBush_.getInExtent(s),a={};o.sort(L);for(let e=0,s=o.length;e<s;++e){const s=o[e],h=s.segment;let u=(0,b.v6)(s.geometry);const c=s.depth;if(c&&(u+="-"+c.join("-")),a[u]||(a[u]=new Array(2)),"Circle"!==s.geometry.getType()||1!==s.index)if(!(0,l.aI)(h[0],r)||a[u][0])if(!(0,l.aI)(h[1],r)||a[u][1])!((0,b.v6)(h)in this.vertexSegments_)||a[u][0]||a[u][1]||i.push(s);else{if(a[u][0]&&0===a[u][0].index){let t=s.geometry.getCoordinates();switch(s.geometry.getType()){case"LineString":case"MultiLineString":continue;case"MultiPolygon":t=t[c[1]];case"Polygon":if(s.index!==t[c[0]].length-2)continue}}this.dragSegments_.push([s,1]),a[u][1]=s}else this.dragSegments_.push([s,0]),a[u][0]=s;else{const e=R(t,s,n);(0,l.aI)(e,r)&&!a[u][0]&&(this.dragSegments_.push([s,0]),a[u][0]=s)}}return i}handleDragEvent(t){this.ignoreNextSingleClick_=!1,this.willModifyFeatures_(t,this.dragSegments_.map((([t])=>t)));const e=[t.coordinate[0]+this.delta_[0],t.coordinate[1]+this.delta_[1]],n=[],i=[];for(let r=0,s=this.dragSegments_.length;r<s;++r){const s=this.dragSegments_[r],o=s[0],a=o.feature;n.includes(a)||n.push(a);const h=o.geometry;i.includes(h)||i.push(h);const u=o.depth;let c;const d=o.segment,f=s[1];for(;e.length<h.getStride();)e.push(d[f][e.length]);switch(h.getType()){case"Point":c=e,d[0]=e,d[1]=e;break;case"MultiPoint":c=h.getCoordinates(),c[o.index]=e,d[0]=e,d[1]=e;break;case"LineString":c=h.getCoordinates(),c[o.index+f]=e,d[f]=e;break;case"MultiLineString":case"Polygon":c=h.getCoordinates(),c[u[0]][o.index+f]=e,d[f]=e;break;case"MultiPolygon":c=h.getCoordinates(),c[u[1]][u[0]][o.index+f]=e,d[f]=e;break;case"Circle":const n=h;if(d[0]=e,d[1]=e,0===o.index)this.changingFeature_=!0,n.setCenter(e),this.changingFeature_=!1;else{this.changingFeature_=!0;const i=t.map.getView().getProjection();let r=(0,l.Io)((0,m.Ad)(n.getCenter(),i),(0,m.Ad)(e,i));const s=(0,m.Tf)();if(s){const t=n.clone().transform(s,i);t.setRadius(r),r=t.transform(i,s).getRadius()}n.setRadius(r),this.changingFeature_=!1}}c&&this.setGeometryCoordinates_(h,c)}this.createOrUpdateVertexFeature_(e,n,i,!0)}handleDownEvent(t){if(!this.condition_(t))return!1;const e=t.coordinate,n=this.findInsertVerticesAndUpdateDragSegments_(e);if(n?.length&&this.insertVertexCondition_(t)&&(this.willModifyFeatures_(t,n),this.vertexFeature_)){const t=this.vertexFeature_.getGeometry().getCoordinates();for(let e=n.length-1;e>=0;--e)this.insertVertex_(n[e],t);this.ignoreNextSingleClick_=!0}return!!this.vertexFeature_}handleUpEvent(t){for(let e=this.dragSegments_.length-1;e>=0;--e){const n=this.dragSegments_[e][0],i=n.geometry;if("Circle"===i.getType()){const e=i,r=e.getCenter(),s=n.featureSegments[0],o=n.featureSegments[1];s.segment[0]=r,s.segment[1]=r,o.segment[0]=r,o.segment[1]=r,this.rBush_.update((0,d.dP)(r),s);let a=e;const l=(0,m.Tf)();if(l){const e=t.map.getView().getProjection();a=a.clone().transform(l,e),a=(0,p.nD)(a).transform(e,l)}this.rBush_.update(a.getExtent(),o)}else this.rBush_.update((0,d.Tr)(n.segment),n)}return this.featuresBeingModified_&&(this.dispatchEvent(new C(T,this.featuresBeingModified_,t)),this.featuresBeingModified_=null),!1}handlePointerMove_(t){this.lastPixel_=t.pixel,this.handlePointerAtPixel_(t.coordinate)}handlePointerAtPixel_(t){const e=this.getMap(),n=e.getPixelFromCoordinate(t),i=e.getView().getProjection(),r=function(e,n){return P(t,e,i)-P(t,n,i)};let o,a;if(this.hitDetection_){const t="object"==typeof this.hitDetection_?t=>t===this.hitDetection_:void 0;e.forEachFeatureAtPixel(n,((t,e,n)=>{n&&"Point"===n.getType()&&(n=new f.A((0,m.te)(n.getCoordinates(),i)));const r=n||t.getGeometry();if(r&&"Point"===r.getType()&&t instanceof s.A&&this.features_.getArray().includes(t)){a=r;const e=t.getGeometry().getFlatCoordinates().slice(0,2);o=[{feature:t,geometry:a,segment:[e,e]}]}return!0}),{layerFilter:t})}if(!o){const n=(0,m.SD)((0,d.dP)(t,A),i),r=e.getView().getResolution()*this.pixelTolerance_,s=(0,m.JR)((0,d.r)(n,r,A),i);o=this.rBush_.getInExtent(s)}if(o&&o.length>0){const s=o.sort(r)[0],h=s.segment;let u=R(t,s,i);const c=e.getPixelFromCoordinate(u);let d=(0,l.Io)(n,c);if(a||d<=this.pixelTolerance_){const n={};if(n[(0,b.v6)(h)]=!0,this.snapToPointer_||(this.delta_[0]=u[0]-t[0],this.delta_[1]=u[1]-t[1]),"Circle"===s.geometry.getType()&&1===s.index)this.snappedToVertex_=!0,this.createOrUpdateVertexFeature_(u,[s.feature],[s.geometry],this.snappedToVertex_);else{const t=e.getPixelFromCoordinate(h[0]),i=e.getPixelFromCoordinate(h[1]),r=(0,l.hG)(c,t),a=(0,l.hG)(c,i);if(d=Math.sqrt(Math.min(r,a)),this.snappedToVertex_=d<=this.pixelTolerance_,!this.snappedToVertex_&&!this.insertVertexCondition_(this.lastPointerEvent_))return void(this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null));this.snappedToVertex_&&(u=r>a?h[1]:h[0]),this.createOrUpdateVertexFeature_(u,[s.feature],[s.geometry],this.snappedToVertex_);const f={};f[(0,b.v6)(s.geometry)]=!0;for(let t=1,e=o.length;t<e;++t){const e=o[t].segment;if(!((0,l.aI)(h[0],e[0])&&(0,l.aI)(h[1],e[1])||(0,l.aI)(h[0],e[1])&&(0,l.aI)(h[1],e[0])))break;{const i=(0,b.v6)(o[t].geometry);i in f||(f[i]=!0,n[(0,b.v6)(e)]=!0)}}}return void(this.vertexSegments_=n)}}this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null)}insertVertex_(t,e){const n=t.segment,i=t.feature,r=t.geometry,s=t.depth,o=t.index;let a;for(;e.length<r.getStride();)e.push(0);switch(r.getType()){case"MultiLineString":case"Polygon":a=r.getCoordinates(),a[s[0]].splice(o+1,0,e);break;case"MultiPolygon":a=r.getCoordinates(),a[s[1]][s[0]].splice(o+1,0,e);break;case"LineString":a=r.getCoordinates(),a.splice(o+1,0,e);break;default:return!1}this.setGeometryCoordinates_(r,a);const l=this.rBush_;l.remove(t),this.updateSegmentIndices_(r,o,s,1);const h={segment:[n[0],e],feature:i,geometry:r,depth:s,index:o};l.insert((0,d.Tr)(h.segment),h),this.dragSegments_.push([h,1]);const u={segment:[e,n[1]],feature:i,geometry:r,depth:s,index:o+1};return l.insert((0,d.Tr)(u.segment),u),this.dragSegments_.push([u,0]),!0}updatePointer_(t){return t&&this.findInsertVerticesAndUpdateDragSegments_(t),this.vertexFeature_?.getGeometry().getCoordinates()}getPoint(){const t=this.vertexFeature_?.getGeometry().getCoordinates();return t?(0,m.te)(t,this.getMap().getView().getProjection()):null}canRemovePoint(){if(!this.vertexFeature_)return!1;if(this.vertexFeature_.get("geometries").every((t=>"Circle"===t.getType()||t.getType().endsWith("Point"))))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent((0,d.Tr)([t])).some((({segment:e})=>(0,l.aI)(e[0],t)||(0,l.aI)(e[1],t)))}removePoint(t){if(t&&(t=(0,m.Ad)(t,this.getMap().getView().getProjection()),this.updatePointer_(t)),!this.lastPointerEvent_||this.lastPointerEvent_&&this.lastPointerEvent_.type!=o.A.POINTERDRAG){const t=this.lastPointerEvent_;this.willModifyFeatures_(t,this.dragSegments_.map((([t])=>t)));const e=this.removeVertex_();return this.featuresBeingModified_&&this.dispatchEvent(new C(T,this.featuresBeingModified_,t)),this.featuresBeingModified_=null,e}return!1}removeVertex_(){const t=this.dragSegments_,e={};let n,i,r,s,o,a,l,h,u,c,f,p=!1;for(o=t.length-1;o>=0;--o)r=t[o],c=r[0],f=(0,b.v6)(c.feature),c.depth&&(f+="-"+c.depth.join("-")),f in e||(e[f]={}),0===r[1]?(e[f].right=c,e[f].index=c.index):1==r[1]&&(e[f].left=c,e[f].index=c.index+1);for(f in e){switch(u=e[f].right,l=e[f].left,a=e[f].index,h=a-1,c=void 0!==l?l:u,h<0&&(h=0),s=c.geometry,i=s.getCoordinates(),n=i,p=!1,s.getType()){case"MultiLineString":i[c.depth[0]].length>2&&(i[c.depth[0]].splice(a,1),p=!0);break;case"LineString":i.length>2&&(i.splice(a,1),p=!0);break;case"MultiPolygon":n=n[c.depth[1]];case"Polygon":n=n[c.depth[0]],n.length>4&&(a==n.length-1&&(a=0),n.splice(a,1),p=!0,0===a&&(n.pop(),n.push(n[0]),h=n.length-1))}if(p){this.setGeometryCoordinates_(s,i);const e=[];if(void 0!==l&&(this.rBush_.remove(l),e.push(l.segment[0])),void 0!==u&&(this.rBush_.remove(u),e.push(u.segment[1])),void 0!==l&&void 0!==u){const t={depth:c.depth,feature:c.feature,geometry:c.geometry,index:h,segment:e};this.rBush_.insert((0,d.Tr)(t.segment),t)}this.updateSegmentIndices_(s,a,c.depth,-1),this.vertexFeature_&&(this.overlay_.getSource().removeFeature(this.vertexFeature_),this.vertexFeature_=null),t.length=0}}return p}canInsertPoint(){if(!this.vertexFeature_)return!1;if(this.vertexFeature_.get("geometries").every((t=>"Circle"===t.getType()||t.getType().endsWith("Point"))))return!1;const t=this.vertexFeature_.getGeometry().getCoordinates();return this.rBush_.getInExtent((0,d.Tr)([t])).some((({segment:e})=>!((0,l.aI)(e[0],t)||(0,l.aI)(e[1],t))))}insertPoint(t){const e=t?(0,m.Ad)(t,this.getMap().getView().getProjection()):this.vertexFeature_?.getGeometry().getCoordinates();if(!e)return!1;return this.findInsertVerticesAndUpdateDragSegments_(e).reduce(((t,n)=>t||this.insertVertex_(n,e)),!1)}setGeometryCoordinates_(t,e){this.changingFeature_=!0,t.setCoordinates(e),this.changingFeature_=!1}updateSegmentIndices_(t,e,n,i){this.rBush_.forEachInExtent(t.getExtent(),(function(r){r.geometry===t&&(void 0===n||void 0===r.depth||(0,a.aI)(r.depth,n))&&r.index>e&&(r.index+=i)}))}}function L(t,e){return t.index-e.index}function P(t,e,n){const i=e.geometry;if("Circle"===i.getType()){let r=i;if(1===e.index){const e=(0,m.Tf)();e&&(r=r.clone().transform(e,n));const i=(0,l.hG)(r.getCenter(),(0,m.Ad)(t,n)),s=Math.sqrt(i)-r.getRadius();return s*s}}const r=(0,m.Ad)(t,n);return S[0]=(0,m.Ad)(e.segment[0],n),S[1]=(0,m.Ad)(e.segment[1],n),(0,l.$x)(r,S)}function R(t,e,n){const i=e.geometry;if("Circle"===i.getType()&&1===e.index){let e=i;const r=(0,m.Tf)();return r&&(e=e.clone().transform(r,n)),(0,m.te)(e.getClosestPoint((0,m.Ad)(t,n)),n)}const r=(0,m.Ad)(t,n);return S[0]=(0,m.Ad)(e.segment[0],n),S[1]=(0,m.Ad)(e.segment[1],n),(0,m.te)((0,l.sG)(r,S),n)}function I(){const t=(0,x.mY)();return function(e,n){return t.Point}}e.A=M},74977:function(t,e,n){"use strict";n.d(e,{$:function(){return it},AO:function(){return dt},Rq:function(){return st},a8:function(){return rt}});var i=Uint8Array,r=Uint16Array,s=Int32Array,o=new i([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),a=new i([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),l=new i([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=function(t,e){for(var n=new r(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];var o=new s(n[30]);for(i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)o[a]=a-n[i]<<5|i;return{b:n,r:o}},u=h(o,2),c=u.b,d=u.r;c[28]=258,d[258]=28;for(var f=h(a,0),p=f.b,g=f.r,m=new r(32768),y=0;y<32768;++y){var _=(43690&y)>>1|(21845&y)<<1;_=(61680&(_=(52428&_)>>2|(13107&_)<<2))>>4|(3855&_)<<4,m[y]=((65280&_)>>8|(255&_)<<8)>>1}var v=function(t,e,n){for(var i=t.length,s=0,o=new r(e);s<i;++s)t[s]&&++o[t[s]-1];var a,l=new r(e);for(s=1;s<e;++s)l[s]=l[s-1]+o[s-1]<<1;if(n){a=new r(1<<e);var h=15-e;for(s=0;s<i;++s)if(t[s])for(var u=s<<4|t[s],c=e-t[s],d=l[t[s]-1]++<<c,f=d|(1<<c)-1;d<=f;++d)a[m[d]>>h]=u}else for(a=new r(i),s=0;s<i;++s)t[s]&&(a[s]=m[l[t[s]-1]++]>>15-t[s]);return a},x=new i(288);for(y=0;y<144;++y)x[y]=8;for(y=144;y<256;++y)x[y]=9;for(y=256;y<280;++y)x[y]=7;for(y=280;y<288;++y)x[y]=8;var b=new i(32);for(y=0;y<32;++y)b[y]=5;var w=v(x,9,0),A=v(x,9,1),S=v(b,5,0),E=v(b,5,1),T=function(t){for(var e=t[0],n=1;n<t.length;++n)t[n]>e&&(e=t[n]);return e},C=function(t,e,n){var i=e/8|0;return(t[i]|t[i+1]<<8)>>(7&e)&n},M=function(t,e){var n=e/8|0;return(t[n]|t[n+1]<<8|t[n+2]<<16)>>(7&e)},L=function(t){return(t+7)/8|0},P=function(t,e,n){return(null==e||e<0)&&(e=0),(null==n||n>t.length)&&(n=t.length),new i(t.subarray(e,n))},R=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],I=function(t,e,n){var i=new Error(e||R[t]);if(i.code=t,Error.captureStackTrace&&Error.captureStackTrace(i,I),!n)throw i;return i},N=function(t,e,n,r){var s=t.length,h=r?r.length:0;if(!s||e.f&&!e.l)return n||new i(0);var u=!n,d=u||2!=e.i,f=e.i;u&&(n=new i(3*s));var g=function(t){var e=n.length;if(t>e){var r=new i(Math.max(2*e,t));r.set(n),n=r}},m=e.f||0,y=e.p||0,_=e.b||0,x=e.l,b=e.d,w=e.m,S=e.n,R=8*s;do{if(!x){m=C(t,y,1);var N=C(t,y+1,3);if(y+=3,!N){var F=t[($=L(y)+4)-4]|t[$-3]<<8,k=$+F;if(k>s){f&&I(0);break}d&&g(_+F),n.set(t.subarray($,k),_),e.b=_+=F,e.p=y=8*k,e.f=m;continue}if(1==N)x=A,b=E,w=9,S=5;else if(2==N){var D=C(t,y,31)+257,O=C(t,y+10,15)+4,j=D+C(t,y+5,31)+1;y+=14;for(var G=new i(j),B=new i(19),z=0;z<O;++z)B[l[z]]=C(t,y+3*z,7);y+=3*O;var q=T(B),U=(1<<q)-1,W=v(B,q,1);for(z=0;z<j;){var $,V=W[C(t,y,U)];if(y+=15&V,($=V>>4)<16)G[z++]=$;else{var X=0,H=0;for(16==$?(H=3+C(t,y,3),y+=2,X=G[z-1]):17==$?(H=3+C(t,y,7),y+=3):18==$&&(H=11+C(t,y,127),y+=7);H--;)G[z++]=X}}var Y=G.subarray(0,D),Z=G.subarray(D);w=T(Y),S=T(Z),x=v(Y,w,1),b=v(Z,S,1)}else I(1);if(y>R){f&&I(0);break}}d&&g(_+131072);for(var K=(1<<w)-1,J=(1<<S)-1,Q=y;;Q=y){var tt=(X=x[M(t,y)&K])>>4;if((y+=15&X)>R){f&&I(0);break}if(X||I(2),tt<256)n[_++]=tt;else{if(256==tt){Q=y,x=null;break}var et=tt-254;if(tt>264){var nt=o[z=tt-257];et=C(t,y,(1<<nt)-1)+c[z],y+=nt}var it=b[M(t,y)&J],rt=it>>4;it||I(3),y+=15&it;Z=p[rt];if(rt>3){nt=a[rt];Z+=M(t,y)&(1<<nt)-1,y+=nt}if(y>R){f&&I(0);break}d&&g(_+131072);var st=_+et;if(_<Z){var ot=h-Z,at=Math.min(Z,st);for(ot+_<0&&I(3);_<at;++_)n[_]=r[ot+_]}for(;_<st;++_)n[_]=n[_-Z]}}e.l=x,e.p=Q,e.b=_,e.f=m,x&&(m=1,e.m=w,e.d=b,e.n=S)}while(!m);return _!=n.length&&u?P(n,0,_):n.subarray(0,_)},F=function(t,e,n){n<<=7&e;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},k=function(t,e,n){n<<=7&e;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},D=function(t,e){for(var n=[],s=0;s<t.length;++s)t[s]&&n.push({s:s,f:t[s]});var o=n.length,a=n.slice();if(!o)return{t:U,l:0};if(1==o){var l=new i(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort((function(t,e){return t.f-e.f})),n.push({s:-1,f:25001});var h=n[0],u=n[1],c=0,d=1,f=2;for(n[0]={s:-1,f:h.f+u.f,l:h,r:u};d!=o-1;)h=n[n[c].f<n[f].f?c++:f++],u=n[c!=d&&n[c].f<n[f].f?c++:f++],n[d++]={s:-1,f:h.f+u.f,l:h,r:u};var p=a[0].s;for(s=1;s<o;++s)a[s].s>p&&(p=a[s].s);var g=new r(p+1),m=O(n[d-1],g,0);if(m>e){s=0;var y=0,_=m-e,v=1<<_;for(a.sort((function(t,e){return g[e.s]-g[t.s]||t.f-e.f}));s<o;++s){var x=a[s].s;if(!(g[x]>e))break;y+=v-(1<<m-g[x]),g[x]=e}for(y>>=_;y>0;){var b=a[s].s;g[b]<e?y-=1<<e-g[b]++-1:++s}for(;s>=0&&y;--s){var w=a[s].s;g[w]==e&&(--g[w],++y)}m=e}return{t:new i(g),l:m}},O=function(t,e,n){return-1==t.s?Math.max(O(t.l,e,n+1),O(t.r,e,n+1)):e[t.s]=n},j=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new r(++e),i=0,s=t[0],o=1,a=function(t){n[i++]=t},l=1;l<=e;++l)if(t[l]==s&&l!=e)++o;else{if(!s&&o>2){for(;o>138;o-=138)a(32754);o>2&&(a(o>10?o-11<<5|28690:o-3<<5|12305),o=0)}else if(o>3){for(a(s),--o;o>6;o-=6)a(8304);o>2&&(a(o-3<<5|8208),o=0)}for(;o--;)a(s);o=1,s=t[l]}return{c:n.subarray(0,i),n:e}},G=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},B=function(t,e,n){var i=n.length,r=L(e+2);t[r]=255&i,t[r+1]=i>>8,t[r+2]=255^t[r],t[r+3]=255^t[r+1];for(var s=0;s<i;++s)t[r+s+4]=n[s];return 8*(r+4+i)},z=function(t,e,n,i,s,h,u,c,d,f,p){F(e,p++,n),++s[256];for(var g=D(s,15),m=g.t,y=g.l,_=D(h,15),A=_.t,E=_.l,T=j(m),C=T.c,M=T.n,L=j(A),P=L.c,R=L.n,I=new r(19),N=0;N<C.length;++N)++I[31&C[N]];for(N=0;N<P.length;++N)++I[31&P[N]];for(var O=D(I,7),z=O.t,q=O.l,U=19;U>4&&!z[l[U-1]];--U);var W,$,V,X,H=f+5<<3,Y=G(s,x)+G(h,b)+u,Z=G(s,m)+G(h,A)+u+14+3*U+G(I,z)+2*I[16]+3*I[17]+7*I[18];if(d>=0&&H<=Y&&H<=Z)return B(e,p,t.subarray(d,d+f));if(F(e,p,1+(Z<Y)),p+=2,Z<Y){W=v(m,y,0),$=m,V=v(A,E,0),X=A;var K=v(z,q,0);F(e,p,M-257),F(e,p+5,R-1),F(e,p+10,U-4),p+=14;for(N=0;N<U;++N)F(e,p+3*N,z[l[N]]);p+=3*U;for(var J=[C,P],Q=0;Q<2;++Q){var tt=J[Q];for(N=0;N<tt.length;++N){var et=31&tt[N];F(e,p,K[et]),p+=z[et],et>15&&(F(e,p,tt[N]>>5&127),p+=tt[N]>>12)}}}else W=w,$=x,V=S,X=b;for(N=0;N<c;++N){var nt=i[N];if(nt>255){k(e,p,W[(et=nt>>18&31)+257]),p+=$[et+257],et>7&&(F(e,p,nt>>23&31),p+=o[et]);var it=31&nt;k(e,p,V[it]),p+=X[it],it>3&&(k(e,p,nt>>5&8191),p+=a[it])}else k(e,p,W[nt]),p+=$[nt]}return k(e,p,W[256]),p+$[256]},q=new s([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),U=new i(0),W=function(t,e,n,l,h,u){var c=u.z||t.length,f=new i(l+c+5*(1+Math.ceil(c/7e3))+h),p=f.subarray(l,f.length-h),m=u.l,y=7&(u.r||0);if(e){y&&(p[0]=u.r>>3);for(var _=q[e-1],v=_>>13,x=8191&_,b=(1<<n)-1,w=u.p||new r(32768),A=u.h||new r(b+1),S=Math.ceil(n/3),E=2*S,T=function(e){return(t[e]^t[e+1]<<S^t[e+2]<<E)&b},C=new s(25e3),M=new r(288),R=new r(32),I=0,N=0,F=u.i||0,k=0,D=u.w||0,O=0;F+2<c;++F){var j=T(F),G=32767&F,U=A[j];if(w[G]=U,A[j]=G,D<=F){var W=c-F;if((I>7e3||k>24576)&&(W>423||!m)){y=z(t,p,0,C,M,R,N,k,O,F-O,y),k=I=N=0,O=F;for(var $=0;$<286;++$)M[$]=0;for($=0;$<30;++$)R[$]=0}var V=2,X=0,H=x,Y=G-U&32767;if(W>2&&j==T(F-Y))for(var Z=Math.min(v,W)-1,K=Math.min(32767,F),J=Math.min(258,W);Y<=K&&--H&&G!=U;){if(t[F+V]==t[F+V-Y]){for(var Q=0;Q<J&&t[F+Q]==t[F+Q-Y];++Q);if(Q>V){if(V=Q,X=Y,Q>Z)break;var tt=Math.min(Y,Q-2),et=0;for($=0;$<tt;++$){var nt=F-Y+$&32767,it=nt-w[nt]&32767;it>et&&(et=it,U=nt)}}}Y+=(G=U)-(U=w[G])&32767}if(X){C[k++]=268435456|d[V]<<18|g[X];var rt=31&d[V],st=31&g[X];N+=o[rt]+a[st],++M[257+rt],++R[st],D=F+V,++I}else C[k++]=t[F],++M[t[F]]}}for(F=Math.max(F,D);F<c;++F)C[k++]=t[F],++M[t[F]];y=z(t,p,m,C,M,R,N,k,O,F-O,y),m||(u.r=7&y|p[y/8|0]<<3,y-=7,u.h=A,u.p=w,u.i=F,u.w=D)}else{for(F=u.w||0;F<c+m;F+=65535){var ot=F+65535;ot>=c&&(p[y/8|0]=m,ot=c),y=B(p,y+1,t.subarray(F,ot))}u.i=c}return P(f,0,l+L(y)+h)},$=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,s=0|n.length,o=0;o!=s;){for(var a=Math.min(o+2655,s);o<a;++o)r+=i+=n[o];i=(65535&i)+15*(i>>16),r=(65535&r)+15*(r>>16)}t=i,e=r},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(e%=65521))<<8|e>>8}}},V=function(t,e,n,r,s){if(!s&&(s={l:1},e.dictionary)){var o=e.dictionary.subarray(-32768),a=new i(o.length+t.length);a.set(o),a.set(t,o.length),t=a,s.w=o.length}return W(t,null==e.level?6:e.level,null==e.mem?s.l?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(t.length)))):20:12+e.mem,n,r,s)},X=function(t,e){return t[e]|t[e+1]<<8},H=function(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0},Y=function(t,e){return H(t,e)+4294967296*H(t,e+4)},Z=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},K=function(t){31==t[0]&&139==t[1]&&8==t[2]||I(6,"invalid gzip data");var e=t[3],n=10;4&e&&(n+=2+(t[10]|t[11]<<8));for(var i=(e>>3&1)+(e>>4&1);i>0;i-=!t[n++]);return n+(2&e)},J=function(t){var e=t.length;return(t[e-4]|t[e-3]<<8|t[e-2]<<16|t[e-1]<<24)>>>0},Q=function(t,e){var n=e.level,i=0==n?0:n<6?1:9==n?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var r=$();r.p(e.dictionary),Z(t,2,r.d())}},tt=function(t,e){return(8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31)&&I(6,"invalid zlib data"),(t[1]>>5&1)==+!e&&I(6,"invalid zlib data: "+(32&t[1]?"need":"unexpected")+" dictionary"),2+(t[1]>>3&4)};function et(t,e){return N(t,{i:2},e&&e.out,e&&e.dictionary)}function nt(t,e){var n=K(t);return n+8>t.length&&I(6,"invalid gzip data"),N(t.subarray(n,-8),{i:2},e&&e.out||new i(J(t)),e&&e.dictionary)}function it(t,e){e||(e={});var n=$();n.p(t);var i=V(t,e,e.dictionary?6:2,4);return Q(i,e),Z(i,i.length-4,n.d()),i}function rt(t,e){return N(t.subarray(tt(t,e&&e.dictionary),-4),{i:2},e&&e.out,e&&e.dictionary)}function st(t,e){return 31==t[0]&&139==t[1]&&8==t[2]?nt(t,e):8!=(15&t[0])||t[0]>>4>7||(t[0]<<8|t[1])%31?et(t,e):rt(t,e)}var ot="undefined"!=typeof TextDecoder&&new TextDecoder;try{ot.decode(U,{stream:!0})}catch(t){}var at=function(t){for(var e="",n=0;;){var i=t[n++],r=(i>127)+(i>223)+(i>239);if(n+r>t.length)return{s:e,r:P(t,n-1)};r?3==r?(i=((15&i)<<18|(63&t[n++])<<12|(63&t[n++])<<6|63&t[n++])-65536,e+=String.fromCharCode(55296|i>>10,56320|1023&i)):e+=1&r?String.fromCharCode((31&i)<<6|63&t[n++]):String.fromCharCode((15&i)<<12|(63&t[n++])<<6|63&t[n++]):e+=String.fromCharCode(i)}};function lt(t,e){if(e){for(var n="",i=0;i<t.length;i+=16384)n+=String.fromCharCode.apply(null,t.subarray(i,i+16384));return n}if(ot)return ot.decode(t);var r=at(t),s=r.s;return(n=r.r).length&&I(8),s}var ht=function(t,e){return e+30+X(t,e+26)+X(t,e+28)},ut=function(t,e,n){var i=X(t,e+28),r=lt(t.subarray(e+46,e+46+i),!(2048&X(t,e+8))),s=e+46+i,o=H(t,e+20),a=n&&4294967295==o?ct(t,s):[o,H(t,e+24),H(t,e+42)],l=a[0],h=a[1],u=a[2];return[X(t,e+10),l,h,r,s+X(t,e+30)+X(t,e+32),u]},ct=function(t,e){for(;1!=X(t,e);e+=4+X(t,e+2));return[Y(t,e+12),Y(t,e+4),Y(t,e+20)]};"function"==typeof queueMicrotask?queueMicrotask:"function"==typeof setTimeout&&setTimeout;function dt(t,e){for(var n={},r=t.length-22;101010256!=H(t,r);--r)(!r||t.length-r>65558)&&I(13);var s=X(t,r+8);if(!s)return{};var o=H(t,r+16),a=4294967295==o||65535==s;if(a){var l=H(t,r-12);(a=101075792==H(t,l))&&(s=H(t,l+32),o=H(t,l+48))}for(var h=e&&e.filter,u=0;u<s;++u){var c=ut(t,o,a),d=c[0],f=c[1],p=c[2],g=c[3],m=c[4],y=c[5],_=ht(t,y);o=m,h&&!h({name:g,size:f,originalSize:p,compression:d})||(d?8==d?n[g]=et(t.subarray(_,_+f),{out:new i(p)}):I(14,"unknown compression type "+d):n[g]=P(t,_,_+f))}return n}},75052:function(t,e,n){"use strict";var i=n(61829),r=n(42484),s=n(46928),o=n(22685),a=n(37759),l=n(86603),h=n(89380);function u(t,e,n,i){return void 0!==n&&void 0!==i?[n/t,i/e]:void 0!==n?n/t:void 0!==i?i/e:1}class c extends h.A{constructor(t){const e=void 0!==(t=t||{}).opacity?t.opacity:1,n=void 0!==t.rotation?t.rotation:0,o=void 0!==t.scale?t.scale:1,h=void 0!==t.rotateWithView&&t.rotateWithView;super({opacity:e,rotation:n,scale:o,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:h,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;const c=void 0!==t.img?t.img:null;let d,f=t.src;if((0,r.v)(!(void 0!==f&&c),"`image` and `src` cannot be provided at the same time"),void 0!==f&&0!==f.length||!c||(f=c.src||(0,a.v6)(c)),(0,r.v)(void 0!==f&&f.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,r.v)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?d=i.A.IDLE:void 0!==c&&(d="complete"in c?c.complete?c.src?i.A.LOADED:i.A.IDLE:i.A.LOADING:i.A.LOADED),this.color_=void 0!==t.color?(0,s._j)(t.color):null,this.iconImage_=(0,l.J)(c,f,this.crossOrigin_,d,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,this.initialOptions_,void 0!==t.width||void 0!==t.height){let e,n;if(t.size)[e,n]=t.size;else{const i=this.getImage(1);if(i.width&&i.height)e=i.width,n=i.height;else if(i instanceof HTMLImageElement){this.initialOptions_=t;const e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;const n=this.iconImage_.getSize();this.setScale(u(n[0],n[1],t.width,t.height))};return void this.listenImageChange(e)}}void 0!==e&&this.setScale(u(e,n,t.width,t.height))}}clone(){let t,e,n;return this.initialOptions_?(e=this.initialOptions_.width,n=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new c({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:n,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),"top-right"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[0]=-t[0]+e[0]),"bottom-left"!=this.anchorOrigin_&&"bottom-right"!=this.anchorOrigin_||(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),n=this.getScaleArray();return[t[0]-e[0]/n[0],t[1]+e[1]/n[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){const e=this.getSize(),n=this.iconImage_.getSize();if(!e||!n)return null;t=t.slice(),"top-right"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[0]=n[0]-e[0]-t[0]),"bottom-left"!=this.offsetOrigin_&&"bottom-right"!=this.offsetOrigin_||(t[1]=n[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==i.A.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){const t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==i.A.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(o.A.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(o.A.CHANGE,t)}ready(){return this.iconImage_.ready()}}e.A=c},75738:function(t,e){"use strict";e.A={PROPERTYCHANGE:"propertychange"}},76582:function(t,e,n){"use strict";n.d(e,{EQ:function(){return c},N1:function(){return d},kz:function(){return h},me:function(){return f},zN:function(){return l}});var i=n(25231),r=n(43438),s=n(82629),o=n(67102);let a=null;function l(){return!!a}function h(t){a=t;const e=Object.keys(t.defs),n=e.length;let l,h;for(l=0;l<n;++l){const n=e[l];if(!(0,s.Jt)(n)){const e=t.defs(n);let s=e.units;s||"longlat"!==e.projName||(s="degrees"),(0,i.bF)(new r.A({code:n,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:s}))}}for(l=0;l<n;++l){const r=e[l],a=(0,s.Jt)(r);for(h=0;h<n;++h){const n=e[h],l=(0,s.Jt)(n);if(!(0,o.Jt)(r,n))if(t.defs[r]===t.defs[n])(0,i.O3)([a,l]);else{const e=t(r,n);(0,i.hB)(a,l,(0,i.wU)(a,l,e.forward),(0,i.wU)(l,a,e.inverse))}}}}let u=async function(t){const e=await fetch(`https://epsg.io/${t}.proj4`);if(!e.ok)throw new Error(`Unexpected response from epsg.io: ${e.status}`);return e.text()};function c(t){u=t}async function d(t){"string"==typeof t&&(t=parseInt(t.split(":").pop(),10));const e=a;if(!e)throw new Error("Proj4 must be registered first with register(proj4)");const n="EPSG:"+t;return e.defs(n)||(e.defs(n,await u(t)),h(e)),(0,s.Jt)(n)}function f(t){return async function(e){const n=await fetch(`https://api.maptiler.com/coordinates/search/code:${e}.json?transformations=true&exports=true&key=${t}`);if(!n.ok)throw new Error(`Unexpected response from maptiler.com: ${n.status}`);return n.json().then((t=>{const n=t.results;if(n?.length>0){const t=n.filter((t=>"EPSG"===t.id?.authority&&t.id?.code===e))[0];if(t){const e=t.transformations;if(e?.length>0){const n=t.default_transformation;if(e.filter((t=>t.id?.authority===n?.authority&&t.id?.code===n?.code&&0===t.grids?.length)).length>0)return t.exports?.proj4;const i=e.filter((t=>0===t.grids?.length&&"EPSG"===t.target_crs?.authority&&4326===t.target_crs?.code&&!1===t.deprecated&&!0===t.usable)).sort(((t,e)=>t.accuracy-e.accuracy))[0]?.exports?.proj4;if(i)return i}return t.exports?.proj4}}}))}}},76661:function(t,e,n){"use strict";var i=n(70192),r=n(18381),s=n(30470),o=n(31141),a=n(25231);const l="accuracy",h="accuracyGeometry",u="altitude",c="altitudeAccuracy",d="heading",f="position",p="projection",g="speed",m="tracking",y="trackingOptions",_="error";class v extends r.Ay{constructor(t){super(_),this.code=t.code,this.message=t.message}}class x extends i.A{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=a.R6,this.watchId_=void 0,this.addChangeListener(p,this.handleProjectionChanged_),this.addChangeListener(m,this.handleTrackingChanged_),void 0!==t.projection&&this.setProjection(t.projection),void 0!==t.trackingOptions&&this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&&t.tracking)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){const t=this.getProjection();t&&(this.transform_=(0,a.FO)((0,a.Jt)("EPSG:4326"),t),this.position_&&this.set(f,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){const t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){const e=t.coords;this.set(l,e.accuracy),this.set(u,null===e.altitude?void 0:e.altitude),this.set(c,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(d,null===e.heading?void 0:(0,o.eh)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];const n=this.transform_(this.position_);this.set(f,n.slice()),this.set(g,null===e.speed?void 0:e.speed);const i=(0,s.kj)(this.position_,e.accuracy);i.applyTransform(this.transform_),this.set(h,i),this.changed()}positionError_(t){this.dispatchEvent(new v(t))}getAccuracy(){return this.get(l)}getAccuracyGeometry(){return this.get(h)||null}getAltitude(){return this.get(u)}getAltitudeAccuracy(){return this.get(c)}getHeading(){return this.get(d)}getPosition(){return this.get(f)}getProjection(){return this.get(p)}getSpeed(){return this.get(g)}getTracking(){return this.get(m)}getTrackingOptions(){return this.get(y)}setProjection(t){this.set(p,(0,a.Jt)(t))}setTracking(t){this.set(m,t)}setTrackingOptions(t){this.set(y,t)}}e.A=x},76825:function(t,e,n){"use strict";n.d(e,{N:function(){return f}});var i=n(73887),r=n(536),s=n(67024),o=n(426),a=n(22685),l=n(73988);class h extends l.A{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=void 0!==t.className?t.className:"ol-rotate",n=void 0!==t.label?t.label:"⇧",i=void 0!==t.compassClassName?t.compassClassName:"ol-compass";this.label_=null,"string"==typeof n?(this.label_=document.createElement("span"),this.label_.className=i,this.label_.textContent=n):(this.label_=n,this.label_.classList.add(i));const r=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=r,o.appendChild(this.label_),o.addEventListener(a.A.CLICK,this.handleClick_.bind(this),!1);const l=e+" "+s.XI+" "+s.$N,h=this.element;h.className=l,h.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=void 0!==t.duration?t.duration:250,this.autoHide_=void 0===t.autoHide||t.autoHide,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(s.Si)}handleClick_(t){t.preventDefault(),void 0!==this.callResetNorth_?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const t=this.getMap().getView();if(!t)return;const e=t.getRotation();void 0!==e&&(this.duration_>0&&e%(2*Math.PI)!=0?t.animate({rotation:0,duration:this.duration_,easing:o.vT}):t.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const n=e.viewState.rotation;if(n!=this.rotation_){const t="rotate("+n+"rad)";if(this.autoHide_){const t=this.element.classList.contains(s.Si);t||0!==n?t&&0!==n&&this.element.classList.remove(s.Si):this.element.classList.add(s.Si)}this.label_.style.transform=t}this.rotation_=n}}var u=h;class c extends l.A{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=void 0!==t.className?t.className:"ol-zoom",n=void 0!==t.delta?t.delta:1,i=void 0!==t.zoomInClassName?t.zoomInClassName:e+"-in",r=void 0!==t.zoomOutClassName?t.zoomOutClassName:e+"-out",o=void 0!==t.zoomInLabel?t.zoomInLabel:"+",l=void 0!==t.zoomOutLabel?t.zoomOutLabel:"–",h=void 0!==t.zoomInTipLabel?t.zoomInTipLabel:"Zoom in",u=void 0!==t.zoomOutTipLabel?t.zoomOutTipLabel:"Zoom out",c=document.createElement("button");c.className=i,c.setAttribute("type","button"),c.title=h,c.appendChild("string"==typeof o?document.createTextNode(o):o),c.addEventListener(a.A.CLICK,this.handleClick_.bind(this,n),!1);const d=document.createElement("button");d.className=r,d.setAttribute("type","button"),d.title=u,d.appendChild("string"==typeof l?document.createTextNode(l):l),d.addEventListener(a.A.CLICK,this.handleClick_.bind(this,-n),!1);const f=e+" "+s.XI+" "+s.$N,p=this.element;p.className=f,p.appendChild(c),p.appendChild(d),this.duration_=void 0!==t.duration?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const e=this.getMap().getView();if(!e)return;const n=e.getZoom();if(void 0!==n){const i=e.getConstrainedZoom(n+t);this.duration_>0?(e.getAnimating()&&e.cancelAnimations(),e.animate({zoom:i,duration:this.duration_,easing:o.vT})):e.setZoom(i)}}}var d=c;function f(t){t=t||{};const e=new i.A;(void 0===t.zoom||t.zoom)&&e.push(new d(t.zoomOptions));(void 0===t.rotate||t.rotate)&&e.push(new u(t.rotateOptions));return(void 0===t.attribution||t.attribution)&&e.push(new r.A(t.attributionOptions)),e}},77163:function(t,e,n){"use strict";var i=n(42484),r=n(4666);const s={STATIC_DRAW:r.Ek,STREAM_DRAW:r.Ss,DYNAMIC_DRAW:r.Be};function o(t){switch(t){case r.H7:return Float32Array;case r.IP:return Uint32Array;default:return Float32Array}}e.Ay=class{constructor(t,e){this.array_=null,this.type_=t,(0,i.v)(t===r.H7||t===r.IP,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=void 0!==e?e:s.STATIC_DRAW}ofSize(t){return this.array_=new(o(this.type_))(t),this}fromArray(t){return this.array_=o(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(o(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}setArray(t){const e=o(this.type_);if(!(t instanceof e))throw new Error(`Expected ${e}`);this.array_=t}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}},77691:function(t,e,n){"use strict";n.d(e,{Qi:function(){return h},T0:function(){return u},kc:function(){return d},mf:function(){return c},mh:function(){return f},s2:function(){return o}});var i=n(46928),r=n(48729),s=n(91108);function o(t,e,n){const i=(0,r.SR)();return(0,s.nR)(e,n,i,t)}function a(t){const e=(0,i._j)(t);return[256*e[0]+e[1],256*e[2]+Math.round(255*e[3])]}const l="vec4 unpackColor(vec2 packedColor) {\n  return vec4(\n    fract(floor(packedColor[0] / 256.0) / 256.0),\n    fract(packedColor[0] / 256.0),\n    fract(floor(packedColor[1] / 256.0) / 256.0),\n    fract(packedColor[1] / 256.0)\n  );\n}";function h(t){return t===r.mE||t===r.qA?2:t===r.Fq?4:1}function u(t){const e=h(t);return e>1?`vec${e}`:"float"}function c(t,e){for(const n in e.variables){const i=e.variables[n],o=(0,s.Sl)(i.name);let a=u(i.type);i.type===r.mE&&(a="vec4"),t.addUniform(`${a} ${o}`)}for(const n in e.properties){const i=e.properties[n],s=u(i.type),o=`a_prop_${i.name}`;i.type===r.mE?(t.addAttribute(o,s,`unpackColor(${o})`,"vec4"),t.addVertexShaderFunction(l)):t.addAttribute(o,s)}for(const n in e.functions)t.addVertexShaderFunction(e.functions[n]),t.addFragmentShaderFunction(e.functions[n])}function d(t,e){const n={};for(const o in t.variables){const a=t.variables[o];n[(0,s.Sl)(a.name)]=()=>{const t=e[a.name];return"number"==typeof t?t:"boolean"==typeof t?t?1:0:a.type===r.mE?(0,i._j)(t||"#eee"):"string"==typeof t?(0,s.Lm)(t):t}}return n}function f(t){const e={};for(const n in t.properties){const o=t.properties[n],l=t=>{const e=t.get(o.name);return o.type===r.mE?a([...(0,i._j)(e||"#eee")]):"string"==typeof e?(0,s.Lm)(e):"boolean"==typeof e?e?1:0:e};e[`prop_${o.name}`]={size:h(o.type),callback:l}}return e}},77779:function(t,e,n){"use strict";n.d(e,{A:function(){return P}});var i=n(20703),r=n(30942),s=n(22685),o=n(95702),a=n(25231),l=n(69791),h=n(92662),u=n(16235),c=n(31141),d=n(96081),f=n(35369),p=n(12165),g=n(95907),m=n(9466);class y{constructor(t){this.gl_=t,this.program_=v(t,"\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (\n      v_texcoord.x < 0.0 ||\n      v_texcoord.y < 0.0 ||\n      v_texcoord.x > 1.0 ||\n      v_texcoord.y > 1.0\n    ) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n","\n  attribute vec4 a_position;\n  attribute vec4 a_texcoord;\n\n  uniform mat4 u_matrix;\n  uniform mat4 u_textureMatrix;\n\n  varying vec2 v_texcoord;\n\n  void main() {\n    gl_Position = u_matrix * a_position;\n    vec2 texcoord = (u_textureMatrix * a_texcoord).xy;\n    v_texcoord = texcoord;\n  }\n"),this.positionLocation=t.getAttribLocation(this.program_,"a_position"),this.texcoordLocation=t.getAttribLocation(this.program_,"a_texcoord"),this.matrixLocation=t.getUniformLocation(this.program_,"u_matrix"),this.textureMatrixLocation=t.getUniformLocation(this.program_,"u_textureMatrix"),this.textureLocation=t.getUniformLocation(this.program_,"u_texture"),this.positionBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.positionBuffer),this.positions=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.positions),t.STATIC_DRAW),this.texcoordBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.texcoordBuffer),this.texcoords=[0,0,0,1,1,0,1,0,0,1,1,1],t.bufferData(t.ARRAY_BUFFER,new Float32Array(this.texcoords),t.STATIC_DRAW)}drawImage(t,e,n,i,r,s,o,a,l,h,u,c,d){const f=this.gl_;void 0===a&&(a=i),void 0===l&&(l=r),void 0===s&&(s=e),void 0===o&&(o=n),void 0===h&&(h=s),void 0===u&&(u=o),void 0===c&&(c=f.canvas.width),void 0===d&&(d=f.canvas.height),f.bindTexture(f.TEXTURE_2D,t),f.useProgram(this.program_),f.bindBuffer(f.ARRAY_BUFFER,this.positionBuffer),f.enableVertexAttribArray(this.positionLocation),f.vertexAttribPointer(this.positionLocation,2,f.FLOAT,!1,0,0),f.bindBuffer(f.ARRAY_BUFFER,this.texcoordBuffer),f.enableVertexAttribArray(this.texcoordLocation),f.vertexAttribPointer(this.texcoordLocation,2,f.FLOAT,!1,0,0);let p=m.j0(0,c,0,d,-1,1);p=m.Tl(p,a,l,0),p=m.hs(p,h,u,1),f.uniformMatrix4fv(this.matrixLocation,!1,p);let g=m.wT(i/e,r/n,0);g=m.hs(g,s/e,o/n,1),f.uniformMatrix4fv(this.textureMatrixLocation,!1,g),f.uniform1i(this.textureLocation,0),f.drawArrays(f.TRIANGLES,0,this.positions.length/2)}}function _(t,e,n){const i=t.createShader(e);if(null===i)throw new Error("Shader compilation failed");if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS)){const e=t.getShaderInfoLog(i);if(null===e)throw new Error("Shader info log creation failed");throw new Error(e)}return i}function v(t,e,n){const i=t.createProgram(),r=_(t,t.VERTEX_SHADER,n),s=_(t,t.FRAGMENT_SHADER,e);if(null===i)throw new Error("Program creation failed");if(t.attachShader(i,r),t.attachShader(i,s),t.linkProgram(i),!t.getProgramParameter(i,t.LINK_STATUS)){if(null===t.getProgramInfoLog(i))throw new Error("Program info log creation failed");throw new Error}return i}const x=[];function b(t,e,n,i,r,s,o,a,l,h,c,d,f,p){const g=Math.round(i*e),_=Math.round(i*n);let x,b;if(t.canvas.width=g,t.canvas.height=_,b=t.createTexture(),t.bindTexture(t.TEXTURE_2D,b),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),f?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,g,_,0,t.RGBA,c,null),x=t.createFramebuffer(),t.bindFramebuffer(t.FRAMEBUFFER,x),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,b,0),null===x)throw new Error("Could not create framebuffer");if(null===b)throw new Error("Could not create texture");if(0===l.length)return{width:g,height:_,framebuffer:x,texture:b};const w=(0,u.S5)();let A,S,E;l.forEach((function(t,e,n){(0,u.X$)(w,t.extent)}));const T=1/r;if(p&&1===l.length&&0===h)A=l[0].texture,S=l[0].width,E=l[0].width;else{if(A=t.createTexture(),null===b)throw new Error("Could not create texture");S=Math.round((0,u.RG)(w)*T),E=Math.round((0,u.Oq)(w)*T);const e=t.getParameter(t.MAX_TEXTURE_SIZE),n=Math.max(S,E),i=n>e?e/n:1,r=Math.round(S*i),s=Math.round(E*i);t.bindTexture(t.TEXTURE_2D,A),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),f?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST)),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,r,s,0,t.RGBA,c,null);const o=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,o),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,A,0);const a=new y(t);l.forEach((function(e,n,l){const c=(e.extent[0]-w[0])*T*i,d=-(e.extent[3]-w[3])*T*i,p=(0,u.RG)(e.extent)*T*i,g=(0,u.Oq)(e.extent)*T*i;if(t.bindFramebuffer(t.FRAMEBUFFER,o),t.viewport(0,0,r,s),e.clipExtent){const n=(e.clipExtent[0]-w[0])*T*i,r=-(e.clipExtent[3]-w[3])*T*i,s=(0,u.RG)(e.clipExtent)*T*i,o=(0,u.Oq)(e.clipExtent)*T*i;t.enable(t.SCISSOR_TEST),t.scissor(f?n:Math.round(n),f?r:Math.round(r),f?s:Math.round(n+s)-Math.round(n),f?o:Math.round(r+o)-Math.round(r))}a.drawImage(e.texture,e.width,e.height,h,h,e.width-2*h,e.height-2*h,f?c:Math.round(c),f?d:Math.round(d),f?p:Math.round(c+p)-Math.round(c),f?g:Math.round(d+g)-Math.round(d),r,s),t.disable(t.SCISSOR_TEST)})),t.deleteFramebuffer(o)}const C=(0,u.Py)(o),M=(0,u.Py)(w),L=t=>{const e=(t[0][0]-C[0])/s*i,n=-(t[0][1]-C[1])/s*i;return{u1:(t[1][0]-C[0])/s*i,v1:-(t[1][1]-C[1])/s*i,u0:e,v0:n,u2:(t[2][0]-C[0])/s*i,v2:-(t[2][1]-C[1])/s*i}};t.bindFramebuffer(t.FRAMEBUFFER,x),t.viewport(0,0,g,_);{const e=[],n=[],i=v(t,"\n  precision mediump float;\n\n  varying vec2 v_texcoord;\n\n  uniform sampler2D u_texture;\n\n  void main() {\n    if (v_texcoord.x < 0.0 || v_texcoord.x > 1.0 || v_texcoord.y < 0.0 || v_texcoord.y > 1.0) {\n      discard;\n    }\n    gl_FragColor = texture2D(u_texture, v_texcoord);\n  }\n","\n  attribute vec4 a_position;\n  attribute vec2 a_texcoord;\n\n  varying vec2 v_texcoord;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n     v_texcoord = a_texcoord;\n  }\n");t.useProgram(i);const s=t.getUniformLocation(i,"u_texture");t.bindTexture(t.TEXTURE_2D,A),t.uniform1i(s,0),a.getTriangles().forEach((function(t,i,s){const o=t.source,a=t.target,{u1:l,v1:h,u0:u,v0:c,u2:d,v2:f}=L(a),p=(o[0][0]-M[0])/r/S,g=-(o[0][1]-M[1])/r/E,m=(o[1][0]-M[0])/r/S,y=-(o[1][1]-M[1])/r/E,_=(o[2][0]-M[0])/r/S,v=-(o[2][1]-M[1])/r/E;e.push(l,h,u,c,d,f),n.push(m,y,p,g,_,v)}));const o=m.j0(0,g,_,0,-1,1),l=t.getUniformLocation(i,"u_matrix");t.uniformMatrix4fv(l,!1,o);const h=t.getAttribLocation(i,"a_position"),u=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,u),t.bufferData(t.ARRAY_BUFFER,new Float32Array(e),t.STATIC_DRAW),t.vertexAttribPointer(h,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(h);const c=t.getAttribLocation(i,"a_texcoord"),d=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,d),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.vertexAttribPointer(c,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(c),t.drawArrays(t.TRIANGLES,0,e.length/2)}if(d){const e=v(t,"\n  precision mediump float;\n\n  uniform vec4 u_val;\n  void main() {\n     gl_FragColor = u_val;\n  }\n","\n  attribute vec4 a_position;\n\n  uniform mat4 u_matrix;\n\n  void main() {\n     gl_Position = u_matrix * a_position;\n  }\n");t.useProgram(e);const n=m.j0(0,g,_,0,-1,1),i=t.getUniformLocation(e,"u_matrix");t.uniformMatrix4fv(i,!1,n);const r=Array.isArray(d)?d:[0,0,0,255],s=t.getUniformLocation(e,"u_val");!0?t.uniform4fv(s,r):t.uniform4iv(s,r);const o=t.getAttribLocation(e,"a_position"),l=t.createBuffer();t.bindBuffer(t.ARRAY_BUFFER,l),t.vertexAttribPointer(o,2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(o);const h=a.getTriangles().reduce((function(t,e){const n=e.target,{u1:i,v1:r,u0:s,v0:o,u2:a,v2:l}=L(n);return t.concat([i,r,s,o,s,o,a,l,a,l,i,r])}),[]);t.bufferData(t.ARRAY_BUFFER,new Float32Array(h),t.STATIC_DRAW),t.drawArrays(t.LINES,0,h.length/2)}return{width:g,height:_,framebuffer:x,texture:b}}class w extends i.Ay{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8ClampedArray(4)),interpolate:t.interpolate,transition:t.transition}),this.renderEdges_=void 0!==t.renderEdges&&t.renderEdges,this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;const e=t.sourceProj,n=e.getExtent(),i=t.sourceTileGrid.getExtent();this.clipExtent_=e.canWrapX()?i?(0,u._N)(n,i):n:i;const s=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),o=this.targetTileGrid_.getExtent();let a=this.sourceTileGrid_.getExtent();const l=o?(0,u._N)(s,o):s;if(0===(0,u.UG)(l))return void(this.state=r.A.EMPTY);n&&(a=a?(0,u._N)(a,n):n);const h=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),g=t.targetProj,m=(0,d.aY)(e,g,l,h);if(!isFinite(m)||m<=0)return void(this.state=r.A.EMPTY);const y=void 0!==t.errorThreshold?t.errorThreshold:p.l;if(this.triangulation_=new f.A(e,g,l,a,m*y,h,t.transformMatrix),0===this.triangulation_.getTriangles().length)return void(this.state=r.A.EMPTY);this.sourceZ_=this.sourceTileGrid_.getZForResolution(m);let _=this.triangulation_.calculateSourceExtent();if(a&&(e.canWrapX()?(_[1]=(0,c.qE)(_[1],a[1],a[3]),_[3]=(0,c.qE)(_[3],a[1],a[3])):_=(0,u._N)(_,a)),(0,u.UG)(_)){let i=0,s=0;e.canWrapX()&&(i=(0,u.RG)(n),s=Math.floor((_[0]-n[0])/i));(0,u.QJ)(_.slice(),e,!0).forEach((e=>{const n=this.sourceTileGrid_.getTileRangeForExtentAndZ(e,this.sourceZ_),r=t.getTileFunction;for(let t=n.minX;t<=n.maxX;t++)for(let e=n.minY;e<=n.maxY;e++){const n=r(this.sourceZ_,t,e,this.pixelRatio_);if(n){const t=s*i;this.sourceTiles_.push({tile:n,offset:t})}}++s})),0===this.sourceTiles_.length&&(this.state=r.A.EMPTY)}else this.state=r.A.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){const t=[];let e=!1;if(this.sourceTiles_.forEach((n=>{const s=n.tile;if(!s||s.getState()!==r.A.LOADED)return;const o=s.getSize(),a=this.gutter_;let l;const h=(0,i.bL)(s.getData());h?l=h:(e=!0,l=(0,i.$r)((0,i.xo)(s.getData())));const u=[o[0]+2*a,o[1]+2*a],c=l instanceof Float32Array,d=u[0]*u[1],f=c?Float32Array:Uint8ClampedArray,p=new f(l.buffer),g=f.BYTES_PER_ELEMENT,m=g*p.length/d,y=p.byteLength/u[1],_=Math.floor(y/g/u[0]),v=this.sourceTileGrid_.getTileCoordExtent(s.tileCoord);v[0]+=n.offset,v[2]+=n.offset;const x=this.clipExtent_?.slice();x&&(x[0]+=n.offset,x[2]+=n.offset),t.push({extent:v,clipExtent:x,data:p,dataType:f,bytesPerPixel:m,pixelSize:u,bandCount:_})})),this.sourceTiles_.length=0,0===t.length)return this.state=r.A.ERROR,void this.changed();const n=this.wrappedTileCoord_[0],s=this.targetTileGrid_.getTileSize(n),o="number"==typeof s?s:s[0],a="number"==typeof s?s:s[1],h=o*this.pixelRatio_,u=a*this.pixelRatio_,c=this.targetTileGrid_.getResolution(n),d=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),p=t[0].bandCount,m=new t[0].dataType(p*h*u),y=function(t,e,n,i){let r;return r=n&&n.length?n.shift():g.Wl?new OffscreenCanvas(t||300,e||300):document.createElement("canvas"),t&&(r.width=t),e&&(r.height=e),r.getContext("webgl",i)}(h,u,x,{premultipliedAlpha:!1,antialias:!1});let _;const v=y.RGBA;let w;if(t[0].dataType==Float32Array){w=y.FLOAT,y.getExtension("WEBGL_color_buffer_float"),y.getExtension("OES_texture_float"),y.getExtension("EXT_float_blend");_=null!==y.getExtension("OES_texture_float_linear")&&this.interpolate}else w=y.UNSIGNED_BYTE,_=this.interpolate;for(let e=Math.ceil(p/4)-1;e>=0;--e){const n=[];for(let i=0,r=t.length;i<r;++i){const r=t[i],s=r.pixelSize,o=s[0],a=s[1],l=new r.dataType(4*o*a),h=r.data;let u=4*e;for(let t=0,e=l.length;t<e;t+=4)l[t]=h[u],l[t+1]=h[u+1],l[t+2]=h[u+2],l[t+3]=h[u+3],u+=p;const c=y.createTexture();y.bindTexture(y.TEXTURE_2D,c),_?(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.LINEAR),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.LINEAR)):(y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST)),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texImage2D(y.TEXTURE_2D,0,v,o,a,0,v,w,l),n.push({extent:r.extent,clipExtent:r.clipExtent,texture:c,width:o,height:a})}const{framebuffer:i,width:r,height:s}=b(y,o,a,this.pixelRatio_,d,c,f,this.triangulation_,n,this.gutter_,w,this.renderEdges_,_),l=r,h=4*s,u=new t[0].dataType(l*h);y.bindFramebuffer(y.FRAMEBUFFER,i),y.readPixels(0,0,r,s,y.RGBA,w,u);let g=4*e;for(let t=0,e=u.length;t<e;t+=4){const e=(l-1-(t/h|0))*h+t%h;m[g]=u[e],m[g+1]=u[e+1],m[g+2]=u[e+2],m[g+3]=u[e+3],g+=p}}if(function(t){const e=t.canvas;e.width=1,e.height=1,t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT|t.STENCIL_BUFFER_BIT)}(y),x.push(y.canvas),e){const t=(0,l.Y)(o,a),e=new ImageData(m,o);t.putImageData(e,0,0),this.reprojData_=t.canvas}else this.reprojData_=m;this.reprojSize_=[Math.round(h),Math.round(u)],this.state=r.A.LOADED,this.changed()}load(){if(this.state!==r.A.IDLE&&this.state!==r.A.ERROR)return;this.state=r.A.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((({tile:e})=>{const n=e.getState();if(n!==r.A.IDLE&&n!==r.A.LOADING)return;t++;const i=(0,h.KT)(e,s.A.CHANGE,(()=>{const n=e.getState();n!=r.A.LOADED&&n!=r.A.ERROR&&n!=r.A.EMPTY||((0,h.JH)(i),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(i)})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function({tile:t}){t.getState()==r.A.IDLE&&t.load()}))}unlistenSources_(){this.sourcesListenerKeys_.forEach(h.JH),this.sourcesListenerKeys_=null}}var A=w,S=n(3974),E=n(10135),T=n(37759),C=n(28025),M=n(27213);class L extends C.A{constructor(t){const e=void 0===t.projection?"EPSG:3857":t.projection;let n=t.tileGrid;void 0===n&&e&&(n=(0,E.EN)({extent:(0,E.kZ)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize})),super({cacheSize:.1,attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:e,tileGrid:n,state:t.state,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.tileSize_=t.tileSize?(0,S.xq)(t.tileSize):null,this.tileSizes_=null,this.tileLoadingKeys_={},this.loader_=t.loader,this.handleTileChange_=this.handleTileChange_.bind(this),this.bandCount=void 0===t.bandCount?4:t.bandCount,this.tileGridForProjection_={},this.crossOrigin_=t.crossOrigin||"anonymous",this.transformMatrix=null}setTileSizes(t){this.tileSizes_=t}getTileSize(t){if(this.tileSizes_)return this.tileSizes_[t];if(this.tileSize_)return this.tileSize_;const e=this.getTileGrid();return e?(0,S.xq)(e.getTileSize(t)):[256,256]}getGutterForProjection(t){const e=this.getProjection();return e&&!(0,a.tI)(e,t)||this.transformMatrix?0:this.gutter_}setLoader(t){this.loader_=t}getReprojTile_(t,e,n,i,r){const s=this.tileGrid||this.getTileGridForProjection(r||i),o=Math.max.apply(null,s.getResolutions().map(((t,e)=>{const n=(0,S.xq)(s.getTileSize(e)),i=this.getTileSize(e);return Math.max(i[0]/n[0],i[1]/n[1])}))),a=this.getTileGridForProjection(i),l=[t,e,n],h=this.getTileCoordForTileUrlFunction(l,i),u=Object.assign({sourceProj:r||i,sourceTileGrid:s,targetProj:i,targetTileGrid:a,tileCoord:l,wrappedTileCoord:h,pixelRatio:o,gutter:this.gutter_,getTileFunction:(t,e,n,i)=>this.getTile(t,e,n,i),transformMatrix:this.transformMatrix},this.tileOptions),c=new A(u);return c.key=this.getKey(),c}getTile(t,e,n,r,l){const h=this.getProjection();if(l&&(h&&!(0,a.tI)(h,l)||this.transformMatrix))return this.getReprojTile_(t,e,n,l,h);const u=this.getTileSize(t),c=this.loader_,d=new AbortController,f={signal:d.signal,crossOrigin:this.crossOrigin_},p=this.getTileCoordForTileUrlFunction([t,e,n]);if(!p)return null;const g=p[0],m=p[1],y=p[2],_=this.getTileGrid()?.getFullTileRange(g);_&&(f.maxY=_.getHeight()-1);const v=Object.assign({tileCoord:[t,e,n],loader:function(){return(0,o.hq)((function(){return c(g,m,y,f)}))},size:u,controller:d},this.tileOptions),x=new i.Ay(v);return x.key=this.getKey(),x.addEventListener(s.A.CHANGE,this.handleTileChange_),x}handleTileChange_(t){const e=t.target,n=(0,T.v6)(e),i=e.getState();let s;i==r.A.LOADING?(this.tileLoadingKeys_[n]=!0,s=M.A.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],s=i==r.A.ERROR?M.A.TILELOADERROR:i==r.A.LOADED?M.A.TILELOADEND:void 0),s&&this.dispatchEvent(new C.c(s,e))}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||(0,a.tI)(e,t))&&!this.transformMatrix)return this.tileGrid;const n=(0,T.v6)(t);return n in this.tileGridForProjection_||(this.tileGridForProjection_[n]=(0,E.pr)(t)),this.tileGridForProjection_[n]}setTileGridForProjection(t,e){const n=(0,a.Jt)(t);if(n){const t=(0,T.v6)(n);t in this.tileGridForProjection_||(this.tileGridForProjection_[t]=e)}}}var P=L},77801:function(t,e,n){"use strict";n.d(e,{jQ:function(){return f},M8:function(){return d},Ay:function(){return v}});var i=n(54209),r=n(45090),s=n(12911),o=n(37759),a=n(9466),l="webglcontextlost",h="webglcontextrestored",u=n(4666);var c=class{constructor(t){this.gl_=t.webGlContext;const e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer();const n=e.createShader(e.VERTEX_SHADER);e.shaderSource(n,t.vertexShader||"\n  precision mediump float;\n\n  attribute vec2 a_position;\n  varying vec2 v_texCoord;\n  varying vec2 v_screenCoord;\n\n  uniform vec2 u_screenSize;\n\n  void main() {\n    v_texCoord = a_position * 0.5 + 0.5;\n    v_screenCoord = v_texCoord * u_screenSize;\n    gl_Position = vec4(a_position, 0.0, 1.0);\n  }\n"),e.compileShader(n);const i=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(i,t.fragmentShader||"\n  precision mediump float;\n\n  uniform sampler2D u_image;\n  uniform float u_opacity;\n\n  varying vec2 v_texCoord;\n\n  void main() {\n    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;\n  }\n"),e.compileShader(i),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,n),e.attachShader(this.renderTargetProgram_,i),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer();e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach((n=>{this.uniforms_.push({value:t.uniforms[n],location:e.getUniformLocation(this.renderTargetProgram_,n)})}))}getRenderTargetTexture(){return this.renderTargetTexture_}getGL(){return this.gl_}init(t){const e=this.getGL(),n=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,n[0],n[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==n[0]||this.renderTargetTextureSize_[1]!==n[1]){this.renderTargetTextureSize_=n;const t=0,i=e.RGBA,r=0,s=e.RGBA,o=e.UNSIGNED_BYTE,a=null;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,t,i,n[0],n[1],r,s,o,a),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,n[0],n[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,n,i){const r=this.getGL(),s=t.size;if(r.bindFramebuffer(r.FRAMEBUFFER,e?e.getFrameBuffer():null),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.renderTargetTexture_),!e){const e=(0,o.v6)(r.canvas);if(!t.renderTargets[e]){const n=r.getContextAttributes();n&&n.preserveDrawingBuffer&&(r.clearColor(0,0,0,0),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)),t.renderTargets[e]=!0}}r.disable(r.DEPTH_TEST),r.enable(r.BLEND),r.blendFunc(r.ONE,r.ONE_MINUS_SRC_ALPHA),r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight),r.bindBuffer(r.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),r.useProgram(this.renderTargetProgram_),r.enableVertexAttribArray(this.renderTargetAttribLocation_),r.vertexAttribPointer(this.renderTargetAttribLocation_,2,r.FLOAT,!1,0,0),r.uniform2f(this.renderTargetUniformLocation_,s[0],s[1]),r.uniform1i(this.renderTargetTextureLocation_,0);const a=t.layerStatesArray[t.layerIndex].opacity;r.uniform1f(this.renderTargetOpacityLocation_,a),this.applyUniforms(t),n&&n(r,t),r.drawArrays(r.TRIANGLES,0,6),i&&i(r,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){const e=this.getGL();let n,i=1;this.uniforms_.forEach((function(r){if(n="function"==typeof r.value?r.value(t):r.value,n instanceof HTMLCanvasElement||n instanceof ImageData)r.texture||(r.texture=e.createTexture()),e.activeTexture(e[`TEXTURE${i}`]),e.bindTexture(e.TEXTURE_2D,r.texture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),n instanceof ImageData?e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,n.width,n.height,0,e.UNSIGNED_BYTE,new Uint8Array(n.data)):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n),e.uniform1i(r.location,i++);else if(Array.isArray(n))switch(n.length){case 2:return void e.uniform2f(r.location,n[0],n[1]);case 3:return void e.uniform3f(r.location,n[0],n[1],n[2]);case 4:return void e.uniform4f(r.location,n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&e.uniform1f(r.location,n)}))}};const d={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},f={UNSIGNED_BYTE:u.l4,UNSIGNED_SHORT:u.JL,UNSIGNED_INT:u.UD,FLOAT:u.zH},p={};function g(t){return"shared/"+t}let m=0;class y extends i.A{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?g(t.canvasCacheKey):function(){const t="unique/"+m;return m+=1,t}(),this.gl_=function(t){let e=p[t];if(!e){const n=document.createElement("canvas");n.width=1,n.height=1,n.style.position="absolute",n.style.left="0",e={users:0,context:(0,u.SD)(n)},p[t]=e}return e.users+=1,e.context}(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;const e=this.gl_.canvas;e.addEventListener(l,this.boundHandleWebGLContextLost_),e.addEventListener(h,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,s.vt)(),this.offsetScaleMatrix_=(0,s.vt)(),this.tmpMat4_=(0,a.vt)(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map((t=>new c({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms}))):[new c({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(const e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_===g(t)}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];const e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){const e=this.gl_,n=(0,o.v6)(t);let i=this.bufferCache_[n];if(!i){i={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[n]=i}e.bindBuffer(t.getType(),i.webGlBuffer)}flushBufferData(t){const e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){const e=(0,o.v6)(t);delete this.bufferCache_[e]}disposeInternal(){const t=this.gl_.canvas;t.removeEventListener(l,this.boundHandleWebGLContextLost_),t.removeEventListener(h,this.boundHandleWebGLContextRestored_),function(t){const e=p[t];if(!e)return;if(e.users-=1,e.users>0)return;const n=e.context,i=n.getExtension("WEBGL_lose_context");i&&i.loseContext();const r=n.canvas;r.width=1,r.height=1,delete p[t]}(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,n){const i=this.gl_,r=this.getCanvas(),s=t.size,o=t.pixelRatio;r.width===s[0]*o&&r.height===s[1]*o||(r.width=s[0]*o,r.height=s[1]*o,r.style.width=s[0]+"px",r.style.height=s[1]+"px");for(let e=this.postProcessPasses_.length-1;e>=0;e--)this.postProcessPasses_[e].init(t);i.bindTexture(i.TEXTURE_2D,null),i.clearColor(0,0,0,0),i.depthRange(0,1),i.clearDepth(1),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.enable(i.BLEND),i.blendFunc(i.ONE,e?i.ZERO:i.ONE_MINUS_SRC_ALPHA),n?(i.enable(i.DEPTH_TEST),i.depthFunc(i.LEQUAL)):i.disable(i.DEPTH_TEST)}bindFrameBuffer(t,e){const n=this.getGL();n.bindFramebuffer(n.FRAMEBUFFER,t),e&&n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,e,0)}bindInitialFrameBuffer(){const t=this.getGL(),e=this.postProcessPasses_[0].getFrameBuffer();t.bindFramebuffer(t.FRAMEBUFFER,e);const n=this.postProcessPasses_[0].getRenderTargetTexture();t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,n,0)}bindTexture(t,e,n){const i=this.gl_;i.activeTexture(i.TEXTURE0+e),i.bindTexture(i.TEXTURE_2D,t),i.uniform1i(this.getUniformLocation(n),e)}bindAttribute(t,e,n){const i=this.getGL();this.bindBuffer(t);const r=this.getAttributeLocation(e);i.enableVertexAttribArray(r),i.vertexAttribPointer(r,n,i.FLOAT,!1,0,0)}prepareDrawToRenderTarget(t,e,n,i){const r=this.gl_,s=e.getSize();r.bindFramebuffer(r.FRAMEBUFFER,e.getFramebuffer()),r.bindRenderbuffer(r.RENDERBUFFER,e.getDepthbuffer()),r.viewport(0,0,s[0],s[1]),r.bindTexture(r.TEXTURE_2D,e.getTexture()),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,n?r.ZERO:r.ONE_MINUS_SRC_ALPHA),i?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}drawElements(t,e){const n=this.gl_;this.getExtension("OES_element_index_uint");const i=n.UNSIGNED_INT,r=e-t,s=4*t;n.drawElements(n.TRIANGLES,r,i,s)}finalizeDraw(t,e,n){for(let i=0,r=this.postProcessPasses_.length;i<r;i++)i===r-1?this.postProcessPasses_[i].apply(t,null,e,n):this.postProcessPasses_[i].apply(t,this.postProcessPasses_[i+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){const e=t.size,n=t.viewState.rotation,i=t.pixelRatio;this.setUniformFloatValue(d.TIME,.001*(Date.now()-this.startTime_)),this.setUniformFloatValue(d.ZOOM,t.viewState.zoom),this.setUniformFloatValue(d.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(d.PIXEL_RATIO,i),this.setUniformFloatVec2(d.VIEWPORT_SIZE_PX,[e[0],e[1]]),this.setUniformFloatValue(d.ROTATION,n)}applyHitDetectionUniform(t){const e=this.getUniformLocation(d.HIT_DETECTION);this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(d.PIXEL_RATIO,.5)}applyUniforms(t){const e=this.gl_;let n,i=0;this.uniforms_.forEach((r=>{if(n="function"==typeof r.value?r.value(t):r.value,n instanceof HTMLCanvasElement||n instanceof HTMLImageElement||n instanceof ImageData||n instanceof WebGLTexture){n instanceof WebGLTexture&&!r.texture?(r.prevValue=void 0,r.texture=n):r.texture||(r.prevValue=void 0,r.texture=e.createTexture()),this.bindTexture(r.texture,i,r.name),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE);const t=!(n instanceof HTMLImageElement)||n.complete;n instanceof WebGLTexture||!t||r.prevValue===n||(r.prevValue=n,e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,n)),i++}else if(Array.isArray(n)&&6===n.length)this.setUniformMatrixValue(r.name,(0,a.Z1)(this.tmpMat4_,n));else if(Array.isArray(n)&&n.length<=4)switch(n.length){case 2:return void e.uniform2f(this.getUniformLocation(r.name),n[0],n[1]);case 3:return void e.uniform3f(this.getUniformLocation(r.name),n[0],n[1],n[2]);case 4:return void e.uniform4f(this.getUniformLocation(r.name),n[0],n[1],n[2],n[3]);default:return}else"number"==typeof n&&e.uniform1f(this.getUniformLocation(r.name),n)}))}useProgram(t,e){this.gl_.useProgram(t),this.currentProgram_=t,e&&(this.applyFrameState(e),this.applyUniforms(e))}compileShader(t,e){const n=this.gl_,i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}getProgram(t,e){const n=this.gl_,i=this.compileShader(t,n.FRAGMENT_SHADER),r=this.compileShader(e,n.VERTEX_SHADER),s=n.createProgram();if(n.attachShader(s,i),n.attachShader(s,r),n.linkProgram(s),!n.getShaderParameter(i,n.COMPILE_STATUS)){const t=`Fragment shader compilation failed: ${n.getShaderInfoLog(i)}`;throw new Error(t)}if(n.deleteShader(i),!n.getShaderParameter(r,n.COMPILE_STATUS)){const t=`Vertex shader compilation failed: ${n.getShaderInfoLog(r)}`;throw new Error(t)}if(n.deleteShader(r),!n.getProgramParameter(s,n.LINK_STATUS)){const t=`GL program linking failed: ${n.getProgramInfoLog(s)}`;throw new Error(t)}return s}getUniformLocation(t){const e=(0,o.v6)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){const e=(0,o.v6)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){const n=t.size,i=t.viewState.rotation,r=t.viewState.resolution,o=t.viewState.center;return(0,s.Zz)(e,0,0,2/(r*n[0]),2/(r*n[1]),-i,-o[0],-o[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,n,i,r){const s=this.getAttributeLocation(t);s<0||(this.gl_.enableVertexAttribArray(s),this.gl_.vertexAttribPointer(s,e,n,!1,i,r))}enableAttributes(t){const e=function(t){let e=0;for(let n=0;n<t.length;n++){const i=t[n];e+=i.size*_(i.type)}return e}(t);let n=0;for(let i=0;i<t.length;i++){const r=t[i];this.enableAttributeArray_(r.name,r.size,r.type||u.zH,e,n),n+=r.size*_(r.type)}}handleWebGLContextLost(t){(0,r.I)(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,n,i){const r=this.gl_;n=n||r.createTexture();const s=i?r.NEAREST:r.LINEAR;r.bindTexture(r.TEXTURE_2D,n),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MAG_FILTER,s),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE);const o=r.RGBA,a=r.RGBA,l=r.UNSIGNED_BYTE;return e instanceof Uint8Array?r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,a,l,e):e?r.texImage2D(r.TEXTURE_2D,0,o,a,l,e):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,a,l,null),n}}function _(t){switch(t){case f.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case f.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case f.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case f.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var v=y},77833:function(t,e,n){"use strict";var i=n(44090),r=n(16235),s=n(96728),o=n(64697),a=n(93001),l=n(2337),h=n(46921),u=n(85398),c=n(78368),d=n(11238),f=n(60447);class p extends s.Ay{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){(0,i.X$)(this.flatCoordinates,t),this.changed()}clone(){const t=new p(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){return i<(0,r.Ld)(this.getExtent(),t,e)?i:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.MD)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.n)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,i))}forEachSegment(t){return(0,d.j)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,h.gr)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,l.n2)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,h.SH)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return(0,c.k)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=(0,f.P4)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new p(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,u.gp)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,a.z2)(this.flatCoordinates,0,t,this.stride),this.changed()}}e.A=p},78368:function(t,e,n){"use strict";function i(t,e,n,i){let r=t[e],s=t[e+1],o=0;for(let a=e+i;a<n;a+=i){const e=t[a],n=t[a+1];o+=Math.sqrt((e-r)*(e-r)+(n-s)*(n-s)),r=e,s=n}return o}n.d(e,{k:function(){return i}})},80301:function(t,e,n){"use strict";n.d(e,{A:function(){return kn}});var i=6378137,r=.0066943799901413165,s=484813681109536e-20,o=Math.PI/2,a=1e-10,l=.017453292519943295,h=57.29577951308232,u=Math.PI/4,c=2*Math.PI,d=3.14159265359,f={greenwich:0,lisbon:-9.131906111111,paris:2.337229166667,bogota:-74.080916666667,madrid:-3.687938888889,rome:12.452333333333,bern:7.439583333333,jakarta:106.807719444444,ferro:-17.666666666667,brussels:4.367975,stockholm:18.058277777778,athens:23.7163375,oslo:10.722916666667},p={mm:{to_meter:.001},cm:{to_meter:.01},ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937},fath:{to_meter:1.8288},kmi:{to_meter:1852},"us-ch":{to_meter:20.1168402336805},"us-mi":{to_meter:1609.34721869444},km:{to_meter:1e3},"ind-ft":{to_meter:.30479841},"ind-yd":{to_meter:.91439523},mi:{to_meter:1609.344},yd:{to_meter:.9144},ch:{to_meter:20.1168},link:{to_meter:.201168},dm:{to_meter:.01},in:{to_meter:.0254},"ind-ch":{to_meter:20.11669506},"us-in":{to_meter:.025400050800101},"us-yd":{to_meter:.914401828803658}},g=/[\s_\-\/\(\)]/g;function m(t,e){if(t[e])return t[e];for(var n,i=Object.keys(t),r=e.toLowerCase().replace(g,""),s=-1;++s<i.length;)if((n=i[s]).toLowerCase().replace(g,"")===r)return t[n]}function y(t){var e,n,i,r={},s=t.split("+").map((function(t){return t.trim()})).filter((function(t){return t})).reduce((function(t,e){var n=e.split("=");return n.push(!0),t[n[0].toLowerCase()]=n[1],t}),{}),o={proj:"projName",datum:"datumCode",rf:function(t){r.rf=parseFloat(t)},lat_0:function(t){r.lat0=t*l},lat_1:function(t){r.lat1=t*l},lat_2:function(t){r.lat2=t*l},lat_ts:function(t){r.lat_ts=t*l},lon_0:function(t){r.long0=t*l},lon_1:function(t){r.long1=t*l},lon_2:function(t){r.long2=t*l},alpha:function(t){r.alpha=parseFloat(t)*l},gamma:function(t){r.rectified_grid_angle=parseFloat(t)},lonc:function(t){r.longc=t*l},x_0:function(t){r.x0=parseFloat(t)},y_0:function(t){r.y0=parseFloat(t)},k_0:function(t){r.k0=parseFloat(t)},k:function(t){r.k0=parseFloat(t)},a:function(t){r.a=parseFloat(t)},b:function(t){r.b=parseFloat(t)},r:function(t){r.a=r.b=parseFloat(t)},r_a:function(){r.R_A=!0},zone:function(t){r.zone=parseInt(t,10)},south:function(){r.utmSouth=!0},towgs84:function(t){r.datum_params=t.split(",").map((function(t){return parseFloat(t)}))},to_meter:function(t){r.to_meter=parseFloat(t)},units:function(t){r.units=t;var e=m(p,t);e&&(r.to_meter=e.to_meter)},from_greenwich:function(t){r.from_greenwich=t*l},pm:function(t){var e=m(f,t);r.from_greenwich=(e||parseFloat(t))*l},nadgrids:function(t){"@null"===t?r.datumCode="none":r.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(r.axis=t)},approx:function(){r.approx=!0}};for(e in s)n=s[e],e in o?"function"==typeof(i=o[e])?i(n):r[i]=n:r[e]=n;return"string"==typeof r.datumCode&&"WGS84"!==r.datumCode&&(r.datumCode=r.datumCode.toLowerCase()),r}var _=function(t){var e=new E(t);return e.output()},v=1,x=/\s/,b=/[A-Za-z]/,w=/[A-Za-z84_]/,A=/[,\]]/,S=/[\d\.E\-\+]/;function E(t){if("string"!=typeof t)throw new Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=v}function T(t,e,n){Array.isArray(e)&&(n.unshift(e),e=null);var i=e?{}:t,r=n.reduce((function(t,e){return C(e,t),t}),i);e&&(t[e]=r)}function C(t,e){if(Array.isArray(t)){var n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length)return Array.isArray(t[0])?(e[n]={},void C(t[0],e[n])):void(e[n]=t[0]);if(t.length)if("TOWGS84"!==n){if("AXIS"===n)return n in e||(e[n]=[]),void e[n].push(t);var i;switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":return e[n]={name:t[0].toLowerCase(),convert:t[1]},void(3===t.length&&C(t[2],e[n]));case"SPHEROID":case"ELLIPSOID":return e[n]={name:t[0],a:t[1],rf:t[2]},void(4===t.length&&C(t[3],e[n]));case"EDATUM":case"ENGINEERINGDATUM":case"LOCAL_DATUM":case"DATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":return t[0]=["name",t[0]],void T(e,n,t);case"COMPD_CS":case"COMPOUNDCRS":case"FITTED_CS":case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"ENGCRS":case"ENGINEERINGCRS":return t[0]=["name",t[0]],T(e,n,t),void(e[n].type=n);default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return C(t,e[n]);return T(e,n,t)}}else e[n]=t;else e[n]=!0}else e[t]=!0}E.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;x.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case v:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case-1:return}},E.prototype.afterquote=function(t){if('"'===t)return this.word+='"',void(this.state=4);if(A.test(t))return this.word=this.word.trim(),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},E.prototype.afterItem=function(t){return","===t?(null!==this.word&&this.currentObject.push(this.word),this.word=null,void(this.state=v)):"]"===t?(this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=v,this.currentObject=this.stack.pop(),void(this.currentObject||(this.state=-1))):void 0},E.prototype.number=function(t){if(!S.test(t)){if(A.test(t))return this.word=parseFloat(this.word),void this.afterItem(t);throw new Error("havn't handled \""+t+'" in number yet, index '+this.place)}this.word+=t},E.prototype.quoted=function(t){'"'!==t?this.word+=t:this.state=5},E.prototype.keyword=function(t){if(w.test(t))this.word+=t;else{if("["===t){var e=[];return e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,void(this.state=v)}if(!A.test(t))throw new Error("havn't handled \""+t+'" in keyword yet, index '+this.place);this.afterItem(t)}},E.prototype.neutral=function(t){if(b.test(t))return this.word=t,void(this.state=2);if('"'===t)return this.word="",void(this.state=4);if(S.test(t))return this.word=t,void(this.state=3);if(!A.test(t))throw new Error("havn't handled \""+t+'" in neutral yet, index '+this.place);this.afterItem(t)},E.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw new Error('unable to parse string "'+this.text+'". State is '+this.state)};var M=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];function L(t){return.017453292519943295*t}function P(t){for(var e=Object.keys(t),n=0,i=e.length;n<i;++n){var r=e[n];-1!==M.indexOf(r)&&R(t[r]),"object"==typeof t[r]&&P(t[r])}}function R(t){if(t.AUTHORITY){var e=Object.keys(t.AUTHORITY)[0];e&&e in t.AUTHORITY&&(t.title=e+":"+t.AUTHORITY[e])}if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var n="",i=0,r=t.AXIS.length;i<r;++i){var s=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==s[0].indexOf("north")||("y"===s[0]||"lat"===s[0])&&"north"===s[1]?n+="n":-1!==s[0].indexOf("south")||("y"===s[0]||"lat"===s[0])&&"south"===s[1]?n+="s":-1!==s[0].indexOf("east")||("x"===s[0]||"lon"===s[0])&&"east"===s[1]?n+="e":-1===s[0].indexOf("west")&&("x"!==s[0]&&"lon"!==s[0]||"west"!==s[1])||(n+="w")}2===n.length&&(n+="u"),3===n.length&&(t.axis=n)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var o=t.GEOGCS;function a(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(o=t),o&&(o.DATUM?t.datumCode=o.DATUM.name.toLowerCase():t.datumCode=o.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),"new_zealand_1949"===t.datumCode&&(t.datumCode="nzgd49"),"wgs_1984"!==t.datumCode&&"world_geodetic_system_1984"!==t.datumCode||("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"belge_1972"===t.datumCode&&(t.datumCode="rnb72"),o.DATUM&&o.DATUM.SPHEROID&&(t.ellps=o.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=o.DATUM.SPHEROID.a,t.rf=parseFloat(o.DATUM.SPHEROID.rf,10)),o.DATUM&&o.DATUM.TOWGS84&&(t.datum_params=o.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a);[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",L],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",L],["x0","false_easting",a],["y0","false_northing",a],["long0","central_meridian",L],["lat0","latitude_of_origin",L],["lat0","standard_parallel_1",L],["lat1","standard_parallel_1",L],["lat2","standard_parallel_2",L],["azimuth","Azimuth"],["alpha","azimuth",L],["srsCode","name"]].forEach((function(e){return function(t,e){var n=e[0],i=e[1];!(n in t)&&i in t&&(t[n]=t[i],3===e.length&&(t[n]=e[2](t[n])))}(t,e)})),t.long0||!t.longc||"Albers_Conic_Equal_Area"!==t.projName&&"Lambert_Azimuthal_Equal_Area"!==t.projName||(t.long0=t.longc),t.lat_ts||!t.lat1||"Stereographic_South_Pole"!==t.projName&&"Polar Stereographic (variant B)"!==t.projName?!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=L(t.lat0>0?90:-90)):(t.lat0=L(t.lat1>0?90:-90),t.lat_ts=t.lat1)}function I(t){var e=_(t),n=e[0],i={};return C(e,i),P(i),i[n]}function N(t){var e=this;if(2===arguments.length){var n=arguments[1];"string"==typeof n?"+"===n.charAt(0)?N[t]=y(arguments[1]):N[t]=I(arguments[1]):N[t]=n}else if(1===arguments.length){if(Array.isArray(t))return t.map((function(t){Array.isArray(t)?N.apply(e,t):N(t)}));if("string"==typeof t){if(t in N)return N[t]}else"EPSG"in t?N["EPSG:"+t.EPSG]=t:"ESRI"in t?N["ESRI:"+t.ESRI]=t:"IAU2000"in t?N["IAU2000:"+t.IAU2000]=t:console.log(t);return}}!function(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs");for(var e=1;e<=60;++e)t("EPSG:"+(32600+e),"+proj=utm +zone="+e+" +datum=WGS84 +units=m"),t("EPSG:"+(32700+e),"+proj=utm +zone="+e+" +south +datum=WGS84 +units=m");t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}(N);var F=N;var k=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"];var D=["3857","900913","3785","102113"];var O=function(t){if(!function(t){return"string"==typeof t}(t))return t;if(function(t){return t in F}(t))return F[t];if(function(t){return k.some((function(e){return t.indexOf(e)>-1}))}(t)){var e=I(t);if(function(t){var e=m(t,"authority");if(e){var n=m(e,"epsg");return n&&D.indexOf(n)>-1}}(e))return F["EPSG:3857"];var n=function(t){var e=m(t,"extension");if(e)return m(e,"proj4")}(e);return n?y(n):e}return function(t){return"+"===t[0]}(t)?y(t):void 0};function j(t,e){var n,i;if(t=t||{},!e)return t;for(i in e)void 0!==(n=e[i])&&(t[i]=n);return t}function G(t,e,n){var i=t*e;return n/Math.sqrt(1-i*i)}function B(t){return t<0?-1:1}function z(t){return Math.abs(t)<=d?t:t-B(t)*c}function q(t,e,n){var i=t*n,r=.5*t;return i=Math.pow((1-i)/(1+i),r),Math.tan(.5*(o-e))/i}function U(t,e){for(var n,i,r=.5*t,s=o-2*Math.atan(e),a=0;a<=15;a++)if(n=t*Math.sin(s),s+=i=o-2*Math.atan(e*Math.pow((1-n)/(1+n),r))-s,Math.abs(i)<=1e-10)return s;return-9999}function W(t){return t}var $=[{init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,n,i=t.x,r=t.y;if(r*h>90&&r*h<-90&&i*h>180&&i*h<-180)return null;if(Math.abs(Math.abs(r)-o)<=a)return null;if(this.sphere)e=this.x0+this.a*this.k0*z(i-this.long0),n=this.y0+this.a*this.k0*Math.log(Math.tan(u+.5*r));else{var s=Math.sin(r),l=q(this.e,r,s);e=this.x0+this.a*this.k0*z(i-this.long0),n=this.y0-this.a*this.k0*Math.log(l)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i=t.x-this.x0,r=t.y-this.y0;if(this.sphere)n=o-2*Math.atan(Math.exp(-r/(this.a*this.k0)));else{var s=Math.exp(-r/(this.a*this.k0));if(-9999===(n=U(this.e,s)))return null}return e=z(this.long0+i/(this.a*this.k0)),t.x=e,t.y=n,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]},{init:function(){},forward:W,inverse:W,names:["longlat","identity"]}],V={},X=[];function H(t,e){var n=X.length;return t.names?(X[n]=t,t.names.forEach((function(t){V[t.toLowerCase()]=n})),this):(console.log(e),!0)}var Y={start:function(){$.forEach(H)},add:H,get:function(t){if(!t)return!1;var e=t.toLowerCase();return void 0!==V[e]&&X[V[e]]?X[V[e]]:void 0}},Z={MERIT:{a:6378137,rf:298.257,ellipseName:"MERIT 1983"},SGS85:{a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},GRS80:{a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},IAU76:{a:6378140,rf:298.257,ellipseName:"IAU 1976"},airy:{a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},APL4:{a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},NWL9D:{a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},mod_airy:{a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},andrae:{a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},aust_SA:{a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},GRS67:{a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},bessel:{a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},bess_nam:{a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},clrk66:{a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},clrk80:{a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},clrk80ign:{a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},clrk58:{a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},CPM:{a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},delmbr:{a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},engelis:{a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},evrst30:{a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},evrst48:{a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},evrst56:{a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},evrst69:{a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},evrstSS:{a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},fschr60:{a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},fschr60m:{a:6378155,rf:298.3,ellipseName:"Fischer 1960"},fschr68:{a:6378150,rf:298.3,ellipseName:"Fischer 1968"},helmert:{a:6378200,rf:298.3,ellipseName:"Helmert 1906"},hough:{a:6378270,rf:297,ellipseName:"Hough"},intl:{a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},kaula:{a:6378163,rf:298.24,ellipseName:"Kaula 1961"},lerch:{a:6378139,rf:298.257,ellipseName:"Lerch 1979"},mprts:{a:6397300,rf:191,ellipseName:"Maupertius 1738"},new_intl:{a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},plessis:{a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},krass:{a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},SEasia:{a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},walbeck:{a:6376896,b:6355834.8467,ellipseName:"Walbeck"},WGS60:{a:6378165,rf:298.3,ellipseName:"WGS 60"},WGS66:{a:6378145,rf:298.25,ellipseName:"WGS 66"},WGS7:{a:6378135,rf:298.26,ellipseName:"WGS 72"}},K=Z.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};Z.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"};var J={wgs84:{towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},ch1903:{towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},ggrs87:{towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},nad83:{towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},nad27:{nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},potsdam:{towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},carthage:{towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},hermannskogel:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},mgi:{towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Militar-Geographische Institut"},osni52:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},ire65:{towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},rassadiran:{towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},nzgd49:{towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},osgb36:{towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Ordnance Survey of Great Britain 1936"},s_jtsk:{towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},beduaram:{towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},gunung_segara:{towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},rnb72:{towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}};for(var Q in J){var tt=J[Q];J[tt.datumName]=tt}var et=J;var nt=function(t,e,n,i,r,o,a){var l={};return l.datum_type=void 0===t||"none"===t?5:4,e&&(l.datum_params=e.map(parseFloat),0===l.datum_params[0]&&0===l.datum_params[1]&&0===l.datum_params[2]||(l.datum_type=1),l.datum_params.length>3&&(0===l.datum_params[3]&&0===l.datum_params[4]&&0===l.datum_params[5]&&0===l.datum_params[6]||(l.datum_type=2,l.datum_params[3]*=s,l.datum_params[4]*=s,l.datum_params[5]*=s,l.datum_params[6]=l.datum_params[6]/1e6+1))),a&&(l.datum_type=3,l.grids=a),l.a=n,l.b=i,l.es=r,l.ep2=o,l},it={};function rt(t){if(0===t.length)return null;var e="@"===t[0];return e&&(t=t.slice(1)),"null"===t?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:it[t]||null,isNull:!1}}function st(t){return t/3600*Math.PI/180}function ot(t,e,n){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,n)))}function at(t){return t.map((function(t){return[st(t.longitudeShift),st(t.latitudeShift)]}))}function lt(t,e,n){return{name:ot(t,e+8,e+16).trim(),parent:ot(t,e+24,e+24+8).trim(),lowerLatitude:t.getFloat64(e+72,n),upperLatitude:t.getFloat64(e+88,n),lowerLongitude:t.getFloat64(e+104,n),upperLongitude:t.getFloat64(e+120,n),latitudeInterval:t.getFloat64(e+136,n),longitudeInterval:t.getFloat64(e+152,n),gridNodeCount:t.getInt32(e+168,n)}}function ht(t,e,n,i){for(var r=e+176,s=[],o=0;o<n.gridNodeCount;o++){var a={latitudeShift:t.getFloat32(r+16*o,i),longitudeShift:t.getFloat32(r+16*o+4,i),latitudeAccuracy:t.getFloat32(r+16*o+8,i),longitudeAccuracy:t.getFloat32(r+16*o+12,i)};s.push(a)}return s}function ut(t,e){if(!(this instanceof ut))return new ut(t);e=e||function(t){if(t)throw t};var n=O(t);if("object"==typeof n){var i=ut.projections.get(n.projName);if(i){if(n.datumCode&&"none"!==n.datumCode){var r=m(et,n.datumCode);r&&(n.datum_params=n.datum_params||(r.towgs84?r.towgs84.split(","):null),n.ellps=r.ellipse,n.datumName=r.datumName?r.datumName:n.datumCode)}n.k0=n.k0||1,n.axis=n.axis||"enu",n.ellps=n.ellps||"wgs84",n.lat1=n.lat1||n.lat0;var s,o,l,h,u,c,d,f=function(t,e,n,i,r){if(!t){var s=m(Z,i);s||(s=K),t=s.a,e=s.b,n=s.rf}return n&&!e&&(e=(1-1/n)*t),(0===n||Math.abs(t-e)<a)&&(r=!0,e=t),{a:t,b:e,rf:n,sphere:r}}(n.a,n.b,n.rf,n.ellps,n.sphere),p=(s=f.a,o=f.b,f.rf,l=n.R_A,c=((h=s*s)-(u=o*o))/h,d=0,l?(h=(s*=1-c*(.16666666666666666+c*(.04722222222222222+.022156084656084655*c)))*s,c=0):d=Math.sqrt(c),{es:c,e:d,ep2:(h-u)/u}),g=function(t){return void 0===t?null:t.split(",").map(rt)}(n.nadgrids),y=n.datum||nt(n.datumCode,n.datum_params,f.a,f.b,p.es,p.ep2,g);j(this,n),j(this,i),this.a=f.a,this.b=f.b,this.rf=f.rf,this.sphere=f.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=y,this.init(),e(null,this)}else e("Could not get projection name from: "+t)}else e("Could not parse to valid json: "+t)}ut.projections=Y,ut.projections.start();var ct=ut;function dt(t,e,n){var i,r,s,a,l=t.x,h=t.y,u=t.z?t.z:0;if(h<-o&&h>-1.001*o)h=-o;else if(h>o&&h<1.001*o)h=o;else{if(h<-o)return{x:-1/0,y:-1/0,z:t.z};if(h>o)return{x:1/0,y:1/0,z:t.z}}return l>Math.PI&&(l-=2*Math.PI),r=Math.sin(h),a=Math.cos(h),s=r*r,{x:((i=n/Math.sqrt(1-e*s))+u)*a*Math.cos(l),y:(i+u)*a*Math.sin(l),z:(i*(1-e)+u)*r}}function ft(t,e,n,i){var r,s,o,a,l,h,u,c,d,f,p,g,m,y,_,v=1e-12,x=t.x,b=t.y,w=t.z?t.z:0;if(r=Math.sqrt(x*x+b*b),s=Math.sqrt(x*x+b*b+w*w),r/n<v){if(y=0,s/n<v)return _=-i,{x:t.x,y:t.y,z:t.z}}else y=Math.atan2(b,x);o=w/s,c=(a=r/s)*(1-e)*(l=1/Math.sqrt(1-e*(2-e)*a*a)),d=o*l,m=0;do{m++,h=e*(u=n/Math.sqrt(1-e*d*d))/(u+(_=r*c+w*d-u*(1-e*d*d))),g=(p=o*(l=1/Math.sqrt(1-h*(2-h)*a*a)))*c-(f=a*(1-h)*l)*d,c=f,d=p}while(g*g>1e-24&&m<30);return{x:y,y:Math.atan(p/Math.abs(f)),z:_}}function pt(t){return 1===t||2===t}function gt(t,e,n){if(function(t,e){return t.datum_type===e.datum_type&&!(t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(1===t.datum_type?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:2!==t.datum_type||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}(t,e))return n;if(5===t.datum_type||5===e.datum_type)return n;var s=t.a,o=t.es;if(3===t.datum_type){if(0!==mt(t,!1,n))return;s=i,o=r}var a=e.a,l=e.b,h=e.es;if(3===e.datum_type&&(a=i,l=6356752.314,h=r),o===h&&s===a&&!pt(t.datum_type)&&!pt(e.datum_type))return n;if((n=dt(n,o,s),pt(t.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x+n[0],y:t.y+n[1],z:t.z+n[2]};if(2===e){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6];return{x:h*(t.x-l*t.y+a*t.z)+i,y:h*(l*t.x+t.y-o*t.z)+r,z:h*(-a*t.x+o*t.y+t.z)+s}}}(n,t.datum_type,t.datum_params)),pt(e.datum_type)&&(n=function(t,e,n){if(1===e)return{x:t.x-n[0],y:t.y-n[1],z:t.z-n[2]};if(2===e){var i=n[0],r=n[1],s=n[2],o=n[3],a=n[4],l=n[5],h=n[6],u=(t.x-i)/h,c=(t.y-r)/h,d=(t.z-s)/h;return{x:u+l*c-a*d,y:-l*u+c+o*d,z:a*u-o*c+d}}}(n,e.datum_type,e.datum_params)),n=ft(n,h,a,l),3===e.datum_type)&&0!==mt(e,!0,n))return;return n}function mt(t,e,n){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;var i={x:-n.x,y:n.y},r={x:Number.NaN,y:Number.NaN},s=[];t:for(var o=0;o<t.grids.length;o++){var a=t.grids[o];if(s.push(a.name),a.isNull){r=i;break}if(a.mandatory,null!==a.grid)for(var l=a.grid.subgrids,u=0,c=l.length;u<c;u++){var d=l[u],f=(Math.abs(d.del[1])+Math.abs(d.del[0]))/1e4,p=d.ll[0]-f,g=d.ll[1]-f,m=d.ll[0]+(d.lim[0]-1)*d.del[0]+f,y=d.ll[1]+(d.lim[1]-1)*d.del[1]+f;if(!(g>i.y||p>i.x||y<i.y||m<i.x)&&(r=yt(i,e,d),!isNaN(r.x)))break t}else if(a.mandatory)return console.log("Unable to find mandatory grid '"+a.name+"'"),-1}return isNaN(r.x)?(console.log("Failed to find a grid shift table for location '"+-i.x*h+" "+i.y*h+" tried: '"+s+"'"),-1):(n.x=-r.x,n.y=r.y,0)}function yt(t,e,n){var i={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return i;var r={x:t.x,y:t.y};r.x-=n.ll[0],r.y-=n.ll[1],r.x=z(r.x-Math.PI)+Math.PI;var s=_t(r,n);if(e){if(isNaN(s.x))return i;s.x=r.x-s.x,s.y=r.y-s.y;var o,a,l=9;do{if(a=_t(s,n),isNaN(a.x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}o={x:r.x-(a.x+s.x),y:r.y-(a.y+s.y)},s.x+=o.x,s.y+=o.y}while(l--&&Math.abs(o.x)>1e-12&&Math.abs(o.y)>1e-12);if(l<0)return console.log("Inverse grid shift iterator failed to converge."),i;i.x=z(s.x+n.ll[0]),i.y=s.y+n.ll[1]}else isNaN(s.x)||(i.x=t.x+s.x,i.y=t.y+s.y);return i}function _t(t,e){var n,i={x:t.x/e.del[0],y:t.y/e.del[1]},r=Math.floor(i.x),s=Math.floor(i.y),o=i.x-1*r,a=i.y-1*s,l={x:Number.NaN,y:Number.NaN};if(r<0||r>=e.lim[0])return l;if(s<0||s>=e.lim[1])return l;n=s*e.lim[0]+r;var h=e.cvs[n][0],u=e.cvs[n][1];n++;var c=e.cvs[n][0],d=e.cvs[n][1];n+=e.lim[0];var f=e.cvs[n][0],p=e.cvs[n][1];n--;var g=e.cvs[n][0],m=e.cvs[n][1],y=o*a,_=o*(1-a),v=(1-o)*(1-a),x=(1-o)*a;return l.x=v*h+_*c+x*g+y*f,l.y=v*u+_*d+x*m+y*p,l}function vt(t,e,n){var i,r,s,o=n.x,a=n.y,l=n.z||0,h={};for(s=0;s<3;s++)if(!e||2!==s||void 0!==n.z)switch(0===s?(i=o,r=-1!=="ew".indexOf(t.axis[s])?"x":"y"):1===s?(i=a,r=-1!=="ns".indexOf(t.axis[s])?"y":"x"):(i=l,r="z"),t.axis[s]){case"e":case"n":h[r]=i;break;case"w":case"s":h[r]=-i;break;case"u":void 0!==n[r]&&(h.z=i);break;case"d":void 0!==n[r]&&(h.z=-i);break;default:return null}return h}function xt(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}function bt(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw new TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw new TypeError("coordinates must be finite numbers")}function wt(t,e,n,i){var r,s=void 0!==(n=Array.isArray(n)?xt(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if(function(t){bt(t.x),bt(t.y)}(n),t.datum&&e.datum&&function(t,e){return(1===t.datum.datum_type||2===t.datum.datum_type||3===t.datum.datum_type)&&"WGS84"!==e.datumCode||(1===e.datum.datum_type||2===e.datum.datum_type||3===e.datum.datum_type)&&"WGS84"!==t.datumCode}(t,e)&&(n=wt(t,r=new ct("WGS84"),n,i),t=r),i&&"enu"!==t.axis&&(n=vt(t,!1,n)),"longlat"===t.projName)n={x:n.x*l,y:n.y*l,z:n.z||0};else if(t.to_meter&&(n={x:n.x*t.to_meter,y:n.y*t.to_meter,z:n.z||0}),!(n=t.inverse(n)))return;if(t.from_greenwich&&(n.x+=t.from_greenwich),n=gt(t.datum,e.datum,n))return e.from_greenwich&&(n={x:n.x-e.from_greenwich,y:n.y,z:n.z||0}),"longlat"===e.projName?n={x:n.x*h,y:n.y*h,z:n.z||0}:(n=e.forward(n),e.to_meter&&(n={x:n.x/e.to_meter,y:n.y/e.to_meter,z:n.z||0})),i&&"enu"!==e.axis?vt(e,!0,n):(n&&!s&&delete n.z,n)}var At=ct("WGS84");function St(t,e,n,i){var r,s,o;return Array.isArray(n)?(r=wt(t,e,n,i)||{x:NaN,y:NaN},n.length>2?void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name?"number"==typeof r.z?[r.x,r.y,r.z].concat(n.slice(3)):[r.x,r.y,n[2]].concat(n.slice(3)):[r.x,r.y].concat(n.slice(2)):[r.x,r.y]):(s=wt(t,e,n,i),2===(o=Object.keys(n)).length||o.forEach((function(i){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===i||"y"===i||"z"===i)return}else if("x"===i||"y"===i)return;s[i]=n[i]})),s)}function Et(t){return t instanceof ct?t:t.oProj?t.oProj:ct(t)}var Tt=function(t,e,n){t=Et(t);var i,r=!1;return void 0===e?(e=t,t=At,r=!0):(void 0!==e.x||Array.isArray(e))&&(n=e,e=t,t=At,r=!0),e=Et(e),n?St(t,e,n):(i={forward:function(n,i){return St(t,e,n,i)},inverse:function(n,i){return St(e,t,n,i)}},r&&(i.oProj=e),i)},Ct="AJSAJS",Mt="AFAFAF",Lt=65,Pt=73,Rt=79,It=86,Nt=90,Ft={forward:kt,inverse:function(t){var e=Gt(qt(t.toUpperCase()));if(e.lat&&e.lon)return[e.lon,e.lat,e.lon,e.lat];return[e.left,e.bottom,e.right,e.top]},toPoint:Dt};function kt(t,e){return e=e||5,function(t,e){var n="00000"+t.easting,i="00000"+t.northing;return t.zoneNumber+t.zoneLetter+(f=t.easting,p=t.northing,g=t.zoneNumber,m=zt(g),y=Math.floor(f/1e5),_=Math.floor(p/1e5)%20,r=y,s=_,o=m,a=o-1,l=Ct.charCodeAt(a),h=Mt.charCodeAt(a),u=l+r-1,c=h+s,d=!1,u>Nt&&(u=u-Nt+Lt-1,d=!0),(u===Pt||l<Pt&&u>Pt||(u>Pt||l<Pt)&&d)&&u++,(u===Rt||l<Rt&&u>Rt||(u>Rt||l<Rt)&&d)&&++u===Pt&&u++,u>Nt&&(u=u-Nt+Lt-1),c>It?(c=c-It+Lt-1,d=!0):d=!1,(c===Pt||h<Pt&&c>Pt||(c>Pt||h<Pt)&&d)&&c++,(c===Rt||h<Rt&&c>Rt||(c>Rt||h<Rt)&&d)&&++c===Pt&&c++,c>It&&(c=c-It+Lt-1),String.fromCharCode(u)+String.fromCharCode(c))+n.substr(n.length-5,e)+i.substr(i.length-5,e);var r,s,o,a,l,h,u,c,d;var f,p,g,m,y,_}(function(t){var e,n,i,r,s,o,a,l,h=t.lat,u=t.lon,c=6378137,d=.00669438,f=.9996,p=Ot(h),g=Ot(u);l=Math.floor((u+180)/6)+1,180===u&&(l=60);h>=56&&h<64&&u>=3&&u<12&&(l=32);h>=72&&h<84&&(u>=0&&u<9?l=31:u>=9&&u<21?l=33:u>=21&&u<33?l=35:u>=33&&u<42&&(l=37));a=Ot(6*(l-1)-180+3),e=d/(1-d),n=c/Math.sqrt(1-d*Math.sin(p)*Math.sin(p)),i=Math.tan(p)*Math.tan(p),r=e*Math.cos(p)*Math.cos(p),s=Math.cos(p)*(g-a),o=c*((1-d/4-3*d*d/64-5*d*d*d/256)*p-(3*d/8+3*d*d/32+45*d*d*d/1024)*Math.sin(2*p)+(15*d*d/256+45*d*d*d/1024)*Math.sin(4*p)-35*d*d*d/3072*Math.sin(6*p));var m=f*n*(s+(1-i+r)*s*s*s/6+(5-18*i+i*i+72*r-58*e)*s*s*s*s*s/120)+5e5,y=f*(o+n*Math.tan(p)*(s*s/2+(5-i+9*r+4*r*r)*s*s*s*s/24+(61-58*i+i*i+600*r-330*e)*s*s*s*s*s*s/720));h<0&&(y+=1e7);return{northing:Math.round(y),easting:Math.round(m),zoneNumber:l,zoneLetter:Bt(h)}}({lat:t[1],lon:t[0]}),e)}function Dt(t){var e=Gt(qt(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function Ot(t){return t*(Math.PI/180)}function jt(t){return t/Math.PI*180}function Gt(t){var e=t.northing,n=t.easting,i=t.zoneLetter,r=t.zoneNumber;if(r<0||r>60)return null;var s,o,a,l,h,u,c,d,f,p=.9996,g=6378137,m=.00669438,y=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),_=n-5e5,v=e;i<"N"&&(v-=1e7),c=6*(r-1)-180+3,s=.006739496752268451,f=(d=v/p/6367449.145945056)+(3*y/2-27*y*y*y/32)*Math.sin(2*d)+(21*y*y/16-55*y*y*y*y/32)*Math.sin(4*d)+151*y*y*y/96*Math.sin(6*d),o=g/Math.sqrt(1-m*Math.sin(f)*Math.sin(f)),a=Math.tan(f)*Math.tan(f),l=s*Math.cos(f)*Math.cos(f),h=.99330562*g/Math.pow(1-m*Math.sin(f)*Math.sin(f),1.5),u=_/(o*p);var x=f-o*Math.tan(f)/h*(u*u/2-(5+3*a+10*l-4*l*l-9*s)*u*u*u*u/24+(61+90*a+298*l+45*a*a-1.6983531815716497-3*l*l)*u*u*u*u*u*u/720);x=jt(x);var b,w=(u-(1+2*a+l)*u*u*u/6+(5-2*l+28*a-3*l*l+8*s+24*a*a)*u*u*u*u*u/120)/Math.cos(f);if(w=c+jt(w),t.accuracy){var A=Gt({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});b={top:A.lat,right:A.lon,bottom:x,left:w}}else b={lat:x,lon:w};return b}function Bt(t){var e="Z";return 84>=t&&t>=72?e="X":72>t&&t>=64?e="W":64>t&&t>=56?e="V":56>t&&t>=48?e="U":48>t&&t>=40?e="T":40>t&&t>=32?e="S":32>t&&t>=24?e="R":24>t&&t>=16?e="Q":16>t&&t>=8?e="P":8>t&&t>=0?e="N":0>t&&t>=-8?e="M":-8>t&&t>=-16?e="L":-16>t&&t>=-24?e="K":-24>t&&t>=-32?e="J":-32>t&&t>=-40?e="H":-40>t&&t>=-48?e="G":-48>t&&t>=-56?e="F":-56>t&&t>=-64?e="E":-64>t&&t>=-72?e="D":-72>t&&t>=-80&&(e="C"),e}function zt(t){var e=t%6;return 0===e&&(e=6),e}function qt(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,n=t.length,i=null,r="",s=0;!/[A-Z]/.test(e=t.charAt(s));){if(s>=2)throw"MGRSPoint bad conversion from: "+t;r+=e,s++}var o=parseInt(r,10);if(0===s||s+3>n)throw"MGRSPoint bad conversion from: "+t;var a=t.charAt(s++);if(a<="A"||"B"===a||"Y"===a||a>="Z"||"I"===a||"O"===a)throw"MGRSPoint zone letter "+a+" not handled: "+t;i=t.substring(s,s+=2);for(var l=zt(o),h=function(t,e){var n=Ct.charCodeAt(e-1),i=1e5,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Pt&&n++,n===Rt&&n++,n>Nt){if(r)throw"Bad character: "+t;n=Lt,r=!0}i+=1e5}return i}(i.charAt(0),l),u=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;var n=Mt.charCodeAt(e-1),i=0,r=!1;for(;n!==t.charCodeAt(0);){if(++n===Pt&&n++,n===Rt&&n++,n>It){if(r)throw"Bad character: "+t;n=Lt,r=!0}i+=1e5}return i}(i.charAt(1),l);u<Ut(a);)u+=2e6;var c=n-s;if(c%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var d,f,p,g=c/2,m=0,y=0;return g>0&&(d=1e5/Math.pow(10,g),f=t.substring(s,s+g),m=parseFloat(f)*d,p=t.substring(s+g),y=parseFloat(p)*d),{easting:m+h,northing:y+u,zoneLetter:a,zoneNumber:o,accuracy:d}}function Ut(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}function Wt(t,e,n){if(!(this instanceof Wt))return new Wt(t,e,n);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var i=t.split(",");this.x=parseFloat(i[0],10),this.y=parseFloat(i[1],10),this.z=parseFloat(i[2],10)||0}else this.x=t,this.y=e,this.z=n||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}Wt.fromMGRS=function(t){return new Wt(Dt(t))},Wt.prototype.toMGRS=function(t){return kt([this.x,this.y],t)};var $t=Wt,Vt=.046875,Xt=.01953125,Ht=.01068115234375;function Yt(t){var e=[];e[0]=1-t*(.25+t*(Vt+t*(Xt+t*Ht))),e[1]=t*(.75-t*(Vt+t*(Xt+t*Ht)));var n=t*t;return e[2]=n*(.46875-t*(.013020833333333334+.007120768229166667*t)),n*=t,e[3]=n*(.3645833333333333-.005696614583333333*t),e[4]=n*t*.3076171875,e}function Zt(t,e,n,i){return n*=e,e*=e,i[0]*t-n*(i[1]+e*(i[2]+e*(i[3]+e*i[4])))}function Kt(t,e,n){for(var i=1/(1-e),r=t,s=20;s;--s){var o=Math.sin(r),l=1-e*o*o;if(r-=l=(Zt(r,o,Math.cos(r),n)-t)*(l*Math.sqrt(l))*i,Math.abs(l)<a)return r}return r}var Jt={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=Yt(this.es),this.ml0=Zt(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,n,i,r=t.x,s=t.y,o=z(r-this.long0),l=Math.sin(s),h=Math.cos(s);if(this.es){var u=h*o,c=Math.pow(u,2),d=this.ep2*Math.pow(h,2),f=Math.pow(d,2),p=Math.abs(h)>a?Math.tan(s):0,g=Math.pow(p,2),m=Math.pow(g,2);e=1-this.es*Math.pow(l,2),u/=Math.sqrt(e);var y=Zt(s,l,h,this.en);n=this.a*(this.k0*u*(1+c/6*(1-g+d+c/20*(5-18*g+m+14*d-58*g*d+c/42*(61+179*m-m*g-479*g)))))+this.x0,i=this.a*(this.k0*(y-this.ml0+l*o*u/2*(1+c/12*(5-g+9*d+4*f+c/30*(61+m-58*g+270*d-330*g*d+c/56*(1385+543*m-m*g-3111*g))))))+this.y0}else{var _=h*Math.sin(o);if(Math.abs(Math.abs(_)-1)<a)return 93;if(n=.5*this.a*this.k0*Math.log((1+_)/(1-_))+this.x0,i=h*Math.cos(o)/Math.sqrt(1-Math.pow(_,2)),(_=Math.abs(i))>=1){if(_-1>a)return 93;i=0}else i=Math.acos(i);s<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=n,t.y=i,t},inverse:function(t){var e,n,i,r,s=(t.x-this.x0)*(1/this.a),l=(t.y-this.y0)*(1/this.a);if(this.es)if(n=Kt(e=this.ml0+l/this.k0,this.es,this.en),Math.abs(n)<o){var h=Math.sin(n),u=Math.cos(n),c=Math.abs(u)>a?Math.tan(n):0,d=this.ep2*Math.pow(u,2),f=Math.pow(d,2),p=Math.pow(c,2),g=Math.pow(p,2);e=1-this.es*Math.pow(h,2);var m=s*Math.sqrt(e)/this.k0,y=Math.pow(m,2);i=n-(e*=c)*y/(1-this.es)*.5*(1-y/12*(5+3*p-9*d*p+d-4*f-y/30*(61+90*p-252*d*p+45*g+46*d-y/56*(1385+3633*p+4095*g+1574*g*p)))),r=z(this.long0+m*(1-y/6*(1+2*p+d-y/20*(5+28*p+24*g+8*d*p+6*d-y/42*(61+662*p+1320*g+720*g*p))))/u)}else i=o*B(l),r=0;else{var _=Math.exp(s/this.k0),v=.5*(_-1/_),x=this.lat0+l/this.k0,b=Math.cos(x);e=Math.sqrt((1-Math.pow(b,2))/(1+Math.pow(v,2))),i=Math.asin(e),l<0&&(i=-i),r=0===v&&0===b?0:z(Math.atan2(v,b)+this.long0)}return t.x=r,t.y=i,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]};function Qt(t){var e=Math.exp(t);return e=(e-1/e)/2}function te(t,e){t=Math.abs(t),e=Math.abs(e);var n=Math.max(t,e),i=Math.min(t,e)/(n||1);return n*Math.sqrt(1+Math.pow(i,2))}function ee(t){var e=Math.abs(t);return e=function(t){var e=1+t,n=e-1;return 0===n?t:t*Math.log(e)/n}(e*(1+e/(te(1,e)+1))),t<0?-e:e}function ne(t,e){for(var n,i=2*Math.cos(2*e),r=t.length-1,s=t[r],o=0;--r>=0;)n=i*s-o+t[r],o=s,s=n;return e+n*Math.sin(2*e)}function ie(t,e,n){for(var i,r,s=Math.sin(e),o=Math.cos(e),a=Qt(n),l=function(t){var e=Math.exp(t);return(e+1/e)/2}(n),h=2*o*l,u=-2*s*a,c=t.length-1,d=t[c],f=0,p=0,g=0;--c>=0;)i=p,r=f,d=h*(p=d)-i-u*(f=g)+t[c],g=u*p-r+h*f;return[(h=s*l)*d-(u=o*a)*g,h*g+u*d]}var re={init:function(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw new Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&(Jt.init.apply(this),this.forward=Jt.forward,this.inverse=Jt.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),n=e;this.cgb[0]=e*(2+e*(-2/3+e*(e*(116/45+e*(26/45+e*(-2854/675)))-2))),this.cbg[0]=e*(e*(2/3+e*(4/3+e*(-82/45+e*(32/45+e*(4642/4725)))))-2),n*=e,this.cgb[1]=n*(7/3+e*(e*(-227/45+e*(2704/315+e*(2323/945)))-1.6)),this.cbg[1]=n*(5/3+e*(-16/15+e*(-13/9+e*(904/315+e*(-1522/945))))),n*=e,this.cgb[2]=n*(56/15+e*(-136/35+e*(-1262/105+e*(73814/2835)))),this.cbg[2]=n*(-26/15+e*(34/21+e*(1.6+e*(-12686/2835)))),n*=e,this.cgb[3]=n*(4279/630+e*(-332/35+e*(-399572/14175))),this.cbg[3]=n*(1237/630+e*(e*(-24832/14175)-2.4)),n*=e,this.cgb[4]=n*(4174/315+e*(-144838/6237)),this.cbg[4]=n*(-734/315+e*(109598/31185)),n*=e,this.cgb[5]=n*(601676/22275),this.cbg[5]=n*(444337/155925),n=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+n*(1/4+n*(1/64+n/256))),this.utg[0]=e*(e*(2/3+e*(-37/96+e*(1/360+e*(81/512+e*(-96199/604800)))))-.5),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+e*(7891/37800)))))),this.utg[1]=n*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+e*(1118711/3870720))))),this.gtu[1]=n*(13/48+e*(e*(557/1440+e*(281/630+e*(-1983433/1935360)))-.6)),n*=e,this.utg[2]=n*(-17/480+e*(37/840+e*(209/4480+e*(-5569/90720)))),this.gtu[2]=n*(61/240+e*(-103/140+e*(15061/26880+e*(167603/181440)))),n*=e,this.utg[3]=n*(-4397/161280+e*(11/504+e*(830251/7257600))),this.gtu[3]=n*(49561/161280+e*(-179/168+e*(6601661/7257600))),n*=e,this.utg[4]=n*(-4583/161280+e*(108847/3991680)),this.gtu[4]=n*(34729/80640+e*(-3418889/1995840)),n*=e,this.utg[5]=n*(-20648693/638668800),this.gtu[5]=.6650675310896665*n;var i=ne(this.cbg,this.lat0);this.Zb=-this.Qn*(i+function(t,e){for(var n,i=2*Math.cos(e),r=t.length-1,s=t[r],o=0;--r>=0;)n=i*s-o+t[r],o=s,s=n;return Math.sin(e)*n}(this.gtu,2*i))},forward:function(t){var e=z(t.x-this.long0),n=t.y;n=ne(this.cbg,n);var i=Math.sin(n),r=Math.cos(n),s=Math.sin(e),o=Math.cos(e);n=Math.atan2(i,o*r),e=Math.atan2(s*r,te(i,r*o)),e=ee(Math.tan(e));var a,l,h=ie(this.gtu,2*n,2*e);return n+=h[0],e+=h[1],Math.abs(e)<=2.623395162778?(a=this.a*(this.Qn*e)+this.x0,l=this.a*(this.Qn*n+this.Zb)+this.y0):(a=1/0,l=1/0),t.x=a,t.y=l,t},inverse:function(t){var e,n,i=(t.x-this.x0)*(1/this.a),r=(t.y-this.y0)*(1/this.a);if(r=(r-this.Zb)/this.Qn,i/=this.Qn,Math.abs(i)<=2.623395162778){var s=ie(this.utg,2*r,2*i);r+=s[0],i+=s[1],i=Math.atan(Qt(i));var o=Math.sin(r),a=Math.cos(r),l=Math.sin(i),h=Math.cos(i);r=Math.atan2(o*h,te(l,h*a)),e=z((i=Math.atan2(l,h*a))+this.long0),n=ne(this.cgb,r)}else e=1/0,n=1/0;return t.x=e,t.y=n,t},names:["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","Gauss Kruger","Gauss_Kruger","tmerc"]};var se={init:function(){var t=function(t,e){if(void 0===t){if((t=Math.floor(30*(z(e)+Math.PI)/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}(this.zone,this.long0);if(void 0===t)throw new Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*l,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,re.init.apply(this),this.forward=re.forward,this.inverse=re.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"};function oe(t,e){return Math.pow((1-t)/(1+t),e)}var ae={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+u)/(Math.pow(Math.tan(.5*this.lat0+u),this.C)*oe(this.e*t,this.ratexp))},forward:function(t){var e=t.x,n=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*n+u),this.C)*oe(this.e*Math.sin(n),this.ratexp))-o,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,n=t.y,i=Math.pow(Math.tan(.5*n+u)/this.K,1/this.C),r=20;r>0&&(n=2*Math.atan(i*oe(this.e*Math.sin(t.y),-.5*this.e))-o,!(Math.abs(n-t.y)<1e-14));--r)t.y=n;return r?(t.x=e,t.y=n,t):null},names:["gauss"]};var le={init:function(){ae.init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,n,i,r;return t.x=z(t.x-this.long0),ae.forward.apply(this,[t]),e=Math.sin(t.y),n=Math.cos(t.y),i=Math.cos(t.x),r=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*n*i),t.x=r*n*Math.sin(t.x),t.y=r*(this.cosc0*e-this.sinc0*n*i),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,n,i,r,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=te(t.x,t.y)){var o=2*Math.atan2(s,this.R2);e=Math.sin(o),n=Math.cos(o),r=Math.asin(n*this.sinc0+t.y*e*this.cosc0/s),i=Math.atan2(t.x*e,s*this.cosc0*n-t.y*this.sinc0*e)}else r=this.phic0,i=0;return t.x=i,t.y=r,ae.inverse.apply(this,[t]),t.x=z(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]};var he={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&(this.k0=.5*(1+B(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=a&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=a&&Math.abs(Math.cos(this.lat_ts))>a&&(this.k0=.5*this.cons*G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/q(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=G(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-o,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))},forward:function(t){var e,n,i,r,s,l,h=t.x,u=t.y,c=Math.sin(u),d=Math.cos(u),f=z(h-this.long0);return Math.abs(Math.abs(h-this.long0)-Math.PI)<=a&&Math.abs(u+this.lat0)<=a?(t.x=NaN,t.y=NaN,t):this.sphere?(e=2*this.k0/(1+this.sinlat0*c+this.coslat0*d*Math.cos(f)),t.x=this.a*e*d*Math.sin(f)+this.x0,t.y=this.a*e*(this.coslat0*c-this.sinlat0*d*Math.cos(f))+this.y0,t):(n=2*Math.atan(this.ssfn_(u,c,this.e))-o,r=Math.cos(n),i=Math.sin(n),Math.abs(this.coslat0)<=a?(s=q(this.e,u*this.con,this.con*c),l=2*this.a*this.k0*s/this.cons,t.x=this.x0+l*Math.sin(h-this.long0),t.y=this.y0-this.con*l*Math.cos(h-this.long0),t):(Math.abs(this.sinlat0)<a?(e=2*this.a*this.k0/(1+r*Math.cos(f)),t.y=e*i):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*i+this.cosX0*r*Math.cos(f))),t.y=e*(this.cosX0*i-this.sinX0*r*Math.cos(f))+this.y0),t.x=e*r*Math.sin(f)+this.x0,t))},inverse:function(t){var e,n,i,r,s;t.x-=this.x0,t.y-=this.y0;var l=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var h=2*Math.atan(l/(2*this.a*this.k0));return e=this.long0,n=this.lat0,l<=a?(t.x=e,t.y=n,t):(n=Math.asin(Math.cos(h)*this.sinlat0+t.y*Math.sin(h)*this.coslat0/l),e=Math.abs(this.coslat0)<a?this.lat0>0?z(this.long0+Math.atan2(t.x,-1*t.y)):z(this.long0+Math.atan2(t.x,t.y)):z(this.long0+Math.atan2(t.x*Math.sin(h),l*this.coslat0*Math.cos(h)-t.y*this.sinlat0*Math.sin(h))),t.x=e,t.y=n,t)}if(Math.abs(this.coslat0)<=a){if(l<=a)return n=this.lat0,e=this.long0,t.x=e,t.y=n,t;t.x*=this.con,t.y*=this.con,i=l*this.cons/(2*this.a*this.k0),n=this.con*U(this.e,i),e=this.con*z(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else r=2*Math.atan(l*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,l<=a?s=this.X0:(s=Math.asin(Math.cos(r)*this.sinX0+t.y*Math.sin(r)*this.cosX0/l),e=z(this.long0+Math.atan2(t.x*Math.sin(r),l*this.cosX0*Math.cos(r)-t.y*this.sinX0*Math.sin(r)))),n=-1*U(this.e,Math.tan(.5*(o+s)));return t.x=e,t.y=n,t},names:["stere","Stereographic_South_Pole","Polar Stereographic (variant B)","Polar_Stereographic"],ssfn_:function(t,e,n){return e*=n,Math.tan(.5*(o+t))*Math.pow((1-e)/(1+e),.5*n)}};var ue={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),n=this.a,i=1/this.rf,r=2*i-Math.pow(i,2),s=this.e=Math.sqrt(r);this.R=this.k0*n*Math.sqrt(1-r)/(1-r*Math.pow(e,2)),this.alpha=Math.sqrt(1+r/(1-r)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var o=Math.log(Math.tan(Math.PI/4+this.b0/2)),a=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+s*e)/(1-s*e));this.K=o-this.alpha*a+this.alpha*s/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),n=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),i=-this.alpha*(e+n)+this.K,r=2*(Math.atan(Math.exp(i))-Math.PI/4),s=this.alpha*(t.x-this.lambda0),o=Math.atan(Math.sin(s)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(s))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(s));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*o+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,n=t.y-this.y0,i=e/this.R,r=2*(Math.atan(Math.exp(n/this.R))-Math.PI/4),s=Math.asin(Math.cos(this.b0)*Math.sin(r)+Math.sin(this.b0)*Math.cos(r)*Math.cos(i)),o=Math.atan(Math.sin(i)/(Math.cos(this.b0)*Math.cos(i)-Math.sin(this.b0)*Math.tan(r))),a=this.lambda0+o/this.alpha,l=0,h=s,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+s/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=a,t.y=h,t},names:["somerc"]},ce=1e-7;var de={init:function(){var t,e,n,i,r,s,h,d,f,p,g,m,y,_=0,v=0,x=0,b=0,w=0,A=0,S=0;this.no_off=(y="object"==typeof(m=this).PROJECTION?Object.keys(m.PROJECTION)[0]:m.PROJECTION,"no_uoff"in m||"no_off"in m||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(y)),this.no_rot="no_rot"in this;var E=!1;"alpha"in this&&(E=!0);var T=!1;if("rectified_grid_angle"in this&&(T=!0),E&&(S=this.alpha),T&&(_=this.rectified_grid_angle*l),E||T)v=this.longc;else if(x=this.long1,w=this.lat1,b=this.long2,A=this.lat2,Math.abs(w-A)<=ce||(t=Math.abs(w))<=ce||Math.abs(t-o)<=ce||Math.abs(Math.abs(this.lat0)-o)<=ce||Math.abs(Math.abs(A)-o)<=ce)throw new Error;var C=1-this.es;e=Math.sqrt(C),Math.abs(this.lat0)>a?(d=Math.sin(this.lat0),n=Math.cos(this.lat0),t=1-this.es*d*d,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/C),this.A=this.B*this.k0*e/t,(r=(i=this.B*e/(n*Math.sqrt(t)))*i-1)<=0?r=0:(r=Math.sqrt(r),this.lat0<0&&(r=-r)),this.E=r+=i,this.E*=Math.pow(q(this.e,this.lat0,d),this.B)):(this.B=1/e,this.A=this.k0,this.E=i=r=1),E||T?(E?(g=Math.asin(Math.sin(S)/i),T||(_=S)):(g=_,S=Math.asin(i*Math.sin(g))),this.lam0=v-Math.asin(.5*(r-1/r)*Math.tan(g))/this.B):(s=Math.pow(q(this.e,w,Math.sin(w)),this.B),h=Math.pow(q(this.e,A,Math.sin(A)),this.B),r=this.E/s,f=(h-s)/(h+s),p=((p=this.E*this.E)-h*s)/(p+h*s),(t=x-b)<-Math.pi?b-=c:t>Math.pi&&(b+=c),this.lam0=z(.5*(x+b)-Math.atan(p*Math.tan(.5*this.B*(x-b))/f)/this.B),g=Math.atan(2*Math.sin(this.B*z(x-this.lam0))/(r-1/r)),_=S=Math.asin(i*Math.sin(g))),this.singam=Math.sin(g),this.cosgam=Math.cos(g),this.sinrot=Math.sin(_),this.cosrot=Math.cos(_),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(i*i-1)/Math.cos(S))),this.lat0<0&&(this.u_0=-this.u_0)),r=.5*g,this.v_pole_n=this.ArB*Math.log(Math.tan(u-r)),this.v_pole_s=this.ArB*Math.log(Math.tan(u+r))},forward:function(t){var e,n,i,r,s,l,h,u,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-o)>a){if(e=.5*((s=this.E/Math.pow(q(this.e,t.y,Math.sin(t.y)),this.B))-(l=1/s)),n=.5*(s+l),r=Math.sin(this.B*t.x),i=(e*this.singam-r*this.cosgam)/n,Math.abs(Math.abs(i)-1)<a)throw new Error;u=.5*this.ArB*Math.log((1-i)/(1+i)),l=Math.cos(this.B*t.x),h=Math.abs(l)<ce?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+r*this.singam,l)}else u=t.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*t.y;return this.no_rot?(c.x=h,c.y=u):(h-=this.u_0,c.x=u*this.cosrot+h*this.sinrot,c.y=h*this.cosrot-u*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,n,i,r,s,l,h,u={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(n=t.y,e=t.x):(n=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),r=.5*((i=Math.exp(-this.BrA*n))-1/i),s=.5*(i+1/i),h=((l=Math.sin(this.BrA*e))*this.cosgam+r*this.singam)/s,Math.abs(Math.abs(h)-1)<a)u.x=0,u.y=h<0?-o:o;else{if(u.y=this.E/Math.sqrt((1+h)/(1-h)),u.y=U(this.e,Math.pow(u.y,1/this.B)),u.y===1/0)throw new Error;u.x=-this.rB*Math.atan2(r*this.cosgam-l*this.singam,Math.cos(this.BrA*e))}return u.x+=this.lam0,u},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]};var fe={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<a)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),n=Math.cos(this.lat1),i=G(this.e,e,n),r=q(this.e,this.lat1,e),s=Math.sin(this.lat2),o=Math.cos(this.lat2),l=G(this.e,s,o),h=q(this.e,this.lat2,s),u=q(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>a?this.ns=Math.log(i/l)/Math.log(r/h):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=i/(this.ns*Math.pow(r,this.ns)),this.rh=this.a*this.f0*Math.pow(u,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=a&&(n=B(n)*(o-2e-10));var i,r,s=Math.abs(Math.abs(n)-o);if(s>a)i=q(this.e,n,Math.sin(n)),r=this.a*this.f0*Math.pow(i,this.ns);else{if((s=n*this.ns)<=0)return null;r=0}var l=this.ns*z(e-this.long0);return t.x=this.k0*(r*Math.sin(l))+this.x0,t.y=this.k0*(this.rh-r*Math.cos(l))+this.y0,t},inverse:function(t){var e,n,i,r,s,a=(t.x-this.x0)/this.k0,l=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+l*l),n=1):(e=-Math.sqrt(a*a+l*l),n=-1);var h=0;if(0!==e&&(h=Math.atan2(n*a,n*l)),0!==e||this.ns>0){if(n=1/this.ns,i=Math.pow(e/(this.a*this.f0),n),-9999===(r=U(this.e,i)))return null}else r=-o;return s=z(h/this.ns+this.long0),t.x=s,t.y=r,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]};var pe={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,n,i,r,s,o,a,l=t.x,h=t.y,u=z(l-this.long0);return e=Math.pow((1+this.e*Math.sin(h))/(1-this.e*Math.sin(h)),this.alfa*this.e/2),n=2*(Math.atan(this.k*Math.pow(Math.tan(h/2+this.s45),this.alfa)/e)-this.s45),i=-u*this.alfa,r=Math.asin(Math.cos(this.ad)*Math.sin(n)+Math.sin(this.ad)*Math.cos(n)*Math.cos(i)),s=Math.asin(Math.cos(n)*Math.sin(i)/Math.cos(r)),o=this.n*s,a=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(r/2+this.s45),this.n),t.y=a*Math.cos(o)/1,t.x=a*Math.sin(o)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,n,i,r,s,o,a,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),s=Math.sqrt(t.x*t.x+t.y*t.y),r=Math.atan2(t.y,t.x)/Math.sin(this.s0),i=2*(Math.atan(Math.pow(this.ro0/s,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(i)-Math.sin(this.ad)*Math.cos(i)*Math.cos(r)),n=Math.asin(Math.cos(i)*Math.sin(r)/Math.cos(e)),t.x=this.long0-n/this.alfa,o=e,a=0;var h=0;do{t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(o))/(1-this.e*Math.sin(o)),this.e/2))-this.s45),Math.abs(o-t.y)<1e-10&&(a=1),o=t.y,h+=1}while(0===a&&h<15);return h>=15?null:t},names:["Krovak","krovak"]};function ge(t,e,n,i,r){return t*r-e*Math.sin(2*r)+n*Math.sin(4*r)-i*Math.sin(6*r)}function me(t){return 1-.25*t*(1+t/16*(3+1.25*t))}function ye(t){return.375*t*(1+.25*t*(1+.46875*t))}function _e(t){return.05859375*t*t*(1+.75*t)}function ve(t){return t*t*t*(35/3072)}function xe(t,e,n){var i=e*n;return t/Math.sqrt(1-i*i)}function be(t){return Math.abs(t)<o?t:t-B(t)*Math.PI}function we(t,e,n,i,r){var s,o;s=t/e;for(var a=0;a<15;a++)if(s+=o=(t-(e*s-n*Math.sin(2*s)+i*Math.sin(4*s)-r*Math.sin(6*s)))/(e-2*n*Math.cos(2*s)+4*i*Math.cos(4*s)-6*r*Math.cos(6*s)),Math.abs(o)<=1e-10)return s;return NaN}var Ae={init:function(){this.sphere||(this.e0=me(this.es),this.e1=ye(this.es),this.e2=_e(this.es),this.e3=ve(this.es),this.ml0=this.a*ge(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,n,i=t.x,r=t.y;if(i=z(i-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(r)*Math.sin(i)),n=this.a*(Math.atan2(Math.tan(r),Math.cos(i))-this.lat0);else{var s=Math.sin(r),o=Math.cos(r),a=xe(this.a,this.e,s),l=Math.tan(r)*Math.tan(r),h=i*Math.cos(r),u=h*h,c=this.es*o*o/(1-this.es);e=a*h*(1-u*l*(1/6-(8-l+8*c)*u/120)),n=this.a*ge(this.e0,this.e1,this.e2,this.e3,r)-this.ml0+a*s/o*u*(.5+(5-l+6*c)*u/24)}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i=t.x/this.a,r=t.y/this.a;if(this.sphere){var s=r+this.lat0;e=Math.asin(Math.sin(s)*Math.cos(i)),n=Math.atan2(Math.tan(i),Math.cos(s))}else{var l=we(this.ml0/this.a+r,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(l)-o)<=a)return t.x=this.long0,t.y=o,r<0&&(t.y*=-1),t;var h=xe(this.a,this.e,Math.sin(l)),u=h*h*h/this.a/this.a*(1-this.es),c=Math.pow(Math.tan(l),2),d=i*this.a/h,f=d*d;e=l-h*Math.tan(l)/u*d*d*(.5-(1+3*c)*d*d/24),n=d*(1-f*(c/3+(1+3*c)*c*f/15))/Math.cos(l)}return t.x=z(n+this.long0),t.y=be(e),t},names:["Cassini","Cassini_Soldner","cass"]};function Se(t,e){var n;return t>1e-7?(1-t*t)*(e/(1-(n=t*e)*n)-.5/t*Math.log((1-n)/(1+n))):2*e}var Ee=.3333333333333333,Te=.17222222222222222,Ce=.10257936507936508,Me=.06388888888888888,Le=.0664021164021164,Pe=.016415012942191543;var Re={init:function(){var t,e=Math.abs(this.lat0);if(Math.abs(e-o)<a?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(e)<a?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=Se(this.e,1),this.mmf=.5/(1-this.es),this.apa=function(t){var e,n=[];return n[0]=t*Ee,e=t*t,n[0]+=e*Te,n[1]=e*Me,e*=t,n[0]+=e*Ce,n[1]+=e*Le,n[2]=e*Pe,n}(this.es),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),t=Math.sin(this.lat0),this.sinb1=Se(this.e,t)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*t*t)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))},forward:function(t){var e,n,i,r,s,l,h,c,d,f,p=t.x,g=t.y;if(p=z(p-this.long0),this.sphere){if(s=Math.sin(g),f=Math.cos(g),i=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((n=this.mode===this.EQUIT?1+f*i:1+this.sinph0*s+this.cosph0*f*i)<=a)return null;e=(n=Math.sqrt(2/n))*f*Math.sin(p),n*=this.mode===this.EQUIT?s:this.cosph0*s-this.sinph0*f*i}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(i=-i),Math.abs(g+this.lat0)<a)return null;n=u-.5*g,e=(n=2*(this.mode===this.S_POLE?Math.cos(n):Math.sin(n)))*Math.sin(p),n*=i}}else{switch(h=0,c=0,d=0,i=Math.cos(p),r=Math.sin(p),s=Math.sin(g),l=Se(this.e,s),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(h=l/this.qp,c=Math.sqrt(1-h*h)),this.mode){case this.OBLIQ:d=1+this.sinb1*h+this.cosb1*c*i;break;case this.EQUIT:d=1+c*i;break;case this.N_POLE:d=o+g,l=this.qp-l;break;case this.S_POLE:d=g-o,l=this.qp+l}if(Math.abs(d)<a)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:d=Math.sqrt(2/d),n=this.mode===this.OBLIQ?this.ymf*d*(this.cosb1*h-this.sinb1*c*i):(d=Math.sqrt(2/(1+c*i)))*h*this.ymf,e=this.xmf*d*c*r;break;case this.N_POLE:case this.S_POLE:l>=0?(e=(d=Math.sqrt(l))*r,n=i*(this.mode===this.S_POLE?d:-d)):e=n=0}}return t.x=this.a*e+this.x0,t.y=this.a*n+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,n,i,r,s,l,h,u,c,d,f=t.x/this.a,p=t.y/this.a;if(this.sphere){var g,m=0,y=0;if((n=.5*(g=Math.sqrt(f*f+p*p)))>1)return null;switch(n=2*Math.asin(n),this.mode!==this.OBLIQ&&this.mode!==this.EQUIT||(y=Math.sin(n),m=Math.cos(n)),this.mode){case this.EQUIT:n=Math.abs(g)<=a?0:Math.asin(p*y/g),f*=y,p=m*g;break;case this.OBLIQ:n=Math.abs(g)<=a?this.lat0:Math.asin(m*this.sinph0+p*y*this.cosph0/g),f*=y*this.cosph0,p=(m-Math.sin(n)*this.sinph0)*g;break;case this.N_POLE:p=-p,n=o-n;break;case this.S_POLE:n-=o}e=0!==p||this.mode!==this.EQUIT&&this.mode!==this.OBLIQ?Math.atan2(f,p):0}else{if(h=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(f/=this.dd,p*=this.dd,(l=Math.sqrt(f*f+p*p))<a)return t.x=this.long0,t.y=this.lat0,t;r=2*Math.asin(.5*l/this.rq),i=Math.cos(r),f*=r=Math.sin(r),this.mode===this.OBLIQ?(h=i*this.sinb1+p*r*this.cosb1/l,s=this.qp*h,p=l*this.cosb1*i-p*this.sinb1*r):(h=p*r/l,s=this.qp*h,p=l*i)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(p=-p),!(s=f*f+p*p))return t.x=this.long0,t.y=this.lat0,t;h=1-s/this.qp,this.mode===this.S_POLE&&(h=-h)}e=Math.atan2(f,p),u=Math.asin(h),c=this.apa,d=u+u,n=u+c[0]*Math.sin(d)+c[1]*Math.sin(d+d)+c[2]*Math.sin(d+d+d)}return t.x=z(this.long0+e),t.y=n,t},names:["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4};function Ie(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}var Ne={init:function(){Math.abs(this.lat1+this.lat2)<a||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=G(this.e3,this.sin_po,this.cos_po),this.qs1=Se(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=G(this.e3,this.sin_po,this.cos_po),this.qs2=Se(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=Se(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>a?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)},forward:function(t){var e=t.x,n=t.y;this.sin_phi=Math.sin(n),this.cos_phi=Math.cos(n);var i=Se(this.e3,this.sin_phi),r=this.a*Math.sqrt(this.c-this.ns0*i)/this.ns0,s=this.ns0*z(e-this.long0),o=r*Math.sin(s)+this.x0,a=this.rh-r*Math.cos(s)+this.y0;return t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r,s,o;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),i=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),i=-1),r=0,0!==e&&(r=Math.atan2(i*t.x,i*t.y)),i=e*this.ns0/this.a,this.sphere?o=Math.asin((this.c-i*i)/(2*this.ns0)):(n=(this.c-i*i)/this.ns0,o=this.phi1z(this.e3,n)),s=z(r/this.ns0+this.long0),t.x=s,t.y=o,t},names:["Albers_Conic_Equal_Area","Albers","aea"],phi1z:function(t,e){var n,i,r,s,o=Ie(.5*e);if(t<a)return o;for(var l=t*t,h=1;h<=25;h++)if(o+=s=.5*(r=1-(i=t*(n=Math.sin(o)))*i)*r/Math.cos(o)*(e/(1-l)-n/r+.5/t*Math.log((1-i)/(1+i))),Math.abs(s)<=1e-7)return o;return null}};var Fe={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,n,i,r,s,o,l,h=t.x,u=t.y;return i=z(h-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),(s=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(s)<=a?(o=this.x0+1*this.a*n*Math.sin(i)/s,l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)/s):(o=this.x0+this.infinity_dist*n*Math.sin(i),l=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*n*r)),t.x=o,t.y=l,t},inverse:function(t){var e,n,i,r,s,o;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(r=Math.atan2(e,this.rc),n=Math.sin(r),o=Ie((i=Math.cos(r))*this.sin_p14+t.y*n*this.cos_p14/e),s=Math.atan2(t.x*n,e*this.cos_p14*i-t.y*this.sin_p14*n),s=z(this.long0+s)):(o=this.phic0,s=0),t.x=s,t.y=o,t},names:["gnom"]};var ke={init:function(){this.sphere||(this.k0=G(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,n,i=t.x,r=t.y,s=z(i-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),n=this.y0+this.a*Math.sin(r)/Math.cos(this.lat_ts);else{var o=Se(this.e,Math.sin(r));e=this.x0+this.a*this.k0*s,n=this.y0+this.a*o*.5/this.k0}return t.x=e,t.y=n,t},inverse:function(t){var e,n;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=z(this.long0+t.x/this.a/Math.cos(this.lat_ts)),n=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(n=function(t,e){var n=1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t));if(Math.abs(Math.abs(e)-n)<1e-6)return e<0?-1*o:o;for(var i,r,s,a,l=Math.asin(.5*e),h=0;h<30;h++)if(r=Math.sin(l),s=Math.cos(l),a=t*r,l+=i=Math.pow(1-a*a,2)/(2*s)*(e/(1-t*t)-r/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),Math.abs(i)<=1e-10)return l;return NaN}(this.e,2*t.y*this.k0/this.a),e=z(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=n,t},names:["cea"]};var De={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,n=t.y,i=z(e-this.long0),r=be(n-this.lat0);return t.x=this.x0+this.a*i*this.rc,t.y=this.y0+this.a*r,t},inverse:function(t){var e=t.x,n=t.y;return t.x=z(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=be(this.lat0+(n-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]};var Oe={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=me(this.es),this.e1=ye(this.es),this.e2=_e(this.es),this.e3=ve(this.es),this.ml0=this.a*ge(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,n,i,r=t.x,s=t.y,o=z(r-this.long0);if(i=o*Math.sin(s),this.sphere)Math.abs(s)<=a?(e=this.a*o,n=-1*this.a*this.lat0):(e=this.a*Math.sin(i)/Math.tan(s),n=this.a*(be(s-this.lat0)+(1-Math.cos(i))/Math.tan(s)));else if(Math.abs(s)<=a)e=this.a*o,n=-1*this.ml0;else{var l=xe(this.a,this.e,Math.sin(s))/Math.tan(s);e=l*Math.sin(i),n=this.a*ge(this.e0,this.e1,this.e2,this.e3,s)-this.ml0+l*(1-Math.cos(i))}return t.x=e+this.x0,t.y=n+this.y0,t},inverse:function(t){var e,n,i,r,s,o,l,h,u;if(i=t.x-this.x0,r=t.y-this.y0,this.sphere)if(Math.abs(r+this.a*this.lat0)<=a)e=z(i/this.a+this.long0),n=0;else{var c;for(o=this.lat0+r/this.a,l=i*i/this.a/this.a+o*o,h=o,s=20;s;--s)if(h+=u=-1*(o*(h*(c=Math.tan(h))+1)-h-.5*(h*h+l)*c)/((h-o)/c-1),Math.abs(u)<=a){n=h;break}e=z(this.long0+Math.asin(i*Math.tan(h)/this.a)/Math.sin(n))}else if(Math.abs(r+this.ml0)<=a)n=0,e=z(this.long0+i/this.a);else{var d,f,p,g,m;for(o=(this.ml0+r)/this.a,l=i*i/this.a/this.a+o*o,h=o,s=20;s;--s)if(m=this.e*Math.sin(h),d=Math.sqrt(1-m*m)*Math.tan(h),f=this.a*ge(this.e0,this.e1,this.e2,this.e3,h),p=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),h-=u=(o*(d*(g=f/this.a)+1)-g-.5*d*(g*g+l))/(this.es*Math.sin(2*h)*(g*g+l-2*o*g)/(4*d)+(o-g)*(d*p-2/Math.sin(2*h))-p),Math.abs(u)<=a){n=h;break}d=Math.sqrt(1-this.es*Math.pow(Math.sin(n),2))*Math.tan(n),e=z(this.long0+Math.asin(i*d/this.a)/Math.sin(n))}return t.x=e,t.y=n,t},names:["Polyconic","poly"]};var je={init:function(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-34e-5,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013},forward:function(t){var e,n=t.x,i=t.y-this.lat0,r=n-this.long0,o=i/s*1e-5,a=r,l=1,h=0;for(e=1;e<=10;e++)l*=o,h+=this.A[e]*l;var u,c=h,d=a,f=1,p=0,g=0,m=0;for(e=1;e<=6;e++)u=p*c+f*d,f=f*c-p*d,p=u,g=g+this.B_re[e]*f-this.B_im[e]*p,m=m+this.B_im[e]*f+this.B_re[e]*p;return t.x=m*this.a+this.x0,t.y=g*this.a+this.y0,t},inverse:function(t){var e,n,i=t.x,r=t.y,o=i-this.x0,a=(r-this.y0)/this.a,l=o/this.a,h=1,u=0,c=0,d=0;for(e=1;e<=6;e++)n=u*a+h*l,h=h*a-u*l,u=n,c=c+this.C_re[e]*h-this.C_im[e]*u,d=d+this.C_im[e]*h+this.C_re[e]*u;for(var f=0;f<this.iterations;f++){var p,g=c,m=d,y=a,_=l;for(e=2;e<=6;e++)p=m*c+g*d,g=g*c-m*d,m=p,y+=(e-1)*(this.B_re[e]*g-this.B_im[e]*m),_+=(e-1)*(this.B_im[e]*g+this.B_re[e]*m);g=1,m=0;var v=this.B_re[1],x=this.B_im[1];for(e=2;e<=6;e++)p=m*c+g*d,g=g*c-m*d,m=p,v+=e*(this.B_re[e]*g-this.B_im[e]*m),x+=e*(this.B_im[e]*g+this.B_re[e]*m);var b=v*v+x*x;c=(y*v+_*x)/b,d=(_*v-y*x)/b}var w=c,A=d,S=1,E=0;for(e=1;e<=9;e++)S*=w,E+=this.D[e]*S;var T=this.lat0+E*s*1e5,C=this.long0+A;return t.x=C,t.y=T,t},names:["New_Zealand_Map_Grid","nzmg"]};var Ge={init:function(){},forward:function(t){var e=t.x,n=t.y,i=z(e-this.long0),r=this.x0+this.a*i,s=this.y0+this.a*Math.log(Math.tan(Math.PI/4+n/2.5))*1.25;return t.x=r,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=z(this.long0+t.x/this.a),n=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=n,t},names:["Miller_Cylindrical","mill"]};var Be={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=Yt(this.es)},forward:function(t){var e,n,i=t.x,r=t.y;if(i=z(i-this.long0),this.sphere){if(this.m)for(var s=this.n*Math.sin(r),o=20;o;--o){var l=(this.m*r+Math.sin(r)-s)/(this.m+Math.cos(r));if(r-=l,Math.abs(l)<a)break}else r=1!==this.n?Math.asin(this.n*Math.sin(r)):r;e=this.a*this.C_x*i*(this.m+Math.cos(r)),n=this.a*this.C_y*r}else{var h=Math.sin(r),u=Math.cos(r);n=this.a*Zt(r,h,u,this.en),e=this.a*i*u/Math.sqrt(1-this.es*h*h)}return t.x=e,t.y=n,t},inverse:function(t){var e,n,i;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=Ie((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=Ie(Math.sin(e)/this.n)),n=z(n+this.long0),e=be(e)):(e=Kt(t.y/this.a,this.es,this.en),(i=Math.abs(e))<o?(i=Math.sin(e),n=z(this.long0+t.x*Math.sqrt(1-this.es*i*i)/(this.a*Math.cos(e)))):i-a<o&&(n=this.long0)),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]};var ze={init:function(){},forward:function(t){for(var e=t.x,n=t.y,i=z(e-this.long0),r=n,s=Math.PI*Math.sin(n);;){var o=-(r+Math.sin(r)-s)/(1+Math.cos(r));if(r+=o,Math.abs(o)<a)break}r/=2,Math.PI/2-Math.abs(n)<a&&(i=0);var l=.900316316158*this.a*i*Math.cos(r)+this.x0,h=1.4142135623731*this.a*Math.sin(r)+this.y0;return t.x=l,t.y=h,t},inverse:function(t){var e,n;t.x-=this.x0,t.y-=this.y0,n=t.y/(1.4142135623731*this.a),Math.abs(n)>.999999999999&&(n=.999999999999),e=Math.asin(n);var i=z(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));i<-Math.PI&&(i=-Math.PI),i>Math.PI&&(i=Math.PI),n=(2*e+Math.sin(2*e))/Math.PI,Math.abs(n)>1&&(n=1);var r=Math.asin(n);return t.x=i,t.y=r,t},names:["Mollweide","moll"]};var qe={init:function(){Math.abs(this.lat1+this.lat2)<a||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=me(this.es),this.e1=ye(this.es),this.e2=_e(this.es),this.e3=ve(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=G(this.e,this.sinphi,this.cosphi),this.ml1=ge(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<a?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=G(this.e,this.sinphi,this.cosphi),this.ml2=ge(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=ge(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,n=t.x,i=t.y;if(this.sphere)e=this.a*(this.g-i);else{var r=ge(this.e0,this.e1,this.e2,this.e3,i);e=this.a*(this.g-r)}var s=this.ns*z(n-this.long0),o=this.x0+e*Math.sin(s),a=this.y0+this.rh-e*Math.cos(s);return t.x=o,t.y=a,t},inverse:function(t){var e,n,i,r;t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(n=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(n=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var s=0;return 0!==n&&(s=Math.atan2(e*t.x,e*t.y)),this.sphere?(r=z(this.long0+s/this.ns),i=be(this.g-n/this.a),t.x=r,t.y=i,t):(i=we(this.g-n/this.a,this.e0,this.e1,this.e2,this.e3),r=z(this.long0+s/this.ns),t.x=r,t.y=i,t)},names:["Equidistant_Conic","eqdc"]};var Ue={init:function(){this.R=this.a},forward:function(t){var e,n,i=t.x,r=t.y,s=z(i-this.long0);Math.abs(r)<=a&&(e=this.x0+this.R*s,n=this.y0);var l=Ie(2*Math.abs(r/Math.PI));(Math.abs(s)<=a||Math.abs(Math.abs(r)-o)<=a)&&(e=this.x0,n=r>=0?this.y0+Math.PI*this.R*Math.tan(.5*l):this.y0+Math.PI*this.R*-Math.tan(.5*l));var h=.5*Math.abs(Math.PI/s-s/Math.PI),u=h*h,c=Math.sin(l),d=Math.cos(l),f=d/(c+d-1),p=f*f,g=f*(2/c-1),m=g*g,y=Math.PI*this.R*(h*(f-m)+Math.sqrt(u*(f-m)*(f-m)-(m+u)*(p-m)))/(m+u);s<0&&(y=-y),e=this.x0+y;var _=u+f;return y=Math.PI*this.R*(g*_-h*Math.sqrt((m+u)*(u+1)-_*_))/(m+u),n=r>=0?this.y0+y:this.y0-y,t.x=e,t.y=n,t},inverse:function(t){var e,n,i,r,s,o,l,h,u,c,d,f;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,s=(i=t.x/d)*i+(r=t.y/d)*r,d=3*(r*r/(h=-2*(o=-Math.abs(r)*(1+s))+1+2*r*r+s*s)+(2*(l=o-2*r*r+i*i)*l*l/h/h/h-9*o*l/h/h)/27)/(u=(o-l*l/3/h)/h)/(c=2*Math.sqrt(-u/3)),Math.abs(d)>1&&(d=d>=0?1:-1),f=Math.acos(d)/3,n=t.y>=0?(-c*Math.cos(f+Math.PI/3)-l/3/h)*Math.PI:-(-c*Math.cos(f+Math.PI/3)-l/3/h)*Math.PI,e=Math.abs(i)<a?this.long0:z(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(i*i-r*r)+s*s))/2/i),t.x=e,t.y=n,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]};var We={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,s,l,h,u,c,d,f,p,g,m,y,_,v,x,b,w,A,S,E=t.x,T=t.y,C=Math.sin(t.y),M=Math.cos(t.y),L=z(E-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=a?(t.x=this.x0+this.a*(o-T)*Math.sin(L),t.y=this.y0-this.a*(o-T)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=a?(t.x=this.x0+this.a*(o+T)*Math.sin(L),t.y=this.y0+this.a*(o+T)*Math.cos(L),t):(x=this.sin_p12*C+this.cos_p12*M*Math.cos(L),v=(_=Math.acos(x))?_/Math.sin(_):1,t.x=this.x0+this.a*v*M*Math.sin(L),t.y=this.y0+this.a*v*(this.cos_p12*C-this.sin_p12*M*Math.cos(L)),t):(e=me(this.es),n=ye(this.es),i=_e(this.es),r=ve(this.es),Math.abs(this.sin_p12-1)<=a?(s=this.a*ge(e,n,i,r,o),l=this.a*ge(e,n,i,r,T),t.x=this.x0+(s-l)*Math.sin(L),t.y=this.y0-(s-l)*Math.cos(L),t):Math.abs(this.sin_p12+1)<=a?(s=this.a*ge(e,n,i,r,o),l=this.a*ge(e,n,i,r,T),t.x=this.x0+(s+l)*Math.sin(L),t.y=this.y0+(s+l)*Math.cos(L),t):(h=C/M,u=xe(this.a,this.e,this.sin_p12),c=xe(this.a,this.e,C),d=Math.atan((1-this.es)*h+this.es*u*this.sin_p12/(c*M)),b=0===(f=Math.atan2(Math.sin(L),this.cos_p12*Math.tan(d)-this.sin_p12*Math.cos(L)))?Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.abs(Math.abs(f)-Math.PI)<=a?-Math.asin(this.cos_p12*Math.sin(d)-this.sin_p12*Math.cos(d)):Math.asin(Math.sin(L)*Math.cos(d)/Math.sin(f)),p=this.e*this.sin_p12/Math.sqrt(1-this.es),_=u*b*(1-(w=b*b)*(y=(g=this.e*this.cos_p12*Math.cos(f)/Math.sqrt(1-this.es))*g)*(1-y)/6+(A=w*b)/8*(m=p*g)*(1-2*y)+(S=A*b)/120*(y*(4-7*y)-3*p*p*(1-7*y))-S*b/48*m),t.x=this.x0+_*Math.sin(f),t.y=this.y0+_*Math.cos(f),t))},inverse:function(t){var e,n,i,r,s,l,h,u,c,d,f,p,g,m,y,_,v,x,b,w,A,S,E;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*o*this.a)return;return n=e/this.a,i=Math.sin(n),r=Math.cos(n),s=this.long0,Math.abs(e)<=a?l=this.lat0:(l=Ie(r*this.sin_p12+t.y*i*this.cos_p12/e),h=Math.abs(this.lat0)-o,s=Math.abs(h)<=a?this.lat0>=0?z(this.long0+Math.atan2(t.x,-t.y)):z(this.long0-Math.atan2(-t.x,t.y)):z(this.long0+Math.atan2(t.x*i,e*this.cos_p12*r-t.y*this.sin_p12*i))),t.x=s,t.y=l,t}return u=me(this.es),c=ye(this.es),d=_e(this.es),f=ve(this.es),Math.abs(this.sin_p12-1)<=a?(l=we(((p=this.a*ge(u,c,d,f,o))-(e=Math.sqrt(t.x*t.x+t.y*t.y)))/this.a,u,c,d,f),s=z(this.long0+Math.atan2(t.x,-1*t.y)),t.x=s,t.y=l,t):Math.abs(this.sin_p12+1)<=a?(p=this.a*ge(u,c,d,f,o),l=we(((e=Math.sqrt(t.x*t.x+t.y*t.y))-p)/this.a,u,c,d,f),s=z(this.long0+Math.atan2(t.x,t.y)),t.x=s,t.y=l,t):(e=Math.sqrt(t.x*t.x+t.y*t.y),y=Math.atan2(t.x,t.y),g=xe(this.a,this.e,this.sin_p12),_=Math.cos(y),x=-(v=this.e*this.cos_p12*_)*v/(1-this.es),b=3*this.es*(1-x)*this.sin_p12*this.cos_p12*_/(1-this.es),S=1-x*(A=(w=e/g)-x*(1+x)*Math.pow(w,3)/6-b*(1+3*x)*Math.pow(w,4)/24)*A/2-w*A*A*A/6,m=Math.asin(this.sin_p12*Math.cos(A)+this.cos_p12*Math.sin(A)*_),s=z(this.long0+Math.asin(Math.sin(y)*Math.sin(A)/Math.cos(m))),E=Math.sin(m),l=Math.atan2((E-this.es*S*this.sin_p12)*Math.tan(m),E*(1-this.es)),t.x=s,t.y=l,t)},names:["Azimuthal_Equidistant","aeqd"]};var $e={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,n,i,r,s,o,l,h=t.x,u=t.y;return i=z(h-this.long0),e=Math.sin(u),n=Math.cos(u),r=Math.cos(i),((s=this.sin_p14*e+this.cos_p14*n*r)>0||Math.abs(s)<=a)&&(o=1*this.a*n*Math.sin(i),l=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*n*r)),t.x=o,t.y=l,t},inverse:function(t){var e,n,i,r,s,l,h;return t.x-=this.x0,t.y-=this.y0,n=Ie((e=Math.sqrt(t.x*t.x+t.y*t.y))/this.a),i=Math.sin(n),r=Math.cos(n),l=this.long0,Math.abs(e)<=a?(h=this.lat0,t.x=l,t.y=h,t):(h=Ie(r*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.abs(this.lat0)-o,Math.abs(s)<=a?(l=this.lat0>=0?z(this.long0+Math.atan2(t.x,-t.y)):z(this.long0-Math.atan2(-t.x,t.y)),t.x=l,t.y=h,t):(l=z(this.long0+Math.atan2(t.x*i,e*this.cos_p14*r-t.y*this.sin_p14*i)),t.x=l,t.y=h,t))},names:["ortho"]},Ve=1,Xe=2,He=3,Ye=4,Ze=5,Ke=6,Je=1,Qe=2,tn=3,en=4;function nn(t,e,n,i){var r;return t<a?(i.value=Je,r=0):(r=Math.atan2(e,n),Math.abs(r)<=u?i.value=Je:r>u&&r<=o+u?(i.value=Qe,r-=o):r>o+u||r<=-(o+u)?(i.value=tn,r=r>=0?r-d:r+d):(i.value=en,r+=o)),r}function rn(t,e){var n=t+e;return n<-d?n+=c:n>+d&&(n-=c),n}var sn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=o-u/2?this.face=Ze:this.lat0<=-(o-u/2)?this.face=Ke:Math.abs(this.long0)<=u?this.face=Ve:Math.abs(this.long0)<=o+u?this.face=this.long0>0?Xe:Ye:this.face=He,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,n,i,r,s,a,l={x:0,y:0},h={value:0};if(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,n=t.x,this.face===Ze)r=o-e,n>=u&&n<=o+u?(h.value=Je,i=n-o):n>o+u||n<=-(o+u)?(h.value=Qe,i=n>0?n-d:n+d):n>-(o+u)&&n<=-u?(h.value=tn,i=n+o):(h.value=en,i=n);else if(this.face===Ke)r=o+e,n>=u&&n<=o+u?(h.value=Je,i=-n+o):n<u&&n>=-u?(h.value=Qe,i=-n):n<-u&&n>=-(o+u)?(h.value=tn,i=-n-o):(h.value=en,i=n>0?-n+d:-n-d);else{var c,f,p,g,m,y;this.face===Xe?n=rn(n,+o):this.face===He?n=rn(n,+d):this.face===Ye&&(n=rn(n,-o)),g=Math.sin(e),m=Math.cos(e),y=Math.sin(n),c=m*Math.cos(n),f=m*y,p=g,this.face===Ve?i=nn(r=Math.acos(c),p,f,h):this.face===Xe?i=nn(r=Math.acos(f),p,-c,h):this.face===He?i=nn(r=Math.acos(-c),p,-f,h):this.face===Ye?i=nn(r=Math.acos(-f),p,c,h):(r=i=0,h.value=Je)}return a=Math.atan(12/d*(i+Math.acos(Math.sin(i)*Math.cos(u))-o)),s=Math.sqrt((1-Math.cos(r))/(Math.cos(a)*Math.cos(a))/(1-Math.cos(Math.atan(1/Math.cos(i))))),h.value===Qe?a+=o:h.value===tn?a+=d:h.value===en&&(a+=1.5*d),l.x=s*Math.cos(a),l.y=s*Math.sin(a),l.x=l.x*this.a+this.x0,l.y=l.y*this.a+this.y0,t.x=l.x,t.y=l.y,t},inverse:function(t){var e,n,i,r,s,a,l,h,u,c,f,p,g={lam:0,phi:0},m={value:0};if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,n=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?m.value=Je:t.y>=0&&t.y>=Math.abs(t.x)?(m.value=Qe,e-=o):t.x<0&&-t.x>=Math.abs(t.y)?(m.value=tn,e=e<0?e+d:e-d):(m.value=en,e+=o),u=d/12*Math.tan(e),s=Math.sin(u)/(Math.cos(u)-1/Math.sqrt(2)),a=Math.atan(s),(l=1-(i=Math.cos(e))*i*(r=Math.tan(n))*r*(1-Math.cos(Math.atan(1/Math.cos(a)))))<-1?l=-1:l>1&&(l=1),this.face===Ze)h=Math.acos(l),g.phi=o-h,m.value===Je?g.lam=a+o:m.value===Qe?g.lam=a<0?a+d:a-d:m.value===tn?g.lam=a-o:g.lam=a;else if(this.face===Ke)h=Math.acos(l),g.phi=h-o,m.value===Je?g.lam=-a+o:m.value===Qe?g.lam=-a:m.value===tn?g.lam=-a-o:g.lam=a<0?-a-d:-a+d;else{var y,_,v;u=(y=l)*y,_=(u+=(v=u>=1?0:Math.sqrt(1-u)*Math.sin(a))*v)>=1?0:Math.sqrt(1-u),m.value===Qe?(u=_,_=-v,v=u):m.value===tn?(_=-_,v=-v):m.value===en&&(u=_,_=v,v=-u),this.face===Xe?(u=y,y=-_,_=u):this.face===He?(y=-y,_=-_):this.face===Ye&&(u=y,y=_,_=-u),g.phi=Math.acos(-v)-o,g.lam=Math.atan2(_,y),this.face===Xe?g.lam=rn(g.lam,-o):this.face===He?g.lam=rn(g.lam,-d):this.face===Ye&&(g.lam=rn(g.lam,+o))}return 0!==this.es&&(c=g.phi<0?1:0,f=Math.tan(g.phi),p=this.b/Math.sqrt(f*f+this.one_minus_f_squared),g.phi=Math.atan(Math.sqrt(this.a*this.a-p*p)/(this.one_minus_f*p)),c&&(g.phi=-g.phi)),g.lam+=this.long0,t.x=g.lam,t.y=g.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]},on=[[1,22199e-21,-715515e-10,31103e-10],[.9986,-482243e-9,-24897e-9,-13309e-10],[.9954,-83103e-8,-448605e-10,-9.86701e-7],[.99,-.00135364,-59661e-9,36777e-10],[.9822,-.00167442,-449547e-11,-572411e-11],[.973,-.00214868,-903571e-10,1.8736e-8],[.96,-.00305085,-900761e-10,164917e-11],[.9427,-.00382792,-653386e-10,-26154e-10],[.9216,-.00467746,-10457e-8,481243e-11],[.8962,-.00536223,-323831e-10,-543432e-11],[.8679,-.00609363,-113898e-9,332484e-11],[.835,-.00698325,-640253e-10,9.34959e-7],[.7986,-.00755338,-500009e-10,9.35324e-7],[.7597,-.00798324,-35971e-9,-227626e-11],[.7186,-.00851367,-701149e-10,-86303e-10],[.6732,-.00986209,-199569e-9,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],an=[[-520417e-23,.0124,121431e-23,-845284e-16],[.062,.0124,-1.26793e-9,4.22642e-10],[.124,.0124,5.07171e-9,-1.60604e-9],[.186,.0123999,-1.90189e-8,6.00152e-9],[.248,.0124002,7.10039e-8,-2.24e-8],[.31,.0123992,-2.64997e-7,8.35986e-8],[.372,.0124029,9.88983e-7,-3.11994e-7],[.434,.0123893,-369093e-11,-4.35621e-7],[.4958,.0123198,-102252e-10,-3.45523e-7],[.5571,.0121916,-154081e-10,-5.82288e-7],[.6176,.0119938,-241424e-10,-5.25327e-7],[.6769,.011713,-320223e-10,-5.16405e-7],[.7346,.0113541,-397684e-10,-6.09052e-7],[.7903,.0109107,-489042e-10,-104739e-11],[.8435,.0103431,-64615e-9,-1.40374e-9],[.8936,.00969686,-64636e-9,-8547e-9],[.9394,.00840947,-192841e-9,-42106e-10],[.9761,.00616527,-256e-6,-42106e-10],[1,.00328947,-319159e-9,-42106e-10]],ln=.8487,hn=1.3523,un=h/5,cn=1/un,dn=18,fn=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))};var pn={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=z(t.x-this.long0),n=Math.abs(t.y),i=Math.floor(n*un);i<0?i=0:i>=dn&&(i=17);var r={x:fn(on[i],n=h*(n-cn*i))*e,y:fn(an[i],n)};return t.y<0&&(r.y=-r.y),r.x=r.x*this.a*ln+this.x0,r.y=r.y*this.a*hn+this.y0,r},inverse:function(t){var e={x:(t.x-this.x0)/(this.a*ln),y:Math.abs(t.y-this.y0)/(this.a*hn)};if(e.y>=1)e.x/=on[18][0],e.y=t.y<0?-o:o;else{var n=Math.floor(e.y*dn);for(n<0?n=0:n>=dn&&(n=17);;)if(an[n][0]>e.y)--n;else{if(!(an[n+1][0]<=e.y))break;++n}var i=an[n],r=5*(e.y-i[0])/(an[n+1][0]-i[0]);r=function(t,e,n,i){for(var r=e;i;--i){var s=t(r);if(r-=s,Math.abs(s)<n)break}return r}((function(t){return(fn(i,t)-e.y)/function(t,e){return t[1]+e*(2*t[2]+3*e*t[3])}(i,t)}),r,a,100),e.x/=fn(on[n],r),e.y=(5*n+r)*l,t.y<0&&(e.y=-e.y)}return e.x=z(e.x+this.long0),e},names:["Robinson","robin"]};var gn={init:function(){this.name="geocent"},forward:function(t){return dt(t,this.es,this.a)},inverse:function(t){return ft(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]},mn=0,yn=1,_n=2,vn=3,xn={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}};var bn={init:function(){if(Object.keys(xn).forEach(function(t){if(void 0===this[t])this[t]=xn[t].def;else{if(xn[t].num&&isNaN(this[t]))throw new Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);xn[t].num&&(this[t]=parseFloat(this[t]))}xn[t].degrees&&(this[t]=this[t]*l)}.bind(this)),Math.abs(Math.abs(this.lat0)-o)<a?this.mode=this.lat0<0?yn:mn:Math.abs(this.lat0)<a?this.mode=_n:(this.mode=vn,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw new Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,n,i,r,s=Math.sin(t.y),o=Math.cos(t.y),a=Math.cos(t.x);switch(this.mode){case vn:n=this.sinph0*s+this.cosph0*o*a;break;case _n:n=o*a;break;case yn:n=-s;break;case mn:n=s}switch(e=(n=this.pn1/(this.p-n))*o*Math.sin(t.x),this.mode){case vn:n*=this.cosph0*s-this.sinph0*o*a;break;case _n:n*=s;break;case mn:n*=-o*a;break;case yn:n*=o*a}return r=1/((i=n*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-n*this.sg)*this.cw*r,n=i*r,t.x=e*this.a,t.y=n*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,n,i,r={x:t.x,y:t.y};i=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*i,n=this.pn1*t.y*this.cw*i,t.x=e*this.cg+n*this.sg,t.y=n*this.cg-e*this.sg;var s=te(t.x,t.y);if(Math.abs(s)<a)r.x=0,r.y=t.y;else{var o,l;switch(l=1-s*s*this.pfact,l=(this.p-Math.sqrt(l))/(this.pn1/s+s/this.pn1),o=Math.sqrt(1-l*l),this.mode){case vn:r.y=Math.asin(o*this.sinph0+t.y*l*this.cosph0/s),t.y=(o-this.sinph0*Math.sin(r.y))*s,t.x*=l*this.cosph0;break;case _n:r.y=Math.asin(t.y*l/s),t.y=o*s,t.x*=l;break;case mn:r.y=Math.asin(o),t.y=-t.y;break;case yn:r.y=-Math.asin(o)}r.x=Math.atan2(t.x,t.y)}return t.x=r.x+this.long0,t.y=r.y,t},names:["Tilted_Perspective","tpers"]};var wn={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw new Error;if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es,e=1/t;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=e,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,n,i,r,s=t.x,o=t.y;if(s-=this.long0,"ellipse"===this.shape){o=Math.atan(this.radius_p2*Math.tan(o));var a=this.radius_p/te(this.radius_p*Math.cos(o),Math.sin(o));if(n=a*Math.cos(s)*Math.cos(o),i=a*Math.sin(s)*Math.cos(o),r=a*Math.sin(o),(this.radius_g-n)*n-i*i-r*r*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/te(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/te(i,e)))}else"sphere"===this.shape&&(e=Math.cos(o),n=Math.cos(s)*e,i=Math.sin(s)*e,r=Math.sin(o),e=this.radius_g-n,this.flip_axis?(t.x=this.radius_g_1*Math.atan(i/te(r,e)),t.y=this.radius_g_1*Math.atan(r/e)):(t.x=this.radius_g_1*Math.atan(i/e),t.y=this.radius_g_1*Math.atan(r/te(i,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,n,i,r,s=-1,o=0,a=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*te(1,a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*te(1,o));var l=a/this.radius_p;if(e=o*o+l*l+s*s,(i=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(a=Math.tan(t.y/this.radius_g_1),o=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+a*a)):(o=Math.tan(t.x/this.radius_g_1),a=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+o*o)),e=o*o+a*a+s*s,(i=(n=2*this.radius_g*s)*n-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;r=(-n-Math.sqrt(i))/(2*e),s=this.radius_g+r*s,o*=r,a*=r,t.x=Math.atan2(o,s),t.y=Math.atan(a*Math.cos(t.x)/s)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]},An=1.340264,Sn=-.081106,En=893e-6,Tn=.003796,Cn=Math.sqrt(3)/2;var Mn={init:function(){this.es=0,this.long0=void 0!==this.long0?this.long0:0},forward:function(t){var e=z(t.x-this.long0),n=t.y,i=Math.asin(Cn*Math.sin(n)),r=i*i,s=r*r*r;return t.x=e*Math.cos(i)/(Cn*(An+3*Sn*r+s*(7*En+9*Tn*r))),t.y=i*(An+Sn*r+s*(En+Tn*r)),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a;var e,n,i,r,s=t.y;for(r=0;r<12&&(s-=i=(s*(An+Sn*(e=s*s)+(n=e*e*e)*(En+Tn*e))-t.y)/(An+3*Sn*e+n*(7*En+9*Tn*e)),!(Math.abs(i)<1e-9));++r);return n=(e=s*s)*e*e,t.x=Cn*t.x*(An+3*Sn*e+n*(7*En+9*Tn*e))/Math.cos(s),t.y=Math.asin(Math.sin(s)/Cn),t.x=z(t.x+this.long0),t},names:["eqearth","Equal Earth","Equal_Earth"]},Ln=1e-10;function Pn(t){var e,n,i,r=z(t.x-(this.long0||0)),s=t.y;return e=this.am1+this.m1-Zt(s,n=Math.sin(s),i=Math.cos(s),this.en),n=i*r/(e*Math.sqrt(1-this.es*n*n)),t.x=e*Math.sin(n),t.y=this.am1-e*Math.cos(n),t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Rn(t){var e,n,i,r;if(t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a,n=te(t.x,t.y=this.am1-t.y),r=Kt(this.am1+this.m1-n,this.es,this.en),(e=Math.abs(r))<o)e=Math.sin(r),i=n*Math.atan2(t.x,t.y)*Math.sqrt(1-this.es*e*e)/Math.cos(r);else{if(!(Math.abs(e-o)<=Ln))throw new Error;i=0}return t.x=z(i+(this.long0||0)),t.y=be(r),t}function In(t){var e,n,i=z(t.x-(this.long0||0)),r=t.y;return n=this.cphi1+this.phi1-r,Math.abs(n)>Ln?(t.x=n*Math.sin(e=i*Math.cos(r)/n),t.y=this.cphi1-n*Math.cos(e)):t.x=t.y=0,t.x=this.a*t.x+(this.x0||0),t.y=this.a*t.y+(this.y0||0),t}function Nn(t){var e,n;t.x=(t.x-(this.x0||0))/this.a,t.y=(t.y-(this.y0||0))/this.a;var i=te(t.x,t.y=this.cphi1-t.y);if(n=this.cphi1+this.phi1-i,Math.abs(n)>o)throw new Error;return e=Math.abs(Math.abs(n)-o)<=Ln?0:i*Math.atan2(t.x,t.y)/Math.cos(n),t.x=z(e+(this.long0||0)),t.y=be(n),t}var Fn={init:function(){var t;if(this.phi1=this.lat1,Math.abs(this.phi1)<Ln)throw new Error;this.es?(this.en=Yt(this.es),this.m1=Zt(this.phi1,this.am1=Math.sin(this.phi1),t=Math.cos(this.phi1),this.en),this.am1=t/(Math.sqrt(1-this.es*this.am1*this.am1)*this.am1),this.inverse=Rn,this.forward=Pn):(Math.abs(this.phi1)+Ln>=o?this.cphi1=0:this.cphi1=1/Math.tan(this.phi1),this.inverse=Nn,this.forward=In)},names:["bonne","Bonne (Werner lat_1=90)"]};Tt.defaultDatum="WGS84",Tt.Proj=ct,Tt.WGS84=new Tt.Proj("WGS84"),Tt.Point=$t,Tt.toPoint=xt,Tt.defs=F,Tt.nadgrid=function(t,e){var n=new DataView(e),i=function(t){var e=t.getInt32(8,!1);if(11===e)return!1;e=t.getInt32(8,!0),11!==e&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian");return!0}(n),r=function(t,e){return{nFields:t.getInt32(8,e),nSubgridFields:t.getInt32(24,e),nSubgrids:t.getInt32(40,e),shiftType:ot(t,56,64).trim(),fromSemiMajorAxis:t.getFloat64(120,e),fromSemiMinorAxis:t.getFloat64(136,e),toSemiMajorAxis:t.getFloat64(152,e),toSemiMinorAxis:t.getFloat64(168,e)}}(n,i),s=function(t,e,n){for(var i=176,r=[],s=0;s<e.nSubgrids;s++){var o=lt(t,i,n),a=ht(t,i,o,n),l=Math.round(1+(o.upperLongitude-o.lowerLongitude)/o.longitudeInterval),h=Math.round(1+(o.upperLatitude-o.lowerLatitude)/o.latitudeInterval);r.push({ll:[st(o.lowerLongitude),st(o.lowerLatitude)],del:[st(o.longitudeInterval),st(o.latitudeInterval)],lim:[l,h],count:o.gridNodeCount,cvs:at(a)}),i+=176+16*o.gridNodeCount}return r}(n,r,i),o={header:r,subgrids:s};return it[t]=o,o},Tt.transform=wt,Tt.mgrs=Ft,Tt.version="__VERSION__",function(t){t.Proj.projections.add(Jt),t.Proj.projections.add(re),t.Proj.projections.add(se),t.Proj.projections.add(le),t.Proj.projections.add(he),t.Proj.projections.add(ue),t.Proj.projections.add(de),t.Proj.projections.add(fe),t.Proj.projections.add(pe),t.Proj.projections.add(Ae),t.Proj.projections.add(Re),t.Proj.projections.add(Ne),t.Proj.projections.add(Fe),t.Proj.projections.add(ke),t.Proj.projections.add(De),t.Proj.projections.add(Oe),t.Proj.projections.add(je),t.Proj.projections.add(Ge),t.Proj.projections.add(Be),t.Proj.projections.add(ze),t.Proj.projections.add(qe),t.Proj.projections.add(Ue),t.Proj.projections.add(We),t.Proj.projections.add($e),t.Proj.projections.add(sn),t.Proj.projections.add(pn),t.Proj.projections.add(gn),t.Proj.projections.add(bn),t.Proj.projections.add(wn),t.Proj.projections.add(Mn),t.Proj.projections.add(Fn)}(Tt);var kn=Tt},80547:function(t,e,n){"use strict";n.d(e,{L:function(){return i},R:function(){return r}});const i=42,r=256},81297:function(t,e){"use strict";e.A={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"}},82629:function(t,e,n){"use strict";n.d(e,{Jt:function(){return r},WQ:function(){return s}});let i={};function r(t){return i[t]||i[t.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function s(t,e){i[t]=e}},84333:function(t,e,n){"use strict";var i=n(66962),r=n(71442),s=n(37759);class o{constructor(){this.globalCounter_=0,this.refToFeature_=new Map,this.uidToRef_=new Map,this.freeGlobalRef_=[],this.polygonBatch={entries:{},geometriesCount:0,verticesCount:0,ringsCount:0},this.pointBatch={entries:{},geometriesCount:0},this.lineStringBatch={entries:{},geometriesCount:0,verticesCount:0}}addFeatures(t,e){for(let n=0;n<t.length;n++)this.addFeature(t[n],e)}addFeature(t,e){let n=t.getGeometry();n&&(e&&(n=n.clone(),n.applyTransform(e)),this.addGeometry_(n,t))}clearFeatureEntryInPointBatch_(t){const e=(0,s.v6)(t),n=this.pointBatch.entries[e];if(n)return this.pointBatch.geometriesCount-=n.flatCoordss.length,delete this.pointBatch.entries[e],n}clearFeatureEntryInLineStringBatch_(t){const e=(0,s.v6)(t),n=this.lineStringBatch.entries[e];if(n)return this.lineStringBatch.verticesCount-=n.verticesCount,this.lineStringBatch.geometriesCount-=n.flatCoordss.length,delete this.lineStringBatch.entries[e],n}clearFeatureEntryInPolygonBatch_(t){const e=(0,s.v6)(t),n=this.polygonBatch.entries[e];if(n)return this.polygonBatch.verticesCount-=n.verticesCount,this.polygonBatch.ringsCount-=n.ringsCount,this.polygonBatch.geometriesCount-=n.flatCoordss.length,delete this.polygonBatch.entries[e],n}addGeometry_(t,e){const n=t.getType();switch(n){case"GeometryCollection":{const n=t.getGeometriesArray();for(const t of n)this.addGeometry_(t,e);break}case"MultiPolygon":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),i.getEndss(),e,(0,s.v6)(e),i.getStride());break}case"MultiLineString":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),i.getEnds(),e,(0,s.v6)(e),i.getStride());break}case"MultiPoint":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),null,e,(0,s.v6)(e),i.getStride());break}case"Polygon":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),i.getEnds(),e,(0,s.v6)(e),i.getStride());break}case"Point":{const i=t;this.addCoordinates_(n,i.getFlatCoordinates(),null,e,(0,s.v6)(e),i.getStride());break}case"LineString":case"LinearRing":{const i=t,r=i.getStride();this.addCoordinates_(n,i.getFlatCoordinates(),null,e,(0,s.v6)(e),r,i.getLayout?.());break}}}addCoordinates_(t,e,n,s,o,a,l){let h;switch(t){case"MultiPolygon":{const t=n;for(let n=0,i=t.length;n<i;n++){let i=t[n];const r=n>0?t[n-1]:null,h=r?r[r.length-1]:0,u=i[i.length-1];i=h>0?i.map((t=>t-h)):i,this.addCoordinates_("Polygon",e.slice(h,u),i,s,o,a,l)}break}case"MultiLineString":{const t=n;for(let n=0,i=t.length;n<i;n++){const i=n>0?t[n-1]:0;this.addCoordinates_("LineString",e.slice(i,t[n]),null,s,o,a,l)}break}case"MultiPoint":for(let t=0,n=e.length;t<n;t+=a)this.addCoordinates_("Point",e.slice(t,t+2),null,s,o,null,null);break;case"Polygon":{const t=n;if(s instanceof r.Ay){const n=(0,i.yJ)(e,t);if(n.length>1)return void this.addCoordinates_("MultiPolygon",e,n,s,o,a,l)}this.polygonBatch.entries[o]||(this.polygonBatch.entries[o]=this.addRefToEntry_(o,{feature:s,flatCoordss:[],verticesCount:0,ringsCount:0,ringsVerticesCounts:[]})),h=e.length/a;const u=n.length,c=n.map(((t,e,n)=>e>0?(t-n[e-1])/a:t/a));this.polygonBatch.verticesCount+=h,this.polygonBatch.ringsCount+=u,this.polygonBatch.geometriesCount++,this.polygonBatch.entries[o].flatCoordss.push(function(t,e){if(2===e)return t;return t.filter(((t,n)=>n%e<2))}(e,a)),this.polygonBatch.entries[o].ringsVerticesCounts.push(c),this.polygonBatch.entries[o].verticesCount+=h,this.polygonBatch.entries[o].ringsCount+=u;for(let n=0,i=t.length;n<i;n++){const i=n>0?t[n-1]:0;this.addCoordinates_("LinearRing",e.slice(i,t[n]),null,s,o,a,l)}break}case"Point":this.pointBatch.entries[o]||(this.pointBatch.entries[o]=this.addRefToEntry_(o,{feature:s,flatCoordss:[]})),this.pointBatch.geometriesCount++,this.pointBatch.entries[o].flatCoordss.push(e);break;case"LineString":case"LinearRing":this.lineStringBatch.entries[o]||(this.lineStringBatch.entries[o]=this.addRefToEntry_(o,{feature:s,flatCoordss:[],verticesCount:0})),h=e.length/a,this.lineStringBatch.verticesCount+=h,this.lineStringBatch.geometriesCount++,this.lineStringBatch.entries[o].flatCoordss.push(function(t,e,n){if(3===e&&"XYM"===n)return t;if(4===e)return t.filter(((t,n)=>n%e!=2));if(3===e)return t.map(((t,n)=>n%e!=2?t:0));return new Array(1.5*t.length).fill(0).map(((e,n)=>n%3==2?0:t[Math.round(n/1.5)]))}(e,a,l)),this.lineStringBatch.entries[o].verticesCount+=h}}addRefToEntry_(t,e){const n=this.uidToRef_.get(t),i=n||this.freeGlobalRef_.pop()||++this.globalCounter_;return e.ref=i,n||(this.refToFeature_.set(i,e.feature),this.uidToRef_.set(t,i)),e}removeRef_(t,e){if(!t)throw new Error("This feature has no ref: "+e);this.refToFeature_.delete(t),this.uidToRef_.delete(e),this.freeGlobalRef_.push(t)}changeFeature(t){if(!this.uidToRef_.get((0,s.v6)(t)))return;this.removeFeature(t);const e=t.getGeometry();e&&this.addGeometry_(e,t)}removeFeature(t){let e=this.clearFeatureEntryInPointBatch_(t);e=this.clearFeatureEntryInPolygonBatch_(t)||e,e=this.clearFeatureEntryInLineStringBatch_(t)||e,e&&this.removeRef_(e.ref,(0,s.v6)(e.feature))}clear(){this.polygonBatch.entries={},this.polygonBatch.geometriesCount=0,this.polygonBatch.verticesCount=0,this.polygonBatch.ringsCount=0,this.lineStringBatch.entries={},this.lineStringBatch.geometriesCount=0,this.lineStringBatch.verticesCount=0,this.pointBatch.entries={},this.pointBatch.geometriesCount=0,this.globalCounter_=0,this.freeGlobalRef_=[],this.refToFeature_.clear(),this.uidToRef_.clear()}getFeatureFromRef(t){return this.refToFeature_.get(t)}isEmpty(){return 0===this.globalCounter_}filter(t){const e=new o;e.globalCounter_=this.globalCounter_,e.uidToRef_=this.uidToRef_,e.refToFeature_=this.refToFeature_;let n=!0;for(const i of this.refToFeature_.values())t(i)&&(e.addFeature(i),n=!1);return n?new o:e}}e.A=o},85218:function(t,e,n){"use strict";n.d(e,{Gt:function(){return Ss},Bb:function(){return vs},V5:function(){return os},AV:function(){return rs},Ay:function(){return vs}});var i={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const r=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function s(t,e){const n={};for(const e in t)"ref"!==e&&(n[e]=t[e]);return r.forEach((t=>{t in e&&(n[t]=e[t])})),n}function o(t){t=t.slice();const e=Object.create(null);for(let n=0;n<t.length;n++)e[t[n].id]=t[n];for(let n=0;n<t.length;n++)"ref"in t[n]&&(t[n]=s(t[n],e[t[n].ref]));return t}class a{constructor(t,e,n,i){this.message=(t?`${t}: `:"")+n,i&&(this.identifier=i),null!=e&&e.__line__&&(this.line=e.__line__)}}function l(t,...e){for(const n of e)for(const e in n)t[e]=n[e];return t}class h extends Error{constructor(t,e){super(e),this.message=e,this.key=t}}class u{constructor(t,e=[]){this.parent=t,this.bindings={};for(const[t,n]of e)this.bindings[t]=n}concat(t){return new u(this,t)}get(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw new Error(`${t} not found in scope.`)}has(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)}}const c={kind:"null"},d={kind:"number"},f={kind:"string"},p={kind:"boolean"},g={kind:"color"},m={kind:"projectionDefinition"},y={kind:"object"},_={kind:"value"},v={kind:"collator"},x={kind:"formatted"},b={kind:"padding"},w={kind:"resolvedImage"},A={kind:"variableAnchorOffsetCollection"};function S(t,e){return{kind:"array",itemType:t,N:e}}function E(t){if("array"===t.kind){const e=E(t.itemType);return"number"==typeof t.N?`array<${e}, ${t.N}>`:"value"===t.itemType.kind?"array":`array<${e}>`}return t.kind}const T=[c,d,f,p,g,m,x,y,S(_),b,w,A];function C(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!C(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else{if(t.kind===e.kind)return null;if("value"===t.kind)for(const t of T)if(!C(t,e))return null}return`Expected ${E(t)} but found ${E(e)} instead.`}function M(t,e){return e.some((e=>e.kind===t.kind))}function L(t,e){return e.some((e=>"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t))}function P(t,e){return"array"===t.kind&&"array"===e.kind?t.itemType.kind===e.itemType.kind&&"number"==typeof t.N:t.kind===e.kind}const R=.96422,I=.82521,N=4/29,F=6/29,k=3*F*F,D=F*F*F,O=Math.PI/180,j=180/Math.PI;function G(t){return(t%=360)<0&&(t+=360),t}function B([t,e,n,i]){let r,s;const o=q((.2225045*(t=z(t))+.7168786*(e=z(e))+.0606169*(n=z(n)))/1);t===e&&e===n?r=s=o:(r=q((.4360747*t+.3850649*e+.1430804*n)/R),s=q((.0139322*t+.0971045*e+.7141733*n)/I));const a=116*o-16;return[a<0?0:a,500*(r-o),200*(o-s),i]}function z(t){return t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function q(t){return t>D?Math.pow(t,1/3):t/k+N}function U([t,e,n,i]){let r=(t+16)/116,s=isNaN(e)?r:r+e/500,o=isNaN(n)?r:r-n/200;return r=1*$(r),s=R*$(s),o=I*$(o),[W(3.1338561*s-1.6168667*r-.4906146*o),W(-.9787684*s+1.9161415*r+.033454*o),W(.0719453*s-.2289914*r+1.4052427*o),i]}function W(t){return(t=t<=.00304?12.92*t:1.055*Math.pow(t,1/2.4)-.055)<0?0:t>1?1:t}function $(t){return t>F?t*t*t:k*(t-N)}function V(t){if("transparent"===(t=t.toLowerCase().trim()))return[0,0,0,0];const e=K[t];if(e){const[t,n,i]=e;return[t/255,n/255,i/255,1]}if(t.startsWith("#")){if(/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(t)){const e=t.length<6?1:2;let n=1;return[X(t.slice(n,n+=e)),X(t.slice(n,n+=e)),X(t.slice(n,n+=e)),X(t.slice(n,n+e)||"ff")]}}if(t.startsWith("rgb")){const e=/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/,n=t.match(e);if(n){const[t,e,i,r,s,o,a,l,h,u,c,d]=n,f=[r||" ",a||" ",u].join("");if("  "===f||"  /"===f||",,"===f||",,,"===f){const t=[i,o,h].join(""),n="%%%"===t?100:""===t?255:0;if(n){const t=[Y(+e/n,0,1),Y(+s/n,0,1),Y(+l/n,0,1),c?H(+c,d):1];if(Z(t))return t}}return}}const n=t.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(n){const[t,e,i,r,s,o,a,l,h]=n,u=[i||" ",s||" ",a].join("");if("  "===u||"  /"===u||",,"===u||",,,"===u){const t=[+e,Y(+r,0,100),Y(+o,0,100),l?H(+l,h):1];if(Z(t))return function([t,e,n,i]){function r(i){const r=(i+t/30)%12,s=e*Math.min(n,1-n);return n-s*Math.max(-1,Math.min(r-3,9-r,1))}return t=G(t),e/=100,n/=100,[r(0),r(8),r(4),i]}(t)}}}function X(t){return parseInt(t.padEnd(2,t),16)/255}function H(t,e){return Y(e?t/100:t,0,1)}function Y(t,e,n){return Math.min(Math.max(e,t),n)}function Z(t){return!t.some(Number.isNaN)}const K={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function J(t,e,n){return t+n*(e-t)}function Q(t,e,n){return t.map(((t,i)=>J(t,e[i],n)))}class tt{constructor(t,e,n,i=1,r=!0){this.r=t,this.g=e,this.b=n,this.a=i,r||(this.r*=i,this.g*=i,this.b*=i,i||this.overwriteGetter("rgb",[t,e,n,i]))}static parse(t){if(t instanceof tt)return t;if("string"!=typeof t)return;const e=V(t);return e?new tt(...e,!1):void 0}get rgb(){const{r:t,g:e,b:n,a:i}=this,r=i||1/0;return this.overwriteGetter("rgb",[t/r,e/r,n/r,i])}get hcl(){return this.overwriteGetter("hcl",function(t){const[e,n,i,r]=B(t),s=Math.sqrt(n*n+i*i);return[Math.round(1e4*s)?G(Math.atan2(i,n)*j):NaN,s,e,r]}(this.rgb))}get lab(){return this.overwriteGetter("lab",B(this.rgb))}overwriteGetter(t,e){return Object.defineProperty(this,t,{value:e}),e}toString(){const[t,e,n,i]=this.rgb;return`rgba(${[t,e,n].map((t=>Math.round(255*t))).join(",")},${i})`}static interpolate(t,e,n,i="rgb"){switch(i){case"rgb":{const[i,r,s,o]=Q(t.rgb,e.rgb,n);return new tt(i,r,s,o,!1)}case"hcl":{const[i,r,s,o]=t.hcl,[a,l,h,u]=e.hcl;let c,d;if(isNaN(i)||isNaN(a))isNaN(i)?isNaN(a)?c=NaN:(c=a,1!==s&&0!==s||(d=l)):(c=i,1!==h&&0!==h||(d=r));else{let t=a-i;a>i&&t>180?t-=360:a<i&&i-a>180&&(t+=360),c=i+n*t}const[f,p,g,m]=function([t,e,n,i]){return t=isNaN(t)?0:t*O,U([n,Math.cos(t)*e,Math.sin(t)*e,i])}([c,null!=d?d:J(r,l,n),J(s,h,n),J(o,u,n)]);return new tt(f,p,g,m,!1)}case"lab":{const[i,r,s,o]=U(Q(t.lab,e.lab,n));return new tt(i,r,s,o,!1)}}}}tt.black=new tt(0,0,0,1),tt.white=new tt(1,1,1,1),tt.transparent=new tt(0,0,0,0),tt.red=new tt(1,0,0,1);class et{constructor(t,e,n){this.sensitivity=t?e?"variant":"case":e?"accent":"base",this.locale=n,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(t,e){return this.collator.compare(t,e)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const nt=["bottom","center","top"];class it{constructor(t,e,n,i,r,s){this.text=t,this.image=e,this.scale=n,this.fontStack=i,this.textColor=r,this.verticalAlign=s}}class rt{constructor(t){this.sections=t}static fromString(t){return new rt([new it(t,null,null,null,null,null)])}isEmpty(){return 0===this.sections.length||!this.sections.some((t=>0!==t.text.length||t.image&&0!==t.image.name.length))}static factory(t){return t instanceof rt?t:rt.fromString(t)}toString(){return 0===this.sections.length?"":this.sections.map((t=>t.text)).join("")}}class st{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof st)return t;if("number"==typeof t)return new st([t,t,t,t]);if(Array.isArray(t)&&!(t.length<1||t.length>4)){for(const e of t)if("number"!=typeof e)return;switch(t.length){case 1:t=[t[0],t[0],t[0],t[0]];break;case 2:t=[t[0],t[1],t[0],t[1]];break;case 3:t=[t[0],t[1],t[2],t[1]]}return new st(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,n){return new st(Q(t.values,e.values,n))}}class ot{constructor(t){this.name="ExpressionEvaluationError",this.message=t}toJSON(){return this.message}}const at=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class lt{constructor(t){this.values=t.slice()}static parse(t){if(t instanceof lt)return t;if(Array.isArray(t)&&!(t.length<1)&&t.length%2==0){for(let e=0;e<t.length;e+=2){const n=t[e],i=t[e+1];if("string"!=typeof n||!at.has(n))return;if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])return}return new lt(t)}}toString(){return JSON.stringify(this.values)}static interpolate(t,e,n){const i=t.values,r=e.values;if(i.length!==r.length)throw new ot(`Cannot interpolate values of different length. from: ${t.toString()}, to: ${e.toString()}`);const s=[];for(let t=0;t<i.length;t+=2){if(i[t]!==r[t])throw new ot(`Cannot interpolate values containing mismatched anchors. from[${t}]: ${i[t]}, to[${t}]: ${r[t]}`);s.push(i[t]);const[e,o]=i[t+1],[a,l]=r[t+1];s.push([J(e,a,n),J(o,l,n)])}return new lt(s)}}class ht{constructor(t){this.name=t.name,this.available=t.available}toString(){return this.name}static fromString(t){return t?new ht({name:t,available:!1}):null}}class ut{constructor(t,e,n){this.from=t,this.to=e,this.transition=n}static interpolate(t,e,n){return new ut(t,e,n)}static parse(t){return t instanceof ut?t:Array.isArray(t)&&3===t.length&&"string"==typeof t[0]&&"string"==typeof t[1]&&"number"==typeof t[2]?new ut(t[0],t[1],t[2]):"object"==typeof t&&"string"==typeof t.from&&"string"==typeof t.to&&"number"==typeof t.transition?new ut(t.from,t.to,t.transition):"string"==typeof t?new ut(t,t,1):void 0}}function ct(t,e,n,i){if(!("number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof n&&n>=0&&n<=255)){return`Invalid rgba value [${("number"==typeof i?[t,e,n,i]:[t,e,n]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}return void 0===i||"number"==typeof i&&i>=0&&i<=1?null:`Invalid rgba value [${[t,e,n,i].join(", ")}]: 'a' must be between 0 and 1.`}function dt(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t||t instanceof ut||t instanceof tt||t instanceof et||t instanceof rt||t instanceof st||t instanceof lt||t instanceof ht)return!0;if(Array.isArray(t)){for(const e of t)if(!dt(e))return!1;return!0}if("object"==typeof t){for(const e in t)if(!dt(t[e]))return!1;return!0}return!1}function ft(t){if(null===t)return c;if("string"==typeof t)return f;if("boolean"==typeof t)return p;if("number"==typeof t)return d;if(t instanceof tt)return g;if(t instanceof ut)return m;if(t instanceof et)return v;if(t instanceof rt)return x;if(t instanceof st)return b;if(t instanceof lt)return A;if(t instanceof ht)return w;if(Array.isArray(t)){const e=t.length;let n;for(const e of t){const t=ft(e);if(n){if(n===t)continue;n=_;break}n=t}return S(n||_,e)}return y}function pt(t){const e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof tt||t instanceof ut||t instanceof rt||t instanceof st||t instanceof lt||t instanceof ht?t.toString():JSON.stringify(t)}class gt{constructor(t,e){this.type=t,this.value=e}static parse(t,e){if(2!==t.length)return e.error(`'literal' expression requires exactly one argument, but found ${t.length-1} instead.`);if(!dt(t[1]))return e.error("invalid value");const n=t[1];let i=ft(n);const r=e.expectedType;return"array"!==i.kind||0!==i.N||!r||"array"!==r.kind||"number"==typeof r.N&&0!==r.N||(i=r),new gt(i,n)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const mt={string:f,number:d,boolean:p,object:y};class yt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n,i=1;const r=t[0];if("array"===r){let r,s;if(t.length>2){const n=t[1];if("string"!=typeof n||!(n in mt)||"object"===n)return e.error('The item type argument of "array" must be one of string, number, boolean',1);r=mt[n],i++}else r=_;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);s=t[2],i++}n=S(r,s)}else{if(!mt[r])throw new Error(`Types doesn't contain name = ${r}`);n=mt[r]}const s=[];for(;i<t.length;i++){const n=e.parse(t[i],i,_);if(!n)return null;s.push(n)}return new yt(n,s)}evaluate(t){for(let e=0;e<this.args.length;e++){const n=this.args[e].evaluate(t);if(!C(this.type,ft(n)))return n;if(e===this.args.length-1)throw new ot(`Expected value to be of type ${E(this.type)}, but found ${E(ft(n))} instead.`)}throw new Error}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const _t={"to-boolean":p,"to-color":g,"to-number":d,"to-string":f};class vt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[0];if(!_t[n])throw new Error(`Can't parse ${n} as it is not part of the known types`);if(("to-boolean"===n||"to-string"===n)&&2!==t.length)return e.error("Expected one argument.");const i=_t[n],r=[];for(let n=1;n<t.length;n++){const i=e.parse(t[n],n,_);if(!i)return null;r.push(i)}return new vt(i,r)}evaluate(t){switch(this.type.kind){case"boolean":return Boolean(this.args[0].evaluate(t));case"color":{let e,n;for(const i of this.args){if(e=i.evaluate(t),n=null,e instanceof tt)return e;if("string"==typeof e){const n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&(n=e.length<3||e.length>4?`Invalid rgba value ${JSON.stringify(e)}: expected an array containing either three or four numeric values.`:ct(e[0],e[1],e[2],e[3]),!n))return new tt(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new ot(n||`Could not parse color from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"padding":{let e;for(const n of this.args){e=n.evaluate(t);const i=st.parse(e);if(i)return i}throw new ot(`Could not parse padding from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"variableAnchorOffsetCollection":{let e;for(const n of this.args){e=n.evaluate(t);const i=lt.parse(e);if(i)return i}throw new ot(`Could not parse variableAnchorOffsetCollection from value '${"string"==typeof e?e:JSON.stringify(e)}'`)}case"number":{let e=null;for(const n of this.args){if(e=n.evaluate(t),null===e)return 0;const i=Number(e);if(!isNaN(i))return i}throw new ot(`Could not convert ${JSON.stringify(e)} to number.`)}case"formatted":return rt.fromString(pt(this.args[0].evaluate(t)));case"resolvedImage":return ht.fromString(pt(this.args[0].evaluate(t)));case"projectionDefinition":return this.args[0].evaluate(t);default:return pt(this.args[0].evaluate(t))}}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}const xt=["Unknown","Point","LineString","Polygon"];class bt{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?"number"==typeof this.feature.type?xt[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(t){let e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=tt.parse(t)),e}}class wt{constructor(t,e,n=[],i,r=new u,s=[]){this.registry=t,this.path=n,this.key=n.map((t=>`[${t}]`)).join(""),this.scope=r,this.errors=s,this.expectedType=i,this._isConstant=e}parse(t,e,n,i,r={}){return e?this.concat(e,n,i)._parse(t,r):this._parse(t,r)}_parse(t,e){function n(t,e,n){return"assert"===n?new yt(e,[t]):"coerce"===n?new vt(e,[t]):t}if(null!==t&&"string"!=typeof t&&"boolean"!=typeof t&&"number"!=typeof t||(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const i=t[0];if("string"!=typeof i)return this.error(`Expression name must be a string, but found ${typeof i} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const r=this.registry[i];if(r){let i=r.parse(t,this);if(!i)return null;if(this.expectedType){const t=this.expectedType,r=i.type;if("string"!==t.kind&&"number"!==t.kind&&"boolean"!==t.kind&&"object"!==t.kind&&"array"!==t.kind||"value"!==r.kind)if("projectionDefinition"!==t.kind||"string"!==r.kind&&"array"!==r.kind)if("color"!==t.kind&&"formatted"!==t.kind&&"resolvedImage"!==t.kind||"value"!==r.kind&&"string"!==r.kind)if("padding"!==t.kind||"value"!==r.kind&&"number"!==r.kind&&"array"!==r.kind)if("variableAnchorOffsetCollection"!==t.kind||"value"!==r.kind&&"array"!==r.kind){if(this.checkSubtype(t,r))return null}else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"coerce");else i=n(i,t,e.typeAnnotation||"assert")}if(!(i instanceof gt)&&"resolvedImage"!==i.type.kind&&this._isConstant(i)){const t=new bt;try{i=new gt(i.type,i.evaluate(t))}catch(t){return this.error(t.message),null}}return i}return this.error(`Unknown expression "${i}". If you wanted a literal array, use ["literal", [...]].`,0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error(`Expected an array, but found ${typeof t} instead.`)}concat(t,e,n){const i="number"==typeof t?this.path.concat(t):this.path,r=n?this.scope.concat(n):this.scope;return new wt(this.registry,this._isConstant,i,e||null,r,this.errors)}error(t,...e){const n=`${this.key}${e.map((t=>`[${t}]`)).join("")}`;this.errors.push(new h(n,t))}checkSubtype(t,e){const n=C(t,e);return n&&this.error(n),n}}class At{constructor(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e}evaluate(t){return this.result.evaluate(t)}eachChild(t){for(const e of this.bindings)t(e[1]);t(this.result)}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found ${t.length-1} instead.`);const n=[];for(let i=1;i<t.length-1;i+=2){const r=t[i];if("string"!=typeof r)return e.error(`Expected string, but found ${typeof r} instead.`,i);if(/[^a-zA-Z0-9_]/.test(r))return e.error("Variable names must contain only alphanumeric characters or '_'.",i);const s=e.parse(t[i+1],i+1);if(!s)return null;n.push([r,s])}const i=e.parse(t[t.length-1],t.length-1,e.expectedType,n);return i?new At(n,i):null}outputDefined(){return this.result.outputDefined()}}class St{constructor(t,e){this.type=e.type,this.name=t,this.boundExpression=e}static parse(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");const n=t[1];return e.scope.has(n)?new St(n,e.scope.get(n)):e.error(`Unknown variable "${n}". Make sure "${n}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(t){return this.boundExpression.evaluate(t)}eachChild(){}outputDefined(){return!1}}class Et{constructor(t,e,n){this.type=t,this.index=e,this.input=n}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,d),i=e.parse(t[2],2,S(e.expectedType||_));if(!n||!i)return null;const r=i.type;return new Et(r.itemType,n,i)}evaluate(t){const e=this.index.evaluate(t),n=this.input.evaluate(t);if(e<0)throw new ot(`Array index out of bounds: ${e} < 0.`);if(e>=n.length)throw new ot(`Array index out of bounds: ${e} > ${n.length-1}.`);if(e!==Math.floor(e))throw new ot(`Array index must be an integer, but found ${e} instead.`);return n[e]}eachChild(t){t(this.index),t(this.input)}outputDefined(){return!1}}class Tt{constructor(t,e){this.type=p,this.needle=t,this.haystack=e}static parse(t,e){if(3!==t.length)return e.error(`Expected 2 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,_),i=e.parse(t[2],2,_);return n&&i?M(n.type,[p,f,d,c,_])?new Tt(n,i):e.error(`Expected first argument to be of type boolean, string, number or null, but found ${E(n.type)} instead`):null}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!n)return!1;if(!L(e,["boolean","string","number","null"]))throw new ot(`Expected first argument to be of type boolean, string, number or null, but found ${E(ft(e))} instead.`);if(!L(n,["string","array"]))throw new ot(`Expected second argument to be of type array or string, but found ${E(ft(n))} instead.`);return n.indexOf(e)>=0}eachChild(t){t(this.needle),t(this.haystack)}outputDefined(){return!0}}class Ct{constructor(t,e,n){this.type=d,this.needle=t,this.haystack=e,this.fromIndex=n}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,_),i=e.parse(t[2],2,_);if(!n||!i)return null;if(!M(n.type,[p,f,d,c,_]))return e.error(`Expected first argument to be of type boolean, string, number or null, but found ${E(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,d);return r?new Ct(n,i,r):null}return new Ct(n,i)}evaluate(t){const e=this.needle.evaluate(t),n=this.haystack.evaluate(t);if(!L(e,["boolean","string","number","null"]))throw new ot(`Expected first argument to be of type boolean, string, number or null, but found ${E(ft(e))} instead.`);let i;if(this.fromIndex&&(i=this.fromIndex.evaluate(t)),L(n,["string"])){const t=n.indexOf(e,i);return-1===t?-1:[...n.slice(0,t)].length}if(L(n,["array"]))return n.indexOf(e,i);throw new ot(`Expected second argument to be of type array or string, but found ${E(ft(n))} instead.`)}eachChild(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)}outputDefined(){return!1}}class Mt{constructor(t,e,n,i,r,s){this.inputType=t,this.type=e,this.input=n,this.cases=i,this.outputs=r,this.otherwise=s}static parse(t,e){if(t.length<5)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if(t.length%2!=1)return e.error("Expected an even number of arguments.");let n,i;e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);const r={},s=[];for(let o=2;o<t.length-1;o+=2){let a=t[o];const l=t[o+1];Array.isArray(a)||(a=[a]);const h=e.concat(o);if(0===a.length)return h.error("Expected at least one branch label.");for(const t of a){if("number"!=typeof t&&"string"!=typeof t)return h.error("Branch labels must be numbers or strings.");if("number"==typeof t&&Math.abs(t)>Number.MAX_SAFE_INTEGER)return h.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if("number"==typeof t&&Math.floor(t)!==t)return h.error("Numeric branch labels must be integer values.");if(n){if(h.checkSubtype(n,ft(t)))return null}else n=ft(t);if(void 0!==r[String(t)])return h.error("Branch labels must be unique.");r[String(t)]=s.length}const u=e.parse(l,o,i);if(!u)return null;i=i||u.type,s.push(u)}const o=e.parse(t[1],1,_);if(!o)return null;const a=e.parse(t[t.length-1],t.length-1,i);return a?"value"!==o.type.kind&&e.concat(1).checkSubtype(n,o.type)?null:new Mt(n,i,o,r,s,a):null}evaluate(t){const e=this.input.evaluate(t);return(ft(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)}eachChild(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))&&this.otherwise.outputDefined()}}class Lt{constructor(t,e,n){this.type=t,this.branches=e,this.otherwise=n}static parse(t,e){if(t.length<4)return e.error(`Expected at least 3 arguments, but found only ${t.length-1}.`);if(t.length%2!=0)return e.error("Expected an odd number of arguments.");let n;e.expectedType&&"value"!==e.expectedType.kind&&(n=e.expectedType);const i=[];for(let r=1;r<t.length-1;r+=2){const s=e.parse(t[r],r,p);if(!s)return null;const o=e.parse(t[r+1],r+1,n);if(!o)return null;i.push([s,o]),n=n||o.type}const r=e.parse(t[t.length-1],t.length-1,n);if(!r)return null;if(!n)throw new Error("Can't infer output type");return new Lt(n,i,r)}evaluate(t){for(const[e,n]of this.branches)if(e.evaluate(t))return n.evaluate(t);return this.otherwise.evaluate(t)}eachChild(t){for(const[e,n]of this.branches)t(e),t(n);t(this.otherwise)}outputDefined(){return this.branches.every((([t,e])=>e.outputDefined()))&&this.otherwise.outputDefined()}}class Pt{constructor(t,e,n,i){this.type=t,this.input=e,this.beginIndex=n,this.endIndex=i}static parse(t,e){if(t.length<=2||t.length>=5)return e.error(`Expected 3 or 4 arguments, but found ${t.length-1} instead.`);const n=e.parse(t[1],1,_),i=e.parse(t[2],2,d);if(!n||!i)return null;if(!M(n.type,[S(_),f,_]))return e.error(`Expected first argument to be of type array or string, but found ${E(n.type)} instead`);if(4===t.length){const r=e.parse(t[3],3,d);return r?new Pt(n.type,n,i,r):null}return new Pt(n.type,n,i)}evaluate(t){const e=this.input.evaluate(t),n=this.beginIndex.evaluate(t);let i;if(this.endIndex&&(i=this.endIndex.evaluate(t)),L(e,["string"]))return[...e].slice(n,i).join("");if(L(e,["array"]))return e.slice(n,i);throw new ot(`Expected first argument to be of type array or string, but found ${E(ft(e))} instead.`)}eachChild(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)}outputDefined(){return!1}}function Rt(t,e){const n=t.length-1;let i,r,s=0,o=n,a=0;for(;s<=o;)if(a=Math.floor((s+o)/2),i=t[a],r=t[a+1],i<=e){if(a===n||e<r)return a;s=a+1}else{if(!(i>e))throw new ot("Input is not a number.");o=a-1}return 0}class It{constructor(t,e,n){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(const[t,e]of n)this.labels.push(t),this.outputs.push(e)}static parse(t,e){if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");const n=e.parse(t[1],1,d);if(!n)return null;const i=[];let r=null;e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(let n=1;n<t.length;n+=2){const s=1===n?-1/0:t[n],o=t[n+1],a=n,l=n+1;if("number"!=typeof s)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',a);if(i.length&&i[i.length-1][0]>=s)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',a);const h=e.parse(o,l,r);if(!h)return null;r=r||h.type,i.push([s,h])}return new It(r,n,i)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);return n[Rt(e,i)].evaluate(t)}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Nt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ft,kt;var Dt=function(){if(kt)return Ft;function t(t,e,n,i){this.cx=3*t,this.bx=3*(n-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(i-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=e,this.p2x=n,this.p2y=i}return kt=1,Ft=t,t.prototype={sampleCurveX:function(t){return((this.ax*t+this.bx)*t+this.cx)*t},sampleCurveY:function(t){return((this.ay*t+this.by)*t+this.cy)*t},sampleCurveDerivativeX:function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},solveCurveX:function(t,e){if(void 0===e&&(e=1e-6),t<0)return 0;if(t>1)return 1;for(var n=t,i=0;i<8;i++){var r=this.sampleCurveX(n)-t;if(Math.abs(r)<e)return n;var s=this.sampleCurveDerivativeX(n);if(Math.abs(s)<1e-6)break;n-=r/s}var o=0,a=1;for(n=t,i=0;i<20&&(r=this.sampleCurveX(n),!(Math.abs(r-t)<e));i++)t>r?o=n:a=n,n=.5*(a-o)+o;return n},solve:function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))}},Ft}(),Ot=Nt(Dt);class jt{constructor(t,e,n,i,r){this.type=t,this.operator=e,this.interpolation=n,this.input=i,this.labels=[],this.outputs=[];for(const[t,e]of r)this.labels.push(t),this.outputs.push(e)}static interpolationFactor(t,e,n,i){let r=0;if("exponential"===t.name)r=Gt(e,t.base,n,i);else if("linear"===t.name)r=Gt(e,1,n,i);else if("cubic-bezier"===t.name){const s=t.controlPoints;r=new Ot(s[0],s[1],s[2],s[3]).solve(Gt(e,1,n,i))}return r}static parse(t,e){let[n,i,r,...s]=t;if(!Array.isArray(i)||0===i.length)return e.error("Expected an interpolation type expression.",1);if("linear"===i[0])i={name:"linear"};else if("exponential"===i[0]){const t=i[1];if("number"!=typeof t)return e.error("Exponential interpolation requires a numeric base.",1,1);i={name:"exponential",base:t}}else{if("cubic-bezier"!==i[0])return e.error(`Unknown interpolation type ${String(i[0])}`,1,0);{const t=i.slice(1);if(4!==t.length||t.some((t=>"number"!=typeof t||t<0||t>1)))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);i={name:"cubic-bezier",controlPoints:t}}}if(t.length-1<4)return e.error(`Expected at least 4 arguments, but found only ${t.length-1}.`);if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(r=e.parse(r,2,d),!r)return null;const o=[];let a=null;"interpolate-hcl"===n||"interpolate-lab"===n?a=g:e.expectedType&&"value"!==e.expectedType.kind&&(a=e.expectedType);for(let t=0;t<s.length;t+=2){const n=s[t],i=s[t+1],r=t+3,l=t+4;if("number"!=typeof n)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',r);if(o.length&&o[o.length-1][0]>=n)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',r);const h=e.parse(i,l,a);if(!h)return null;a=a||h.type,o.push([n,h])}return P(a,d)||P(a,m)||P(a,g)||P(a,b)||P(a,A)||P(a,S(d))?new jt(a,n,i,r,o):e.error(`Type ${E(a)} is not interpolatable.`)}evaluate(t){const e=this.labels,n=this.outputs;if(1===e.length)return n[0].evaluate(t);const i=this.input.evaluate(t);if(i<=e[0])return n[0].evaluate(t);const r=e.length;if(i>=e[r-1])return n[r-1].evaluate(t);const s=Rt(e,i),o=e[s],a=e[s+1],l=jt.interpolationFactor(this.interpolation,i,o,a),h=n[s].evaluate(t),u=n[s+1].evaluate(t);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return J(h,u,l);case"color":return tt.interpolate(h,u,l);case"padding":return st.interpolate(h,u,l);case"variableAnchorOffsetCollection":return lt.interpolate(h,u,l);case"array":return Q(h,u,l);case"projectionDefinition":return ut.interpolate(h,u,l)}case"interpolate-hcl":return tt.interpolate(h,u,l,"hcl");case"interpolate-lab":return tt.interpolate(h,u,l,"lab")}}eachChild(t){t(this.input);for(const e of this.outputs)t(e)}outputDefined(){return this.outputs.every((t=>t.outputDefined()))}}function Gt(t,e,n,i){const r=i-n,s=t-n;return 0===r?0:1===e?s/r:(Math.pow(e,s)-1)/(Math.pow(e,r)-1)}tt.interpolate,st.interpolate,lt.interpolate;class Bt{constructor(t,e){this.type=t,this.args=e}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");let n=null;const i=e.expectedType;i&&"value"!==i.kind&&(n=i);const r=[];for(const i of t.slice(1)){const t=e.parse(i,1+r.length,n,void 0,{typeAnnotation:"omit"});if(!t)return null;n=n||t.type,r.push(t)}if(!n)throw new Error("No output type");const s=i&&r.some((t=>C(i,t.type)));return new Bt(s?_:n,r)}evaluate(t){let e,n=null,i=0;for(const r of this.args)if(i++,n=r.evaluate(t),n&&n instanceof ht&&!n.available&&(e||(e=n.name),n=null,i===this.args.length&&(n=e)),null!==n)break;return n}eachChild(t){this.args.forEach(t)}outputDefined(){return this.args.every((t=>t.outputDefined()))}}function zt(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function qt(t,e,n,i){return 0===i.compare(e,n)}function Ut(t,e,n){const i="=="!==t&&"!="!==t;return class r{constructor(t,e,n){this.type=p,this.lhs=t,this.rhs=e,this.collator=n,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}static parse(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");const n=t[0];let s=e.parse(t[1],1,_);if(!s)return null;if(!zt(n,s.type))return e.concat(1).error(`"${n}" comparisons are not supported for type '${E(s.type)}'.`);let o=e.parse(t[2],2,_);if(!o)return null;if(!zt(n,o.type))return e.concat(2).error(`"${n}" comparisons are not supported for type '${E(o.type)}'.`);if(s.type.kind!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error(`Cannot compare types '${E(s.type)}' and '${E(o.type)}'.`);i&&("value"===s.type.kind&&"value"!==o.type.kind?s=new yt(o.type,[s]):"value"!==s.type.kind&&"value"===o.type.kind&&(o=new yt(s.type,[o])));let a=null;if(4===t.length){if("string"!==s.type.kind&&"string"!==o.type.kind&&"value"!==s.type.kind&&"value"!==o.type.kind)return e.error("Cannot use collator to compare non-string types.");if(a=e.parse(t[3],3,v),!a)return null}return new r(s,o,a)}evaluate(r){const s=this.lhs.evaluate(r),o=this.rhs.evaluate(r);if(i&&this.hasUntypedArgument){const e=ft(s),n=ft(o);if(e.kind!==n.kind||"string"!==e.kind&&"number"!==e.kind)throw new ot(`Expected arguments for "${t}" to be (string, string) or (number, number), but found (${e.kind}, ${n.kind}) instead.`)}if(this.collator&&!i&&this.hasUntypedArgument){const t=ft(s),n=ft(o);if("string"!==t.kind||"string"!==n.kind)return e(r,s,o)}return this.collator?n(r,s,o,this.collator.evaluate(r)):e(r,s,o)}eachChild(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)}outputDefined(){return!0}}}const Wt=Ut("==",(function(t,e,n){return e===n}),qt),$t=Ut("!=",(function(t,e,n){return e!==n}),(function(t,e,n,i){return!qt(0,e,n,i)})),Vt=Ut("<",(function(t,e,n){return e<n}),(function(t,e,n,i){return i.compare(e,n)<0})),Xt=Ut(">",(function(t,e,n){return e>n}),(function(t,e,n,i){return i.compare(e,n)>0})),Ht=Ut("<=",(function(t,e,n){return e<=n}),(function(t,e,n,i){return i.compare(e,n)<=0})),Yt=Ut(">=",(function(t,e,n){return e>=n}),(function(t,e,n,i){return i.compare(e,n)>=0}));class Zt{constructor(t,e,n){this.type=v,this.locale=n,this.caseSensitive=t,this.diacriticSensitive=e}static parse(t,e){if(2!==t.length)return e.error("Expected one argument.");const n=t[1];if("object"!=typeof n||Array.isArray(n))return e.error("Collator options argument must be an object.");const i=e.parse(void 0!==n["case-sensitive"]&&n["case-sensitive"],1,p);if(!i)return null;const r=e.parse(void 0!==n["diacritic-sensitive"]&&n["diacritic-sensitive"],1,p);if(!r)return null;let s=null;return n.locale&&(s=e.parse(n.locale,1,f),!s)?null:new Zt(i,r,s)}evaluate(t){return new et(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)}eachChild(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)}outputDefined(){return!1}}class Kt{constructor(t,e,n,i,r){this.type=f,this.number=t,this.locale=e,this.currency=n,this.minFractionDigits=i,this.maxFractionDigits=r}static parse(t,e){if(3!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,d);if(!n)return null;const i=t[2];if("object"!=typeof i||Array.isArray(i))return e.error("NumberFormat options argument must be an object.");let r=null;if(i.locale&&(r=e.parse(i.locale,1,f),!r))return null;let s=null;if(i.currency&&(s=e.parse(i.currency,1,f),!s))return null;let o=null;if(i["min-fraction-digits"]&&(o=e.parse(i["min-fraction-digits"],1,d),!o))return null;let a=null;return i["max-fraction-digits"]&&(a=e.parse(i["max-fraction-digits"],1,d),!a)?null:new Kt(n,r,s,o,a)}evaluate(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))}eachChild(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)}outputDefined(){return!1}}class Jt{constructor(t){this.type=x,this.sections=t}static parse(t,e){if(t.length<2)return e.error("Expected at least one argument.");const n=t[1];if(!Array.isArray(n)&&"object"==typeof n)return e.error("First argument must be an image or text section.");const i=[];let r=!1;for(let n=1;n<=t.length-1;++n){const s=t[n];if(r&&"object"==typeof s&&!Array.isArray(s)){r=!1;let t=null;if(s["font-scale"]&&(t=e.parse(s["font-scale"],1,d),!t))return null;let n=null;if(s["text-font"]&&(n=e.parse(s["text-font"],1,S(f)),!n))return null;let o=null;if(s["text-color"]&&(o=e.parse(s["text-color"],1,g),!o))return null;let a=null;if(s["vertical-align"]){if("string"==typeof s["vertical-align"]&&!nt.includes(s["vertical-align"]))return e.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${s["vertical-align"]}' instead.`);if(a=e.parse(s["vertical-align"],1,f),!a)return null}const l=i[i.length-1];l.scale=t,l.font=n,l.textColor=o,l.verticalAlign=a}else{const s=e.parse(t[n],1,_);if(!s)return null;const o=s.type.kind;if("string"!==o&&"value"!==o&&"null"!==o&&"resolvedImage"!==o)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");r=!0,i.push({content:s,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Jt(i)}evaluate(t){return new rt(this.sections.map((e=>{const n=e.content.evaluate(t);return ft(n)===w?new it("",n,null,null,null,e.verticalAlign?e.verticalAlign.evaluate(t):null):new it(pt(n),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null,e.verticalAlign?e.verticalAlign.evaluate(t):null)})))}eachChild(t){for(const e of this.sections)t(e.content),e.scale&&t(e.scale),e.font&&t(e.font),e.textColor&&t(e.textColor),e.verticalAlign&&t(e.verticalAlign)}outputDefined(){return!1}}class Qt{constructor(t){this.type=w,this.input=t}static parse(t,e){if(2!==t.length)return e.error("Expected two arguments.");const n=e.parse(t[1],1,f);return n?new Qt(n):e.error("No image name provided.")}evaluate(t){const e=this.input.evaluate(t),n=ht.fromString(e);return n&&t.availableImages&&(n.available=t.availableImages.indexOf(e)>-1),n}eachChild(t){t(this.input)}outputDefined(){return!1}}class te{constructor(t){this.type=d,this.input=t}static parse(t,e){if(2!==t.length)return e.error(`Expected 1 argument, but found ${t.length-1} instead.`);const n=e.parse(t[1],1);return n?"array"!==n.type.kind&&"string"!==n.type.kind&&"value"!==n.type.kind?e.error(`Expected argument of type string or array, but found ${E(n.type)} instead.`):new te(n):null}evaluate(t){const e=this.input.evaluate(t);if("string"==typeof e)return[...e].length;if(Array.isArray(e))return e.length;throw new ot(`Expected value to be of type string or array, but found ${E(ft(e))} instead.`)}eachChild(t){t(this.input)}outputDefined(){return!1}}const ee=8192;function ne(t,e){const n=(180+t[0])/360;const i=(r=t[1],(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+r*Math.PI/360)))/360);var r;const s=Math.pow(2,e.z);return[Math.round(n*s*ee),Math.round(i*s*ee)]}function ie(t,e){const n=Math.pow(2,e.z),i=(t[0]/ee+e.x)/n,r=(t[1]/ee+e.y)/n;return[(o=i,360*o-180),(s=r,360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90)];var s,o}function re(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function se(t,e){return!(t[0]<=e[0])&&(!(t[2]>=e[2])&&(!(t[1]<=e[1])&&!(t[3]>=e[3])))}function oe(t,e,n){const i=t[0]-e[0],r=t[1]-e[1],s=t[0]-n[0],o=t[1]-n[1];return i*o-s*r==0&&i*s<=0&&r*o<=0}function ae(t,e,n,i){const r=[e[0]-t[0],e[1]-t[1]],s=[i[0]-n[0],i[1]-n[1]];return 0!=(o=s)[0]*(a=r)[1]-o[1]*a[0]&&!(!fe(t,e,n,i)||!fe(n,i,t,e));var o,a}function le(t,e,n){for(const i of n)for(let n=0;n<i.length-1;++n)if(ae(t,e,i[n],i[n+1]))return!0;return!1}function he(t,e,n=!1){let i=!1;for(const a of e)for(let e=0;e<a.length-1;e++){if(oe(t,a[e],a[e+1]))return n;r=t,s=a[e],o=a[e+1],s[1]>r[1]!=o[1]>r[1]&&r[0]<(o[0]-s[0])*(r[1]-s[1])/(o[1]-s[1])+s[0]&&(i=!i)}var r,s,o;return i}function ue(t,e){for(const n of e)if(he(t,n))return!0;return!1}function ce(t,e){for(const n of t)if(!he(n,e))return!1;for(let n=0;n<t.length-1;++n)if(le(t[n],t[n+1],e))return!1;return!0}function de(t,e){for(const n of e)if(ce(t,n))return!0;return!1}function fe(t,e,n,i){const r=t[0]-n[0],s=t[1]-n[1],o=e[0]-n[0],a=e[1]-n[1],l=i[0]-n[0],h=i[1]-n[1],u=r*h-l*s,c=o*h-l*a;return u>0&&c<0||u<0&&c>0}function pe(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=[];for(let i=0;i<t[r].length;i++){const o=ne(t[r][i],n);re(e,o),s.push(o)}i.push(s)}return i}function ge(t,e,n){const i=[];for(let r=0;r<t.length;r++){const s=pe(t[r],e,n);i.push(s)}return i}function me(t,e,n,i){if(t[0]<n[0]||t[0]>n[2]){const e=.5*i;let r=t[0]-n[0]>e?-i:n[0]-t[0]>e?i:0;0===r&&(r=t[0]-n[2]>e?-i:n[2]-t[0]>e?i:0),t[0]+=r}re(e,t)}function ye(t,e,n,i){const r=Math.pow(2,i.z)*ee,s=[i.x*ee,i.y*ee],o=[];for(const i of t)for(const t of i){const i=[t.x+s[0],t.y+s[1]];me(i,e,n,r),o.push(i)}return o}function _e(t,e,n,i){const r=Math.pow(2,i.z)*ee,s=[i.x*ee,i.y*ee],o=[];for(const n of t){const t=[];for(const i of n){const n=[i.x+s[0],i.y+s[1]];re(e,n),t.push(n)}o.push(t)}if(e[2]-e[0]<=r/2){(a=e)[0]=a[1]=1/0,a[2]=a[3]=-1/0;for(const t of o)for(const i of t)me(i,e,n,r)}var a;return o}class ve{constructor(t,e){this.type=p,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'within' expression requires exactly one argument, but found ${t.length-1} instead.`);if(dt(t[1])){const e=t[1];if("FeatureCollection"===e.type){const t=[];for(const n of e.features){const{type:e,coordinates:i}=n.geometry;"Polygon"===e&&t.push(i),"MultiPolygon"===e&&t.push(...i)}if(t.length){return new ve(e,{type:"MultiPolygon",coordinates:t})}}else if("Feature"===e.type){const t=e.geometry.type;if("Polygon"===t||"MultiPolygon"===t)return new ve(e,e.geometry)}else if("Polygon"===e.type||"MultiPolygon"===e.type)return new ve(e,e)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const s=pe(e.coordinates,i,r),o=ye(t.geometry(),n,i,r);if(!se(n,i))return!1;for(const t of o)if(!he(t,s))return!1}if("MultiPolygon"===e.type){const s=ge(e.coordinates,i,r),o=ye(t.geometry(),n,i,r);if(!se(n,i))return!1;for(const t of o)if(!ue(t,s))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=[1/0,1/0,-1/0,-1/0],i=[1/0,1/0,-1/0,-1/0],r=t.canonicalID();if("Polygon"===e.type){const s=pe(e.coordinates,i,r),o=_e(t.geometry(),n,i,r);if(!se(n,i))return!1;for(const t of o)if(!ce(t,s))return!1}if("MultiPolygon"===e.type){const s=ge(e.coordinates,i,r),o=_e(t.geometry(),n,i,r);if(!se(n,i))return!1;for(const t of o)if(!de(t,s))return!1}return!0}(t,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}class xe{constructor(t=[],e=(t,e)=>t<e?-1:t>e?1:0){if(this.data=t,this.length=this.data.length,this.compare=e,this.length>0)for(let t=(this.length>>1)-1;t>=0;t--)this._down(t)}push(t){this.data.push(t),this._up(this.length++)}pop(){if(0===this.length)return;const t=this.data[0],e=this.data.pop();return--this.length>0&&(this.data[0]=e,this._down(0)),t}peek(){return this.data[0]}_up(t){const{data:e,compare:n}=this,i=e[t];for(;t>0;){const r=t-1>>1,s=e[r];if(n(i,s)>=0)break;e[t]=s,t=r}e[t]=i}_down(t){const{data:e,compare:n}=this,i=this.length>>1,r=e[t];for(;t<i;){let i=1+(t<<1);const s=i+1;if(s<this.length&&n(e[s],e[i])<0&&(i=s),n(e[i],r)>=0)break;e[t]=e[i],t=i}e[t]=r}}function be(t,e,n=0,i=t.length-1,r=Ae){for(;i>n;){if(i-n>600){const s=i-n+1,o=e-n+1,a=Math.log(s),l=.5*Math.exp(2*a/3),h=.5*Math.sqrt(a*l*(s-l)/s)*(o-s/2<0?-1:1);be(t,e,Math.max(n,Math.floor(e-o*l/s+h)),Math.min(i,Math.floor(e+(s-o)*l/s+h)),r)}const s=t[e];let o=n,a=i;for(we(t,n,e),r(t[i],s)>0&&we(t,n,i);o<a;){for(we(t,o,a),o++,a--;r(t[o],s)<0;)o++;for(;r(t[a],s)>0;)a--}0===r(t[n],s)?we(t,n,a):(a++,we(t,a,i)),a<=e&&(n=a+1),e<=a&&(i=a-1)}}function we(t,e,n){const i=t[e];t[e]=t[n],t[n]=i}function Ae(t,e){return t<e?-1:t>e?1:0}function Se(t,e){return e.area-t.area}function Ee(t){let e=0;for(let n,i,r=0,s=t.length,o=s-1;r<s;o=r++)n=t[r],i=t[o],e+=(i.x-n.x)*(n.y+i.y);return e}const Te=1/298.257223563,Ce=Te*(2-Te),Me=Math.PI/180;class Le{constructor(t){const e=6378.137*Me*1e3,n=Math.cos(t*Me),i=1/(1-Ce*(1-n*n)),r=Math.sqrt(i);this.kx=e*r*n,this.ky=e*r*i*(1-Ce)}distance(t,e){const n=this.wrap(t[0]-e[0])*this.kx,i=(t[1]-e[1])*this.ky;return Math.sqrt(n*n+i*i)}pointOnLine(t,e){let n,i,r,s,o=1/0;for(let a=0;a<t.length-1;a++){let l=t[a][0],h=t[a][1],u=this.wrap(t[a+1][0]-l)*this.kx,c=(t[a+1][1]-h)*this.ky,d=0;0===u&&0===c||(d=(this.wrap(e[0]-l)*this.kx*u+(e[1]-h)*this.ky*c)/(u*u+c*c),d>1?(l=t[a+1][0],h=t[a+1][1]):d>0&&(l+=u/this.kx*d,h+=c/this.ky*d)),u=this.wrap(e[0]-l)*this.kx,c=(e[1]-h)*this.ky;const f=u*u+c*c;f<o&&(o=f,n=l,i=h,r=a,s=d)}return{point:[n,i],index:r,t:Math.max(0,Math.min(1,s))}}wrap(t){for(;t<-180;)t+=360;for(;t>180;)t-=360;return t}}function Pe(t,e){return e[0]-t[0]}function Re(t){return t[1]-t[0]+1}function Ie(t,e){return t[1]>=t[0]&&t[1]<e}function Ne(t,e){if(t[0]>t[1])return[null,null];const n=Re(t);if(e){if(2===n)return[t,null];const e=Math.floor(n/2);return[[t[0],t[0]+e],[t[0]+e,t[1]]]}if(1===n)return[t,null];const i=Math.floor(n/2)-1;return[[t[0],t[0]+i],[t[0]+i+1,t[1]]]}function Fe(t,e){if(!Ie(e,t.length))return[1/0,1/0,-1/0,-1/0];const n=[1/0,1/0,-1/0,-1/0];for(let i=e[0];i<=e[1];++i)re(n,t[i]);return n}function ke(t){const e=[1/0,1/0,-1/0,-1/0];for(const n of t)for(const t of n)re(e,t);return e}function De(t){return t[0]!==-1/0&&t[1]!==-1/0&&t[2]!==1/0&&t[3]!==1/0}function Oe(t,e,n){if(!De(t)||!De(e))return NaN;let i=0,r=0;return t[2]<e[0]&&(i=e[0]-t[2]),t[0]>e[2]&&(i=t[0]-e[2]),t[1]>e[3]&&(r=t[1]-e[3]),t[3]<e[1]&&(r=e[1]-t[3]),n.distance([0,0],[i,r])}function je(t,e,n){const i=n.pointOnLine(e,t);return n.distance(t,i.point)}function Ge(t,e,n,i,r){const s=Math.min(je(t,[n,i],r),je(e,[n,i],r)),o=Math.min(je(n,[t,e],r),je(i,[t,e],r));return Math.min(s,o)}function Be(t,e,n,i,r){if(!(Ie(e,t.length)&&Ie(i,n.length)))return 1/0;let s=1/0;for(let o=e[0];o<e[1];++o){const e=t[o],a=t[o+1];for(let t=i[0];t<i[1];++t){const i=n[t],o=n[t+1];if(ae(e,a,i,o))return 0;s=Math.min(s,Ge(e,a,i,o,r))}}return s}function ze(t,e,n,i,r){if(!(Ie(e,t.length)&&Ie(i,n.length)))return NaN;let s=1/0;for(let o=e[0];o<=e[1];++o)for(let e=i[0];e<=i[1];++e)if(s=Math.min(s,r.distance(t[o],n[e])),0===s)return s;return s}function qe(t,e,n){if(he(t,e,!0))return 0;let i=1/0;for(const r of e){const e=r[0],s=r[r.length-1];if(e!==s&&(i=Math.min(i,je(t,[s,e],n)),0===i))return i;const o=n.pointOnLine(r,t);if(i=Math.min(i,n.distance(t,o.point)),0===i)return i}return i}function Ue(t,e,n,i){if(!Ie(e,t.length))return NaN;for(let i=e[0];i<=e[1];++i)if(he(t[i],n,!0))return 0;let r=1/0;for(let s=e[0];s<e[1];++s){const e=t[s],o=t[s+1];for(const t of n)for(let n=0,s=t.length,a=s-1;n<s;a=n++){const s=t[a],l=t[n];if(ae(e,o,s,l))return 0;r=Math.min(r,Ge(e,o,s,l,i))}}return r}function We(t,e){for(const n of t)for(const t of n)if(he(t,e,!0))return!0;return!1}function $e(t,e,n,i=1/0){const r=ke(t),s=ke(e);if(i!==1/0&&Oe(r,s,n)>=i)return i;if(se(r,s)){if(We(t,e))return 0}else if(We(e,t))return 0;let o=1/0;for(const i of t)for(let t=0,r=i.length,s=r-1;t<r;s=t++){const r=i[s],a=i[t];for(const t of e)for(let e=0,i=t.length,s=i-1;e<i;s=e++){const i=t[s],l=t[e];if(ae(r,a,i,l))return 0;o=Math.min(o,Ge(r,a,i,l,n))}}return o}function Ve(t,e,n,i,r,s){if(!s)return;const o=Oe(Fe(i,s),r,n);o<e&&t.push([o,s,[0,0]])}function Xe(t,e,n,i,r,s,o){if(!s||!o)return;const a=Oe(Fe(i,s),Fe(r,o),n);a<e&&t.push([a,s,o])}function He(t,e,n,i,r=1/0){let s=Math.min(i.distance(t[0],n[0][0]),r);if(0===s)return s;const o=new xe([[0,[0,t.length-1],[0,0]]],Pe),a=ke(n);for(;o.length>0;){const r=o.pop();if(r[0]>=s)continue;const l=r[1],h=e?50:100;if(Re(l)<=h){if(!Ie(l,t.length))return NaN;if(e){const e=Ue(t,l,n,i);if(isNaN(e)||0===e)return e;s=Math.min(s,e)}else for(let e=l[0];e<=l[1];++e){const r=qe(t[e],n,i);if(s=Math.min(s,r),0===s)return 0}}else{const n=Ne(l,e);Ve(o,s,i,t,a,n[0]),Ve(o,s,i,t,a,n[1])}}return s}function Ye(t,e,n,i,r,s=1/0){let o=Math.min(s,r.distance(t[0],n[0]));if(0===o)return o;const a=new xe([[0,[0,t.length-1],[0,n.length-1]]],Pe);for(;a.length>0;){const s=a.pop();if(s[0]>=o)continue;const l=s[1],h=s[2],u=e?50:100,c=i?50:100;if(Re(l)<=u&&Re(h)<=c){if(!Ie(l,t.length)&&Ie(h,n.length))return NaN;let s;if(e&&i)s=Be(t,l,n,h,r),o=Math.min(o,s);else if(e&&!i){const e=t.slice(l[0],l[1]+1);for(let t=h[0];t<=h[1];++t)if(s=je(n[t],e,r),o=Math.min(o,s),0===o)return o}else if(!e&&i){const e=n.slice(h[0],h[1]+1);for(let n=l[0];n<=l[1];++n)if(s=je(t[n],e,r),o=Math.min(o,s),0===o)return o}else s=ze(t,l,n,h,r),o=Math.min(o,s)}else{const s=Ne(l,e),u=Ne(h,i);Xe(a,o,r,t,n,s[0],u[0]),Xe(a,o,r,t,n,s[0],u[1]),Xe(a,o,r,t,n,s[1],u[0]),Xe(a,o,r,t,n,s[1],u[1])}}return o}function Ze(t,e){const n=t.geometry();if(0===n.length||0===n[0].length)return NaN;const i=function(t,e){if(t.length<=1)return[t];const n=[];let i,r;for(const e of t){const t=Ee(e);0!==t&&(e.area=Math.abs(t),void 0===r&&(r=t<0),r===t<0?(i&&n.push(i),i=[e]):i.push(e))}if(i&&n.push(i),e>1)for(let t=0;t<n.length;t++)n[t].length<=e||(be(n[t],e,1,n[t].length-1,Se),n[t]=n[t].slice(0,e));return n}(n,0).map((e=>e.map((e=>e.map((e=>ie([e.x,e.y],t.canonical))))))),r=new Le(i[0][0][0][1]);let s=1/0;for(const t of e)for(const e of i){switch(t.type){case"Point":s=Math.min(s,He([t.coordinates],!1,e,r,s));break;case"LineString":s=Math.min(s,He(t.coordinates,!0,e,r,s));break;case"Polygon":s=Math.min(s,$e(e,t.coordinates,r,s))}if(0===s)return s}return s}function Ke(t){return"MultiPolygon"===t.type?t.coordinates.map((t=>({type:"Polygon",coordinates:t}))):"MultiLineString"===t.type?t.coordinates.map((t=>({type:"LineString",coordinates:t}))):"MultiPoint"===t.type?t.coordinates.map((t=>({type:"Point",coordinates:t}))):[t]}class Je{constructor(t,e){this.type=d,this.geojson=t,this.geometries=e}static parse(t,e){if(2!==t.length)return e.error(`'distance' expression requires exactly one argument, but found ${t.length-1} instead.`);if(dt(t[1])){const e=t[1];if("FeatureCollection"===e.type)return new Je(e,e.features.map((t=>Ke(t.geometry))).flat());if("Feature"===e.type)return new Je(e,Ke(e.geometry));if("type"in e&&"coordinates"in e)return new Je(e,Ke(e))}return e.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){const n=t.geometry(),i=n.flat().map((e=>ie([e.x,e.y],t.canonical)));if(0===n.length)return NaN;const r=new Le(i[0][1]);let s=1/0;for(const t of e){switch(t.type){case"Point":s=Math.min(s,Ye(i,!1,[t.coordinates],!1,r,s));break;case"LineString":s=Math.min(s,Ye(i,!1,t.coordinates,!0,r,s));break;case"Polygon":s=Math.min(s,He(i,!1,t.coordinates,r,s))}if(0===s)return s}return s}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){const n=t.geometry(),i=n.flat().map((e=>ie([e.x,e.y],t.canonical)));if(0===n.length)return NaN;const r=new Le(i[0][1]);let s=1/0;for(const t of e){switch(t.type){case"Point":s=Math.min(s,Ye(i,!0,[t.coordinates],!1,r,s));break;case"LineString":s=Math.min(s,Ye(i,!0,t.coordinates,!0,r,s));break;case"Polygon":s=Math.min(s,He(i,!0,t.coordinates,r,s))}if(0===s)return s}return s}(t,this.geometries);if("Polygon"===t.geometryType())return Ze(t,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}const Qe={"==":Wt,"!=":$t,">":Xt,"<":Vt,">=":Yt,"<=":Ht,array:yt,at:Et,boolean:yt,case:Lt,coalesce:Bt,collator:Zt,format:Jt,image:Qt,in:Tt,"index-of":Ct,interpolate:jt,"interpolate-hcl":jt,"interpolate-lab":jt,length:te,let:At,literal:gt,match:Mt,number:yt,"number-format":Kt,object:yt,slice:Pt,step:It,string:yt,"to-boolean":vt,"to-color":vt,"to-number":vt,"to-string":vt,var:St,within:ve,distance:Je};class tn{constructor(t,e,n,i){this.name=t,this.type=e,this._evaluate=n,this.args=i}evaluate(t){return this._evaluate(t,this.args)}eachChild(t){this.args.forEach(t)}outputDefined(){return!1}static parse(t,e){const n=t[0],i=tn.definitions[n];if(!i)return e.error(`Unknown expression "${n}". If you wanted a literal array, use ["literal", [...]].`,0);const r=Array.isArray(i)?i[0]:i.type,s=Array.isArray(i)?[[i[1],i[2]]]:i.overloads,o=s.filter((([e])=>!Array.isArray(e)||e.length===t.length-1));let a=null;for(const[i,s]of o){a=new wt(e.registry,on,e.path,null,e.scope);const o=[];let l=!1;for(let e=1;e<t.length;e++){const n=t[e],r=Array.isArray(i)?i[e-1]:i.type,s=a.parse(n,1+o.length,r);if(!s){l=!0;break}o.push(s)}if(!l)if(Array.isArray(i)&&i.length!==o.length)a.error(`Expected ${i.length} arguments, but found ${o.length} instead.`);else{for(let t=0;t<o.length;t++){const e=Array.isArray(i)?i[t]:i.type,n=o[t];a.concat(t+1).checkSubtype(e,n.type)}if(0===a.errors.length)return new tn(n,r,s,o)}}if(1===o.length)e.errors.push(...a.errors);else{const n=(o.length?o:s).map((([t])=>{return e=t,Array.isArray(e)?`(${e.map(E).join(", ")})`:`(${E(e.type)}...)`;var e})).join(" | "),i=[];for(let n=1;n<t.length;n++){const r=e.parse(t[n],1+i.length);if(!r)return null;i.push(E(r.type))}e.error(`Expected arguments of type ${n}, but found (${i.join(", ")}) instead.`)}return null}static register(t,e){tn.definitions=e;for(const n in e)t[n]=tn}}function en(t,[e,n,i,r]){e=e.evaluate(t),n=n.evaluate(t),i=i.evaluate(t);const s=r?r.evaluate(t):1,o=ct(e,n,i,s);if(o)throw new ot(o);return new tt(e/255,n/255,i/255,s,!1)}function nn(t,e){return t in e}function rn(t,e){const n=e[t];return void 0===n?null:n}function sn(t){return{type:t}}function on(t){if(t instanceof St)return on(t.boundExpression);if(t instanceof tn&&"error"===t.name)return!1;if(t instanceof Zt)return!1;if(t instanceof ve)return!1;if(t instanceof Je)return!1;const e=t instanceof vt||t instanceof yt;let n=!0;return t.eachChild((t=>{n=e?n&&on(t):n&&t instanceof gt})),!!n&&(an(t)&&hn(t,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"]))}function an(t){if(t instanceof tn){if("get"===t.name&&1===t.args.length)return!1;if("feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;if(/^filter-/.test(t.name))return!1}if(t instanceof ve)return!1;if(t instanceof Je)return!1;let e=!0;return t.eachChild((t=>{e&&!an(t)&&(e=!1)})),e}function ln(t){if(t instanceof tn&&"feature-state"===t.name)return!1;let e=!0;return t.eachChild((t=>{e&&!ln(t)&&(e=!1)})),e}function hn(t,e){if(t instanceof tn&&e.indexOf(t.name)>=0)return!1;let n=!0;return t.eachChild((t=>{n&&!hn(t,e)&&(n=!1)})),n}function un(t){return{result:"success",value:t}}function cn(t){return{result:"error",value:t}}function dn(t){return"data-driven"===t["property-type"]||"cross-faded-data-driven"===t["property-type"]}function fn(t){return!!t.expression&&t.expression.parameters.indexOf("zoom")>-1}function pn(t){return!!t.expression&&t.expression.interpolated}function gn(t){return t instanceof Number?"number":t instanceof String?"string":t instanceof Boolean?"boolean":Array.isArray(t)?"array":null===t?"null":typeof t}function mn(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}tn.register(Qe,{error:[{kind:"error"},[f],(t,[e])=>{throw new ot(e.evaluate(t))}],typeof:[f,[_],(t,[e])=>E(ft(e.evaluate(t)))],"to-rgba":[S(d,4),[g],(t,[e])=>{const[n,i,r,s]=e.evaluate(t).rgb;return[255*n,255*i,255*r,s]}],rgb:[g,[d,d,d],en],rgba:[g,[d,d,d,d],en],has:{type:p,overloads:[[[f],(t,[e])=>nn(e.evaluate(t),t.properties())],[[f,y],(t,[e,n])=>nn(e.evaluate(t),n.evaluate(t))]]},get:{type:_,overloads:[[[f],(t,[e])=>rn(e.evaluate(t),t.properties())],[[f,y],(t,[e,n])=>rn(e.evaluate(t),n.evaluate(t))]]},"feature-state":[_,[f],(t,[e])=>rn(e.evaluate(t),t.featureState||{})],properties:[y,[],t=>t.properties()],"geometry-type":[f,[],t=>t.geometryType()],id:[_,[],t=>t.id()],zoom:[d,[],t=>t.globals.zoom],"heatmap-density":[d,[],t=>t.globals.heatmapDensity||0],"line-progress":[d,[],t=>t.globals.lineProgress||0],accumulated:[_,[],t=>void 0===t.globals.accumulated?null:t.globals.accumulated],"+":[d,sn(d),(t,e)=>{let n=0;for(const i of e)n+=i.evaluate(t);return n}],"*":[d,sn(d),(t,e)=>{let n=1;for(const i of e)n*=i.evaluate(t);return n}],"-":{type:d,overloads:[[[d,d],(t,[e,n])=>e.evaluate(t)-n.evaluate(t)],[[d],(t,[e])=>-e.evaluate(t)]]},"/":[d,[d,d],(t,[e,n])=>e.evaluate(t)/n.evaluate(t)],"%":[d,[d,d],(t,[e,n])=>e.evaluate(t)%n.evaluate(t)],ln2:[d,[],()=>Math.LN2],pi:[d,[],()=>Math.PI],e:[d,[],()=>Math.E],"^":[d,[d,d],(t,[e,n])=>Math.pow(e.evaluate(t),n.evaluate(t))],sqrt:[d,[d],(t,[e])=>Math.sqrt(e.evaluate(t))],log10:[d,[d],(t,[e])=>Math.log(e.evaluate(t))/Math.LN10],ln:[d,[d],(t,[e])=>Math.log(e.evaluate(t))],log2:[d,[d],(t,[e])=>Math.log(e.evaluate(t))/Math.LN2],sin:[d,[d],(t,[e])=>Math.sin(e.evaluate(t))],cos:[d,[d],(t,[e])=>Math.cos(e.evaluate(t))],tan:[d,[d],(t,[e])=>Math.tan(e.evaluate(t))],asin:[d,[d],(t,[e])=>Math.asin(e.evaluate(t))],acos:[d,[d],(t,[e])=>Math.acos(e.evaluate(t))],atan:[d,[d],(t,[e])=>Math.atan(e.evaluate(t))],min:[d,sn(d),(t,e)=>Math.min(...e.map((e=>e.evaluate(t))))],max:[d,sn(d),(t,e)=>Math.max(...e.map((e=>e.evaluate(t))))],abs:[d,[d],(t,[e])=>Math.abs(e.evaluate(t))],round:[d,[d],(t,[e])=>{const n=e.evaluate(t);return n<0?-Math.round(-n):Math.round(n)}],floor:[d,[d],(t,[e])=>Math.floor(e.evaluate(t))],ceil:[d,[d],(t,[e])=>Math.ceil(e.evaluate(t))],"filter-==":[p,[f,_],(t,[e,n])=>t.properties()[e.value]===n.value],"filter-id-==":[p,[_],(t,[e])=>t.id()===e.value],"filter-type-==":[p,[f],(t,[e])=>t.geometryType()===e.value],"filter-<":[p,[f,_],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<r}],"filter-id-<":[p,[_],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<i}],"filter->":[p,[f,_],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>r}],"filter-id->":[p,[_],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>i}],"filter-<=":[p,[f,_],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i<=r}],"filter-id-<=":[p,[_],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n<=i}],"filter->=":[p,[f,_],(t,[e,n])=>{const i=t.properties()[e.value],r=n.value;return typeof i==typeof r&&i>=r}],"filter-id->=":[p,[_],(t,[e])=>{const n=t.id(),i=e.value;return typeof n==typeof i&&n>=i}],"filter-has":[p,[_],(t,[e])=>e.value in t.properties()],"filter-has-id":[p,[],t=>null!==t.id()&&void 0!==t.id()],"filter-type-in":[p,[S(f)],(t,[e])=>e.value.indexOf(t.geometryType())>=0],"filter-id-in":[p,[S(_)],(t,[e])=>e.value.indexOf(t.id())>=0],"filter-in-small":[p,[f,S(_)],(t,[e,n])=>n.value.indexOf(t.properties()[e.value])>=0],"filter-in-large":[p,[f,S(_)],(t,[e,n])=>function(t,e,n,i){for(;n<=i;){const r=n+i>>1;if(e[r]===t)return!0;e[r]>t?i=r-1:n=r+1}return!1}(t.properties()[e.value],n.value,0,n.value.length-1)],all:{type:p,overloads:[[[p,p],(t,[e,n])=>e.evaluate(t)&&n.evaluate(t)],[sn(p),(t,e)=>{for(const n of e)if(!n.evaluate(t))return!1;return!0}]]},any:{type:p,overloads:[[[p,p],(t,[e,n])=>e.evaluate(t)||n.evaluate(t)],[sn(p),(t,e)=>{for(const n of e)if(n.evaluate(t))return!0;return!1}]]},"!":[p,[p],(t,[e])=>!e.evaluate(t)],"is-supported-script":[p,[f],(t,[e])=>{const n=t.globals&&t.globals.isSupportedScript;return!n||n(e.evaluate(t))}],upcase:[f,[f],(t,[e])=>e.evaluate(t).toUpperCase()],downcase:[f,[f],(t,[e])=>e.evaluate(t).toLowerCase()],concat:[f,sn(_),(t,e)=>e.map((e=>pt(e.evaluate(t)))).join("")],"resolved-locale":[f,[v],(t,[e])=>e.evaluate(t).resolvedLocale()]});class yn{constructor(t,e){var n;this.expression=t,this._warningHistory={},this._evaluator=new bt,this._defaultValue=e?"color"===(n=e).type&&mn(n.default)?new tt(0,0,0,0):"color"===n.type?tt.parse(n.default)||null:"padding"===n.type?st.parse(n.default)||null:"variableAnchorOffsetCollection"===n.type?lt.parse(n.default)||null:"projectionDefinition"===n.type?ut.parse(n.default)||null:void 0===n.default?null:n.default:null,this._enumValues=e&&"enum"===e.type?e.values:null}evaluateWithoutErrorHandling(t,e,n,i,r,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=n,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s,this.expression.evaluate(this._evaluator)}evaluate(t,e,n,i,r,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=n||null,this._evaluator.canonical=i,this._evaluator.availableImages=r||null,this._evaluator.formattedSection=s||null;try{const t=this.expression.evaluate(this._evaluator);if(null==t||"number"==typeof t&&t!=t)return this._defaultValue;if(this._enumValues&&!(t in this._enumValues))throw new ot(`Expected value to be one of ${Object.keys(this._enumValues).map((t=>JSON.stringify(t))).join(", ")}, but found ${JSON.stringify(t)} instead.`);return t}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}}}function _n(t){return Array.isArray(t)&&t.length>0&&"string"==typeof t[0]&&t[0]in Qe}function vn(t,e){const n=new wt(Qe,on,[],e?function(t){const e={color:g,string:f,number:d,enum:f,boolean:p,formatted:x,padding:b,projectionDefinition:m,resolvedImage:w,variableAnchorOffsetCollection:A};if("array"===t.type)return S(e[t.value]||_,t.length);return e[t.type]}(e):void 0),i=n.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return i?un(new yn(i,e)):cn(n.errors)}class xn{constructor(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!ln(e.expression)}evaluateWithoutErrorHandling(t,e,n,i,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,s)}evaluate(t,e,n,i,r,s){return this._styleExpression.evaluate(t,e,n,i,r,s)}}class bn{constructor(t,e,n,i){this.kind=t,this.zoomStops=n,this._styleExpression=e,this.isStateDependent="camera"!==t&&!ln(e.expression),this.interpolationType=i}evaluateWithoutErrorHandling(t,e,n,i,r,s){return this._styleExpression.evaluateWithoutErrorHandling(t,e,n,i,r,s)}evaluate(t,e,n,i,r,s){return this._styleExpression.evaluate(t,e,n,i,r,s)}interpolationFactor(t,e,n){return this.interpolationType?jt.interpolationFactor(this.interpolationType,t,e,n):0}}function wn(t,e){const n=vn(t,e);if("error"===n.result)return n;const i=n.value.expression,r=an(i);if(!r&&!dn(e))return cn([new h("","data expressions not supported")]);const s=hn(i,["zoom"]);if(!s&&!fn(e))return cn([new h("","zoom expressions not supported")]);const o=An(i);if(!o&&!s)return cn([new h("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(o instanceof h)return cn([o]);if(o instanceof jt&&!pn(e))return cn([new h("",'"interpolate" expressions cannot be used with this property')]);if(!o)return un(new xn(r?"constant":"source",n.value));const a=o instanceof jt?o.interpolation:void 0;return un(new bn(r?"camera":"composite",n.value,o.labels,a))}function An(t){let e=null;if(t instanceof At)e=An(t.result);else if(t instanceof Bt){for(const n of t.args)if(e=An(n),e)break}else(t instanceof It||t instanceof jt)&&t.input instanceof tn&&"zoom"===t.input.name&&(e=t);return e instanceof h||t.eachChild((t=>{const n=An(t);n instanceof h?e=n:!e&&n?e=new h("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):e&&n&&e!==n&&(e=new h("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),e}function Sn(t){if(!0===t||!1===t)return!0;if(!Array.isArray(t)||0===t.length)return!1;switch(t[0]){case"has":return t.length>=2&&"$id"!==t[1]&&"$type"!==t[1];case"in":return t.length>=3&&("string"!=typeof t[1]||Array.isArray(t[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==t.length||Array.isArray(t[1])||Array.isArray(t[2]);case"any":case"all":for(const e of t.slice(1))if(!Sn(e)&&"boolean"!=typeof e)return!1;return!0;default:return!0}}const En={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Tn(t){if(null==t)return{filter:()=>!0,needGeometry:!1};Sn(t)||(t=Ln(t));const e=vn(t,En);if("error"===e.result)throw new Error(e.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return{filter:(t,n,i)=>e.value.evaluate(t,n,{},i),needGeometry:Mn(t)}}function Cn(t,e){return t<e?-1:t>e?1:0}function Mn(t){if(!Array.isArray(t))return!1;if("within"===t[0]||"distance"===t[0])return!0;for(let e=1;e<t.length;e++)if(Mn(t[e]))return!0;return!1}function Ln(t){if(!t)return!0;const e=t[0];if(t.length<=1)return"any"!==e;var n;return"=="===e?Pn(t[1],t[2],"=="):"!="===e?Nn(Pn(t[1],t[2],"==")):"<"===e||">"===e||"<="===e||">="===e?Pn(t[1],t[2],e):"any"===e?(n=t.slice(1),["any"].concat(n.map(Ln))):"all"===e?["all"].concat(t.slice(1).map(Ln)):"none"===e?["all"].concat(t.slice(1).map(Ln).map(Nn)):"in"===e?Rn(t[1],t.slice(2)):"!in"===e?Nn(Rn(t[1],t.slice(2))):"has"===e?In(t[1]):"!has"!==e||Nn(In(t[1]))}function Pn(t,e,n){switch(t){case"$type":return[`filter-type-${n}`,e];case"$id":return[`filter-id-${n}`,e];default:return[`filter-${n}`,t,e]}}function Rn(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:return e.length>200&&!e.some((t=>typeof t!=typeof e[0]))?["filter-in-large",t,["literal",e.sort(Cn)]]:["filter-in-small",t,["literal",e]]}}function In(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function Nn(t){return["!",t]}function Fn(t){return"object"==typeof t?["literal",t]:t}function kn(t,e){let n=t.stops;if(!n)return function(t,e){const n=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",n]:n;if("enum"===e.type)return["match",n,Object.keys(e.values),n,t.default];{const i=["color"===e.type?"to-color":e.type,n,Fn(t.default)];return"array"===e.type&&i.splice(1,0,e.value,e.length||null),i}}(t,e);const i=n&&"object"==typeof n[0][0],r=i||void 0!==t.property,s=i||!r;return n=n.map((t=>!r&&e.tokens&&"string"==typeof t[1]?[t[0],qn(t[1])]:[t[0],Fn(t[1])])),i?function(t,e,n){const i={},r={},s=[];for(let e=0;e<n.length;e++){const o=n[e],a=o[0].zoom;void 0===i[a]&&(i[a]={zoom:a,type:t.type,property:t.property,default:t.default},r[a]=[],s.push(a)),r[a].push([o[0].value,o[1]])}const o=zn({},e);if("exponential"===o){const n=[Dn(t),["linear"],["zoom"]];for(const t of s){Bn(n,t,jn(i[t],e,r[t]),!1)}return n}{const t=["step",["zoom"]];for(const n of s){Bn(t,n,jn(i[n],e,r[n]),!0)}return Gn(t),t}}(t,e,n):s?function(t,e,n,i=["zoom"]){const r=zn(t,e);let s,o=!1;if("interval"===r)s=["step",i],o=!0;else{if("exponential"!==r)throw new Error(`Unknown zoom function type "${r}"`);{const e=void 0!==t.base?t.base:1;s=[Dn(t),1===e?["linear"]:["exponential",e],i]}}for(const t of n)Bn(s,t[0],t[1],o);return Gn(s),s}(t,e,n):jn(t,e,n)}function Dn(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function On(t,e){const n=Fn((i=t.default,r=e.default,void 0!==i?i:void 0!==r?r:void 0));var i,r;return void 0===n&&"resolvedImage"===e.type?"":n}function jn(t,e,n){const i=zn(t,e),r=["get",t.property];if("categorical"===i&&"boolean"==typeof n[0][0]){const i=["case"];for(const t of n)i.push(["==",r,t[0]],t[1]);return i.push(On(t,e)),i}if("categorical"===i){const i=["match",r];for(const t of n)Bn(i,t[0],t[1],!1);return i.push(On(t,e)),i}if("interval"===i){const e=["step",["number",r]];for(const t of n)Bn(e,t[0],t[1],!0);return Gn(e),void 0===t.default?e:["case",["==",["typeof",r],"number"],e,Fn(t.default)]}if("exponential"===i){const e=void 0!==t.base?t.base:1,i=[Dn(t),1===e?["linear"]:["exponential",e],["number",r]];for(const t of n)Bn(i,t[0],t[1],!1);return void 0===t.default?i:["case",["==",["typeof",r],"number"],i,Fn(t.default)]}throw new Error(`Unknown property function type ${i}`)}function Gn(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function Bn(t,e,n,i){t.length>3&&e===t[t.length-2]||(i&&2===t.length||t.push(e),t.push(n))}function zn(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}function qn(t){const e=["concat"],n=/{([^{}]+)}/g;let i=0;for(let r=n.exec(t);null!==r;r=n.exec(t)){const s=t.slice(i,n.lastIndex-r[0].length);i=n.lastIndex,s.length>0&&e.push(s),e.push(["get",r[1]])}if(1===e.length)return t;if(i<t.length)e.push(t.slice(i));else if(2===e.length)return["to-string",e[1]];return e}function Un(t){const e=t.key,n=t.value;return n?[new a(e,n,"constants have been deprecated as of v8")]:[]}function Wn(t){return t instanceof Number||t instanceof String||t instanceof Boolean?t.valueOf():t}function $n(t){if(Array.isArray(t))return t.map($n);if(t instanceof Object&&!(t instanceof Number||t instanceof String||t instanceof Boolean)){const e={};for(const n in t)e[n]=$n(t[n]);return e}return Wn(t)}function Vn(t){const e=t.key,n=t.value,i=t.valueSpec||{},r=t.objectElementValidators||{},s=t.style,o=t.styleSpec,l=t.validateSpec;let h=[];const u=gn(n);if("object"!==u)return[new a(e,n,`object expected, ${u} found`)];for(const t in n){const u=t.split(".")[0],c=i[u]||i["*"];let d;if(r[u])d=r[u];else if(i[u])d=l;else if(r["*"])d=r["*"];else{if(!i["*"]){h.push(new a(e,n[t],`unknown property "${t}"`));continue}d=l}h=h.concat(d({key:(e?`${e}.`:e)+t,value:n[t],valueSpec:c,style:s,styleSpec:o,object:n,objectKey:t,validateSpec:l},n))}for(const t in i)r[t]||i[t].required&&void 0===i[t].default&&void 0===n[t]&&h.push(new a(e,n,`missing required property "${t}"`));return h}function Xn(t){const e=t.value,n=t.valueSpec,i=t.validateSpec,r=t.style,s=t.styleSpec,o=t.key,l=t.arrayElementValidator||i;if("array"!==gn(e))return[new a(o,e,`array expected, ${gn(e)} found`)];if(n.length&&e.length!==n.length)return[new a(o,e,`array length ${n.length} expected, length ${e.length} found`)];if(n["min-length"]&&e.length<n["min-length"])return[new a(o,e,`array length at least ${n["min-length"]} expected, length ${e.length} found`)];let h={type:n.value,values:n.values};s.$version<7&&(h.function=n.function),"object"===gn(n.value)&&(h=n.value);let u=[];for(let n=0;n<e.length;n++)u=u.concat(l({array:e,arrayIndex:n,value:e[n],valueSpec:h,validateSpec:t.validateSpec,style:r,styleSpec:s,key:`${o}[${n}]`}));return u}function Hn(t){const e=t.key,n=t.value,i=t.valueSpec;let r=gn(n);return"number"===r&&n!=n&&(r="NaN"),"number"!==r?[new a(e,n,`number expected, ${r} found`)]:"minimum"in i&&n<i.minimum?[new a(e,n,`${n} is less than the minimum value ${i.minimum}`)]:"maximum"in i&&n>i.maximum?[new a(e,n,`${n} is greater than the maximum value ${i.maximum}`)]:[]}function Yn(t){const e=t.valueSpec,n=Wn(t.value.type);let i,r,s,o={};const l="categorical"!==n&&void 0===t.value.property,h=!l,u="array"===gn(t.value.stops)&&"array"===gn(t.value.stops[0])&&"object"===gn(t.value.stops[0][0]),c=Vn({key:t.key,value:t.value,valueSpec:t.styleSpec.function,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{stops:function(t){if("identity"===n)return[new a(t.key,t.value,'identity function may not have a "stops" property')];let e=[];const i=t.value;e=e.concat(Xn({key:t.key,value:i,valueSpec:t.valueSpec,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,arrayElementValidator:d})),"array"===gn(i)&&0===i.length&&e.push(new a(t.key,i,"array must have at least one stop"));return e},default:function(t){return t.validateSpec({key:t.key,value:t.value,valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec})}}});return"identity"===n&&l&&c.push(new a(t.key,t.value,'missing required property "property"')),"identity"===n||t.value.stops||c.push(new a(t.key,t.value,'missing required property "stops"')),"exponential"===n&&t.valueSpec.expression&&!pn(t.valueSpec)&&c.push(new a(t.key,t.value,"exponential functions not supported")),t.styleSpec.$version>=8&&(h&&!dn(t.valueSpec)?c.push(new a(t.key,t.value,"property functions not supported")):l&&!fn(t.valueSpec)&&c.push(new a(t.key,t.value,"zoom functions not supported"))),"categorical"!==n&&!u||void 0!==t.value.property||c.push(new a(t.key,t.value,'"property" property is required')),c;function d(t){let n=[];const i=t.value,l=t.key;if("array"!==gn(i))return[new a(l,i,`array expected, ${gn(i)} found`)];if(2!==i.length)return[new a(l,i,`array length 2 expected, length ${i.length} found`)];if(u){if("object"!==gn(i[0]))return[new a(l,i,`object expected, ${gn(i[0])} found`)];if(void 0===i[0].zoom)return[new a(l,i,"object stop key must have zoom")];if(void 0===i[0].value)return[new a(l,i,"object stop key must have value")];if(s&&s>Wn(i[0].zoom))return[new a(l,i[0].zoom,"stop zoom values must appear in ascending order")];Wn(i[0].zoom)!==s&&(s=Wn(i[0].zoom),r=void 0,o={}),n=n.concat(Vn({key:`${l}[0]`,value:i[0],valueSpec:{zoom:{}},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec,objectElementValidators:{zoom:Hn,value:f}}))}else n=n.concat(f({key:`${l}[0]`,value:i[0],valueSpec:{},validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec},i));return _n($n(i[1]))?n.concat([new a(`${l}[1]`,i[1],"expressions are not allowed in function stops.")]):n.concat(t.validateSpec({key:`${l}[1]`,value:i[1],valueSpec:e,validateSpec:t.validateSpec,style:t.style,styleSpec:t.styleSpec}))}function f(t,s){const l=gn(t.value),h=Wn(t.value),u=null!==t.value?t.value:s;if(i){if(l!==i)return[new a(t.key,u,`${l} stop domain type must match previous stop domain type ${i}`)]}else i=l;if("number"!==l&&"string"!==l&&"boolean"!==l)return[new a(t.key,u,"stop domain value must be a number, string, or boolean")];if("number"!==l&&"categorical"!==n){let i=`number expected, ${l} found`;return dn(e)&&void 0===n&&(i+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new a(t.key,u,i)]}return"categorical"!==n||"number"!==l||isFinite(h)&&Math.floor(h)===h?"categorical"!==n&&"number"===l&&void 0!==r&&h<r?[new a(t.key,u,"stop domain values must appear in ascending order")]:(r=h,"categorical"===n&&h in o?[new a(t.key,u,"stop domain values must be unique")]:(o[h]=!0,[])):[new a(t.key,u,`integer expected, found ${h}`)]}}function Zn(t){const e=("property"===t.expressionContext?wn:vn)($n(t.value),t.valueSpec);if("error"===e.result)return e.value.map((e=>new a(`${t.key}${e.key}`,t.value,e.message)));const n=e.value.expression||e.value._styleExpression.expression;if("property"===t.expressionContext&&"text-font"===t.propertyKey&&!n.outputDefined())return[new a(t.key,t.value,`Invalid data expression for "${t.propertyKey}". Output values must be contained as literals within the expression.`)];if("property"===t.expressionContext&&"layout"===t.propertyType&&!ln(n))return[new a(t.key,t.value,'"feature-state" data expressions are not supported with layout properties.')];if("filter"===t.expressionContext&&!ln(n))return[new a(t.key,t.value,'"feature-state" data expressions are not supported with filters.')];if(t.expressionContext&&0===t.expressionContext.indexOf("cluster")){if(!hn(n,["zoom","feature-state"]))return[new a(t.key,t.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if("cluster-initial"===t.expressionContext&&!an(n))return[new a(t.key,t.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Kn(t){const e=t.key,n=t.value,i=t.valueSpec,r=[];return Array.isArray(i.values)?-1===i.values.indexOf(Wn(n))&&r.push(new a(e,n,`expected one of [${i.values.join(", ")}], ${JSON.stringify(n)} found`)):-1===Object.keys(i.values).indexOf(Wn(n))&&r.push(new a(e,n,`expected one of [${Object.keys(i.values).join(", ")}], ${JSON.stringify(n)} found`)),r}function Jn(t){return Sn($n(t.value))?Zn(l({},t,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Qn(t)}function Qn(t){const e=t.value,n=t.key;if("array"!==gn(e))return[new a(n,e,`array expected, ${gn(e)} found`)];const i=t.styleSpec;let r,s=[];if(e.length<1)return[new a(n,e,"filter array must have at least 1 element")];switch(s=s.concat(Kn({key:`${n}[0]`,value:e[0],valueSpec:i.filter_operator,style:t.style,styleSpec:t.styleSpec})),Wn(e[0])){case"<":case"<=":case">":case">=":e.length>=2&&"$type"===Wn(e[1])&&s.push(new a(n,e,`"$type" cannot be use with operator "${e[0]}"`));case"==":case"!=":3!==e.length&&s.push(new a(n,e,`filter array for operator "${e[0]}" must have 3 elements`));case"in":case"!in":e.length>=2&&(r=gn(e[1]),"string"!==r&&s.push(new a(`${n}[1]`,e[1],`string expected, ${r} found`)));for(let o=2;o<e.length;o++)r=gn(e[o]),"$type"===Wn(e[1])?s=s.concat(Kn({key:`${n}[${o}]`,value:e[o],valueSpec:i.geometry_type,style:t.style,styleSpec:t.styleSpec})):"string"!==r&&"number"!==r&&"boolean"!==r&&s.push(new a(`${n}[${o}]`,e[o],`string, number, or boolean expected, ${r} found`));break;case"any":case"all":case"none":for(let i=1;i<e.length;i++)s=s.concat(Qn({key:`${n}[${i}]`,value:e[i],style:t.style,styleSpec:t.styleSpec}));break;case"has":case"!has":r=gn(e[1]),2!==e.length?s.push(new a(n,e,`filter array for "${e[0]}" operator must have 2 elements`)):"string"!==r&&s.push(new a(`${n}[1]`,e[1],`string expected, ${r} found`))}return s}function ti(t,e){const n=t.key,i=t.validateSpec,r=t.style,s=t.styleSpec,o=t.value,l=t.objectKey,h=s[`${e}_${t.layerType}`];if(!h)return[];const u=l.match(/^(.*)-transition$/);if("paint"===e&&u&&h[u[1]]&&h[u[1]].transition)return i({key:n,value:o,valueSpec:s.transition,style:r,styleSpec:s});const c=t.valueSpec||h[l];if(!c)return[new a(n,o,`unknown property "${l}"`)];let d;if("string"===gn(o)&&dn(c)&&!c.tokens&&(d=/^{([^}]+)}$/.exec(o)))return[new a(n,o,`"${l}" does not support interpolation syntax\nUse an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(d[1])} }\`.`)];const f=[];return"symbol"===t.layerType&&("text-field"===l&&r&&!r.glyphs&&f.push(new a(n,o,'use of "text-field" requires a style "glyphs" property')),"text-font"===l&&mn($n(o))&&"identity"===Wn(o.type)&&f.push(new a(n,o,'"text-font" does not support identity functions'))),f.concat(i({key:t.key,value:o,valueSpec:c,style:r,styleSpec:s,expressionContext:"property",propertyType:e,propertyKey:l}))}function ei(t){return ti(t,"paint")}function ni(t){return ti(t,"layout")}function ii(t){let e=[];const n=t.value,i=t.key,r=t.style,s=t.styleSpec;n.type||n.ref||e.push(new a(i,n,'either "type" or "ref" is required'));let o=Wn(n.type);const h=Wn(n.ref);if(n.id){const s=Wn(n.id);for(let o=0;o<t.arrayIndex;o++){const t=r.layers[o];Wn(t.id)===s&&e.push(new a(i,n.id,`duplicate layer id "${n.id}", previously used at line ${t.id.__line__}`))}}if("ref"in n){let t;["type","source","source-layer","filter","layout"].forEach((t=>{t in n&&e.push(new a(i,n[t],`"${t}" is prohibited for ref layers`))})),r.layers.forEach((e=>{Wn(e.id)===h&&(t=e)})),t?t.ref?e.push(new a(i,n.ref,"ref cannot reference another ref layer")):o=Wn(t.type):e.push(new a(i,n.ref,`ref layer "${h}" not found`))}else if("background"!==o)if(n.source){const t=r.sources&&r.sources[n.source],s=t&&Wn(t.type);t?"vector"===s&&"raster"===o?e.push(new a(i,n.source,`layer "${n.id}" requires a raster source`)):"raster-dem"!==s&&"hillshade"===o?e.push(new a(i,n.source,`layer "${n.id}" requires a raster-dem source`)):"raster"===s&&"raster"!==o?e.push(new a(i,n.source,`layer "${n.id}" requires a vector source`)):"vector"!==s||n["source-layer"]?"raster-dem"===s&&"hillshade"!==o?e.push(new a(i,n.source,"raster-dem source can only be used with layer type 'hillshade'.")):"line"!==o||!n.paint||!n.paint["line-gradient"]||"geojson"===s&&t.lineMetrics||e.push(new a(i,n,`layer "${n.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):e.push(new a(i,n,`layer "${n.id}" must specify a "source-layer"`)):e.push(new a(i,n.source,`source "${n.source}" not found`))}else e.push(new a(i,n,'missing required property "source"'));return e=e.concat(Vn({key:i,value:n,valueSpec:s.layer,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*"(){return[]},type(){return t.validateSpec({key:`${i}.type`,value:n.type,valueSpec:s.layer.type,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,object:n,objectKey:"type"})},filter:Jn,layout(t){return Vn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*"(t){return ni(l({layerType:o},t))}}})},paint(t){return Vn({layer:n,key:t.key,value:t.value,style:t.style,styleSpec:t.styleSpec,validateSpec:t.validateSpec,objectElementValidators:{"*"(t){return ei(l({layerType:o},t))}}})}}})),e}function ri(t){const e=t.value,n=t.key,i=gn(e);return"string"!==i?[new a(n,e,`string expected, ${i} found`)]:[]}const si={promoteId:function({key:t,value:e}){if("string"===gn(e))return ri({key:t,value:e});{const n=[];for(const i in e)n.push(...ri({key:`${t}.${i}`,value:e[i]}));return n}}};function oi(t){const e=t.value,n=t.key,i=t.styleSpec,r=t.style,s=t.validateSpec;if(!e.type)return[new a(n,e,'"type" is required')];const o=Wn(e.type);let l;switch(o){case"vector":case"raster":return l=Vn({key:n,value:e,valueSpec:i[`source_${o.replace("-","_")}`],style:t.style,styleSpec:i,objectElementValidators:si,validateSpec:s}),l;case"raster-dem":return l=function(t){var e;const n=null!==(e=t.sourceName)&&void 0!==e?e:"",i=t.value,r=t.styleSpec,s=r.source_raster_dem,o=t.style;let l=[];const h=gn(i);if(void 0===i)return l;if("object"!==h)return l.push(new a("source_raster_dem",i,`object expected, ${h} found`)),l;const u="custom"===Wn(i.encoding),c=["redFactor","greenFactor","blueFactor","baseShift"],d=t.value.encoding?`"${t.value.encoding}"`:"Default";for(const e in i)!u&&c.includes(e)?l.push(new a(e,i[e],`In "${n}": "${e}" is only valid when "encoding" is set to "custom". ${d} encoding found`)):s[e]?l=l.concat(t.validateSpec({key:e,value:i[e],valueSpec:s[e],validateSpec:t.validateSpec,style:o,styleSpec:r})):l.push(new a(e,i[e],`unknown property "${e}"`));return l}({sourceName:n,value:e,style:t.style,styleSpec:i,validateSpec:s}),l;case"geojson":if(l=Vn({key:n,value:e,valueSpec:i.source_geojson,style:r,styleSpec:i,validateSpec:s,objectElementValidators:si}),e.cluster)for(const t in e.clusterProperties){const[i,r]=e.clusterProperties[t],o="string"==typeof i?[i,["accumulated"],["get",t]]:i;l.push(...Zn({key:`${n}.${t}.map`,value:r,validateSpec:s,expressionContext:"cluster-map"})),l.push(...Zn({key:`${n}.${t}.reduce`,value:o,validateSpec:s,expressionContext:"cluster-reduce"}))}return l;case"video":return Vn({key:n,value:e,valueSpec:i.source_video,style:r,validateSpec:s,styleSpec:i});case"image":return Vn({key:n,value:e,valueSpec:i.source_image,style:r,validateSpec:s,styleSpec:i});case"canvas":return[new a(n,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Kn({key:`${n}.type`,value:e.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]},style:r,validateSpec:s,styleSpec:i})}}function ai(t){const e=t.value,n=t.styleSpec,i=n.light,r=t.style;let s=[];const o=gn(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new a("light",e,`object expected, ${o} found`)]),s;for(const o in e){const l=o.match(/^(.*)-transition$/);s=l&&i[l[1]]&&i[l[1]].transition?s.concat(t.validateSpec({key:o,value:e[o],valueSpec:n.transition,validateSpec:t.validateSpec,style:r,styleSpec:n})):i[o]?s.concat(t.validateSpec({key:o,value:e[o],valueSpec:i[o],validateSpec:t.validateSpec,style:r,styleSpec:n})):s.concat([new a(o,e[o],`unknown property "${o}"`)])}return s}function li(t){const e=t.value,n=t.styleSpec,i=n.sky,r=t.style,s=gn(e);if(void 0===e)return[];if("object"!==s)return[new a("sky",e,`object expected, ${s} found`)];let o=[];for(const s in e)o=i[s]?o.concat(t.validateSpec({key:s,value:e[s],valueSpec:i[s],style:r,styleSpec:n})):o.concat([new a(s,e[s],`unknown property "${s}"`)]);return o}function hi(t){const e=t.value,n=t.styleSpec,i=n.terrain,r=t.style;let s=[];const o=gn(e);if(void 0===e)return s;if("object"!==o)return s=s.concat([new a("terrain",e,`object expected, ${o} found`)]),s;for(const o in e)s=i[o]?s.concat(t.validateSpec({key:o,value:e[o],valueSpec:i[o],validateSpec:t.validateSpec,style:r,styleSpec:n})):s.concat([new a(o,e[o],`unknown property "${o}"`)]);return s}function ui(t){let e=[];const n=t.value,i=t.key;if(Array.isArray(n)){const r=[],s=[];for(const o in n){n[o].id&&r.includes(n[o].id)&&e.push(new a(i,n,`all the sprites' ids must be unique, but ${n[o].id} is duplicated`)),r.push(n[o].id),n[o].url&&s.includes(n[o].url)&&e.push(new a(i,n,`all the sprites' URLs must be unique, but ${n[o].url} is duplicated`)),s.push(n[o].url);const l={id:{type:"string",required:!0},url:{type:"string",required:!0}};e=e.concat(Vn({key:`${i}[${o}]`,value:n[o],valueSpec:l,validateSpec:t.validateSpec}))}return e}return ri({key:i,value:n})}const ci={"*"(){return[]},array:Xn,boolean:function(t){const e=t.value,n=t.key,i=gn(e);return"boolean"!==i?[new a(n,e,`boolean expected, ${i} found`)]:[]},number:Hn,color:function(t){const e=t.key,n=t.value,i=gn(n);return"string"!==i?[new a(e,n,`color expected, ${i} found`)]:tt.parse(String(n))?[]:[new a(e,n,`color expected, "${n}" found`)]},constants:Un,enum:Kn,filter:Jn,function:Yn,layer:ii,object:Vn,source:oi,light:ai,sky:li,terrain:hi,projection:function(t){const e=t.value,n=t.styleSpec,i=n.projection,r=t.style,s=gn(e);if(void 0===e)return[];if("object"!==s)return[new a("projection",e,`object expected, ${s} found`)];let o=[];for(const s in e)o=i[s]?o.concat(t.validateSpec({key:s,value:e[s],valueSpec:i[s],style:r,styleSpec:n})):o.concat([new a(s,e[s],`unknown property "${s}"`)]);return o},projectionDefinition:function(t){const e=t.key;let n=t.value;n=n instanceof String?n.valueOf():n;const i=gn(n);return"array"!==i||function(t){return Array.isArray(t)&&3===t.length&&"string"==typeof t[0]&&"string"==typeof t[1]&&"number"==typeof t[2]}(n)||function(t){if(["interpolate","step","literal"].includes(t[0]))return!0;return!1}(n)?["array","string"].includes(i)?[]:[new a(e,n,`projection expected, invalid type "${i}" found`)]:[new a(e,n,`projection expected, invalid array ${JSON.stringify(n)} found`)]},string:ri,formatted:function(t){return 0===ri(t).length?[]:Zn(t)},resolvedImage:function(t){return 0===ri(t).length?[]:Zn(t)},padding:function(t){const e=t.key,n=t.value;if("array"===gn(n)){if(n.length<1||n.length>4)return[new a(e,n,`padding requires 1 to 4 values; ${n.length} values found`)];const i={type:"number"};let r=[];for(let s=0;s<n.length;s++)r=r.concat(t.validateSpec({key:`${e}[${s}]`,value:n[s],validateSpec:t.validateSpec,valueSpec:i}));return r}return Hn({key:e,value:n,valueSpec:{}})},variableAnchorOffsetCollection:function(t){const e=t.key,n=t.value,i=gn(n),r=t.styleSpec;if("array"!==i||n.length<1||n.length%2!=0)return[new a(e,n,"variableAnchorOffsetCollection requires a non-empty array of even length")];let s=[];for(let i=0;i<n.length;i+=2)s=s.concat(Kn({key:`${e}[${i}]`,value:n[i],valueSpec:r.layout_symbol["text-anchor"]})),s=s.concat(Xn({key:`${e}[${i+1}]`,value:n[i+1],valueSpec:{length:2,value:"number"},validateSpec:t.validateSpec,style:t.style,styleSpec:r}));return s},sprite:ui};function di(t){const e=t.value,n=t.valueSpec,i=t.styleSpec;if(t.validateSpec=di,n.expression&&mn(Wn(e)))return Yn(t);if(n.expression&&_n($n(e)))return Zn(t);if(n.type&&ci[n.type])return ci[n.type](t);return Vn(l({},t,{valueSpec:n.type?i[n.type]:n}))}function fi(t){const e=t.value,n=t.key,i=ri(t);return i.length||(-1===e.indexOf("{fontstack}")&&i.push(new a(n,e,'"glyphs" url must include a "{fontstack}" token')),-1===e.indexOf("{range}")&&i.push(new a(n,e,'"glyphs" url must include a "{range}" token'))),i}function pi(t,e=i){let n=[];return n=n.concat(di({key:"",value:t,valueSpec:e.$root,styleSpec:e,style:t,validateSpec:di,objectElementValidators:{glyphs:fi,"*"(){return[]}}})),t.constants&&(n=n.concat(Un({key:"constants",value:t.constants,style:t,styleSpec:e,validateSpec:di}))),mi(n)}function gi(t){return function(e){return t({...e,validateSpec:di})}}function mi(t){return[].concat(t).sort(((t,e)=>t.line-e.line))}function yi(t){return function(...e){return mi(t.apply(this,e))}}pi.source=yi(gi(oi)),pi.sprite=yi(gi(ui)),pi.glyphs=yi(gi(fi)),pi.light=yi(gi(ai)),pi.sky=yi(gi(li)),pi.terrain=yi(gi(hi)),pi.layer=yi(gi(ii)),pi.filter=yi(gi(Jn)),pi.paintProperty=yi(gi(ei)),pi.layoutProperty=yi(gi(ni));const _i=i;var vi={thin:100,hairline:100,"ultra-light":200,"extra-light":200,light:300,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,"extra-bold":800,"ultra-bold":800,heavy:900,black:900,"heavy-black":900,fat:900,poster:900,"ultra-black":950,"extra-black":950},xi=" ",bi=/(italic|oblique)$/i,wi={};function Ai(t,e,n){var i=wi[t];if(!i){Array.isArray(t)||(t=[t]);for(var r,s,o=400,a="normal",l=[],h=0,u=t.length;h<u;++h){var c=t[h].split(" "),d=c[c.length-1].toLowerCase();for(var f in"normal"==d||"italic"==d||"oblique"==d?(a=s?a:d,s=!0,c.pop(),d=c[c.length-1].toLowerCase()):bi.test(d)&&(d=d.replace(bi,""),a=s?a:c[c.length-1].replace(d,""),s=!0),vi){var p=c.length>1?c[c.length-2].toLowerCase():"";if(d==f||d==f.replace("-","")||p+"-"+d==f){o=r?o:vi[f],c.pop(),p&&f.startsWith(p)&&c.pop();break}}r||"number"!=typeof d||(o=d,r=!0);var g=c.join(xi).replace("Klokantech Noto Sans","Noto Sans");-1!==g.indexOf(xi)&&(g='"'+g+'"'),l.push(g)}i=wi[t]=[a,o,l]}return i[0]+xi+i[1]+xi+e+"px"+(n?"/"+n:"")+xi+i[2]}var Si=n(95702),Ei=n(71442),Ti=n(21133),Ci=n(38276),Mi=n(75052),Li=n(44689),Pi=n(88292),Ri=n(59194),Ii=n(27678),Ni=n(684),Fi=n(30942),ki=n(37759);const Di="https://api.mapbox.com";function Oi(t){const e="mapbox://";return 0!==t.indexOf(e)?"":t.slice(9)}function ji(t,e){const n=Oi(t);if(!n)return decodeURI(new URL(t,location.href).href);const i="styles/";if(0!==n.indexOf(i))throw new Error(`unexpected style url: ${t}`);const r=n.slice(7);return`${Di}/styles/v1/${r}?&access_token=${e}`}const Gi=["a","b","c","d"];function Bi(t,e,n,i){const r=new URL(t,i||location.href),s=Oi(t);if(!s)return e?(r.searchParams.has(n)||r.searchParams.set(n,e),[decodeURI(r.href)]):[decodeURI(r.href)];if("mapbox.satellite"===s){const t=window.devicePixelRatio>=1.5?"@2x":"";return[`https://api.mapbox.com/v4/${s}/{z}/{x}/{y}${t}.webp?access_token=${e}`]}return Gi.map((t=>`https://${t}.tiles.mapbox.com/v4/${s}/{z}/{x}/{y}.vector.pbf?access_token=${e}`))}const zi={},qi={};let Ui=0;function Wi(t){return t.id||(t.id=Ui++),t.id}function $i(t){let e=zi[t.id];return e||(e={},zi[Wi(t)]=e),e}function Vi(t){return t*Math.PI/180}const Xi=function(){const t=[];for(let e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function Hi(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);const n=document.createElement("canvas");return n.width=t,n.height=e,n}function Yi(t,e){let n=0;const i=e.length;for(;n<i;++n){if(e[n]<t&&n+1<i){const i=e[n]/e[n+1];return n+Math.log(e[n]/t)/Math.log(i)}}return i-1}function Zi(t,e){const n=Math.floor(t),i=Math.pow(2,t-n);return e[n]/i}const Ki={};function Ji(t,e,n={},i){if(e in Ki)return i&&(i.url=Ki[e][0].url),Ki[e][1];const r=n.transformRequest&&n.transformRequest(e,t)||e,s=function(t){return delete Ki[e],Promise.reject(new Error("Error fetching source "+e))},o=function(t){return delete Ki[e],t.ok?t.json():Promise.reject(new Error("Error fetching source "+e))},a=(0,Si.hq)((()=>r)).then((t=>t instanceof Response?(i&&(i.url=t.url),o(t)):(t instanceof Request||(t=new Request(t)),t.headers.get("Accept")||t.headers.set("Accept","application/json"),i&&(i.url=t.url),fetch(t).then(o).catch(s)))).catch(s);return Ki[e]=[r,a],a}function Qi(t,e){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return Ji("Style",t=ji(t,e.accessToken),e);try{const e=JSON.parse(t);return Promise.resolve(e)}catch(t){return Promise.reject(t)}}const tr={};function er(t,e,n={}){const i=[e,JSON.stringify(t)].toString();let r=tr[i];if(!r||n.transformRequest){let s;n.transformRequest&&(s=(t,e)=>{const i=n.transformRequest&&n.transformRequest(e,"Tiles")||e;if(t instanceof Ni.A)t.setLoader(((e,n,r)=>{const s=function(n){n.arrayBuffer().then((n=>{const i=t.getFormat().readFeatures(n,{extent:e,featureProjection:r});t.setFeatures(i)}))};(0,Si.hq)((()=>i)).then((e=>{if(e instanceof Response)return s(e);fetch(e).then(s).catch((e=>t.setState(Fi.A.ERROR)))})).catch((e=>t.setState(Fi.A.ERROR)))}));else{const e=t.getImage();(0,Si.hq)((()=>i)).then((n=>{if("string"==typeof n)return void(e.src=n);const i=t=>t.blob().then((t=>{const n=URL.createObjectURL(t);e.addEventListener("load",(()=>URL.revokeObjectURL(n))),e.addEventListener("error",(()=>URL.revokeObjectURL(n))),e.src=n}));if(n instanceof Response)return i(n);fetch(n).then(i).catch((e=>t.setState(Fi.A.ERROR)))})).catch((e=>t.setState(Fi.A.ERROR)))}});const o=t.url;if(o&&!t.tiles){const i=Bi(o,n.accessToken,n.accessTokenParam||"access_token",e||location.href);if(o.startsWith("mapbox://"))r=Promise.resolve({tileJson:Object.assign({},t,{url:void 0,tiles:i}),tileLoadFunction:s});else{const t={};r=Ji("Source",i[0],n,t).then((function(e){return e.tiles=e.tiles.map((function(i){return"tms"===e.scheme&&(i=i.replace("{y}","{-y}")),Bi(i,n.accessToken,n.accessTokenParam||"access_token",t.url)[0]})),Promise.resolve({tileJson:e,tileLoadFunction:s})}))}}else t=Object.assign({},t,{tiles:t.tiles.map((function(i){return"tms"===t.scheme&&(i=i.replace("{y}","{-y}")),Bi(i,n.accessToken,n.accessTokenParam||"access_token",e||location.href)[0]}))}),r=Promise.resolve({tileJson:Object.assign({},t),tileLoadFunction:s});tr[i]=r}return r}function nr(t,e,n,i){const r=[2*n*e.pixelRatio+e.width,2*n*e.pixelRatio+e.height],s=Hi(r[0],r[1]),o=s.getContext("2d");o.drawImage(t,e.x,e.y,e.width,e.height,n*e.pixelRatio,n*e.pixelRatio,e.width,e.height);const a=o.getImageData(0,0,r[0],r[1]);o.globalCompositeOperation="destination-over",o.fillStyle=`rgba(${255*i.r},${255*i.g},${255*i.b},${i.a})`;const l=a.data;for(let t=0,i=a.width;t<i;++t)for(let r=0,s=a.height;r<s;++r){l[4*(r*i+t)+3]>0&&o.arc(t,r,n*e.pixelRatio,0,2*Math.PI)}return o.fill(),s}function ir(t,e,n){const i=Math.max(0,Math.min(1,(n-t)/(e-t)));return i*i*(3-2*i)}function rr(t,e,n){const i=Hi(e.width,e.height),r=i.getContext("2d");r.drawImage(t,e.x,e.y,e.width,e.height,0,0,e.width,e.height);const s=r.getImageData(0,0,e.width,e.height),o=s.data;for(let t=0,e=s.width;t<e;++t)for(let i=0,r=s.height;i<r;++i){const r=4*(i*e+t),s=.75,a=.1,l=ir(s-a,s+a,o[r+3]/255);l>0?(o[r+0]=Math.round(255*n.r*l),o[r+1]=Math.round(255*n.g*l),o[r+2]=Math.round(255*n.b*l),o[r+3]=Math.round(255*l)):o[r+3]=0}return r.putImageData(s,0,0),i}const sr=Array(256).join(" ");function or(t,e){if(e>=.05){let n="";const i=t.split("\n"),r=sr.slice(0,Math.round(e/.1));for(let t=0,e=i.length;t<e;++t)t>0&&(n+="\n"),n+=i[t].split("").join(r);return n}return t}let ar;function lr(){return ar||(ar=Hi(1,1).getContext("2d")),ar}function hr(t,e){return lr().measureText(t).width+(t.length-1)*e}const ur={};function cr(t,e,n,i){if(-1!==t.indexOf("\n")){const r=t.split("\n"),s=[];for(let t=0,o=r.length;t<o;++t)s.push(cr(r[t],e,n,i));return s.join("\n")}const r=n+","+e+","+t+","+i;let s=ur[r];if(!s){const o=t.split(" ");if(o.length>1){const t=lr();t.font=e;const r=t.measureText("M").width*n;let a="";const l=[];for(let t=0,e=o.length;t<e;++t){const e=o[t],n=a+(a?" ":"")+e;hr(n,i)<=r?a=n:(a&&l.push(a),a=e)}a&&l.push(a);for(let t=0,e=l.length;t<e&&e>1;++t){const n=l[t];if(hr(n,i)<.35*r){const r=t>0?hr(l[t-1],i):1/0,s=t<e-1?hr(l[t+1],i):1/0;l.splice(t,1),e-=1,r<s?(l[t-1]+=" "+n,t-=1):l[t]=n+" "+l[t]}}for(let t=0,e=l.length-1;t<e;++t){const n=l[t],s=l[t+1];if(hr(n,i)>.7*r&&hr(s,i)<.6*r){const o=n.split(" "),a=o.pop();hr(a,i)<.2*r&&(l[t]=o.join(" "),l[t+1]=a+" "+s),e-=1}}s=l.join("\n")}else s=t;s=or(s,i),ur[r]=s}return s}const dr=/font-family: ?([^;]*);/,fr=/("|')/g;let pr;function gr(t){if(!pr){pr={};const t=document.styleSheets;for(let e=0,n=t.length;e<n;++e){const n=t[e];try{const t=n.rules||n.cssRules;if(t)for(let e=0,n=t.length;e<n;++e){const n=t[e];if(5==n.type){const t=n.cssText.match(dr);pr[t[1].replace(fr,"")]=!0}}}catch{}}}return t in pr}const mr={};const yr={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},_r={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},vr=function(t,e){const n=wn(t,e);if("error"===n.result)throw new Error(n.value.map((t=>`${t.key}: ${t.message}`)).join(", "));return n.value},xr={},br={zoom:0};let wr,Ar;function Sr(t,e,n,i,r,s,o){const a=t.id;s||(s={},console.warn("No functionCache provided to getValue()")),s[a]||(s[a]={});const l=s[a];if(!l[n]){let i=(t[e]||xr)[n];const r=_i[`${e}_${t.type}`][n];void 0===i&&(i=r.default);let s=_n(i);if(!s&&mn(i)&&(i=kn(i,r),s=!0),s){const t=vr(i,r);l[n]=t.evaluate.bind(t)}else"color"==r.type&&(i=tt.parse(i)),l[n]=function(){return i}}return br.zoom=i,l[n](br,r,o)}function Er(t,e,n,i,r){if(!Sr(t,"layout",`${i}-allow-overlap`,e,n,r))return"declutter";return Sr(t,"layout",`${i}-ignore-placement`,e,n,r)?"none":"obstacle"}function Tr(t,e,n,i,r){return r||console.warn("No filterCache provided to evaluateFilter()"),t in r||(r[t]=Tn(e).filter),br.zoom=i,r[t](br,n)}let Cr=!1;function Mr(t,e){if(t){if(!Cr&&(0===t.a||0===e))return;const n=t.a;return e=void 0===e?1:e,0===n?"transparent":"rgba("+Math.round(255*t.r/n)+","+Math.round(255*t.g/n)+","+Math.round(255*t.b/n)+","+n*e+")"}return t}const Lr=/\{[^{}}]*\}/g;function Pr(t,e){return t.replace(Lr,(function(t){return e[t.slice(1,-1)]||""}))}let Rr=!1;const Ir={};function Nr(t,e,n,i=Xi,r=void 0,s=void 0,a=void 0,l=void 0){if("string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw new Error("glStyle version 8 required.");let h,u,c;Ir[function(t,e){return Wi(t)+"."+(0,ki.v6)(e)}(e,t)]=Array.from(arguments),s&&(0,Si.hq)((()=>s)).then((async e=>{let n;if("undefined"!=typeof Image){const i=new Image;if("string"==typeof e)i.crossOrigin="anonymous",i.src=e;else{let t;e instanceof Request?t=await fetch(e):e instanceof Response&&(t=e);const r=await t.blob();n=URL.createObjectURL(r),i.src=n}i.addEventListener("load",(function e(){i.removeEventListener("load",e),h=i,u=[i.width,i.height],t.changed(),n&&URL.revokeObjectURL(n)})),i.addEventListener("error",(function t(){URL.revokeObjectURL(n),i.removeEventListener("error",t)}))}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){const t=self;t.postMessage({action:"loadImage",src:e}),t.addEventListener("message",(function(t){"imageLoaded"===t.data.action&&t.data.src===e&&(h=t.data.image,u=[h.width,h.height])}))}}));const d=o(e.layers),f={},p=[],g={},m={},y=$i(e),_=function(t){let e=qi[t.id];return e||(e={},qi[Wi(t)]=e),e}(e);let v;for(let t=0,i=d.length;t<i;++t){const i=d[t],r=i.id;if("string"==typeof n&&i.source==n||Array.isArray(n)&&-1!==n.indexOf(r)){const n=i["source-layer"];if(v){if(i.source!==v)throw new Error(`Layer "${r}" does not use source "${v}`)}else{v=i.source;const t=e.sources[v];if(!t)throw new Error(`Source "${v}" is not defined`);const n=t.type;if("vector"!==n&&"geojson"!==n)throw new Error(`Source "${v}" is not of type "vector" or "geojson", but "${n}"`)}let s=f[n];s||(s=[],f[n]=s),s.push({layer:i,index:t}),p.push(r)}}const x=new Li.A,b=new Ci.A,w=[],A=function(n,s,o){const d=n.getProperties(),p=f[d.layer];if(!p)return;let v=i.indexOf(s);-1==v&&(v=Yi(s,i));const A=yr[n.getGeometry().getType()],S={id:n.getId(),properties:d,type:A},E=t.get("mapbox-featurestate")[n.getId()];let T,C=-1;for(let i=0,f=p.length;i<f;++i){const f=p[i],M=f.layer,L=M.id;if(void 0!==o&&o!==L)continue;const P=M.layout||xr,R=M.paint||xr;if("none"===P.visibility||"minzoom"in M&&v<M.minzoom||"maxzoom"in M&&v>=M.maxzoom)continue;const I=M.filter;if(!I||Tr(L,I,S,v,_)){let i,o,p,_,L,I;T=M;const N=f.index;if(3==A&&("fill"==M.type||"fill-extrusion"==M.type))if(o=Sr(M,"paint",M.type+"-opacity",v,S,y,E),M.type+"-pattern"in R){const t=Sr(M,"paint",M.type+"-pattern",v,S,y,E);if(t){const e="string"==typeof t?Pr(t,d):t.toString();if(h&&r&&r[e]){++C,I=w[C],I&&I.getFill()&&!I.getStroke()&&!I.getText()||(I=new Pi.Ay({fill:new Ci.A}),w[C]=I),p=I.getFill(),I.setZIndex(N);const t=e+"."+o;let n=m[t];if(!n){const i=r[e],s=Hi(i.width,i.height),a=s.getContext("2d");a.globalAlpha=o,a.drawImage(h,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n=a.createPattern(s,"repeat"),m[t]=n}p.setColor(n)}}}else i=Mr(Sr(M,"paint",M.type+"-color",v,S,y,E),o),M.type+"-outline-color"in R&&(L=Mr(Sr(M,"paint",M.type+"-outline-color",v,S,y,E),o)),L||(L=i),(i||L)&&(++C,I=w[C],(!I||i&&!I.getFill()||!i&&I.getFill()||L&&!I.getStroke()||!L&&I.getStroke()||I.getText())&&(I=new Pi.Ay({fill:i?new Ci.A:void 0,stroke:L?new Li.A:void 0}),w[C]=I),i&&(p=I.getFill(),p.setColor(i)),L&&(_=I.getStroke(),_.setColor(L),_.setWidth(.5)),I.setZIndex(N));if(1!=A&&"line"==M.type){i="line-pattern"in R?void 0:Mr(Sr(M,"paint","line-color",v,S,y,E),Sr(M,"paint","line-opacity",v,S,y,E));const t=Sr(M,"paint","line-width",v,S,y,E);i&&t>0&&(++C,I=w[C],I&&I.getStroke()&&!I.getFill()&&!I.getText()||(I=new Pi.Ay({stroke:new Li.A}),w[C]=I),_=I.getStroke(),_.setLineCap(Sr(M,"layout","line-cap",v,S,y,E)),_.setLineJoin(Sr(M,"layout","line-join",v,S,y,E)),_.setMiterLimit(Sr(M,"layout","line-miter-limit",v,S,y,E)),_.setColor(i),_.setWidth(t),_.setLineDash(R["line-dasharray"]?Sr(M,"paint","line-dasharray",v,S,y,E).map((function(e){return e*t})):null),I.setZIndex(N))}let F,k,D,O,j,G,B,z,q,U=!1,W=null,$=0;if((1==A||2==A)&&"icon-image"in P){const e=Sr(M,"layout","icon-image",v,S,y,E);if(e){let i;F="string"==typeof e?Pr(e,d):e.toString();const o=l?l(t,F):void 0;if(h&&r&&r[F]||o){const t=Sr(M,"layout","icon-rotation-alignment",v,S,y,E);if(2==A){const e=n.getGeometry();if(e.getFlatMidpoint||e.getFlatMidpoints){const n=e.getExtent();if(Math.sqrt(Math.max(Math.pow((n[2]-n[0])/s,2),Math.pow((n[3]-n[1])/s,2)))>150){const n="MultiLineString"===e.getType()?e.getFlatMidpoints():e.getFlatMidpoint();Ar||(wr=[NaN,NaN],Ar=new Ei.Ay("Point",wr,[],2,{},void 0)),i=Ar,wr[0]=n[0],wr[1]=n[1];if("line"===Sr(M,"layout","symbol-placement",v,S,y,E)&&"map"===t){const t=e.getStride(),i=e.getFlatCoordinates();for(let e=0,r=i.length-t;e<r;e+=t){const r=i[e],s=i[e+1],o=i[e+t],a=i[e+t+1],l=Math.min(r,o),h=Math.max(r,o),u=n[0],c=(a-s)*(u-r)-(o-r)*(n[1]-s);if(Math.abs(c)<.001&&u<=h&&u>=l){$=Math.atan2(s-a,o-r);break}}}}}}if(2!==A||i){const e=Sr(M,"layout","icon-size",v,S,y,E),n=void 0!==R["icon-color"]?Sr(M,"paint","icon-color",v,S,y,E):null;if(!n||0!==n.a){const i=Sr(M,"paint","icon-halo-color",v,S,y,E),s=Sr(M,"paint","icon-halo-width",v,S,y,E);let a=`${F}.${e}.${s}.${i}`;if(null!==n&&(a+=`.${n}`),k=g[a],!k){const l=Er(M,v,S,"icon",y);let d;"icon-offset"in P&&(d=Sr(M,"layout","icon-offset",v,S,y,E).slice(0),d[0]*=e,d[1]*=-e);let f=n?[255*n.r,255*n.g,255*n.b,n.a]:void 0;if(o){const n={color:f,rotateWithView:"map"===t,displacement:d,declutterMode:l,scale:e};"string"==typeof o?n.src=o:(n.img=o,n.imgSize=[o.width,o.height]),k=new Mi.A(n)}else{const o=r[F];let a,p,g;s?o.sdf?(a=nr(rr(h,o,n||[0,0,0,1]),{x:0,y:0,width:o.width,height:o.height,pixelRatio:o.pixelRatio},s,i),f=void 0):a=nr(h,o,s,i):(o.sdf?(c||(c=rr(h,{x:0,y:0,width:u[0],height:u[1]},{r:1,g:1,b:1,a:1})),a=c):a=h,p=[o.width,o.height],g=[o.x,o.y]),k=new Mi.A({color:f,img:a,imgSize:u,size:p,offset:g,rotateWithView:"map"===t,scale:e/o.pixelRatio,displacement:d,declutterMode:l})}g[a]=k}}k&&(++C,I=w[C],I&&I.getImage()&&!I.getFill()&&!I.getStroke()||(I=new Pi.Ay,w[C]=I),I.setGeometry(i),k.setRotation($+Vi(Sr(M,"layout","icon-rotate",v,S,y,E))),k.setOpacity(Sr(M,"paint","icon-opacity",v,S,y,E)),k.setAnchor(_r[Sr(M,"layout","icon-anchor",v,S,y,E)]),I.setImage(k),W=I.getText(),I.setText(void 0),I.setZIndex(N),U=!0,D=!1)}else D=!0}}}if(1==A&&"circle"===M.type){++C,I=w[C],I&&I.getImage()&&!I.getFill()&&!I.getStroke()||(I=new Pi.Ay,w[C]=I);const t="circle-radius"in R?Sr(M,"paint","circle-radius",v,S,y,E):5,e=Mr(Sr(M,"paint","circle-stroke-color",v,S,y,E),Sr(M,"paint","circle-stroke-opacity",v,S,y,E)),n=Sr(M,"paint","circle-translate",v,S,y,E),i=Mr(Sr(M,"paint","circle-color",v,S,y,E),Sr(M,"paint","circle-opacity",v,S,y,E)),r=Sr(M,"paint","circle-stroke-width",v,S,y,E),s=t+"."+e+"."+i+"."+r+"."+n[0]+"."+n[1];k=g[s],k||(k=new Ti.A({radius:t,displacement:[n[0],-n[1]],stroke:e&&r>0?new Li.A({width:r,color:e}):void 0,fill:i?new Ci.A({color:i}):void 0,declutterMode:"none"}),g[s]=k),I.setImage(k),W=I.getText(),I.setText(void 0),I.setGeometry(void 0),I.setZIndex(N),U=!0}if("text-field"in P){B=Math.round(Sr(M,"layout","text-size",v,S,y,E));const t=Sr(M,"layout","text-font",v,S,y,E);G=Sr(M,"layout","text-line-height",v,S,y,E),j=Ai(a?a(t,e.metadata?e.metadata["ol:webfonts"]:void 0):t,B,G),j.includes("sans-serif")||(j+=",sans-serif"),z=Sr(M,"layout","text-letter-spacing",v,S,y,E),q=Sr(M,"layout","text-max-width",v,S,y,E);const n=Sr(M,"layout","text-field",v,S,y,E);O="object"==typeof n&&n.sections?1===n.sections.length?n.toString():n.sections.reduce(((e,n,i)=>{const r=n.fontStack?n.fontStack.split(","):t,s=Ai(a?a(r):r,B*(n.scale||1),G);let o=n.text;if("\n"===o)return e.push("\n",""),e;if(2==A)return e.push(or(o,z),s),e;o=cr(o,s,q,z).split("\n");for(let t=0,n=o.length;t<n;++t)t>0&&e.push("\n",""),e.push(o[t],s);return e}),[]):Pr(n,d).trim(),o=Sr(M,"paint","text-opacity",v,S,y,E)}if(O&&o&&!D){U||(++C,I=w[C],I&&I.getText()&&!I.getFill()&&!I.getStroke()||(I=new Pi.Ay,w[C]=I),I.setImage(void 0),I.setGeometry(void 0));const t=Er(M,v,S,"text",y);I.getText()||I.setText(W),W=I.getText(),(!W||"getDeclutterMode"in W&&W.getDeclutterMode()!==t)&&(W=new Ri.A({padding:[2,2,2,2],declutterMode:t}),I.setText(W));const e=Sr(M,"layout","text-transform",v,S,y,E);"uppercase"==e?O=Array.isArray(O)?O.map(((t,e)=>e%2?t:t.toUpperCase())):O.toUpperCase():"lowercase"==e&&(O=Array.isArray(O)?O.map(((t,e)=>e%2?t:t.toLowerCase())):O.toLowerCase());const n=Array.isArray(O)?O:2==A?or(O,z):cr(O,j,q,z);if(W.setText(n),W.setFont(j),W.setRotation(Vi(Sr(M,"layout","text-rotate",v,S,y,E))),"function"==typeof W.setKeepUpright){const t=Sr(M,"layout","text-keep-upright",v,S,y,E);W.setKeepUpright(t)}const i=Sr(M,"layout","text-anchor",v,S,y,E),r=U||1==A?"point":Sr(M,"layout","symbol-placement",v,S,y,E);let s;if("line-center"===r?(W.setPlacement("line"),s="center"):W.setPlacement(r),"line"===r&&"function"==typeof W.setRepeat){const t=Sr(M,"layout","symbol-spacing",v,S,y,E);W.setRepeat(2*t)}W.setOverflow("point"===r);let a=Sr(M,"paint","text-halo-width",v,S,y,E);const l=Sr(M,"layout","text-offset",v,S,y,E),h=Sr(M,"paint","text-translate",v,S,y,E);let u=0,c=0;if("point"==r){s="center",-1!==i.indexOf("left")?(s="left",c=a):-1!==i.indexOf("right")&&(s="right",c=-a);const t=Sr(M,"layout","text-rotation-alignment",v,S,y,E);W.setRotateWithView("map"==t)}else W.setMaxAngle(Vi(Sr(M,"layout","text-max-angle",v,S,y,E))*O.length/n.length),W.setRotateWithView(!1);W.setTextAlign(s);let d="middle";0==i.indexOf("bottom")?(d="bottom",u=-a-.5*(G-1)*B):0==i.indexOf("top")&&(d="top",u=a+.5*(G-1)*B),W.setTextBaseline(d);const f=Sr(M,"layout","text-justify",v,S,y,E);W.setJustify("auto"===f?void 0:f),W.setOffsetX(l[0]*B+c+h[0]),W.setOffsetY(l[1]*B+u+h[1]),b.setColor(Mr(Sr(M,"paint","text-color",v,S,y,E),o)),W.setFill(b);const p=Mr(Sr(M,"paint","text-halo-color",v,S,y,E),o);if(p&&a>0){x.setColor(p),a*=2;const t=.5*B;x.setWidth(a<=t?a:t),W.setStroke(x)}else W.setStroke(void 0);const g=Sr(M,"layout","text-padding",v,S,y,E),m=W.getPadding();g!==m[0]&&(m[0]=g,m[1]=g,m[2]=g,m[3]=g),I.setZIndex(N)}}}return C>-1?(w.length=C+1,Rr&&("set"in n?n.set("mapbox-layer",T):n.getProperties()["mapbox-layer"]=T),w):void 0};return t.setStyle(A),t.set("mapbox-source",v),t.set("mapbox-layers",p),t.set("mapbox-featurestate",t.get("mapbox-featurestate")||{}),A}var Fr=n(41564),kr=n(87240),Dr=n(16235),Or=n(49208),jr=n(53815),Gr=n(99110),Br=n(47085),zr=n(36804),qr=n(12185),Ur=n(23986),Wr=n(88887),$r=n(27542),Vr=n(55612),Xr=n(25231),Hr=n(54272),Yr=n(31716),Zr=n(14407),Kr=n(29810),Jr=n(98267),Qr=n(45342),ts=n(10135);function es(t,e){const n=t[0],i=n.width,r=n.height,s=n.data,o=new Uint8ClampedArray(s.length),a=2*e.resolution,l=i-1,h=r-1,u=[0,0,0,0],c=2*Math.PI,d=Math.PI/2,f=Math.PI*e.sunEl/180,p=Math.PI*e.sunAz/180,g=Math.cos(f),m=Math.sin(f),y=e.highlightColor,_=e.shadowColor,v=e.accentColor,x=e.encoding;let b,w,A,S,E,T,C,M,L,P,R,I,N,F,k,D,O,j,G,B,z,q;function U(t,e="mapbox"){return"mapbox"===e?.1*(256*t[0]*256+256*t[1]+t[2])-1e4:"terrarium"===e?256*t[0]+t[1]+t[2]/256-32768:void 0}for(w=0;w<=h;++w)for(E=0===w?0:w-1,T=w===h?h:w+1,b=0;b<=l;++b)A=0===b?0:b-1,S=b===l?l:b+1,C=4*(w*i+A),u[0]=s[C],u[1]=s[C+1],u[2]=s[C+2],u[3]=s[C+3],M=e.vert*U(u,x),C=4*(w*i+S),u[0]=s[C],u[1]=s[C+1],u[2]=s[C+2],u[3]=s[C+3],L=e.vert*U(u,x),P=(L-M)/a,C=4*(E*i+b),u[0]=s[C],u[1]=s[C+1],u[2]=s[C+2],u[3]=s[C+3],M=e.vert*U(u,x),C=4*(T*i+b),u[0]=s[C],u[1]=s[C+1],u[2]=s[C+2],u[3]=s[C+3],L=e.vert*U(u,x),R=(L-M)/a,N=Math.atan2(R,-P),N=N<0?d-N:N>d?c-N+d:d-N,I=Math.atan(Math.sqrt(P*P+R*R)),q=m*Math.cos(I)+g*Math.sin(I)*Math.cos(p-N),F=Math.cos(I),k=255*q,G=Math.min(Math.max(2*e.sunEl,0),1),B=1.875-1.75*e.opacity,z=.5!==e.opacity?d*((Math.pow(B,I)-1)/(Math.pow(B,d)-1)):I,O={r:(1-F)*v.r*G*255,g:(1-F)*v.g*G*255,b:(1-F)*v.b*G*255,a:(1-F)*v.a*G*255},D=Math.abs(((N+p)/Math.PI+.5)%2-1),j={r:(y.r*(1-D)+_.r*D)*k,g:(y.g*(1-D)+_.g*D)*k,b:(y.b*(1-D)+_.b*D)*k,a:(y.a*(1-D)+_.a*D)*k},C=4*(w*i+b),o[C]=O.r*(1-D)+j.r,o[C+1]=O.g*(1-D)+j.g,o[C+2]=O.b*(1-D)+j.b,o[C+3]=s[C+3]*e.opacity*G*Math.sin(z);return new ImageData(o,i,r)}function ns(t,e=512){return t.getExtent()?(0,ts.EN)({extent:t.getExtent(),tileSize:e,maxZoom:22}).getResolutions():Xi}function is(t,e){if(!e.accessToken){e=Object.assign({},e);new URL(t).searchParams.forEach(((t,n)=>{e.accessToken=t,e.accessTokenParam=n}))}return e}function rs(t,e,n="",i={},r=void 0){let s,o,a,l,h=!0;return"string"==typeof n||Array.isArray(n)?l=n:(a=n,l=a.source||a.layers,i=a),"string"==typeof i?(s=i,a={}):(s=i.styleUrl,a=i),!1===a.updateSource&&(h=!1),r||(r=a.resolutions),s||"string"!=typeof e||e.trim().startsWith("{")||(s=e),s&&(s=s.startsWith("data:")?location.href:ji(s,a.accessToken),a=is(s,a)),new Promise((function(n,i){Qi(e,a).then((function(e){if(8!=e.version)return i(new Error("glStyle version 8 required."));if(!(t instanceof Ur.A||t instanceof Wr.A))return i(new Error("Can only apply to VectorLayer or VectorTileLayer"));const u=t instanceof Wr.A?"vector":"geojson";if(l?o=Array.isArray(l)?e.layers.find((function(t){return t.id===l[0]})).source:l:(o=Object.keys(e.sources).find((function(t){return e.sources[t].type===u})),l=o),!o)return i(new Error(`No ${u} source found in the glStyle.`));function c(){if(!h)return Promise.resolve();if(t instanceof Wr.A)return cs(e.sources[o],s,a).then((function(e){const n=t.getSource();n?e!==n&&(n.setTileUrlFunction(e.getTileUrlFunction()),"function"==typeof n.setUrls&&"function"==typeof e.getUrls&&n.setUrls(e.getUrls()),n.format_||(n.format_=e.format_),n.getAttributions()||n.setAttributions(e.getAttributions()),n.getTileLoadFunction()===Jr.Y&&n.setTileLoadFunction(e.getTileLoadFunction()),(0,Xr.tI)(n.getProjection(),e.getProjection())&&(n.tileGrid=e.getTileGrid())):t.setSource(e);const i=t.getSource().getTileGrid();!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())&&i.getMinZoom()>0&&t.setMaxResolution(Zi(Math.max(0,i.getMinZoom()-1e-12),i.getResolutions()))}));const n=e.sources[o];let i=t.getSource();i&&i.get("mapbox-source")===n||(i=gs(n,s,a));const r=t.getSource();return r?i!==r&&(r.getAttributions()||r.setAttributions(i.getAttributions()),r.format_||(r.format_=i.getFormat()),r.url_=i.getUrl()):t.setSource(i),Promise.resolve()}let d,f,p,g;function m(){if(g||e.sprite&&!f)g?(t.setStyle(g),c().then(n).catch(i)):i(new Error("Something went wrong trying to apply style."));else{if(a.projection&&!r){const t=(0,Xr.Jt)(a.projection).getUnits();"m"!==t&&(r=Xi.map((e=>e/Vr.I[t])))}g=Nr(t,e,l,r,f,p,((t,e=a.webfonts)=>function(t,e="https://cdn.jsdelivr.net/npm/@fontsource/{font-family}/{fontweight}{-fontstyle}.css"){const n=t.toString();if(n in mr)return mr[n];const i=[];for(let e=0,n=t.length;e<n;++e){t[e]=t[e].replace("Arial Unicode MS","Arial");const n=Ai(t[e],1);(0,Ii.fZ)(n);const r=n.split(" ");i.push([r.slice(3).join(" ").replace(/"/g,""),r[1],r[0]])}for(let t=0,n=i.length;t<n;++t){const n=i[t],r=n[0];if(!gr(r)&&100!==Ii.yY.get(`${n[2]}\n${n[1]} \n${r}`)){const t=e.replace("{font-family}",r.replace(/ /g,"-").toLowerCase()).replace("{Font+Family}",r.replace(/ /g,"+")).replace("{fontweight}",n[1]).replace("{-fontstyle}",n[2].replace("normal","").replace(/(.+)/,"-$1")).replace("{fontstyle}",n[2]);if(!document.querySelector('link[href="'+t+'"]')){const e=document.createElement("link");e.href=t,e.rel="stylesheet",document.head.appendChild(e)}}}return mr[n]=t,t}(t,e)),a.getImage),t.getStyle()?c().then(n).catch(i):i(new Error(`Nothing to show for source [${o}]`))}}if(e.sprite){const t=new URL(function(t,e,n){const i=Oi(t);if(!i)return decodeURI(new URL(t,n).href);const r="sprites/";if(0!==i.indexOf(r))throw new Error(`unexpected sprites url: ${t}`);const s=i.slice(8);return`${Di}/styles/v1/${s}/sprite?access_token=${e}`}(e.sprite,a.accessToken,s||location.href));d=window.devicePixelRatio>=1.5?.5:1;const n=.5==d?"@2x":"";let r=t.origin+t.pathname+n+".json"+t.search;new Promise((function(e,n){Ji("Sprite",r,a).then(e).catch((function(i){r=t.origin+t.pathname+".json"+t.search,Ji("Sprite",r,a).then(e).catch(n)}))})).then((function(e){if(void 0===e&&i(new Error("No sprites found.")),f=e,p=t.origin+t.pathname+n+".png"+t.search,a.transformRequest){const t=a.transformRequest(p,"SpriteImage")||p;(t instanceof Request||t instanceof Promise)&&(p=t)}m()})).catch((function(t){i(new Error(`Sprites cannot be loaded: ${r}: ${t.message}`))}))}else m()})).catch(i)}))}const ss={};function os(t,e,n={}){return Qi(e,n).then((function(e){!function(t,e,n){e.layers.some((function(e){if("background"===e.type){if(t instanceof zr.A)return t.setBackground((function(t){return hs(e,t,n,{})})),!0;if(t instanceof Fr.A||t instanceof Gr.A)return t.getLayers().insertAt(0,us(e,n,{})),!0}}))}(t,e,n)}))}function as(t,e){let n;return t.some((function(t){if(t.id==e)return n=t.source,!0})),n}function ls(t,e,n){const i=new Zr.A({tileJSON:e,tileSize:t.tileSize||e.tileSize||512}),r=i.getTileJSON(),s=i.getTileGrid(),o=(0,Xr.Jt)(n.projection||"EPSG:3857"),a=function(t,e){const n=t.bounds;if(n){const t=(0,Xr.Rb)([n[0],n[1]],e),i=(0,Xr.Rb)([n[2],n[3]],e);return[t[0],t[1],i[0],i[1]]}return(0,Xr.Jt)(e).getExtent()}(r,o),l=o.getExtent(),h=r.minzoom||0,u=r.maxzoom||22,c={attributions:i.getAttributions(),projection:o,tileGrid:new Qr.A({origin:l?(0,Dr.Py)(l):s.getOrigin(0),extent:a||s.getExtent(),minZoom:h,resolutions:ns(o,e.tileSize).slice(0,u+1),tileSize:s.getTileSize(0)})};return Array.isArray(r.tiles)?c.urls=r.tiles:c.url=r.tiles,c}function hs(t,e,n,i){const r={id:t.id,type:t.type},s=t.layout||{},o=t.paint||{};r.paint=o;const a=Yi(e,n.resolutions||Xi);let l;const h=Sr(r,"paint","background-color",a,ss,i);return void 0!==o["background-opacity"]&&(l=Sr(r,"paint","background-opacity",a,ss,i)),"none"==s.visibility?void 0:Mr(h,l)}function us(t,e,n){const i=document.createElement("div");return i.className="ol-mapbox-style-background",i.style.position="absolute",i.style.width="100%",i.style.height="100%",new zr.A({source:new Yr.A({}),render(r){const s=hs(t,r.viewState.resolution,e,n);return i.style.backgroundColor=s,i}})}function cs(t,e,n){return new Promise((function(i,r){er(t,e,n).then((function({tileJson:e,tileLoadFunction:r}){const s=ls(t,e,n);s.tileLoadFunction=r,s.format=new jr.A,i(new Jr.A(s))})).catch(r)}))}function ds(t){return`{bbox-${(t?t.getCode():"EPSG:3857").toLowerCase().replace(/[^a-z0-9]/g,"-")}}`}function fs(t,e,n){return new Promise((function(i,r){er(t,e,n).then((function({tileJson:e,tileLoadFunction:r}){const s=new Zr.A({interpolate:void 0===n.interpolate||n.interpolate,transition:0,crossOrigin:"anonymous",tileJSON:e});s.tileGrid=ls(t,e,n).tileGrid,n.projection&&(s.projection=(0,Xr.Jt)(n.projection));const o=s.getTileUrlFunction();r&&s.setTileLoadFunction(r),s.setTileUrlFunction((function(t,e,n){const i=ds(n);let r=o(t,e,n);if(-1!=r.indexOf(i)){const e=s.getTileGrid().getTileCoordExtent(t);r=r.replace(i,e.toString())}return r})),s.set("mapbox-source",t),i(s)})).catch((function(t){r(t)}))}))}function ps(t,e,n){const i=new qr.A;return fs(t,e,n).then((function(t){i.setSource(t)})).catch((function(){i.setSource(void 0)})),i}function gs(t,e,n){const i=n.projection?new Or.A({dataProjection:n.projection}):new Or.A,r=t.data,s={};if("string"==typeof r){const[s]=Bi(r,n.accessToken,n.accessTokenParam||"access_token",e||location.href);if(/\{bbox-[0-9a-z-]+\}/.test(s)){const e=(t,e,n)=>{const i=ds(n);return s.replace(i,`${t.join(",")}`)},r=new Kr.A({attributions:t.attribution,format:i,loader:(t,i,s,o,a)=>{Ji("GeoJSON","function"==typeof e?e(t,i,s):e,n).then((t=>{const e=r.getFormat().readFeatures(t,{featureProjection:s});r.addFeatures(e),o(e)})).catch((e=>{r.removeLoadedExtent(t),a()}))},strategy:$r.Qk});return r.set("mapbox-source",t),r}const o=new Kr.A({attributions:t.attribution,format:i,url:s,loader:(t,e,i,r,a)=>{Ji("GeoJSON",s,n).then((t=>{const e=o.getFormat().readFeatures(t,{featureProjection:i});o.addFeatures(e),r(e)})).catch((e=>{o.removeLoadedExtent(t),a()}))}});return o}s.features=i.readFeatures(r,{featureProjection:(0,Xr.Tf)()||"EPSG:3857"});const o=new Kr.A(Object.assign({attributions:t.attribution,format:i},s));return o.set("mapbox-source",t),o}function ms(t,e,n){let i=null;return function(r){t.paint&&"raster-opacity"in t.paint&&r.frameState.viewState.zoom!==i&&(i=r.frameState.viewState.zoom,delete n[t.id],function(t,e,n,i){const r=Sr(t,"paint","raster-opacity",n,ss,i);e.setOpacity(r)}(t,e,i,n))}}function ys(t,e,n,i){const r=$i(t),s=t.layers,o=n.type,a=n.source||as(s,n.ref),l=t.sources[a];let h;if("background"==o)h=us(n,i,r);else if("vector"==l.type)h=function(t,e,n){const i=new Wr.A({declutter:!0,visible:!1});return cs(t,e,n).then((function(e){e.set("mapbox-source",t),i.setSource(e)})).catch((function(t){i.setSource(void 0)})),i}(l,e,i);else if("raster"==l.type)h=ps(l,e,i),h.setVisible(!n.layout||"none"!==n.layout.visibility),h.on("prerender",ms(n,h,r));else if("geojson"==l.type)h=function(t,e,n){return new Ur.A({declutter:!0,source:gs(t,e,n),visible:!1})}(l,e,i);else if("raster-dem"==l.type&&"hillshade"==n.type){const t=function(t,e,n){const i=ps(t,e,n);return new Br.A({source:new Hr.Ay({operationType:"image",operation:es,sources:[i]})})}(l,e,i);h=t,t.getSource().on("beforeoperations",(function(t){const e=t.data;e.resolution=(0,Xr.hO)(i.projection||"EPSG:3857",t.resolution,(0,Dr.q1)(t.extent),"m");const s=Yi(t.resolution,i.resolutions||Xi);e.encoding=l.encoding,e.vert=5*Sr(n,"paint","hillshade-exaggeration",s,ss,r),e.sunAz=Sr(n,"paint","hillshade-illumination-direction",s,ss,r),e.sunEl=35,e.opacity=.3,e.highlightColor=Sr(n,"paint","hillshade-highlight-color",s,ss,r),e.shadowColor=Sr(n,"paint","hillshade-shadow-color",s,ss,r),e.accentColor=Sr(n,"paint","hillshade-accent-color",s,ss,r)})),h.setVisible(!n.layout||"none"!==n.layout.visibility)}const u=a;return h&&h.set("mapbox-source",u),h}function _s(t,e,n,i){const r=[];let s=null;if(e instanceof Fr.A){if(s=e.getView(),!s.isDef()&&!s.getRotation()&&!s.getResolutions()){const t=i.projection?(0,Xr.Jt)(i.projection):s.getProjection();s=new kr.Ay(Object.assign(s.getProperties(),{maxResolution:Xi[0]/Vr.I[t.getUnits()],projection:i.projection||s.getProjection()})),e.setView(s)}"center"in t&&!s.getCenter()&&s.setCenter((0,Xr.Rb)(t.center,s.getProjection())),"zoom"in t&&void 0===s.getZoom()&&s.setResolution(Xi[0]/Vr.I[s.getProjection().getUnits()]/Math.pow(2,t.zoom)),s.getCenter()&&void 0!==s.getZoom()||s.fit(s.getProjection().getExtent(),{nearest:!0,size:e.getSize()})}e.set("mapbox-style",t),e.set("mapbox-metadata",{styleUrl:n,options:i});const o=t.layers;let a,l,h,u=[];for(let s=0,c=o.length;s<c;++s){const c=o[s],d=c.type;"heatmap"!=d?(h=c.source||as(o,c.ref),h&&h==l||(u.length&&(r.push(xs(a,u,t,n,e,i)),u=[]),a=ys(t,n,c,i),a instanceof Ur.A||a instanceof Wr.A||(u=[]),l=a.get("mapbox-source")),u.push(c.id)):console.debug(`layers[${s}].type "${d}" not supported`)}return r.push(xs(a,u,t,n,e,i)),Promise.all(r)}function vs(t,e,n={}){let i,r;if(r="string"==typeof t||t instanceof HTMLElement?new Fr.A({target:t}):t,"string"==typeof e){const t=e.startsWith("data:")?location.href:ji(e,n.accessToken);n=is(t,n),i=new Promise((function(i,s){Qi(e,n).then((function(e){_s(e,r,t,n).then((function(){i(r)})).catch(s)})).catch((function(t){s(new Error(`Could not load ${e}: ${t.message}`))}))}))}else i=new Promise((function(t,i){_s(e,r,!n.styleUrl||n.styleUrl.startsWith("data:")?location.href:ji(n.styleUrl,n.accessToken),n).then((function(){t(r)})).catch(i)}));return i}function xs(t,e,n,i,r,s={}){let a=24,l=0;const h=n.layers;for(let t=0,n=h.length;t<n;++t){const n=h[t];-1!==e.indexOf(n.id)&&(a=Math.min("minzoom"in n?n.minzoom:0,a),l=Math.max("maxzoom"in n?n.maxzoom:24,l))}return new Promise((function(h,u){const c=function(){const c=t.getSource();if(c&&"error"!==c.getState()){if("getTileGrid"in c){const e=c.getTileGrid();if(e){const n=e.getMinZoom();(a>0||n>0)&&t.setMaxResolution(Math.min(Zi(Math.max(0,a-1e-12),Xi),Zi(Math.max(0,n-1e-12),e.getResolutions()))),l<24&&t.setMinResolution(Zi(l,Xi))}}else a>0&&t.setMaxResolution(Zi(Math.max(0,a-1e-12),Xi));c instanceof Kr.A||c instanceof Jr.A?rs(t,n,e,Object.assign({styleUrl:i},s)).then((function(){!function(t,e){function n(){const n=e.get("mapbox-style");if(!n)return;const i=o(n.layers),r=t.get("mapbox-layers"),s=i.filter((function(t){return r.includes(t.id)})).some((function(t){return!t.layout||!t.layout.visibility||"visible"===t.layout.visibility}));t.get("visible")!==s&&t.setVisible(s)}t.on("change",n),n()}(t,r),h()})).catch(u):h()}else u(new Error("Error accessing data for source "+t.get("mapbox-source")))};t.set("mapbox-layers",e);const d=r.getLayers();-1===d.getArray().indexOf(t)&&d.push(t),t.getSource()?c():t.once("change:source",c)}))}var bs=n(18381),ws=n(22685);class As extends bs.Ay{constructor(t){super(ws.A.ERROR),this.error=t}}class Ss extends Wr.A{constructor(t){const e=!("declutter"in t)||t.declutter,n=new Jr.A({state:"loading",format:new jr.A});super({source:n,background:!1===t.background?null:t.background,declutter:e,className:t.className,opacity:t.opacity,visible:t.visible,zIndex:t.zIndex,minResolution:t.minResolution,maxResolution:t.maxResolution,minZoom:t.minZoom,maxZoom:t.maxZoom,renderOrder:t.renderOrder,renderBuffer:t.renderBuffer,renderMode:t.renderMode,map:t.map,updateWhileAnimating:t.updateWhileAnimating,updateWhileInteracting:t.updateWhileInteracting,preload:t.preload,useInterimTilesOnError:t.useInterimTilesOnError,properties:t.properties}),t.accessToken&&(this.accessToken=t.accessToken);const i=[rs(this,t.styleUrl,t.layers||t.source,{accessToken:this.accessToken})];void 0===this.getBackground()&&i.push(os(this,t.styleUrl,{accessToken:this.accessToken})),Promise.all(i).then((()=>{n.setState("ready")})).catch((t=>{this.dispatchEvent(new As(t));this.getSource().setState("error")}))}}},85305:function(t,e,n){"use strict";n.d(e,{g:function(){return i}});var i="http://www.w3.org/1999/xhtml";e.A={svg:"http://www.w3.org/2000/svg",xhtml:i,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"}},85398:function(t,e,n){"use strict";n.d(e,{HT:function(){return h},Wp:function(){return u},fB:function(){return a},gp:function(){return o},sj:function(){return l}});var i=n(16235),r=n(90405),s=n(11238);function o(t,e,n,r,o,a){return a=a??(0,i.R8)((0,i.S5)(),t,e,n,r),!!(0,i.HY)(o,a)&&(a[0]>=o[0]&&a[2]<=o[2]||a[1]>=o[1]&&a[3]<=o[3]||(0,s.j)(t,e,n,r,(function(t,e){return(0,i.Mx)(o,t,e)})))}function a(t,e,n,i,r){for(let s=0,a=n.length;s<a;++s){if(o(t,e,n[s],i,r))return!0;e=n[s]}return!1}function l(t,e,n,i,s){return!!o(t,e,n,i,s)||(!!(0,r.a_)(t,e,n,i,s[0],s[1])||(!!(0,r.a_)(t,e,n,i,s[0],s[3])||(!!(0,r.a_)(t,e,n,i,s[2],s[1])||!!(0,r.a_)(t,e,n,i,s[2],s[3]))))}function h(t,e,n,i,s){if(!l(t,e,n[0],i,s))return!1;if(1===n.length)return!0;for(let e=1,a=n.length;e<a;++e)if((0,r.t7)(t,n[e-1],n[e],i,s)&&!o(t,n[e-1],n[e],i,s))return!1;return!0}function u(t,e,n,i,r){for(let s=0,o=n.length;s<o;++s){const o=n[s];if(h(t,e,o,i,r))return!0;e=o[o.length-1]}return!1}},86603:function(t,e,n){"use strict";n.d(e,{J:function(){return d}});var i=n(36634),r=n(61829),s=n(46928),o=n(69791),a=n(22685),l=n(37372),h=n(15353);let u=null;class c extends l.A{constructor(t,e,n,i,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=n,this.canvas_={},this.color_=s,this.imageState_=void 0===i?r.A.IDLE:i,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===r.A.LOADED){u||(u=(0,o.Y)(1,1,void 0,{willReadFrequently:!0})),u.drawImage(this.image_,0,0);try{u.getImageData(0,0,1,1),this.tainted_=!1}catch{u=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(a.A.CHANGE)}handleImageError_(){this.imageState_=r.A.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=r.A.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],n=(0,o.Y)(t,e);n.fillRect(0,0,t,e),this.hitDetectionImage_=n.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===r.A.IDLE){this.image_||this.initializeImage_(),this.imageState_=r.A.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,i.RA)(this.image_,this.src_).then((t=>{this.image_=t,this.handleImageLoad_()})).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==r.A.LOADED)return;const e=this.image_,n=(0,o.Y)(Math.ceil(e.width*t),Math.ceil(e.height*t)),i=n.canvas;n.scale(t,t),n.drawImage(e,0,0),n.globalCompositeOperation="multiply",n.fillStyle=(0,s.oJ)(this.color_),n.fillRect(0,0,i.width/t,i.height/t),n.globalCompositeOperation="destination-in",n.drawImage(e,0,0),this.canvas_[t]=i}ready(){return this.ready_||(this.ready_=new Promise((t=>{if(this.imageState_===r.A.LOADED||this.imageState_===r.A.ERROR)t();else{const e=()=>{this.imageState_!==r.A.LOADED&&this.imageState_!==r.A.ERROR||(this.removeEventListener(a.A.CHANGE,e),t())};this.addEventListener(a.A.CHANGE,e)}}))),this.ready_}}function d(t,e,n,i,r,s){let o=void 0===e?void 0:h.ue.get(e,n,r);return o||(o=new c(t,t&&"src"in t?t.src||void 0:e,n,i,r),h.ue.set(e,n,r,o,s)),s&&o&&!h.ue.getPattern(e,n,r)&&h.ue.set(e,n,r,o,s),o}e.A=c},86630:function(t,e,n){"use strict";n.d(e,{N:function(){return o}});var i=n(91108);const r="#ifdef GL_FRAGMENT_PRECISION_HIGH\nprecision highp float;\n#else\nprecision mediump float;\n#endif\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_screenToWorldMatrix;\nuniform vec2 u_viewportSizePx;\nuniform float u_pixelRatio;\nuniform float u_globalAlpha;\nuniform float u_time;\nuniform float u_zoom;\nuniform float u_resolution;\nuniform float u_rotation;\nuniform vec4 u_renderExtent;\nuniform vec2 u_patternOrigin;\nuniform float u_depth;\nuniform mediump int u_hitDetection;\n\nconst float PI = 3.141592653589793238;\nconst float TWO_PI = 2.0 * PI;\nfloat currentLineMetric = 0.; // an actual value will be used in the stroke shaders\n",s={"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"};class o{constructor(){this.uniforms_=[],this.attributes_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${(0,i.$R)(s["circle-radius"])} + ${(0,i.$R)(.5*s["circle-stroke-width"])})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=(0,i.VO)(s["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=(0,i.$R)(s["stroke-width"]),this.strokeColorExpression_=(0,i.VO)(s["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=(0,i.Tl)("round"),this.strokeJoinExpression_=(0,i.Tl)("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=(0,i.VO)(s["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t,e,n,i){return this.attributes_.push({name:t,type:e,varyingName:t.replace(/^a_/,"v_"),varyingType:i??e,varyingExpression:n??t}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){return this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t),this}addFragmentShaderFunction(t){return this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t),this}getSymbolVertexShader(){return this.hasSymbol_?`${r}\n${this.uniforms_.map((t=>`uniform ${t};`)).join("\n")}\nattribute vec2 a_position;\nattribute float a_index;\nattribute vec4 a_hitColor;\n\nvarying vec2 v_texCoord;\nvarying vec2 v_quadCoord;\nvarying vec4 v_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n\n${this.attributes_.map((t=>`attribute ${t.type} ${t.name};\nvarying ${t.varyingType} ${t.varyingName};`)).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 pxToScreen(vec2 coordPx) {\n  vec2 scaled = coordPx / u_viewportSizePx / 0.5;\n  return scaled;\n}\n\nvec2 screenToPx(vec2 coordScreen) {\n  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n  v_quadSizePx = ${this.symbolSizeExpression_};\n  vec2 halfSizePx = v_quadSizePx * 0.5;\n  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};\n  vec2 offsetPx = centerOffsetPx;\n  if (a_index == 0.0) {\n    offsetPx -= halfSizePx;\n  } else if (a_index == 1.0) {\n    offsetPx += halfSizePx * vec2(1., -1.);\n  } else if (a_index == 2.0) {\n    offsetPx += halfSizePx;\n  } else {\n    offsetPx += halfSizePx * vec2(-1., 1.);\n  }\n  float angle = ${this.symbolRotationExpression_};\n  ${this.symbolRotateWithView_?"angle += u_rotation;":""}\n  float c = cos(-angle);\n  float s = sin(-angle);\n  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);\n  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);\n  vec4 texCoord = ${this.texCoordExpression_};\n  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;\n  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;\n  v_texCoord = vec2(u, v);\n  v_hitColor = a_hitColor;\n  v_angle = angle;\n  c = cos(-v_angle);\n  s = sin(-v_angle);\n  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); \n  v_centerPx = screenToPx(center.xy) + centerOffsetPx;\n${this.attributes_.map((t=>`  ${t.varyingName} = ${t.varyingExpression};`)).join("\n")}\n}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${r}\n${this.uniforms_.map((t=>`uniform ${t};`)).join("\n")}\nvarying vec2 v_texCoord;\nvarying vec4 v_hitColor;\nvarying vec2 v_centerPx;\nvarying float v_angle;\nvarying vec2 v_quadSizePx;\n${this.attributes_.map((t=>`varying ${t.varyingType} ${t.varyingName};`)).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvoid main(void) {\n${this.attributes_.map((t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`)).join("\n")}\n  if (${this.discardExpression_}) { discard; }\n  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center\n  float c = cos(v_angle);\n  float s = sin(v_angle);\n  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);\n  gl_FragColor = ${this.symbolColorExpression_};\n  gl_FragColor.rgb *= gl_FragColor.a;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.05) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}`:null}getStrokeVertexShader(){return this.hasStroke_?`${r}\n${this.uniforms_.map((t=>`uniform ${t};`)).join("\n")}\nattribute vec2 a_segmentStart;\nattribute vec2 a_segmentEnd;\nattribute float a_measureStart;\nattribute float a_measureEnd;\nattribute float a_parameters;\nattribute float a_distance;\nattribute vec2 a_joinAngles;\nattribute vec4 a_hitColor;\n\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_hitColor;\nvarying float v_distanceOffsetPx;\nvarying float v_measureStart;\nvarying float v_measureEnd;\n\n${this.attributes_.map((t=>`attribute ${t.type} ${t.name};\nvarying ${t.varyingType} ${t.varyingName};`)).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvec4 pxToScreen(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return vec4(screenPos, u_depth, 1.0);\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nvec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {\n  float halfAngle = joinAngle / 2.0;\n  float c = cos(halfAngle);\n  float s = sin(halfAngle);\n  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);\n  float length = 1.0 / s;\n  return angleBisectorNormal * length;\n}\n\nvec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {\n  // if on a cap or the join angle is too high, offset the line along the segment normal\n  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {\n    return point - normal * offsetPx;\n  }\n  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)\n  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;\n}\n\nvoid main(void) {\n  v_angleStart = a_joinAngles.x;\n  v_angleEnd = a_joinAngles.y;\n  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);\n  currentLineMetric = vertexNumber < 1.5 ? a_measureStart : a_measureEnd;\n  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)\n  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);\n\n  float lineWidth = ${this.strokeWidthExpression_};\n  float lineOffsetPx = ${this.strokeOffsetExpression_};\n\n  // compute segment start/end in px with offset\n  vec2 segmentStartPx = worldToPx(a_segmentStart);\n  vec2 segmentEndPx = worldToPx(a_segmentEnd);\n  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);\n  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);\n  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),\n  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);\n  \n  // compute current vertex position\n  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;\n  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;\n  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;\n  vec2 joinDirection;\n  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;\n  // if angle is too high, do not make a proper join\n  if (cos(angle) > 0.985 || isCap(angle)) {\n    joinDirection = normalPx * normalDir - tangentPx * tangentDir;\n  } else {\n    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);\n  }\n  positionPx = positionPx + joinDirection * (lineWidth * 0.5 + 1.); // adding 1 pixel for antialiasing\n  gl_Position = pxToScreen(positionPx);\n\n  v_segmentStart = segmentStartPx;\n  v_segmentEnd = segmentEndPx;\n  v_width = lineWidth;\n  v_hitColor = a_hitColor;\n  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);\n  v_measureStart = a_measureStart;\n  v_measureEnd = a_measureEnd;\n${this.attributes_.map((t=>`  ${t.varyingName} = ${t.varyingExpression};`)).join("\n")}\n}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${r}\n${this.uniforms_.map((t=>`uniform ${t};`)).join("\n")}\nvarying vec2 v_segmentStart;\nvarying vec2 v_segmentEnd;\nvarying float v_angleStart;\nvarying float v_angleEnd;\nvarying float v_width;\nvarying vec4 v_hitColor;\nvarying float v_distanceOffsetPx;\nvarying float v_measureStart;\nvarying float v_measureEnd;\n${this.attributes_.map((t=>`varying ${t.varyingType} ${t.varyingName};`)).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\n\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nbool isCap(float joinAngle) {\n  return joinAngle < -0.1;\n}\n\nfloat segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  vec2 tangent = normalize(end - start);\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 startToPoint = point - start;\n  return abs(dot(startToPoint, normal)) - width * 0.5;\n}\n\nfloat buttCapDistanceField(vec2 point, vec2 start, vec2 end) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  return dot(startToPoint, -tangent);\n}\n\nfloat squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return buttCapDistanceField(point, start, end) - width * 0.5;\n}\n\nfloat roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment\n  return length(point - start) - width * 0.5 - onSegment;\n}\n\nfloat roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  vec2 startToPoint = point - start;\n  vec2 tangent = normalize(end - start);\n  float c = cos(joinAngle * 0.5);\n  float s = sin(joinAngle * 0.5);\n  float direction = -sign(sin(joinAngle));\n  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);\n  float radius = width * 0.5 * s;\n  return dot(startToPoint, bisector * direction) - radius;\n}\n\nfloat miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {\n  if (cos(joinAngle) > 0.985) { // avoid risking a division by zero\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  float miterLength = 1. / sin(joinAngle * 0.5);\n  float miterLimit = ${this.strokeMiterLimitExpression_};\n  if (miterLength > miterLimit) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  }\n  return -1000.;\n}\n\nfloat capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {\n   if (capType == ${(0,i.Tl)("butt")}) {\n    return buttCapDistanceField(point, start, end);\n  } else if (capType == ${(0,i.Tl)("square")}) {\n    return squareCapDistanceField(point, start, end, width);\n  }\n  return roundCapDistanceField(point, start, end, width);\n}\n\nfloat joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {\n  if (joinType == ${(0,i.Tl)("bevel")}) {\n    return bevelJoinField(point, start, end, width, joinAngle);\n  } else if (joinType == ${(0,i.Tl)("miter")}) {\n    return miterJoinDistanceField(point, start, end, width, joinAngle);\n  }\n  return roundJoinDistanceField(point, start, end, width);\n}\n\nfloat computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {\n  if (isCap(joinAngle)) {\n    return capDistanceField(point, start, end, width, capType);\n  }\n  return joinDistanceField(point, start, end, width, joinAngle, joinType);\n}\n\nfloat distanceFromSegment(vec2 point, vec2 start, vec2 end) {\n  vec2 tangent = end - start;\n  vec2 startToPoint = point - start;\n  // inspire by capsule fn in https://iquilezles.org/articles/distfunctions/\n  float h = clamp(dot(startToPoint, tangent) / dot(tangent, tangent), 0.0, 1.0);\n  return length(startToPoint - tangent * h);\n}\n\nvoid main(void) {\n${this.attributes_.map((t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`)).join("\n")}\n      \n  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(currentPoint);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n\n  float segmentLength = length(v_segmentEnd - v_segmentStart);\n  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;\n  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);\n  vec2 startToPoint = currentPoint - v_segmentStart;\n  float lengthToPoint = max(0., min(dot(segmentTangent, startToPoint), segmentLength));\n  float currentLengthPx = lengthToPoint + v_distanceOffsetPx;\n  float currentRadiusPx = distanceFromSegment(currentPoint, v_segmentStart, v_segmentEnd);\n  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;\n  currentLineMetric = mix(v_measureStart, v_measureEnd, lengthToPoint / segmentLength);\n\n  if (${this.discardExpression_}) { discard; }\n\n  float capType = ${this.strokeCapExpression_};\n  float joinType = ${this.strokeJoinExpression_};\n  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);\n  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);\n  float distanceField = max(\n    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),\n    max(segmentStartDistance, segmentEndDistance)\n  );\n  distanceField = max(distanceField, ${this.strokeDistanceFieldExpression_});\n\n  vec4 color = ${this.strokeColorExpression_};\n  color.a *= smoothstep(0.5, -0.5, distanceField);\n  gl_FragColor = color;\n  gl_FragColor.a *= u_globalAlpha;\n  gl_FragColor.rgb *= gl_FragColor.a;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}`:null}getFillVertexShader(){return this.hasFill_?`${r}\n${this.uniforms_.map((t=>`uniform ${t};`)).join("\n")}\nattribute vec2 a_position;\nattribute vec4 a_hitColor;\n\nvarying vec4 v_hitColor;\n\n${this.attributes_.map((t=>`attribute ${t.type} ${t.name};\nvarying ${t.varyingType} ${t.varyingName};`)).join("\n")}\n${this.vertexShaderFunctions_.join("\n")}\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);\n  v_hitColor = a_hitColor;\n${this.attributes_.map((t=>`  ${t.varyingName} = ${t.varyingExpression};`)).join("\n")}\n}`:null}getFillFragmentShader(){return this.hasFill_?`${r}\n${this.uniforms_.map((t=>`uniform ${t};`)).join("\n")}\nvarying vec4 v_hitColor;\n${this.attributes_.map((t=>`varying ${t.varyingType} ${t.varyingName};`)).join("\n")}\n${this.fragmentShaderFunctions_.join("\n")}\nvec2 pxToWorld(vec2 pxPos) {\n  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;\n  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;\n}\n\nvec2 worldToPx(vec2 worldPos) {\n  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);\n  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;\n}\n\nvoid main(void) {\n${this.attributes_.map((t=>`  ${t.varyingType} ${t.name} = ${t.varyingName}; // assign to original attribute name`)).join("\n")}\n  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;\n  vec2 pxOrigin = worldToPx(u_patternOrigin);\n  #ifdef GL_FRAGMENT_PRECISION_HIGH\n  vec2 worldPos = pxToWorld(pxPos);\n  if (\n    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (\n      worldPos[0] < u_renderExtent[0] ||\n      worldPos[1] < u_renderExtent[1] ||\n      worldPos[0] > u_renderExtent[2] ||\n      worldPos[1] > u_renderExtent[3]\n    )\n  ) {\n    discard;\n  }\n  #endif\n  if (${this.discardExpression_}) { discard; }\n  gl_FragColor = ${this.fillColorExpression_};\n  gl_FragColor.a *= u_globalAlpha;\n  gl_FragColor.rgb *= gl_FragColor.a;\n  if (u_hitDetection > 0) {\n    if (gl_FragColor.a < 0.1) { discard; };\n    gl_FragColor = v_hitColor;\n  }\n}`:null}}},86858:function(t,e,n){"use strict";var i=n(44090),r=n(72961),s=n(37759),o=n(37246);class a extends r.Ay{constructor(){super(),this.xmlSerializer_=(0,o.mc)()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if("string"==typeof t){const n=(0,o.qg)(t);return this.readFeatureFromDocument(n,e)}return(0,o.wz)(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){const n=this.readFeaturesFromDocument(t,e);return n.length>0?n[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if("string"==typeof t){const n=(0,o.qg)(t);return this.readFeaturesFromDocument(n,e)}return(0,o.wz)(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){const n=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,i.X$)(n,this.readFeaturesFromNode(r,e));return n}readFeaturesFromNode(t,e){return(0,s.b0)()}readGeometry(t,e){if(!t)return null;if("string"==typeof t){const n=(0,o.qg)(t);return this.readGeometryFromDocument(n,e)}return(0,o.wz)(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if("string"==typeof t){const e=(0,o.qg)(t);return this.readProjectionFromDocument(e)}return(0,o.wz)(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){const n=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeatureNode(t,e){return null}writeFeatures(t,e){const n=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){const n=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(n)}writeGeometryNode(t,e){return null}}e.A=a},87113:function(t,e,n){"use strict";n.d(e,{v:function(){return o}});var i=n(25309),r=n(8860);class s extends r.Ay{constructor(t){super(t=t||{}),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==i.A.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==i.A.POINTERUP){const e=this.handleUpEvent(t);this.handlingDownUpSequence=e&&this.targetPointers.length>0}}else if(t.type==i.A.POINTERDOWN){const n=this.handleDownEvent(t);this.handlingDownUpSequence=n,e=this.stopDown(n)}else t.type==i.A.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function o(t){const e=t.length;let n=0,i=0;for(let r=0;r<e;r++)n+=t[r].clientX,i+=t[r].clientY;return{clientX:n/e,clientY:i/e}}e.A=s},87240:function(t,e,n){"use strict";n.d(e,{Ay:function(){return T}});var i=n(70192),r=n(94679),s=n(12239),o=n(44090),a=n(42484),l=n(31141);function h(t,e,n){return function(i,r,s,o,a){if(!i)return;if(!r&&!e)return i;const h=e?0:s[0]*r,u=e?0:s[1]*r,c=a?a[0]:0,d=a?a[1]:0;let f=t[0]+h/2+c,p=t[2]-h/2+c,g=t[1]+u/2+d,m=t[3]-u/2+d;f>p&&(f=(p+f)/2,p=f),g>m&&(g=(m+g)/2,m=g);let y=(0,l.qE)(i[0],f,p),_=(0,l.qE)(i[1],g,m);if(o&&n&&r){const t=30*r;y+=-t*Math.log(1+Math.max(0,f-i[0])/t)+t*Math.log(1+Math.max(0,i[0]-p)/t),_+=-t*Math.log(1+Math.max(0,g-i[1])/t)+t*Math.log(1+Math.max(0,i[1]-m)/t)}return[y,_]}}function u(t){return t}var c=n(61341),d=n(426),f=n(16235),p=n(95702),g=n(30470),m=n(25231);function y(t,e,n,i){const r=(0,f.RG)(e)/n[0],s=(0,f.Oq)(e)/n[1];return i?Math.min(t,Math.max(r,s)):Math.min(t,Math.min(r,s))}function _(t,e,n){let i=Math.min(t,e);return i*=Math.log(1+50*Math.max(0,t/e-1))/50+1,n&&(i=Math.max(i,n),i/=Math.log(1+50*Math.max(0,n/t-1))/50+1),(0,l.qE)(i,n/2,2*e)}function v(t,e,n,i,r){return n=void 0===n||n,function(s,o,a,h){if(void 0!==s){const o=i?y(t,i,a,r):t;return n&&h?_(s,o,e):(0,l.qE)(s,e,o)}}}var x=n(41146),b=n(80547);class w extends i.A{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=(0,m.Av)(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&(0,m.RJ)(),t.center&&(t.center=(0,m.Ad)(t.center,this.projection_)),t.extent&&(t.extent=(0,m.SD)(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const t in s.A)delete e[t];this.setProperties(e,!0);const n=function(t){let e,n,i;const r=28,s=2;let a=void 0!==t.minZoom?t.minZoom:0,h=void 0!==t.maxZoom?t.maxZoom:r;const u=void 0!==t.zoomFactor?t.zoomFactor:s,c=void 0!==t.multiWorld&&t.multiWorld,d=void 0===t.smoothResolutionConstraint||t.smoothResolutionConstraint,p=void 0!==t.showFullExtent&&t.showFullExtent,g=(0,m.Av)(t.projection,"EPSG:3857"),x=g.getExtent();let w=t.constrainOnlyCenter,A=t.extent;c||A||!g.isGlobal()||(w=!1,A=x);if(void 0!==t.resolutions){const r=t.resolutions;n=r[a],i=void 0!==r[h]?r[h]:r[r.length-1],e=t.constrainResolution?function(t,e,n,i){return e=void 0===e||e,function(r,s,a,h){if(void 0!==r){const u=t[0],c=t[t.length-1],d=n?y(u,n,a,i):u;if(h)return e?_(r,d,c):(0,l.qE)(r,c,d);const f=Math.min(d,r),p=Math.floor((0,o.FT)(t,f,s));return t[p]>d&&p<t.length-1?t[p+1]:t[p]}}}(r,d,!w&&A,p):v(n,i,d,!w&&A,p)}else{const o=(x?Math.max((0,f.RG)(x),(0,f.Oq)(x)):360*m.Ig.degrees/g.getMetersPerUnit())/b.R/Math.pow(s,0),c=o/Math.pow(s,r-0);n=t.maxResolution,void 0!==n?a=0:n=o/Math.pow(u,a),i=t.minResolution,void 0===i&&(i=void 0!==t.maxZoom?void 0!==t.maxResolution?n/Math.pow(u,h):o/Math.pow(u,h):c),h=a+Math.floor(Math.log(n/i)/Math.log(u)),i=n/Math.pow(u,h-a),e=t.constrainResolution?function(t,e,n,i,r,s){return i=void 0===i||i,n=void 0!==n?n:0,function(o,a,h,u){if(void 0!==o){const c=r?y(e,r,h,s):e;if(u)return i?_(o,c,n):(0,l.qE)(o,n,c);const d=1e-9,f=Math.ceil(Math.log(e/c)/Math.log(t)-d),p=-a*(.5-d)+.5,g=Math.min(c,o),m=Math.floor(Math.log(e/g)/Math.log(t)+p),v=Math.max(f,m),x=e/Math.pow(t,v);return(0,l.qE)(x,n,c)}}}(u,n,i,d,!w&&A,p):v(n,i,d,!w&&A,p)}return{constraint:e,maxResolution:n,minResolution:i,minZoom:a,zoomFactor:u}}(t);this.maxResolution_=n.maxResolution,this.minResolution_=n.minResolution,this.zoomFactor_=n.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=n.minZoom;const i=function(t){if(void 0!==t.extent){const e=void 0===t.smoothExtentConstraint||t.smoothExtentConstraint;return h(t.extent,t.constrainOnlyCenter,e)}const e=(0,m.Av)(t.projection,"EPSG:3857");if(!0!==t.multiWorld&&e.isGlobal()){const t=e.getExtent().slice();return t[0]=-1/0,t[2]=1/0,h(t,!1,!1)}return u}(t),r=n.constraint,a=function(t){const e=void 0===t.enableRotation||t.enableRotation;if(e){const e=t.constrainRotation;return void 0===e||!0===e?(0,x.cq)():!1===e?x.dv:"number"==typeof e?(0,x.a$)(e):x.dv}return x.b8}(t);this.constraints_={center:i,resolution:r,rotation:a},this.setRotation(void 0!==t.rotation?t.rotation:0),this.setCenterInternal(void 0!==t.center?t.center:null),void 0!==t.resolution?this.setResolution(t.resolution):void 0!==t.zoom&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const n=this.getCenterInternal();if(n){const i=t||[0,0,0,0];e=e||[0,0,0,0];const r=this.getResolution(),s=r/2*(i[3]-e[3]+e[1]-i[1]),o=r/2*(i[0]-e[0]+e[2]-i[2]);this.setCenterInternal([n[0]+s,n[1]-o])}}getUpdatedOptions_(t){const e=this.getProperties();return void 0!==e.resolution?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let t=0;t<e.length;++t){let n=arguments[t];n.center&&(n=Object.assign({},n),n.center=(0,m.Ad)(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=(0,m.Ad)(n.anchor,this.getProjection())),e[t]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e,n=arguments.length;n>1&&"function"==typeof arguments[n-1]&&(e=arguments[n-1],--n);let i=0;for(;i<n&&!this.isDef();++i){const t=arguments[i];t.center&&this.setCenterInternal(t.center),void 0!==t.zoom?this.setZoom(t.zoom):t.resolution&&this.setResolution(t.resolution),void 0!==t.rotation&&this.setRotation(t.rotation)}if(i===n)return void(e&&A(e,!0));let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,h=this.targetRotation_;const u=[];for(;i<n;++i){const t=arguments[i],n={start:s,complete:!1,anchor:t.anchor,duration:void 0!==t.duration?t.duration:1e3,easing:t.easing||d.T9,callback:e};if(t.center&&(n.sourceCenter=o,n.targetCenter=t.center.slice(),o=n.targetCenter),void 0!==t.zoom?(n.sourceResolution=a,n.targetResolution=this.getResolutionForZoom(t.zoom),a=n.targetResolution):t.resolution&&(n.sourceResolution=a,n.targetResolution=t.resolution,a=n.targetResolution),void 0!==t.rotation){n.sourceRotation=h;const e=(0,l.xP)(t.rotation-h+Math.PI,2*Math.PI)-Math.PI;n.targetRotation=h+e,h=n.targetRotation}S(n)?n.complete=!0:s+=n.duration,u.push(n)}this.animations_.push(u),this.setHint(r.A.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[r.A.ANIMATING]>0}getInteracting(){return this.hints_[r.A.INTERACTING]>0}cancelAnimations(){let t;this.setHint(r.A.ANIMATING,-this.hints_[r.A.ANIMATING]);for(let e=0,n=this.animations_.length;e<n;++e){const n=this.animations_[e];if(n[0].callback&&A(n[0].callback,!1),!t)for(let e=0,i=n.length;e<i;++e){const i=n[e];if(!i.complete){t=i.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(void 0!==this.updateAnimationKey_&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let n=this.animations_.length-1;n>=0;--n){const i=this.animations_[n];let s=!0;for(let n=0,r=i.length;n<r;++n){const r=i[n];if(r.complete)continue;const o=t-r.start;let a=r.duration>0?o/r.duration:1;a>=1?(r.complete=!0,a=1):s=!1;const h=r.easing(a);if(r.sourceCenter){const t=r.sourceCenter[0],e=r.sourceCenter[1],n=r.targetCenter[0],i=r.targetCenter[1];this.nextCenter_=r.targetCenter;const s=t+h*(n-t),o=e+h*(i-e);this.targetCenter_=[s,o]}if(r.sourceResolution&&r.targetResolution){const t=1===h?r.targetResolution:r.sourceResolution+h*(r.targetResolution-r.sourceResolution);if(r.anchor){const e=this.getViewportSize_(this.getRotation()),n=this.constraints_.resolution(t,0,e,!0);this.targetCenter_=this.calculateCenterZoom(n,r.anchor)}this.nextResolution_=r.targetResolution,this.targetResolution_=t,this.applyTargetState_(!0)}if(void 0!==r.sourceRotation&&void 0!==r.targetRotation){const t=1===h?(0,l.xP)(r.targetRotation+Math.PI,2*Math.PI)-Math.PI:r.sourceRotation+h*(r.targetRotation-r.sourceRotation);if(r.anchor){const e=this.constraints_.rotation(t,!0);this.targetCenter_=this.calculateCenterRotate(e,r.anchor)}this.nextRotation_=r.targetRotation,this.targetRotation_=t}if(this.applyTargetState_(!0),e=!0,!r.complete)break}if(s){this.animations_[n]=null,this.setHint(r.A.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const t=i[0].callback;t&&A(t,!0)}}this.animations_=this.animations_.filter(Boolean),e&&void 0===this.updateAnimationKey_&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let n;const i=this.getCenterInternal();return void 0!==i&&(n=[i[0]-e[0],i[1]-e[1]],(0,c.e$)(n,t-this.getRotation()),(0,c.WQ)(n,e)),n}calculateCenterZoom(t,e){let n;const i=this.getCenterInternal(),r=this.getResolution();if(void 0!==i&&void 0!==r){n=[e[0]-t*(e[0]-i[0])/r,e[1]-t*(e[1]-i[1])/r]}return n}getViewportSize_(t){const e=this.viewportSize_;if(t){const n=e[0],i=e[1];return[Math.abs(n*Math.cos(t))+Math.abs(i*Math.sin(t)),Math.abs(n*Math.sin(t))+Math.abs(i*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t?(0,m.te)(t,this.getProjection()):t}getCenterInternal(){return this.get(s.A.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return void 0!==t?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return(0,m.JR)(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();(0,a.v)(e,"The view center is not defined");const n=this.getResolution();(0,a.v)(void 0!==n,"The view resolution is not defined");const i=this.getRotation();return(0,a.v)(void 0!==i,"The view rotation is not defined"),(0,f.Bg)(e,n,i,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(s.A.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal((0,m.SD)(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const n=(0,f.RG)(t)/e[0],i=(0,f.Oq)(t)/e[1];return Math.max(n,i)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,i=Math.log(e/n)/Math.log(t);return function(n){return e/Math.pow(t,n*i)}}getRotation(){return this.get(s.A.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),n=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,r=Math.log(n/i)/e;return function(t){return Math.log(n/t)/e/r}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const n=this.padding_;return n&&(e=[e[0]-n[1]-n[3],e[1]-n[0]-n[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),n=this.getRotation();let i=this.getCenterInternal();const r=this.padding_;if(r){const t=this.getViewportSizeMinusPadding_();i=E(i,this.getViewportSize_(),[t[0]/2+r[3],t[1]/2+r[0]],e,n)}return{center:i.slice(0),projection:void 0!==t?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:n,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return void 0!==e&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e,n,i=this.minZoom_||0;if(this.resolutions_){const r=(0,o.FT)(this.resolutions_,t,1);i=r,e=this.resolutions_[r],n=r==this.resolutions_.length-1?2:e/this.resolutions_[r+1]}else e=this.maxResolution_,n=this.zoomFactor_;return i+Math.log(e/t)/Math.log(n)}getResolutionForZoom(t){if(this.resolutions_?.length){if(1===this.resolutions_.length)return this.resolutions_[0];const e=(0,l.qE)(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[e]/this.resolutions_[e+1];return this.resolutions_[e]/Math.pow(n,(0,l.qE)(t-e,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let n;if((0,a.v)(Array.isArray(t)||"function"==typeof t.getSimplifiedGeometry,"Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){(0,a.v)(!(0,f.Im)(t),"Cannot fit empty extent provided as `geometry`");const e=(0,m.SD)(t,this.getProjection());n=(0,g.VY)(e)}else if("Circle"===t.getType()){const e=(0,m.SD)(t.getExtent(),this.getProjection());n=(0,g.VY)(e),n.rotate(this.getRotation(),(0,f.q1)(e))}else{const e=(0,m.Tf)();n=e?t.clone().transform(e,this.getProjection()):t}this.fitInternal(n,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),n=Math.cos(e),i=Math.sin(-e),r=t.getFlatCoordinates(),s=t.getStride();let o=1/0,a=1/0,l=-1/0,h=-1/0;for(let t=0,e=r.length;t<e;t+=s){const e=r[t]*n-r[t+1]*i,s=r[t]*i+r[t+1]*n;o=Math.min(o,e),a=Math.min(a,s),l=Math.max(l,e),h=Math.max(h,s)}return[o,a,l,h]}fitInternal(t,e){let n=(e=e||{}).size;n||(n=this.getViewportSizeMinusPadding_());const i=void 0!==e.padding?e.padding:[0,0,0,0],r=void 0!==e.nearest&&e.nearest;let s;s=void 0!==e.minResolution?e.minResolution:void 0!==e.maxZoom?this.getResolutionForZoom(e.maxZoom):0;const o=this.rotatedExtentForGeometry(t);let a=this.getResolutionForExtentInternal(o,[n[0]-i[1]-i[3],n[1]-i[0]-i[2]]);a=isNaN(a)?s:Math.max(a,s),a=this.getConstrainedResolution(a,r?0:1);const l=this.getRotation(),h=Math.sin(l),u=Math.cos(l),c=(0,f.q1)(o);c[0]+=(i[1]-i[3])/2*a,c[1]+=(i[0]-i[2])/2*a;const d=c[0]*u-c[1]*h,g=c[1]*u+c[0]*h,m=this.getConstrainedCenter([d,g],a),y=e.callback?e.callback:p.tV;void 0!==e.duration?this.animateInternal({resolution:a,center:m,duration:e.duration,easing:e.easing},y):(this.targetResolution_=a,this.targetCenter_=m,this.applyTargetState_(!1,!0),A(y,!0))}centerOn(t,e,n){this.centerOnInternal((0,m.Ad)(t,this.getProjection()),e,n)}centerOnInternal(t,e,n){this.setCenterInternal(E(t,e,n,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,n,i){let r;const s=this.padding_;if(s&&t){const o=this.getViewportSizeMinusPadding_(-n),a=E(t,i,[o[0]/2+s[3],o[1]/2+s[0]],e,n);r=[t[0]-a[0],t[1]-a[1]]}return r}isDef(){return!!this.getCenterInternal()&&void 0!==this.getResolution()}adjustCenter(t){const e=(0,m.te)(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&(0,m.Ad)(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.getViewportSize_(this.getRotation()),r=this.constraints_.resolution(this.targetResolution_*t,0,i,n);e&&(this.targetCenter_=this.calculateCenterZoom(r,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=(0,m.Ad)(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const n=this.getAnimating()||this.getInteracting(),i=this.constraints_.rotation(this.targetRotation_+t,n);e&&(this.targetCenter_=this.calculateCenterRotate(i,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t?(0,m.Ad)(t,this.getProjection()):t)}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const n=this.getAnimating()||this.getInteracting()||e,i=this.constraints_.rotation(this.targetRotation_,n),r=this.getViewportSize_(i),o=this.constraints_.resolution(this.targetResolution_,0,r,n),a=this.constraints_.center(this.targetCenter_,o,r,n,this.calculateCenterShift(this.targetCenter_,o,i,r));this.get(s.A.ROTATION)!==i&&this.set(s.A.ROTATION,i),this.get(s.A.RESOLUTION)!==o&&(this.set(s.A.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),a&&this.get(s.A.CENTER)&&(0,c.aI)(this.get(s.A.CENTER),a)||this.set(s.A.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,n){t=void 0!==t?t:200;const i=e||0,r=this.constraints_.rotation(this.targetRotation_),s=this.getViewportSize_(r),o=this.constraints_.resolution(this.targetResolution_,i,s),a=this.constraints_.center(this.targetCenter_,o,s,!1,this.calculateCenterShift(this.targetCenter_,o,r,s));if(0===t&&!this.cancelAnchor_)return this.targetResolution_=o,this.targetRotation_=r,this.targetCenter_=a,void this.applyTargetState_();n=n||(0===t?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,this.getResolution()===o&&this.getRotation()===r&&this.getCenterInternal()&&(0,c.aI)(this.getCenterInternal(),a)||(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:r,center:a,resolution:o,duration:t,easing:d.vT,anchor:n}))}beginInteraction(){this.resolveConstraints(0),this.setHint(r.A.INTERACTING,1)}endInteraction(t,e,n){n=n&&(0,m.Ad)(n,this.getProjection()),this.endInteractionInternal(t,e,n)}endInteractionInternal(t,e,n){this.getInteracting()&&(this.setHint(r.A.INTERACTING,-1),this.resolveConstraints(t,e,n))}getConstrainedCenter(t,e){const n=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),n)}getConstrainedZoom(t,e){const n=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(n,e))}getConstrainedResolution(t,e){e=e||0;const n=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,n)}}function A(t,e){setTimeout((function(){t(e)}),0)}function S(t){return!(t.sourceCenter&&t.targetCenter&&!(0,c.aI)(t.sourceCenter,t.targetCenter))&&(t.sourceResolution===t.targetResolution&&t.sourceRotation===t.targetRotation)}function E(t,e,n,i,r){const s=Math.cos(-r);let o=Math.sin(-r),a=t[0]*s-t[1]*o,l=t[1]*s+t[0]*o;a+=(e[0]/2-n[0])*i,l+=(n[1]-e[1]/2)*i,o=-o;return[a*s-l*o,l*s+a*o]}var T=w},87598:function(t,e,n){"use strict";n.d(e,{m8:function(){return r},nF:function(){return s}});let i=!1;function r(t,e,n,r,s,o,a){const l=new XMLHttpRequest;l.open("GET","function"==typeof t?t(n,r,s):t,!0),"arraybuffer"==e.getType()&&(l.responseType="arraybuffer"),l.withCredentials=i,l.onload=function(t){if(!l.status||l.status>=200&&l.status<300){const t=e.getType();try{let i;"text"==t||"json"==t?i=l.responseText:"xml"==t?i=l.responseXML||l.responseText:"arraybuffer"==t&&(i=l.response),i?o(e.readFeatures(i,{extent:n,featureProjection:s}),e.readProjection(i)):a()}catch{a()}}else a()},l.onerror=a,l.send()}function s(t,e){return function(n,i,s,o,a){r(t,e,n,i,s,((t,e)=>{this.addFeatures(t),void 0!==o&&o(t)}),(()=>{this.changed(),void 0!==a&&a()}))}}},88292:function(t,e,n){"use strict";n.d(e,{d1:function(){return u},mC:function(){return l},mY:function(){return c}});var i=n(42484),r=n(21133),s=n(38276),o=n(44689);class a{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=d,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new a({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=d,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function l(t){let e;if("function"==typeof t)e=t;else{let n;if(Array.isArray(t))n=t;else{(0,i.v)("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`");n=[t]}e=function(){return n}}return e}let h=null;function u(t,e){if(!h){const t=new s.A({color:"rgba(255,255,255,0.4)"}),e=new o.A({color:"#3399CC",width:1.25});h=[new a({image:new r.A({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return h}function c(){const t={},e=[255,255,255,1],n=[0,153,255,1];return t.Polygon=[new a({fill:new s.A({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new a({stroke:new o.A({color:e,width:5})}),new a({stroke:new o.A({color:n,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new a({image:new r.A({radius:6,fill:new s.A({color:n}),stroke:new o.A({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function d(t){return t.getGeometry()}e.Ay=a},88295:function(t){function e(t,e){const n=new RegExp(e,"g"),i=t.match(n);return i?i.length:0}t.exports=e,t.exports.default=e},88887:function(t,e,n){"use strict";n.d(e,{A:function(){return E}});var i=n(42484),r=n(30942),s=n(94679),o=n(44090),a=n(61341),l=n(16235),h=n(8656),u=n(27527),c=n(73808),d=n(21847),f=n(3974),p=n(12911),g=n(37759),m=n(55280),y=n(1749);const _={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},v={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class x extends y.A{constructor(t,e){super(t,e),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.renderedOpacity_=1,this.tmpTransform_=(0,p.vt)(),this.tileClipContexts_=null}drawTile(t,e,n,i,r,s,o,a){this.updateExecutorGroup_(t,e.pixelRatio,e.viewState.projection),this.tileImageNeedsRender_(t)&&this.renderTileImage_(t,e),super.drawTile(t,e,n,i,r,s,o,a)}getTile(t,e,n,i){const r=this.getOrCreateTile(t,e,n,i);if(!r)return null;const o=i.viewState.resolution,a=i.viewHints;return!!(a[s.A.ANIMATING]||a[s.A.INTERACTING])&&r.wantedResolution||(r.wantedResolution=o),r}prepareFrame(t){const e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,n){const i=this.getLayer(),s=i.getRevision(),o=i.getRenderOrder()||null,a=t.wantedResolution,c=t.getReplayState(i);if(!c.dirty&&c.renderedResolution===a&&c.renderedRevision==s&&c.renderedRenderOrder==o)return;const d=i.getSource(),f=!!i.getDeclutter(),p=d.getTileGrid(),y=d.getTileGridForProjection(n).getTileCoordExtent(t.wrappedTileCoord),_=d.getSourceTiles(e,n,t),v=(0,g.v6)(i);delete t.hitDetectionImageData[v],t.executorGroups[v]=[],c.dirty=!1;for(let n=0,s=_.length;n<s;++n){const s=_[n];if(s.getState()!=r.A.LOADED)continue;const g=s.tileCoord,x=p.getTileCoordExtent(g),b=(0,l._N)(y,x),w=(0,l.r)(b,i.getRenderBuffer()*a,this.tempExtent),A=(0,l.aI)(x,b)?null:w,S=new h.A(0,b,a,e),E=(0,m.j)(a,e),T=function(t,e){let n;const r=t.getStyleFunction()||i.getStyleFunction();if(r&&(n=r(t,a)),n){const i=this.renderFeature(t,E,n,S,f,e);c.dirty=c.dirty||i}},C=s.getFeatures();o&&o!==c.renderedRenderOrder&&C.sort(o);for(let t=0,e=C.length;t<e;++t){const e=C[t];A&&!(0,l.HY)(A,e.getGeometry().getExtent())||T.call(this,e,t)}const M=S.finish(),L="vector"!==i.getRenderMode()&&f&&1===_.length?null:b,P=new u.Ay(L,a,e,d.getOverlaps(),M,i.getRenderBuffer(),!0);t.executorGroups[v].push(P)}c.renderedRevision=s,c.renderedRenderOrder=o,c.renderedResolution=a}forEachFeatureAtCoordinate(t,e,n,i,r){const s=e.viewState.resolution,o=e.viewState.rotation;n=null==n?0:n;const a=this.getLayer(),h=a.getSource().getTileGridForProjection(e.viewState.projection),u=(0,l.Tr)([t]);(0,l.r)(u,s*n,u);const c={},d=function(t,e,n){let s=t.getId();void 0===s&&(s=(0,g.v6)(t));const o=c[s];if(o){if(!0!==o&&n<o.distanceSq){if(0===n)return c[s]=!0,r.splice(r.lastIndexOf(o),1),i(t,a,e);o.geometry=e,o.distanceSq=n}}else{if(0===n)return c[s]=!0,i(t,a,e);r.push(c[s]={feature:t,layer:a,geometry:e,distanceSq:n,callback:i})}},f=this.renderedTiles,p=(0,g.v6)(a),m=a.getDeclutter(),y=m?e.declutter?.[m]?.all().map((t=>t.value)):null;let _;t:for(let e=0,i=f.length;e<i;++e){const i=f[e],r=h.getTileCoordExtent(i.wrappedTileCoord);if(!(0,l.HY)(r,u))continue;const a=i.executorGroups[p];for(let e=0,i=a.length;e<i;++e)if(_=a[e].forEachFeatureAtCoordinate(t,s,o,n,d,y),_)break t}return _}getFeatures(t){return 0===this.renderedTiles.length?Promise.resolve([]):new Promise(((e,n)=>{const i=this.getLayer(),s=i.getSource(),o=this.renderedProjection,h=o.getExtent(),u=this.renderedResolution,c=s.getTileGridForProjection(o),m=(0,p.Bb)(this.renderedPixelToCoordinateTransform_,t.slice()),y=c.getTileCoordForCoordAndResolution(m,u).toString(),_=this.renderedTiles.find((t=>t.tileCoord.toString()===y&&t.getState()===r.A.LOADED));if(!_||_.loadingSourceTiles>0)return void e([]);s.getWrapX()&&o.canWrapX()&&!(0,l.ms)(h,c.getTileCoordExtent(_.tileCoord))&&(0,a.Li)(m,o);const v=(0,g.v6)(i),x=c.getTileCoordExtent(_.wrappedTileCoord),b=(0,l.Py)(x),w=[(m[0]-b[0])/u,(b[1]-m[1])/u],A=_.getSourceTiles().reduce(((t,e)=>t.concat(e.getFeatures())),[]);let S=_.hitDetectionImageData[v];if(!S){const t=(0,f.xq)(c.getTileSize(c.getZForResolution(u,s.zDirection))),e=this.renderedRotation_,n=[this.getRenderTransform(c.getTileCoordCenter(_.wrappedTileCoord),u,0,d.tF,t[0]*d.tF,t[1]*d.tF,0)];S=(0,d._7)(t,n,A,i.getStyleFunction(),c.getTileCoordExtent(_.wrappedTileCoord),_.getReplayState(i).renderedResolution,e),_.hitDetectionImageData[v]=S}e((0,d.F8)(w,A,S))}))}getFeaturesInExtent(t){const e=[],n=this.getTileCache();if(0===n.getCount())return e;const i=this.getLayer().getSource().getTileGridForProjection(this.frameState.viewState.projection),s=i.getZForResolution(this.renderedResolution),o={};return n.forEach((n=>{if(n.tileCoord[0]!==s||n.getState()!==r.A.LOADED)return;const a=n.getSourceTiles();for(let n=0,r=a.length;n<r;++n){const r=a[n],s=r.getKey();if(s in o)continue;o[s]=!0;const h=r.tileCoord;if((0,l.HY)(t,i.getTileCoordExtent(h))){const n=r.getFeatures();if(n)for(let i=0,r=n.length;i<r;++i){const r=n[i],s=r.getGeometry();(0,l.HY)(t,s.getExtent())&&e.push(r)}}}})),e}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t,e){const n=this.context,i=n.globalAlpha;n.globalAlpha=e.opacity;const r=t.viewHints,o=!(r[s.A.ANIMATING]||r[s.A.INTERACTING]),a=[this.context.canvas.width,this.context.canvas.height],l=this.getLayer().getDeclutter(),h=l?t.declutter?.[l]:void 0,c=(0,g.v6)(this.getLayer()),d=this.renderedTiles;for(let e=0,n=d.length;e<n;++e){const n=d[e],i=n.executorGroups[c];if(i)for(let e=i.length-1;e>=0;--e)i[e].execute(this.context,a,this.getTileRenderTransform(n,t),t.viewState.rotation,o,u.$i,h)}n.globalAlpha=i}renderDeferredInternal(t){const e=this.renderedTiles,n=(0,g.v6)(this.getLayer()),i=e.reduce(((t,e,i)=>(e.executorGroups[n].forEach((e=>t.push({executorGroup:e,index:i}))),t)),[]),r=i.map((({executorGroup:t})=>t.getDeferredZIndexContexts())),s={};for(let t=0,e=i.length;t<e;++t){const e=i[t].executorGroup.getDeferredZIndexContexts();for(const t in e)s[t]=!0}Object.keys(s).map(Number).sort(o.V_).forEach((t=>{r.forEach(((e,n)=>{e[t]&&(e[t].forEach((t=>{const{executorGroup:e,index:r}=i[n],s=e.getRenderedContext(),o=s.globalAlpha;s.globalAlpha=this.renderedOpacity_;const a=this.tileClipContexts_[r];a&&a.draw(s),t.draw(s),a&&s.restore(),s.globalAlpha=o,t.clear()})),e[t].length=0)}))}))}getTileRenderTransform(t,e){const n=e.pixelRatio,i=e.viewState,r=i.center,s=i.resolution,o=i.rotation,a=e.size,l=Math.round(a[0]*n),h=Math.round(a[1]*n),u=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),c=t.tileCoord,d=u.getTileCoordExtent(t.wrappedTileCoord),f=u.getTileCoordExtent(c,this.tempExtent)[0]-d[0];return(0,p.lw)((0,p.hs)(this.inversePixelTransform.slice(),1/n,1/n),this.getRenderTransform(r,s,o,n,l,h,f))}postRender(t,e){const n=e.viewHints,i=!(n[s.A.ANIMATING]||n[s.A.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation,this.renderedOpacity_=e.layerStatesArray[e.layerIndex].opacity;const r=this.getLayer(),o=r.getRenderMode(),a=t.globalAlpha;t.globalAlpha=this.renderedOpacity_;const h=r.getDeclutter(),d=h?v[o].filter((t=>!u.$i.includes(t))):v[o],f=e.viewState,p=f.rotation,m=r.getSource(),y=m.getTileGridForProjection(f.projection).getZForResolution(f.resolution,m.zDirection),_=this.renderedTiles,x=[],b=[],w=[],A=(0,g.v6)(r);let S=!0;for(let n=_.length-1;n>=0;--n){const s=_[n];S=S&&!s.getReplayState(r).dirty;const o=s.executorGroups[A].filter((t=>t.hasExecutors(d)));if(0===o.length)continue;const a=this.getTileRenderTransform(s,e),u=s.tileCoord[0];let f=!1;const g=o[0].getClipCoords(a);let m,v=t;if(g){m=new c.A,v=m.getContext();for(let t=0,e=x.length;t<e;++t)if(y!==u&&u<b[t]){const e=x[t];(0,l.HY)([g[0],g[3],g[4],g[7]],[e[0],e[3],e[4],e[7]])&&(f||(v.save(),f=!0),v.beginPath(),v.moveTo(g[0],g[1]),v.lineTo(g[2],g[3]),v.lineTo(g[4],g[5]),v.lineTo(g[6],g[7]),v.moveTo(e[6],e[7]),v.lineTo(e[4],e[5]),v.lineTo(e[2],e[3]),v.lineTo(e[0],e[1]),v.clip())}x.push(g),b.push(u)}for(let n=0,r=o.length;n<r;++n){o[n].execute(t,[t.canvas.width,t.canvas.height],a,p,i,d,e.declutter?.[h])}f&&(v===t?v.restore():w[n]=m)}t.globalAlpha=a,this.ready=S,this.tileClipContexts_=w,e.declutter||this.renderDeferredInternal(e),super.postRender(t,e)}renderFeature(t,e,n,i,r,s){if(!n)return!1;let o=!1;if(Array.isArray(n))for(let a=0,l=n.length;a<l;++a)o=(0,m.nl)(i,t,n[a],e,this.boundHandleStyleImageChange_,void 0,r,s)||o;else o=(0,m.nl)(i,t,n,e,this.boundHandleStyleImageChange_,void 0,r,s);return o}tileImageNeedsRender_(t){const e=this.getLayer();if("vector"===e.getRenderMode())return!1;const n=t.getReplayState(e),i=e.getRevision(),r=t.wantedResolution;return n.renderedTileResolution!==r||n.renderedTileRevision!==i}renderTileImage_(t,e){const n=this.getLayer(),i=t.getReplayState(n),r=n.getRevision(),s=t.executorGroups[(0,g.v6)(n)];i.renderedTileRevision=r;const o=t.wrappedTileCoord,a=o[0],l=n.getSource();let h=e.pixelRatio;const u=e.viewState.projection,c=l.getTileGridForProjection(u),d=c.getResolution(t.tileCoord[0]),f=e.pixelRatio/t.wantedResolution*d,m=c.getResolution(a),y=t.getContext();h=Math.round(Math.max(h,f/h));const v=l.getTilePixelSize(a,h,u);y.canvas.width=v[0],y.canvas.height=v[1];const x=h/f;if(1!==x){const t=(0,p.cL)(this.tmpTransform_);(0,p.hs)(t,x,x),y.setTransform.apply(y,t)}const b=c.getTileCoordExtent(o,this.tempExtent),w=f/m,A=(0,p.cL)(this.tmpTransform_);(0,p.hs)(A,w,-w),(0,p.Tl)(A,-b[0],-b[3]);for(let t=0,e=s.length;t<e;++t){s[t].execute(y,[y.canvas.width*x,y.canvas.height*x],A,0,!0,_[n.getRenderMode()],null)}i.renderedTileResolution=t.wantedResolution}}var b=x,w=n(7992),A=n(74568);class S extends w.A{constructor(t){t=t||{};const e=Object.assign({},t);delete e.preload;const n=void 0===t.cacheSize?0:t.cacheSize;delete t.cacheSize,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=n;const r=t.renderMode||"hybrid";(0,i.v)("hybrid"==r||"vector"==r,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=r,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new b(this,{cacheSize:this.cacheSize_})}getFeatures(t){return super.getFeatures(t)}getFeaturesInExtent(t){return this.getRenderer().getFeaturesInExtent(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(A.A.PRELOAD)}getUseInterimTilesOnError(){return this.get(A.A.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(A.A.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(A.A.USE_INTERIM_TILES_ON_ERROR,t)}}var E=S},89380:function(t,e,n){"use strict";var i=n(3974),r=n(37759);class s{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=(0,i.xq)(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new s({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return(0,r.b0)()}getImage(t){return(0,r.b0)()}getHitDetectionImage(){return(0,r.b0)()}getPixelRatio(t){return 1}getImageState(){return(0,r.b0)()}getImageSize(){return(0,r.b0)()}getOrigin(){return(0,r.b0)()}getSize(){return(0,r.b0)()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,i.xq)(t)}listenImageChange(t){(0,r.b0)()}load(){(0,r.b0)()}unlistenImageChange(t){(0,r.b0)()}ready(){return Promise.resolve()}}e.A=s},89762:function(t,e){"use strict";e.A=class{drawCustom(t,e,n,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,n){}drawFeature(t,e,n){}drawGeometryCollection(t,e,n){}drawLineString(t,e,n){}drawMultiLineString(t,e,n){}drawMultiPoint(t,e,n){}drawMultiPolygon(t,e,n){}drawPoint(t,e,n){}drawPolygon(t,e,n){}drawText(t,e,n){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}},90278:function(t,e,n){"use strict";n.d(e,{A:function(){return T}});var i=n(96479),r=n(61341),s=n(22685),o=n(18381);const a="snap",l="unsnap";class h extends o.Ay{constructor(t,e){super(t),this.vertex=e.vertex,this.vertexPixel=e.vertexPixel,this.feature=e.feature,this.segment=e.segment}}var u=n(92662),c=n(16235),d=n(95702),f=n(30470),p=n(11238),g=n(25231),m=n(9424),y=n(12918),_=n(37759),v=n(87113);const x={Circle(t,e){let n=t;const i=(0,g.Tf)();i&&(n=n.clone().transform(i,e));const r=(0,f.nD)(n);return i&&r.transform(e,i),x.Polygon(r)},GeometryCollection(t,e){const n=[],i=t.getGeometriesArray();for(let t=0;t<i.length;++t){const r=x[i[t].getType()];r&&n.push(r(i[t],e))}return n.flat()},LineString(t){const e=[],n=t.getFlatCoordinates(),i=t.getStride();for(let t=0,r=n.length-i;t<r;t+=i)e.push([n.slice(t,t+2),n.slice(t+i,t+i+2)]);return e},MultiLineString(t){const e=[],n=t.getFlatCoordinates(),i=t.getStride(),r=t.getEnds();let s=0;for(let t=0,o=r.length;t<o;++t){const o=r[t];for(let t=s,r=o-i;t<r;t+=i)e.push([n.slice(t,t+2),n.slice(t+i,t+i+2)]);s=o}return e},MultiPoint(t){const e=[],n=t.getFlatCoordinates(),i=t.getStride();for(let t=0,r=n.length-i;t<r;t+=i)e.push([n.slice(t,t+2)]);return e},MultiPolygon(t){const e=[],n=t.getFlatCoordinates(),i=t.getStride(),r=t.getEndss();let s=0;for(let t=0,o=r.length;t<o;++t){const o=r[t];for(let t=0,r=o.length;t<r;++t){const r=o[t];for(let t=s,o=r-i;t<o;t+=i)e.push([n.slice(t,t+2),n.slice(t+i,t+i+2)]);s=r}}return e},Point(t){return[[t.getFlatCoordinates().slice(0,2)]]},Polygon(t){const e=[],n=t.getFlatCoordinates(),i=t.getStride(),r=t.getEnds();let s=0;for(let t=0,o=r.length;t<o;++t){const o=r[t];for(let t=s,r=o-i;t<r;t+=i)e.push([n.slice(t,t+2),n.slice(t+i,t+i+2)]);s=o}return e}};function b(t){return t.feature?t.feature:t.element?t.element:null}const w=[],A=[],S=[];class E extends v.A{constructor(t){const e=t=t||{};e.handleDownEvent||(e.handleDownEvent=d.rT),e.stopDown||(e.stopDown=d.W8),super(e),this.on,this.once,this.un,this.source_=t.source?t.source:null,this.vertex_=void 0===t.vertex||t.vertex,this.edge_=void 0===t.edge||t.edge,this.intersection_=void 0!==t.intersection&&t.intersection,this.features_=t.features?t.features:null,this.featuresListenerKeys_=[],this.featureChangeListenerKeys_={},this.indexedFeaturesExtents_={},this.pendingFeatures_={},this.pixelTolerance_=void 0!==t.pixelTolerance?t.pixelTolerance:10,this.rBush_=new y.A,this.snapped_=null,this.segmenters_=Object.assign({},x,t.segmenters)}addFeature(t,e){e=void 0===e||e;const n=(0,_.v6)(t),i=t.getGeometry();if(i){const e=this.segmenters_[i.getType()];if(e){this.indexedFeaturesExtents_[n]=i.getExtent((0,c.S5)());const r=e(i,this.getMap().getView().getProjection());let s=r.length;for(let e=0;e<s;++e){const n=r[e];A[e]=(0,c.Tr)(n),S[e]={feature:t,segment:n}}if(A.length=s,S.length=s,this.intersection_)for(let e=0,n=r.length;e<n;++e){const n=r[e];if(1===n.length)continue;const i=A[e];for(let o=0,a=r.length;o<a;++o){if(e===o||e-1===o||e+1===o)continue;const a=r[o];if(!(0,c.HY)(i,A[o]))continue;const l=(0,p.i)(n,a);if(!l)continue;const h=[l];A[s]=(0,c.Tr)(h),S[s++]={feature:t,segment:h,isIntersection:!0}}const o=this.rBush_.getInExtent(A[e]);for(const{segment:e}of o){if(1===e.length)continue;const i=(0,p.i)(n,e);if(!i)continue;const r=[i];A[s]=(0,c.Tr)(r),S[s++]={feature:t,segment:r,isIntersection:!0}}}1===s?this.rBush_.insert(A[0],S[0]):this.rBush_.load(A,S)}}e&&(this.featureChangeListenerKeys_[n]=(0,u.KT)(t,s.A.CHANGE,this.handleFeatureChange_,this))}getFeatures_(){let t;return this.features_?t=this.features_:this.source_&&(t=this.source_.getFeatures()),t}areSnapDataEqual_(t,e){return t.segment===e.segment&&t.feature===e.feature}handleEvent(t){const e=this.snapTo(t.pixel,t.coordinate,t.map);return e?(t.coordinate=e.vertex.slice(0,2),t.pixel=e.vertexPixel,this.snapped_&&!this.areSnapDataEqual_(this.snapped_,e)&&this.dispatchEvent(new h(l,this.snapped_)),this.snapped_={vertex:t.coordinate,vertexPixel:t.pixel,feature:e.feature,segment:e.segment},this.dispatchEvent(new h(a,this.snapped_))):this.snapped_&&(this.dispatchEvent(new h(l,this.snapped_)),this.snapped_=null),super.handleEvent(t)}handleFeatureAdd_(t){const e=b(t);e&&this.addFeature(e)}handleFeatureRemove_(t){const e=b(t);e&&this.removeFeature(e)}handleFeatureChange_(t){const e=t.target;if(this.handlingDownUpSequence){const t=(0,_.v6)(e);t in this.pendingFeatures_||(this.pendingFeatures_[t]=e)}else this.updateFeature_(e)}handleUpEvent(t){const e=Object.values(this.pendingFeatures_);if(e.length)for(const t of e)this.updateFeature_(t);return!1}removeFeature(t,e){const n=void 0===e||e,i=(0,_.v6)(t),r=this.indexedFeaturesExtents_[i];if(r){const e=this.rBush_,n=[];e.forEachInExtent(r,(function(e){t===e.feature&&n.push(e)}));for(let t=n.length-1;t>=0;--t)e.remove(n[t])}n&&((0,u.JH)(this.featureChangeListenerKeys_[i]),delete this.featureChangeListenerKeys_[i])}setMap(t){const e=this.getMap(),n=this.featuresListenerKeys_;let r=this.getFeatures_();if(Array.isArray(r)||(r=r.getArray()),e&&(n.forEach(u.JH),n.length=0,this.rBush_.clear(),Object.values(this.featureChangeListenerKeys_).forEach(u.JH),this.featureChangeListenerKeys_={}),super.setMap(t),t){this.features_?n.push((0,u.KT)(this.features_,i.A.ADD,this.handleFeatureAdd_,this),(0,u.KT)(this.features_,i.A.REMOVE,this.handleFeatureRemove_,this)):this.source_&&n.push((0,u.KT)(this.source_,m.A.ADDFEATURE,this.handleFeatureAdd_,this),(0,u.KT)(this.source_,m.A.REMOVEFEATURE,this.handleFeatureRemove_,this));for(const t of r)this.addFeature(t)}}snapTo(t,e,n){const i=n.getView().getProjection(),s=(0,g.Ad)(e,i),o=(0,g.JR)((0,c.r)((0,c.Tr)([s]),n.getView().getResolution()*this.pixelTolerance_),i),a=this.rBush_.getInExtent(o),l=a.length;if(0===l)return null;let h,u,d,f=1/0,p=null;const m=this.pixelTolerance_*this.pixelTolerance_,y=()=>{if(h){const e=n.getPixelFromCoordinate(h);if((0,r.hG)(t,e)<=m&&(d&&this.intersection_||!d&&(this.vertex_||this.edge_)))return{vertex:h,vertexPixel:[Math.round(e[0]),Math.round(e[1])],feature:u,segment:p}}return null};if(this.vertex_||this.intersection_){for(let t=0;t<l;++t){const e=a[t];if("Circle"!==e.feature.getGeometry().getType())for(const t of e.segment){const n=(0,g.Ad)(t,i),o=(0,r.hG)(s,n);o<f&&(h=t,f=o,u=e.feature,d=e.isIntersection)}}const t=y();if(t)return t}if(this.edge_){for(let t=0;t<l;++t){let e=null;const n=a[t];if("Circle"===n.feature.getGeometry().getType()){let t=n.feature.getGeometry();const o=(0,g.Tf)();o&&(t=t.clone().transform(o,i)),e=(0,r.hw)(s,t)}else{const[t,o]=n.segment;o&&(w[0]=(0,g.Ad)(t,i),w[1]=(0,g.Ad)(o,i),e=(0,r.sG)(s,w))}if(e){const t=(0,r.hG)(s,e);t<f&&(h=(0,g.te)(e,i),p="Circle"===n.feature.getGeometry().getType()?null:n.segment,f=t,u=n.feature)}}const t=y();if(t)return t}return null}updateFeature_(t){this.removeFeature(t,!1),this.addFeature(t,!1)}}var T=E},90324:function(t,e,n){"use strict";var i=n(70192),r=n(42484),s=n(31141),o=n(37759),a=n(99516);class l extends i.A{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);"object"==typeof t.properties&&(delete e.properties,Object.assign(e,t.properties)),e[a.A.OPACITY]=void 0!==t.opacity?t.opacity:1,(0,r.v)("number"==typeof e[a.A.OPACITY],"Layer opacity must be a number"),e[a.A.VISIBLE]=void 0===t.visible||t.visible,e[a.A.Z_INDEX]=t.zIndex,e[a.A.MAX_RESOLUTION]=void 0!==t.maxResolution?t.maxResolution:1/0,e[a.A.MIN_RESOLUTION]=void 0!==t.minResolution?t.minResolution:0,e[a.A.MIN_ZOOM]=void 0!==t.minZoom?t.minZoom:-1/0,e[a.A.MAX_ZOOM]=void 0!==t.maxZoom?t.maxZoom:1/0,this.className_=void 0!==e.className?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:void 0===t||t},n=this.getZIndex();return e.opacity=(0,s.qE)(Math.round(100*this.getOpacity())/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=void 0!==n||e.managed?n:1/0,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return(0,o.b0)()}getLayerStatesArray(t){return(0,o.b0)()}getExtent(){return this.get(a.A.EXTENT)}getMaxResolution(){return this.get(a.A.MAX_RESOLUTION)}getMinResolution(){return this.get(a.A.MIN_RESOLUTION)}getMinZoom(){return this.get(a.A.MIN_ZOOM)}getMaxZoom(){return this.get(a.A.MAX_ZOOM)}getOpacity(){return this.get(a.A.OPACITY)}getSourceState(){return(0,o.b0)()}getVisible(){return this.get(a.A.VISIBLE)}getZIndex(){return this.get(a.A.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(a.A.EXTENT,t)}setMaxResolution(t){this.set(a.A.MAX_RESOLUTION,t)}setMinResolution(t){this.set(a.A.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(a.A.MAX_ZOOM,t)}setMinZoom(t){this.set(a.A.MIN_ZOOM,t)}setOpacity(t){(0,r.v)("number"==typeof t,"Layer opacity must be a number"),this.set(a.A.OPACITY,t)}setVisible(t){this.set(a.A.VISIBLE,t)}setZIndex(t){this.set(a.A.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}e.A=l},90405:function(t,e,n){"use strict";n.d(e,{Gd:function(){return a},a_:function(){return s},t7:function(){return r},zb:function(){return o}});var i=n(16235);function r(t,e,n,r,o){return!(0,i.sB)(o,(function(i){return!s(t,e,n,r,i[0],i[1])}))}function s(t,e,n,i,r,s){let o=0,a=t[n-i],l=t[n-i+1];for(;e<n;e+=i){const n=t[e],i=t[e+1];l<=s?i>s&&(n-a)*(s-l)-(r-a)*(i-l)>0&&o++:i<=s&&(n-a)*(s-l)-(r-a)*(i-l)<0&&o--,a=n,l=i}return 0!==o}function o(t,e,n,i,r,o){if(0===n.length)return!1;if(!s(t,e,n[0],i,r,o))return!1;for(let e=1,a=n.length;e<a;++e)if(s(t,n[e-1],n[e],i,r,o))return!1;return!0}function a(t,e,n,i,r,s){if(0===n.length)return!1;for(let a=0,l=n.length;a<l;++a){const l=n[a];if(o(t,e,l,i,r,s))return!0;e=l[l.length-1]}return!1}},90926:function(t,e,n){"use strict";var i=n(25231),r=n(77779);const s=[512,512];function o(t){const e="http://www.opengis.net/def/crs/",n=t.getCode();return n.startsWith(e)?n:n.startsWith("EPSG:")?`${e}EPSG/0/${n.slice(5)}`:(0,i.tI)(t,(0,i.Jt)("EPSG:4326"))?`${e}EPSG/0/4326`:n}function a(t,e){if(!e)return"";let n=e.toString();return e.name&&"function"!==e.name&&n.match(new RegExp("^"+e.name.replace("$","\\$")+"\\b"))&&(n="function "+n),`var ${t} = ${n};`}class l extends r.A{constructor(t){const e=t||{};super({state:"loading",projection:e.projection,attributionsCollapsible:e.attributionsCollapsible,interpolate:e.interpolate,tileSize:e.tileSize||s,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition}),this.setLoader(((t,e,n)=>this.loadTile_(t,e,n,1))),this.error_=null,this.evalscript_="",this.inputData_=null,this.processUrl_=e.url||"https://services.sentinel-hub.com/api/v1/process",this.token_="",this.tokenRenewalId_,e.auth&&this.setAuth(e.auth),e.data&&this.setData(e.data),e.evalscript&&this.setEvalscript(e.evalscript)}async setAuth(t){if(clearTimeout(this.tokenRenewalId_),"string"==typeof t)return this.token_=t,void this.fireWhenReady_();let e,n;try{e=await async function(t){const e=t.tokenUrl||"https://services.sentinel-hub.com/auth/realms/main/protocol/openid-connect/token",n=new URLSearchParams;n.append("grant_type","client_credentials"),n.append("client_id",t.clientId),n.append("client_secret",t.clientSecret);const i={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:n},r=await fetch(e,i);if(!r.ok){if(401===r.status)throw new Error("Bad client id or secret");throw new Error("Failed to get token")}return(await r.json()).access_token}(t),n=function(t){const e=t.split(".")[1].replace(/-/g,"+").replace(/_/g,"/"),n=atob(e).split(""),i=n.length,r=new Array(i);for(let t=0;t<i;++t){const e=n[t];r[t]="%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)}return JSON.parse(decodeURIComponent(r.join("")))}(e)}catch(t){return this.error_=t,void this.setState("error")}this.token_=e;const i=1e3*n.exp,r=Math.max(i-Date.now()-6e4,1);this.tokenRenewalId_=setTimeout((()=>this.setAuth(t)),r),this.fireWhenReady_()}setData(t){this.inputData_=t,this.fireWhenReady_()}setEvalscript(t){let e;if("string"==typeof t)e=t;else try{e=function(t){return`//VERSION=${t.version||"3"}\n    ${a("setup",t.setup)}\n    ${a("evaluatePixel",t.evaluatePixel)}\n    ${a("updateOutput",t.updateOutput)}\n  `}(t)}catch(t){return this.error_=t,void this.setState("error")}this.evalscript_=e,this.fireWhenReady_()}fireWhenReady_(){if(!this.token_||!this.evalscript_||!this.inputData_)return;"ready"!==this.getState()?this.setState("ready"):this.changed()}async loadTile_(t,e,n,i){const r=this.getTileGrid().getTileCoordExtent([t,e,n]),s=this.getTileSize(t),a={input:{bounds:{bbox:r,properties:{crs:o(this.getProjection())}},data:this.inputData_},output:{width:s[0],height:s[1]},evalscript:this.evalscript_},l={method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.token_}`,"Access-Control-Request-Headers":"Retry-After"},body:JSON.stringify(a),credentials:"include"},h=await fetch(this.processUrl_,l);if(!h.ok){if(429===h.status&&i<9){const r=500*2**i;return await(u=r,new Promise((t=>setTimeout(t,u)))),this.loadTile_(e,n,t,i+1)}throw new Error(`Failed to get tile: ${h.statusText}`)}var u;return async function(t){const e=await t.blob();return new Promise(((t,n)=>{const i=new Image,r=URL.createObjectURL(e);i.onload=()=>{URL.revokeObjectURL(r),t(i)},i.onerror=()=>{URL.revokeObjectURL(r),n(new Error("Failed to load image"))},i.src=r}))}(h)}getError(){return this.error_}disposeInternal(){clearTimeout(this.tokenRenewalId_),super.disposeInternal()}}e.Ay=l},91108:function(t,e,n){"use strict";n.d(e,{L$:function(){return v},M7:function(){return x},uZ:function(){return _},t7:function(){return b},nR:function(){return w},VO:function(){return u},Lm:function(){return f},z0:function(){return m},$R:function(){return l},Tl:function(){return p},Sl:function(){return g}});var i=n(46928),r=n(29079),s=n(3974);var o=class{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){const e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}delete(t){this.texture_&&t.deleteTexture(this.texture_),this.texture_=null}},a=n(48729);function l(t){const e=t.toString();return e.includes(".")?e:e+".0"}function h(t){if(t.length<2||t.length>4)throw new Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(l).join(", ")})`}function u(t){const e=(0,i._j)(t),n=e.length>3?e[3]:1;return h([e[0]/255,e[1]/255,e[2]/255,n])}const c={};let d=0;function f(t){return t in c||(c[t]=d++),c[t]}function p(t){return l(f(t))}function g(t){return"u_var_"+t}function m(){return{variables:{},properties:{},functions:{},bandCount:0,featureId:!1,geometryType:!1}}const y="getBandValue",_="u_paletteTextures",v="featureId",x="geometryType",b=-9999999;function w(t,e,n,i){return E((0,a.qg)(t,e,n),e,i)}function A(t){return(e,n,i)=>{const r=n.args.length,s=new Array(r);for(let t=0;t<r;++t)s[t]=E(n.args[t],i,e);return t(s,e)}}const S={[a.ZD.Get]:(t,e)=>{const n=e.args[0].value;return n in t.properties||(t.properties[n]={name:n,type:e.type}),"a_prop_"+n},[a.ZD.Id]:t=>(t.featureId=!0,"a_"+v),[a.ZD.GeometryType]:t=>(t.geometryType=!0,"a_"+x),[a.ZD.LineMetric]:()=>"currentLineMetric",[a.ZD.Var]:(t,e)=>{const n=e.args[0].value;return n in t.variables||(t.variables[n]={name:n,type:e.type}),g(n)},[a.ZD.Has]:(t,e)=>{const n=e.args[0].value;return n in t.properties||(t.properties[n]={name:n,type:e.type}),`(a_prop_${n} != ${l(b)})`},[a.ZD.Resolution]:()=>"u_resolution",[a.ZD.Zoom]:()=>"u_zoom",[a.ZD.Time]:()=>"u_time",[a.ZD.Any]:A((t=>`(${t.join(" || ")})`)),[a.ZD.All]:A((t=>`(${t.join(" && ")})`)),[a.ZD.Not]:A((([t])=>`(!${t})`)),[a.ZD.Equal]:A((([t,e])=>`(${t} == ${e})`)),[a.ZD.NotEqual]:A((([t,e])=>`(${t} != ${e})`)),[a.ZD.GreaterThan]:A((([t,e])=>`(${t} > ${e})`)),[a.ZD.GreaterThanOrEqualTo]:A((([t,e])=>`(${t} >= ${e})`)),[a.ZD.LessThan]:A((([t,e])=>`(${t} < ${e})`)),[a.ZD.LessThanOrEqualTo]:A((([t,e])=>`(${t} <= ${e})`)),[a.ZD.Multiply]:A((t=>`(${t.join(" * ")})`)),[a.ZD.Divide]:A((([t,e])=>`(${t} / ${e})`)),[a.ZD.Add]:A((t=>`(${t.join(" + ")})`)),[a.ZD.Subtract]:A((([t,e])=>`(${t} - ${e})`)),[a.ZD.Clamp]:A((([t,e,n])=>`clamp(${t}, ${e}, ${n})`)),[a.ZD.Mod]:A((([t,e])=>`mod(${t}, ${e})`)),[a.ZD.Pow]:A((([t,e])=>`pow(${t}, ${e})`)),[a.ZD.Abs]:A((([t])=>`abs(${t})`)),[a.ZD.Floor]:A((([t])=>`floor(${t})`)),[a.ZD.Ceil]:A((([t])=>`ceil(${t})`)),[a.ZD.Round]:A((([t])=>`floor(${t} + 0.5)`)),[a.ZD.Sin]:A((([t])=>`sin(${t})`)),[a.ZD.Cos]:A((([t])=>`cos(${t})`)),[a.ZD.Atan]:A((([t,e])=>void 0!==e?`atan(${t}, ${e})`:`atan(${t})`)),[a.ZD.Sqrt]:A((([t])=>`sqrt(${t})`)),[a.ZD.Match]:A((t=>{const e=t[0],n=t[t.length-1];let i=null;for(let r=t.length-3;r>=1;r-=2){i=`(${e} == ${t[r]} ? ${t[r+1]} : ${i||n})`}return i})),[a.ZD.Between]:A((([t,e,n])=>`(${t} >= ${e} && ${t} <= ${n})`)),[a.ZD.Interpolate]:A((([t,e,...n])=>{let i="";for(let r=0;r<n.length-2;r+=2){const s=n[r],o=i||n[r+1],a=n[r+2],h=n[r+3];let u;u=t===l(1)?`(${e} - ${s}) / (${a} - ${s})`:`(pow(${t}, (${e} - ${s})) - 1.0) / (pow(${t}, (${a} - ${s})) - 1.0)`,i=`mix(${o}, ${h}, clamp(${u}, 0.0, 1.0))`}return i})),[a.ZD.Case]:A((t=>{const e=t[t.length-1];let n=null;for(let i=t.length-3;i>=0;i-=2){n=`(${t[i]} ? ${t[i+1]} : ${n||e})`}return n})),[a.ZD.In]:A((([t,...e],n)=>{const i=function(t,e){return`operator_${t}_${Object.keys(e.functions).length}`}("in",n),r=[];for(let t=0;t<e.length;t+=1)r.push(`  if (inputValue == ${e[t]}) { return true; }`);return n.functions[i]=`bool ${i}(float inputValue) {\n${r.join("\n")}\n  return false;\n}`,`${i}(${t})`})),[a.ZD.Array]:A((t=>`vec${t.length}(${t.join(", ")})`)),[a.ZD.Color]:A((t=>{if(1===t.length)return`vec4(vec3(${t[0]} / 255.0), 1.0)`;if(2===t.length)return`vec4(vec3(${t[0]} / 255.0), ${t[1]})`;const e=t.slice(0,3).map((t=>`${t} / 255.0`));if(3===t.length)return`vec4(${e.join(", ")}, 1.0)`;const n=t[3];return`vec4(${e.join(", ")}, ${n})`})),[a.ZD.Band]:A((([t,e,n],i)=>{if(!(y in i.functions)){let t="";const e=i.bandCount||1;for(let n=0;n<e;n++){const i=Math.floor(n/4);let s=n%4;n===e-1&&1===s&&(s=3);t+=`  if (band == ${n+1}.0) {\n    return texture2D(${`${r.gF.TILE_TEXTURE_ARRAY}[${i}]`}, v_textureCoord + vec2(dx, dy))[${s}];\n  }\n`}i.functions[y]=`float getBandValue(float band, float xOffset, float yOffset) {\n  float dx = xOffset / ${r.gF.TEXTURE_PIXEL_WIDTH};\n  float dy = yOffset / ${r.gF.TEXTURE_PIXEL_HEIGHT};\n${t}\n}`}return`${y}(${t}, ${e??"0.0"}, ${n??"0.0"})`})),[a.ZD.Palette]:(t,e)=>{const[n,...r]=e.args,s=r.length,l=new Uint8Array(4*s);for(let t=0;t<r.length;t++){const e=r[t].value,n=(0,i._j)(e),s=4*t;l[s]=n[0],l[s+1]=n[1],l[s+2]=n[2],l[s+3]=255*n[3]}t.paletteTextures||(t.paletteTextures=[]);const h=`${_}[${t.paletteTextures.length}]`,u=new o(h,l);t.paletteTextures.push(u);return`texture2D(${h}, vec2((${E(n,a.wl,t)} + 0.5) / ${s}.0, 0.5))`}};function E(t,e,n){if(t instanceof a.DG){const i=S[t.operator];if(void 0===i)throw new Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return i(n,t,e)}if((t.type&a.wl)>0)return l(t.value);if((t.type&a.T8)>0)return t.value.toString();if((t.type&a.cT)>0)return p(t.value.toString());if((t.type&a.mE)>0)return u(t.value);if((t.type&a.Fq)>0)return h(t.value);if((t.type&a.qA)>0)return i=t.value,h((0,s.xq)(i));var i;throw new Error(`Unexpected expression ${t.value} (expected type ${(0,a.go)(e)})`)}},91460:function(t,e,n){"use strict";var i=n(37751),r=n(30942),s=n(69791),o=n(22685),a=n(92662),l=n(16235),h=n(31141),u=n(96081),c=n(35369),d=n(12165);class f extends i.A{constructor(t,e,n,i,s,o,a,f,p,g,m,y){super(s,r.A.IDLE,y),this.renderEdges_=void 0!==m&&m,this.pixelRatio_=a,this.gutter_=f,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=i,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const _=i.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent();let x=this.sourceTileGrid_.getExtent();const b=v?(0,l._N)(_,v):_;if(0===(0,l.UG)(b))return void(this.state=r.A.EMPTY);const w=t.getExtent();w&&(x=x?(0,l._N)(x,w):w);const A=i.getResolution(this.wrappedTileCoord_[0]),S=(0,u.aY)(t,n,b,A);if(!isFinite(S)||S<=0)return void(this.state=r.A.EMPTY);const E=void 0!==g?g:d.l;if(this.triangulation_=new c.A(t,n,b,x,S*E,A),0===this.triangulation_.getTriangles().length)return void(this.state=r.A.EMPTY);this.sourceZ_=e.getZForResolution(S);let T=this.triangulation_.calculateSourceExtent();if(x&&(t.canWrapX()?(T[1]=(0,h.qE)(T[1],x[1],x[3]),T[3]=(0,h.qE)(T[3],x[1],x[3])):T=(0,l._N)(T,x)),(0,l.UG)(T)){let n=0,i=0;t.canWrapX()&&(n=(0,l.RG)(w),i=Math.floor((T[0]-w[0])/n));(0,l.QJ)(T.slice(),t,!0).forEach((t=>{const r=e.getTileRangeForExtentAndZ(t,this.sourceZ_);for(let t=r.minX;t<=r.maxX;t++)for(let e=r.minY;e<=r.maxY;e++){const r=p(this.sourceZ_,t,e,a);if(r){const t=i*n;this.sourceTiles_.push({tile:r,offset:t})}}++i})),0===this.sourceTiles_.length&&(this.state=r.A.EMPTY)}else this.state=r.A.EMPTY}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach((e=>{const n=e.tile;if(n&&n.getState()==r.A.LOADED){const i=this.sourceTileGrid_.getTileCoordExtent(n.tileCoord);i[0]+=e.offset,i[2]+=e.offset;const r=this.clipExtent_?.slice();r&&(r[0]+=e.offset,r[2]+=e.offset),t.push({extent:i,clipExtent:r,image:n.getImage()})}})),this.sourceTiles_.length=0,0===t.length)this.state=r.A.ERROR;else{const e=this.wrappedTileCoord_[0],n=this.targetTileGrid_.getTileSize(e),i="number"==typeof n?n:n[0],s="number"==typeof n?n:n[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,u.XX)(i,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=r.A.LOADED}this.changed()}load(){if(this.state==r.A.IDLE){this.state=r.A.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach((({tile:e})=>{const n=e.getState();if(n==r.A.IDLE||n==r.A.LOADING){t++;const n=(0,a.KT)(e,o.A.CHANGE,(i=>{const s=e.getState();s!=r.A.LOADED&&s!=r.A.ERROR&&s!=r.A.EMPTY||((0,a.JH)(n),t--,0===t&&(this.unlistenSources_(),this.reproject_()))}));this.sourcesListenerKeys_.push(n)}})),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach((function({tile:t},e,n){t.getState()==r.A.IDLE&&t.load()}))}}unlistenSources_(){this.sourcesListenerKeys_.forEach(a.JH),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,s.Yg)(this.canvas_.getContext("2d")),u.BV.push(this.canvas_),this.canvas_=null),super.release()}}e.A=f},91713:function(t,e,n){"use strict";var i=n(61341),r=n(426),s=n(38808),o=n(95702),a=n(87113);class l extends a.A{constructor(t){super({stopDown:o.W8}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:(0,s.Q7)(s.TS,s.fs);this.condition_=t.onFocusOnly?(0,s.Q7)(s.eL,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const n=this.targetPointers,r=e.getEventPixel((0,a.v)(n));if(n.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(r[0],r[1]),this.lastCentroid){const e=[this.lastCentroid[0]-r[0],r[1]-this.lastCentroid[1]],n=t.map.getView();(0,i.hs)(e,n.getResolution()),(0,i.e$)(e,n.getRotation()),n.adjustCenterInternal(e)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=r,this.lastPointersCount_=n.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,n=e.getView();if(0===this.targetPointers.length){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const t=this.kinetic_.getDistance(),i=this.kinetic_.getAngle(),s=n.getCenterInternal(),o=e.getPixelFromCoordinateInternal(s),a=e.getCoordinateFromPixelInternal([o[0]-t*Math.cos(i),o[1]-t*Math.sin(i)]);n.animateInternal({center:n.getConstrainedCenter(a),duration:500,easing:r.vT})}return this.panning_&&(this.panning_=!1,n.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const e=t.map.getView();return this.lastCentroid=null,e.getAnimating()&&e.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}e.A=l},92198:function(t,e,n){"use strict";var i=n(16235),r=n(96728),s=n(93001),o=n(26238);class a extends r.Ay{constructor(t,e,n){super(),void 0!==n&&void 0===e?this.setFlatCoordinates(n,t):(e=e||0,this.setCenterAndRadius(t,e,n))}clone(){const t=new a(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,i){const r=this.flatCoordinates,s=t-r[0],o=e-r[1],a=s*s+o*o;if(a<i){if(0===a)for(let t=0;t<this.stride;++t)n[t]=r[t];else{const t=this.getRadius()/Math.sqrt(a);n[0]=r[0]+t*s,n[1]=r[1]+t*o;for(let t=2;t<this.stride;++t)n[t]=r[t]}return n.length=this.stride,a}return i}containsXY(t,e){const n=this.flatCoordinates,i=t-n[0],r=e-n[1];return i*i+r*r<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){const e=this.flatCoordinates,n=e[this.stride]-e[0];return(0,i.N)(e[0]-n,e[1]-n,e[0]+n,e[1]+n,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){const t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){const e=this.getExtent();if((0,i.HY)(t,e)){const e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||(t[1]<=e[1]&&t[3]>=e[1]||(0,i.sB)(t,this.intersectsCoordinate.bind(this)))}return!1}setCenter(t){const e=this.stride,n=this.flatCoordinates[e]-this.flatCoordinates[0],i=t.slice();i[e]=i[0]+n;for(let n=1;n<e;++n)i[e+n]=t[n];this.setFlatCoordinates(this.layout,i),this.changed()}setCenterAndRadius(t,e,n){this.setLayout(n,t,0),this.flatCoordinates||(this.flatCoordinates=[]);const i=this.flatCoordinates;let r=(0,s._n)(i,0,t,this.stride);i[r++]=i[0]+e;for(let t=1,e=this.stride;t<e;++t)i[r++]=i[t];i.length=r,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){const n=this.getCenter(),i=this.getStride();this.setCenter((0,o.e$)(n,0,n.length,i,t,e,n)),this.changed()}}a.prototype.transform,e.A=a},92656:function(t,e,n){"use strict";var i=n(72961),r=n(37759);class s extends i.Ay{constructor(){super()}getType(){return"text"}readFeature(t,e){return this.readFeatureFromText(o(t),this.adaptOptions(e))}readFeatureFromText(t,e){return(0,r.b0)()}readFeatures(t,e){return this.readFeaturesFromText(o(t),this.adaptOptions(e))}readFeaturesFromText(t,e){return(0,r.b0)()}readGeometry(t,e){return this.readGeometryFromText(o(t),this.adaptOptions(e))}readGeometryFromText(t,e){return(0,r.b0)()}readProjection(t){return this.readProjectionFromText(o(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,e){return this.writeFeatureText(t,this.adaptOptions(e))}writeFeatureText(t,e){return(0,r.b0)()}writeFeatures(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))}writeFeaturesText(t,e){return(0,r.b0)()}writeGeometry(t,e){return this.writeGeometryText(t,this.adaptOptions(e))}writeGeometryText(t,e){return(0,r.b0)()}}function o(t){return"string"==typeof t?t:""}e.A=s},92662:function(t,e,n){"use strict";n.d(e,{JH:function(){return o},Jz:function(){return s},KT:function(){return r}});var i=n(45090);function r(t,e,n,i,r){if(r){const r=n;n=function(s){return t.removeEventListener(e,n),r.call(i??this,s)}}else i&&i!==t&&(n=n.bind(i));const s={target:t,type:e,listener:n};return t.addEventListener(e,n),s}function s(t,e,n,i){return r(t,e,n,i,!0)}function o(t){t&&t.target&&(t.target.removeEventListener(t.type,t.listener),(0,i.I)(t))}},92814:function(t,e,n){"use strict";n.d(e,{R8:function(){return s},z3:function(){return o}});const i={info:1,warn:2,error:3,none:4};let r=i.info;function s(...t){r>i.warn||console.warn(...t)}function o(...t){r>i.error||console.error(...t)}},92982:function(t,e,n){"use strict";function i(t,e){const n=256,i=255;return(e=e||[])[0]=Math.floor(t/n/n/n)/i,e[1]=Math.floor(t/n/n)%n/i,e[2]=Math.floor(t/n)%n/i,e[3]=t%n/i,e}function r(t){let e=0;const n=256,i=255;return e+=Math.round(t[0]*n*n*n*i),e+=Math.round(t[1]*n*n*i),e+=Math.round(t[2]*n*i),e+=Math.round(t[3]*i),e}n.d(e,{L:function(){return r},b:function(){return i}})},93001:function(t,e,n){"use strict";function i(t,e,n,i){for(let i=0,r=n.length;i<r;++i)t[e++]=n[i];return e}function r(t,e,n,i){for(let r=0,s=n.length;r<s;++r){const s=n[r];for(let n=0;n<i;++n)t[e++]=s[n]}return e}function s(t,e,n,i,s){s=s||[];let o=0;for(let a=0,l=n.length;a<l;++a){const l=r(t,e,n[a],i);s[o++]=l,e=l}return s.length=o,s}function o(t,e,n,i,r){r=r||[];let o=0;for(let a=0,l=n.length;a<l;++a){const l=s(t,e,n[a],i,r[o]);0===l.length&&(l[0]=e),r[o++]=l,e=l[l.length-1]}return r.length=o,r}n.d(e,{KG:function(){return s},_n:function(){return i},d6:function(){return o},z2:function(){return r}})},93053:function(t,e,n){"use strict";n.d(e,{LN:function(){return ot},Ay:function(){return lt},zr:function(){return st}});var i=n(26764);var r=n(53285);function s(t){return function(){return null==(e=t.apply(this,arguments))?[]:Array.isArray(e)?e:Array.from(e);var e}}var o=n(56495),a=Array.prototype.find;function l(){return this.firstElementChild}var h=Array.prototype.filter;function u(){return Array.from(this.children)}function c(t){return new Array(t.length)}function d(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}function f(t,e,n,i,r,s){for(var o,a=0,l=e.length,h=s.length;a<h;++a)(o=e[a])?(o.__data__=s[a],i[a]=o):n[a]=new d(t,s[a]);for(;a<l;++a)(o=e[a])&&(r[a]=o)}function p(t,e,n,i,r,s,o){var a,l,h,u=new Map,c=e.length,f=s.length,p=new Array(c);for(a=0;a<c;++a)(l=e[a])&&(p[a]=h=o.call(l,l.__data__,a,e)+"",u.has(h)?r[a]=l:u.set(h,l));for(a=0;a<f;++a)h=o.call(t,s[a],a,s)+"",(l=u.get(h))?(i[a]=l,l.__data__=s[a],u.delete(h)):n[a]=new d(t,s[a]);for(a=0;a<c;++a)(l=e[a])&&u.get(p[a])===l&&(r[a]=l)}function g(t){return t.__data__}function m(t){return"object"==typeof t&&"length"in t?t:Array.from(t)}function y(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};var _=n(51754);function v(t){return function(){this.removeAttribute(t)}}function x(t){return function(){this.removeAttributeNS(t.space,t.local)}}function b(t,e){return function(){this.setAttribute(t,e)}}function w(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function A(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function S(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var E=n(2365);function T(t){return function(){delete this[t]}}function C(t,e){return function(){this[t]=e}}function M(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function L(t){return t.trim().split(/^|\s+/)}function P(t){return t.classList||new R(t)}function R(t){this._node=t,this._names=L(t.getAttribute("class")||"")}function I(t,e){for(var n=P(t),i=-1,r=e.length;++i<r;)n.add(e[i])}function N(t,e){for(var n=P(t),i=-1,r=e.length;++i<r;)n.remove(e[i])}function F(t){return function(){I(this,t)}}function k(t){return function(){N(this,t)}}function D(t,e){return function(){(e.apply(this,arguments)?I:N)(this,t)}}function O(){this.textContent=""}function j(t){return function(){this.textContent=t}}function G(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function B(){this.innerHTML=""}function z(t){return function(){this.innerHTML=t}}function q(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function U(){this.nextSibling&&this.parentNode.appendChild(this)}function W(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}R.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};var $=n(85305);function V(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===$.g&&e.documentElement.namespaceURI===$.g?e.createElement(t):e.createElementNS(n,t)}}function X(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function H(t){var e=(0,_.A)(t);return(e.local?X:V)(e)}function Y(){return null}function Z(){var t=this.parentNode;t&&t.removeChild(this)}function K(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function J(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Q(t){return function(){var e=this.__on;if(e){for(var n,i=0,r=-1,s=e.length;i<s;++i)n=e[i],t.type&&n.type!==t.type||n.name!==t.name?e[++r]=n:this.removeEventListener(n.type,n.listener,n.options);++r?e.length=r:delete this.__on}}}function tt(t,e,n){return function(){var i,r=this.__on,s=function(t){return function(e){t.call(this,e,this.__data__)}}(e);if(r)for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===t.type&&i.name===t.name)return this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),void(i.value=e);this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}var et=n(58273);function nt(t,e,n){var i=(0,et.A)(t),r=i.CustomEvent;"function"==typeof r?r=new r(e,n):(r=i.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function it(t,e){return function(){return nt(this,t,e)}}function rt(t,e){return function(){return nt(this,t,e.apply(this,arguments))}}var st=[null];function ot(t,e){this._groups=t,this._parents=e}function at(){return new ot([[document.documentElement]],st)}ot.prototype=at.prototype={constructor:ot,select:function(t){"function"!=typeof t&&(t=(0,i.A)(t));for(var e=this._groups,n=e.length,r=new Array(n),s=0;s<n;++s)for(var o,a,l=e[s],h=l.length,u=r[s]=new Array(h),c=0;c<h;++c)(o=l[c])&&(a=t.call(o,o.__data__,c,l))&&("__data__"in o&&(a.__data__=o.__data__),u[c]=a);return new ot(r,this._parents)},selectAll:function(t){t="function"==typeof t?s(t):(0,r.A)(t);for(var e=this._groups,n=e.length,i=[],o=[],a=0;a<n;++a)for(var l,h=e[a],u=h.length,c=0;c<u;++c)(l=h[c])&&(i.push(t.call(l,l.__data__,c,h)),o.push(l));return new ot(i,o)},selectChild:function(t){return this.select(null==t?l:function(t){return function(){return a.call(this.children,t)}}("function"==typeof t?t:(0,o.j)(t)))},selectChildren:function(t){return this.selectAll(null==t?u:function(t){return function(){return h.call(this.children,t)}}("function"==typeof t?t:(0,o.j)(t)))},filter:function(t){"function"!=typeof t&&(t=(0,o.A)(t));for(var e=this._groups,n=e.length,i=new Array(n),r=0;r<n;++r)for(var s,a=e[r],l=a.length,h=i[r]=[],u=0;u<l;++u)(s=a[u])&&t.call(s,s.__data__,u,a)&&h.push(s);return new ot(i,this._parents)},data:function(t,e){if(!arguments.length)return Array.from(this,g);var n,i=e?p:f,r=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),l=new Array(o),h=new Array(o),u=0;u<o;++u){var c=r[u],d=s[u],y=d.length,_=m(t.call(c,c&&c.__data__,u,r)),v=_.length,x=l[u]=new Array(v),b=a[u]=new Array(v);i(c,d,x,b,h[u]=new Array(y),_,e);for(var w,A,S=0,E=0;S<v;++S)if(w=x[S]){for(S>=E&&(E=S+1);!(A=b[E])&&++E<v;);w._next=A||null}}return(a=new ot(a,r))._enter=l,a._exit=h,a},enter:function(){return new ot(this._enter||this._groups.map(c),this._parents)},exit:function(){return new ot(this._exit||this._groups.map(c),this._parents)},join:function(t,e,n){var i=this.enter(),r=this,s=this.exit();return"function"==typeof t?(i=t(i))&&(i=i.selection()):i=i.append(t+""),null!=e&&(r=e(r))&&(r=r.selection()),null==n?s.remove():n(s),i&&r?i.merge(r).order():r},merge:function(t){for(var e=t.selection?t.selection():t,n=this._groups,i=e._groups,r=n.length,s=i.length,o=Math.min(r,s),a=new Array(r),l=0;l<o;++l)for(var h,u=n[l],c=i[l],d=u.length,f=a[l]=new Array(d),p=0;p<d;++p)(h=u[p]||c[p])&&(f[p]=h);for(;l<r;++l)a[l]=n[l];return new ot(a,this._parents)},selection:function(){return this},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var i,r=t[e],s=r.length-1,o=r[s];--s>=0;)(i=r[s])&&(o&&4^i.compareDocumentPosition(o)&&o.parentNode.insertBefore(i,o),o=i);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=y);for(var n=this._groups,i=n.length,r=new Array(i),s=0;s<i;++s){for(var o,a=n[s],l=a.length,h=r[s]=new Array(l),u=0;u<l;++u)(o=a[u])&&(h[u]=o);h.sort(e)}return new ot(r,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){return Array.from(this)},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i=t[e],r=0,s=i.length;r<s;++r){var o=i[r];if(o)return o}return null},size:function(){let t=0;for(const e of this)++t;return t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,i=e.length;n<i;++n)for(var r,s=e[n],o=0,a=s.length;o<a;++o)(r=s[o])&&t.call(r,r.__data__,o,s);return this},attr:function(t,e){var n=(0,_.A)(t);if(arguments.length<2){var i=this.node();return n.local?i.getAttributeNS(n.space,n.local):i.getAttribute(n)}return this.each((null==e?n.local?x:v:"function"==typeof e?n.local?S:A:n.local?w:b)(n,e))},style:E.A,property:function(t,e){return arguments.length>1?this.each((null==e?T:"function"==typeof e?M:C)(t,e)):this.node()[t]},classed:function(t,e){var n=L(t+"");if(arguments.length<2){for(var i=P(this.node()),r=-1,s=n.length;++r<s;)if(!i.contains(n[r]))return!1;return!0}return this.each(("function"==typeof e?D:e?F:k)(n,e))},text:function(t){return arguments.length?this.each(null==t?O:("function"==typeof t?G:j)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?B:("function"==typeof t?q:z)(t)):this.node().innerHTML},raise:function(){return this.each(U)},lower:function(){return this.each(W)},append:function(t){var e="function"==typeof t?t:H(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:H(t),r=null==e?Y:"function"==typeof e?e:(0,i.A)(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(Z)},clone:function(t){return this.select(t?J:K)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var i,r,s=function(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?tt:Q,i=0;i<o;++i)this.each(a(s[i],e,n));return this}var a=this.node().__on;if(a)for(var l,h=0,u=a.length;h<u;++h)for(i=0,l=a[h];i<o;++i)if((r=s[i]).type===l.type&&r.name===l.name)return l.value},dispatch:function(t,e){return this.each(("function"==typeof e?rt:it)(t,e))},[Symbol.iterator]:function*(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var i,r=t[e],s=0,o=r.length;s<o;++s)(i=r[s])&&(yield i)}};var lt=at},93098:function(t,e,n){"use strict";var i=n(61829),r=n(69878),s=n(22685),o=n(37759);class a extends r.A{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=5}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return(0,o.b0)()}getData(t){return null}prepareFrame(t){return(0,o.b0)()}renderFrame(t,e){return(0,o.b0)()}forEachFeatureAtCoordinate(t,e,n,i,r){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;e.getState()!==i.A.LOADED&&e.getState()!==i.A.ERROR||this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=i.A.LOADED&&e!=i.A.ERROR&&t.addEventListener(s.A.CHANGE,this.boundHandleImageChange_),e==i.A.IDLE&&(t.load(),e=t.getState()),e==i.A.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}e.A=a},93595:function(t,e,n){"use strict";var i=n(81297),r=n(70192),s=n(67024),o=n(69791),a=n(92662),l=n(16235);const h="element",u="map",c="offset",d="position",f="positioning";class p extends r.A{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+s.Q5,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(h,this.handleElementChanged),this.addChangeListener(u,this.handleMapChanged),this.addChangeListener(c,this.handleOffsetChanged),this.addChangeListener(d,this.handlePositionChanged),this.addChangeListener(f,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(h)}getId(){return this.id}getMap(){return this.get(u)||null}getOffset(){return this.get(c)}getPosition(){return this.get(d)}getPositioning(){return this.get(f)}handleElementChanged(){(0,o.gS)(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&(this.element?.remove(),(0,a.JH)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,a.KT)(t,i.A.POSTRENDER,this.render,this),this.updatePixelPosition();const e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(h,t)}setMap(t){this.set(u,t)}setOffset(t){this.set(c,t)}setPosition(t){this.set(d,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(d))return;const n=this.getRect(e.getTargetElement(),e.getSize()),i=this.getElement(),r=this.getRect(i,[(0,o.Gq)(i),(0,o.DK)(i)]),s=void 0===(t=t||{}).margin?20:t.margin;if(!(0,l.ms)(n,r)){const i=r[0]-n[0],o=n[2]-r[2],a=r[1]-n[1],l=n[3]-r[3],h=[0,0];if(i<0?h[0]=i-s:o<0&&(h[0]=Math.abs(o)+s),a<0?h[1]=a-s:l<0&&(h[1]=Math.abs(l)+s),0!==h[0]||0!==h[1]){const n=e.getView().getCenterInternal(),i=e.getPixelFromCoordinateInternal(n);if(!i)return;const r=[i[0]+h[0],i[1]+h[1]],s=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(r),duration:s.duration,easing:s.easing})}}}getRect(t,e){const n=t.getBoundingClientRect(),i=n.left+window.pageXOffset,r=n.top+window.pageYOffset;return[i,r,i+e[0],r+e[1]]}setPositioning(t){this.set(f,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e)return void this.setVisible(!1);const n=t.getPixelFromCoordinate(e),i=t.getSize();this.updateRenderedPosition(n,i)}updateRenderedPosition(t,e){const n=this.element.style,i=this.getOffset(),r=this.getPositioning();this.setVisible(!0);let s="0%",o="0%";"bottom-right"==r||"center-right"==r||"top-right"==r?s="-100%":"bottom-center"!=r&&"center-center"!=r&&"top-center"!=r||(s="-50%"),"bottom-left"==r||"bottom-center"==r||"bottom-right"==r?o="-100%":"center-left"!=r&&"center-center"!=r&&"center-right"!=r||(o="-50%");const a=`translate(${s}, ${o}) translate(${Math.round(t[0]+i[0])+"px"}, ${Math.round(t[1]+i[1])+"px"})`;this.rendered.transform_!=a&&(this.rendered.transform_=a,n.transform=a)}getOptions(){return this.options}}e.A=p},93908:function(t,e,n){"use strict";var i=n(99516),r=n(71552),s=n(280),o=n(12911),a=n(77801),l=n(93098);class h extends l.A{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=(0,o.vt)(),this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,this.onMapChanged_=()=>{this.clearCache(),this.removeHelper()},t.addChangeListener(i.A.MAP,this.onMapChanged_),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(s.A.PRECOMPOSE)){const i=new r.A(s.A.PRECOMPOSE,void 0,e,t);n.dispatchEvent(i)}}dispatchPostComposeEvent(t,e){const n=this.getLayer();if(n.hasListener(s.A.POSTCOMPOSE)){const i=new r.A(s.A.POSTCOMPOSE,void 0,e,t);n.dispatchEvent(i)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,n=!0,i=-1;for(let r=0,s=t.layerStatesArray.length;r<s;r++){const s=t.layerStatesArray[r].layer,o=s.getRenderer();if(!(o instanceof h)){n=!0;continue}const a=s.getClassName();if((n||a!==e)&&(i+=1,n=!1),e=a,o===this)break}const r="map/"+t.mapId+"/group/"+i;this.helper&&this.helper.canvasCacheKeyMatches(r)&&!this.helper.needsToBeRecreated()||(this.removeHelper(),this.helper=new a.Ay({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:r}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}clearCache(){}disposeInternal(){this.clearCache(),this.removeHelper(),this.getLayer()?.removeChangeListener(i.A.MAP,this.onMapChanged_),super.disposeInternal()}dispatchRenderEvent_(t,e,n){const i=this.getLayer();if(i.hasListener(t)){(0,o.Zz)(this.inversePixelTransform_,0,0,n.pixelRatio,-n.pixelRatio,0,0,-n.size[1]);const s=new r.A(t,this.inversePixelTransform_,n,e);i.dispatchEvent(s)}}preRender(t,e){this.dispatchRenderEvent_(s.A.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(s.A.POSTRENDER,t,e)}}e.A=h},94679:function(t,e){"use strict";e.A={ANIMATING:0,INTERACTING:1}},94782:function(t,e,n){"use strict";var i=n(51541),r=n(77833),s=n(59286),o=n(40878),a=n(25231),l=n(37246),h=n(72961),u=n(86858),c=n(40132);const d=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],f={rte:W,trk:$,wpt:V},p=(0,l.Dm)(d,{rte:(0,l.VT)(W),trk:(0,l.VT)($),wpt:(0,l.VT)(V)}),g=(0,l.Dm)(d,{text:(0,l.kW)(c.E3,"linkText"),type:(0,l.kW)(c.E3,"linkType")}),m=(0,l.Dm)(d,{name:(0,l.kW)(c.E3),email:function(t,e){const n=e[e.length-1],i=t.getAttribute("id"),r=t.getAttribute("domain");null!==i&&null!==r&&(n.email=`${i}@${r}`)},link:q}),y=(0,l.Dm)(d,{name:(0,l.kW)(c.E3),desc:(0,l.kW)(c.E3),author:(0,l.kW)((function(t,e){const n=(0,l.eY)({},m,t,e);if(n)return n;return})),copyright:(0,l.kW)((function(t,e){const n=(0,l.eY)({},_,t,e);if(n){const e=t.getAttribute("author");return null!==e&&(n.author=e),n}return})),link:q,time:(0,l.kW)(c._I),keywords:(0,l.kW)(c.E3),bounds:function(t,e){const n=e[e.length-1],i=t.getAttribute("minlat"),r=t.getAttribute("minlon"),s=t.getAttribute("maxlat"),o=t.getAttribute("maxlon");null!==r&&null!==i&&null!==o&&null!==s&&(n.bounds=[[parseFloat(r),parseFloat(i)],[parseFloat(o),parseFloat(s)]])},extensions:U}),_=(0,l.Dm)(d,{year:(0,l.kW)(c.yg),license:(0,l.kW)(c.E3)}),v=(0,l.Dm)(d,{rte:(0,l.mm)((function(t,e,n){const i=n[0],r=e.getProperties(),s={node:t};s.properties=r;const o=e.getGeometry();if("LineString"==o.getType()){const t=(0,h.hX)(o,!0,i);s.geometryLayout=t.getLayout(),r.rtept=t.getCoordinates()}const a=n[n.length-1].node,u=L[a.namespaceURI],c=(0,l.Gl)(r,u);(0,l.NQ)(s,P,l.OL,c,n,u)})),trk:(0,l.mm)((function(t,e,n){const i=n[0],r=e.getProperties(),s={node:t};s.properties=r;const o=e.getGeometry();if("MultiLineString"==o.getType()){const t=(0,h.hX)(o,!0,i);r.trkseg=t.getLineStrings()}const a=n[n.length-1].node,u=I[a.namespaceURI],c=(0,l.Gl)(r,u);(0,l.NQ)(s,N,l.OL,c,n,u)})),wpt:(0,l.mm)((function(t,e,n){const i=n[0],r=n[n.length-1];r.properties=e.getProperties();const s=e.getGeometry();if("Point"==s.getType()){const e=(0,h.hX)(s,!0,i);r.geometryLayout=e.getLayout(),H(t,e.getCoordinates(),n)}}))});class x extends u.A{constructor(t){super(),t=t||{},this.dataProjection=(0,a.Jt)("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let e=0,n=t.length;e<n;++e){const n=t[e];if(this.readExtensions_){const t=n.get("extensionsNode_")||null;this.readExtensions_(n,t)}n.set("extensionsNode_",void 0)}}readMetadata(t){return t?"string"==typeof t?this.readMetadataFromDocument((0,l.qg)(t)):(0,l.wz)(t)?this.readMetadataFromDocument(t):this.readMetadataFromNode(t):null}readMetadataFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType===Node.ELEMENT_NODE){const t=this.readMetadataFromNode(e);if(t)return t}return null}readMetadataFromNode(t){if(!d.includes(t.namespaceURI))return null;for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(d.includes(e.namespaceURI)&&"metadata"===e.localName)return(0,l.eY)({},y,e,[]);return null}readFeatureFromNode(t,e){if(!d.includes(t.namespaceURI))return null;const n=f[t.localName];if(!n)return null;const i=n(t,[this.getReadOptions(t,e)]);return i?(this.handleReadExtensions_([i]),i):null}readFeaturesFromNode(t,e){if(!d.includes(t.namespaceURI))return[];if("gpx"==t.localName){const n=(0,l.eY)([],p,t,[this.getReadOptions(t,e)]);return n?(this.handleReadExtensions_(n),n):[]}return[]}writeFeaturesNode(t,e){e=this.adaptOptions(e);const n=(0,l.qq)("http://www.topografix.com/GPX/1/1","gpx");return n.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",l.pF),n.setAttributeNS(l.pF,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),n.setAttribute("version","1.1"),n.setAttribute("creator","OpenLayers"),(0,l.NQ)({node:n},v,G,t,[e]),n}}const b=(0,l.Dm)(d,{name:(0,l.kW)(c.E3),cmt:(0,l.kW)(c.E3),desc:(0,l.kW)(c.E3),src:(0,l.kW)(c.E3),link:q,number:(0,l.kW)(c.yg),extensions:U,type:(0,l.kW)(c.E3),rtept:function(t,e){const n=(0,l.eY)({},w,t,e);if(n){const i=e[e.length-1];B(i.flatCoordinates,i.layoutOptions,t,n)}}}),w=(0,l.Dm)(d,{ele:(0,l.kW)(c.e4),time:(0,l.kW)(c._I)}),A=(0,l.Dm)(d,{name:(0,l.kW)(c.E3),cmt:(0,l.kW)(c.E3),desc:(0,l.kW)(c.E3),src:(0,l.kW)(c.E3),link:q,number:(0,l.kW)(c.yg),type:(0,l.kW)(c.E3),extensions:U,trkseg:function(t,e){const n=e[e.length-1];(0,l.UN)(S,t,e);const i=n.flatCoordinates;n.ends.push(i.length)}}),S=(0,l.Dm)(d,{trkpt:function(t,e){const n=(0,l.eY)({},E,t,e);if(n){const i=e[e.length-1];B(i.flatCoordinates,i.layoutOptions,t,n)}}}),E=(0,l.Dm)(d,{ele:(0,l.kW)(c.e4),time:(0,l.kW)(c._I)}),T=(0,l.Dm)(d,{ele:(0,l.kW)(c.e4),time:(0,l.kW)(c._I),magvar:(0,l.kW)(c.e4),geoidheight:(0,l.kW)(c.e4),name:(0,l.kW)(c.E3),cmt:(0,l.kW)(c.E3),desc:(0,l.kW)(c.E3),src:(0,l.kW)(c.E3),link:q,sym:(0,l.kW)(c.E3),type:(0,l.kW)(c.E3),fix:(0,l.kW)(c.E3),sat:(0,l.kW)(c.yg),hdop:(0,l.kW)(c.e4),vdop:(0,l.kW)(c.e4),pdop:(0,l.kW)(c.e4),ageofdgpsdata:(0,l.kW)(c.e4),dgpsid:(0,l.kW)(c.yg),extensions:U}),C=["text","type"],M=(0,l.Dm)(d,{text:(0,l.mm)(c.uB),type:(0,l.mm)(c.uB)}),L=(0,l.Dm)(d,["name","cmt","desc","src","link","number","type","rtept"]),P=(0,l.Dm)(d,{name:(0,l.mm)(c.uB),cmt:(0,l.mm)(c.uB),desc:(0,l.mm)(c.uB),src:(0,l.mm)(c.uB),link:(0,l.mm)(X),number:(0,l.mm)(c.pE),type:(0,l.mm)(c.uB),rtept:(0,l.gN)((0,l.mm)(H))}),R=(0,l.Dm)(d,["ele","time"]),I=(0,l.Dm)(d,["name","cmt","desc","src","link","number","type","trkseg"]),N=(0,l.Dm)(d,{name:(0,l.mm)(c.uB),cmt:(0,l.mm)(c.uB),desc:(0,l.mm)(c.uB),src:(0,l.mm)(c.uB),link:(0,l.mm)(X),number:(0,l.mm)(c.pE),type:(0,l.mm)(c.uB),trkseg:(0,l.gN)((0,l.mm)((function(t,e,n){const i={node:t};i.geometryLayout=e.getLayout(),i.properties={},(0,l.NQ)(i,k,F,e.getCoordinates(),n)})))}),F=(0,l.X1)("trkpt"),k=(0,l.Dm)(d,{trkpt:(0,l.mm)(H)}),D=(0,l.Dm)(d,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),O=(0,l.Dm)(d,{ele:(0,l.mm)(c.Ko),time:(0,l.mm)(c.cS),magvar:(0,l.mm)(c.Ko),geoidheight:(0,l.mm)(c.Ko),name:(0,l.mm)(c.uB),cmt:(0,l.mm)(c.uB),desc:(0,l.mm)(c.uB),src:(0,l.mm)(c.uB),link:(0,l.mm)(X),sym:(0,l.mm)(c.uB),type:(0,l.mm)(c.uB),fix:(0,l.mm)(c.uB),sat:(0,l.mm)(c.pE),hdop:(0,l.mm)(c.Ko),vdop:(0,l.mm)(c.Ko),pdop:(0,l.mm)(c.Ko),ageofdgpsdata:(0,l.mm)(c.Ko),dgpsid:(0,l.mm)(c.pE)}),j={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function G(t,e,n){const i=t.getGeometry();if(i){const t=j[i.getType()];if(t){const n=e[e.length-1].node;return(0,l.qq)(n.namespaceURI,t)}}}function B(t,e,n,i){return t.push(parseFloat(n.getAttribute("lon")),parseFloat(n.getAttribute("lat"))),"ele"in i?(t.push(i.ele),delete i.ele,e.hasZ=!0):t.push(0),"time"in i?(t.push(i.time),delete i.time,e.hasM=!0):t.push(0),t}function z(t,e,n){let i="XY",r=2;if(t.hasZ&&t.hasM?(i="XYZM",r=4):t.hasZ?(i="XYZ",r=3):t.hasM&&(i="XYM",r=3),4!==r){for(let n=0,i=e.length/4;n<i;n++)e[n*r]=e[4*n],e[n*r+1]=e[4*n+1],t.hasZ&&(e[n*r+2]=e[4*n+2]),t.hasM&&(e[n*r+2]=e[4*n+3]);if(e.length=e.length/4*r,n)for(let t=0,e=n.length;t<e;t++)n[t]=n[t]/4*r}return i}function q(t,e){const n=e[e.length-1],i=t.getAttribute("href");null!==i&&(n.link=i),(0,l.UN)(g,t,e)}function U(t,e){e[e.length-1].extensionsNode_=t}function W(t,e){const n=e[0],s=(0,l.eY)({flatCoordinates:[],layoutOptions:{}},b,t,e);if(!s)return;const o=s.flatCoordinates;delete s.flatCoordinates;const a=s.layoutOptions;delete s.layoutOptions;const u=z(a,o),c=new r.A(o,u);(0,h.hX)(c,!1,n);const d=new i.A(c);return d.setProperties(s,!0),d}function $(t,e){const n=e[0],r=(0,l.eY)({flatCoordinates:[],ends:[],layoutOptions:{}},A,t,e);if(!r)return;const o=r.flatCoordinates;delete r.flatCoordinates;const a=r.ends;delete r.ends;const u=r.layoutOptions;delete r.layoutOptions;const c=z(u,o,a),d=new s.A(o,c,a);(0,h.hX)(d,!1,n);const f=new i.A(d);return f.setProperties(r,!0),f}function V(t,e){const n=e[0],r=(0,l.eY)({},T,t,e);if(!r)return;const s={},a=B([],s,t,r),u=z(s,a),c=new o.A(a,u);(0,h.hX)(c,!1,n);const d=new i.A(c);return d.setProperties(r,!0),d}function X(t,e,n){t.setAttribute("href",e);const i=n[n.length-1].properties,r=[i.linkText,i.linkType];(0,l.NQ)({node:t},M,l.OL,r,n,C)}function H(t,e,n){const i=n[n.length-1],r=i.node.namespaceURI,s=i.properties;t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0]));switch(i.geometryLayout){case"XYZM":0!==e[3]&&(s.time=e[3]);case"XYZ":0!==e[2]&&(s.ele=e[2]);break;case"XYM":0!==e[2]&&(s.time=e[2])}const o="rtept"==t.nodeName?R[r]:D[r],a=(0,l.Gl)(s,o);(0,l.NQ)({node:t,properties:s},O,l.OL,a,n,o)}e.A=x},95301:function(t,e,n){"use strict";var i=n(38808),r=n(87113);class s extends r.A{constructor(t){super(t=t||{}),this.condition_=t.condition?t.condition:i.Kg,this.lastAngle_=void 0,this.lastMagnitude_=void 0,this.lastScaleDelta_=0,this.duration_=void 0!==t.duration?t.duration:400}handleDragEvent(t){if(!(0,i.A4)(t))return;const e=t.map,n=e.getSize(),r=t.pixel,s=r[0]-n[0]/2,o=n[1]/2-r[1],a=Math.atan2(o,s),l=Math.sqrt(s*s+o*o),h=e.getView();if(void 0!==this.lastAngle_){const t=this.lastAngle_-a;h.adjustRotationInternal(t)}this.lastAngle_=a,void 0!==this.lastMagnitude_&&h.adjustResolutionInternal(this.lastMagnitude_/l),void 0!==this.lastMagnitude_&&(this.lastScaleDelta_=this.lastMagnitude_/l),this.lastMagnitude_=l}handleUpEvent(t){if(!(0,i.A4)(t))return!0;const e=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return e.endInteraction(this.duration_,n),this.lastScaleDelta_=0,!1}handleDownEvent(t){return!!(0,i.A4)(t)&&(!!this.condition_(t)&&(t.map.getView().beginInteraction(),this.lastAngle_=void 0,this.lastMagnitude_=void 0,!0))}}e.A=s},95616:function(t,e){var n;
/*!
 * jQuery JavaScript Library v3.7.1
 * https://jquery.com/
 *
 * Copyright OpenJS Foundation and other contributors
 * Released under the MIT license
 * https://jquery.org/license
 *
 * Date: 2023-08-28T13:37Z
 */!function(e,n){"use strict";"object"==typeof t.exports?t.exports=e.document?n(e,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return n(t)}:n(e)}("undefined"!=typeof window?window:this,(function(i,r){"use strict";var s=[],o=Object.getPrototypeOf,a=s.slice,l=s.flat?function(t){return s.flat.call(t)}:function(t){return s.concat.apply([],t)},h=s.push,u=s.indexOf,c={},d=c.toString,f=c.hasOwnProperty,p=f.toString,g=p.call(Object),m={},y=function(t){return"function"==typeof t&&"number"!=typeof t.nodeType&&"function"!=typeof t.item},_=function(t){return null!=t&&t===t.window},v=i.document,x={type:!0,src:!0,nonce:!0,noModule:!0};function b(t,e,n){var i,r,s=(n=n||v).createElement("script");if(s.text=t,e)for(i in x)(r=e[i]||e.getAttribute&&e.getAttribute(i))&&s.setAttribute(i,r);n.head.appendChild(s).parentNode.removeChild(s)}function w(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?c[d.call(t)]||"object":typeof t}var A="3.7.1",S=/HTML$/i,E=function(t,e){return new E.fn.init(t,e)};function T(t){var e=!!t&&"length"in t&&t.length,n=w(t);return!y(t)&&!_(t)&&("array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t)}function C(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()}E.fn=E.prototype={jquery:A,constructor:E,length:0,toArray:function(){return a.call(this)},get:function(t){return null==t?a.call(this):t<0?this[t+this.length]:this[t]},pushStack:function(t){var e=E.merge(this.constructor(),t);return e.prevObject=this,e},each:function(t){return E.each(this,t)},map:function(t){return this.pushStack(E.map(this,(function(e,n){return t.call(e,n,e)})))},slice:function(){return this.pushStack(a.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},even:function(){return this.pushStack(E.grep(this,(function(t,e){return(e+1)%2})))},odd:function(){return this.pushStack(E.grep(this,(function(t,e){return e%2})))},eq:function(t){var e=this.length,n=+t+(t<0?e:0);return this.pushStack(n>=0&&n<e?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:h,sort:s.sort,splice:s.splice},E.extend=E.fn.extend=function(){var t,e,n,i,r,s,o=arguments[0]||{},a=1,l=arguments.length,h=!1;for("boolean"==typeof o&&(h=o,o=arguments[a]||{},a++),"object"==typeof o||y(o)||(o={}),a===l&&(o=this,a--);a<l;a++)if(null!=(t=arguments[a]))for(e in t)i=t[e],"__proto__"!==e&&o!==i&&(h&&i&&(E.isPlainObject(i)||(r=Array.isArray(i)))?(n=o[e],s=r&&!Array.isArray(n)?[]:r||E.isPlainObject(n)?n:{},r=!1,o[e]=E.extend(h,s,i)):void 0!==i&&(o[e]=i));return o},E.extend({expando:"jQuery"+(A+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isPlainObject:function(t){var e,n;return!(!t||"[object Object]"!==d.call(t))&&(!(e=o(t))||"function"==typeof(n=f.call(e,"constructor")&&e.constructor)&&p.call(n)===g)},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},globalEval:function(t,e,n){b(t,{nonce:e&&e.nonce},n)},each:function(t,e){var n,i=0;if(T(t))for(n=t.length;i<n&&!1!==e.call(t[i],i,t[i]);i++);else for(i in t)if(!1===e.call(t[i],i,t[i]))break;return t},text:function(t){var e,n="",i=0,r=t.nodeType;if(!r)for(;e=t[i++];)n+=E.text(e);return 1===r||11===r?t.textContent:9===r?t.documentElement.textContent:3===r||4===r?t.nodeValue:n},makeArray:function(t,e){var n=e||[];return null!=t&&(T(Object(t))?E.merge(n,"string"==typeof t?[t]:t):h.call(n,t)),n},inArray:function(t,e,n){return null==e?-1:u.call(e,t,n)},isXMLDoc:function(t){var e=t&&t.namespaceURI,n=t&&(t.ownerDocument||t).documentElement;return!S.test(e||n&&n.nodeName||"HTML")},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;i<n;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i=[],r=0,s=t.length,o=!n;r<s;r++)!e(t[r],r)!==o&&i.push(t[r]);return i},map:function(t,e,n){var i,r,s=0,o=[];if(T(t))for(i=t.length;s<i;s++)null!=(r=e(t[s],s,n))&&o.push(r);else for(s in t)null!=(r=e(t[s],s,n))&&o.push(r);return l(o)},guid:1,support:m}),"function"==typeof Symbol&&(E.fn[Symbol.iterator]=s[Symbol.iterator]),E.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),(function(t,e){c["[object "+e+"]"]=e.toLowerCase()}));var M=s.pop,L=s.sort,P=s.splice,R="[\\x20\\t\\r\\n\\f]",I=new RegExp("^"+R+"+|((?:^|[^\\\\])(?:\\\\.)*)"+R+"+$","g");E.contains=function(t,e){var n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(t.contains?t.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))};var N=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\x80-\uFFFF\w-]/g;function F(t,e){return e?"\0"===t?"�":t.slice(0,-1)+"\\"+t.charCodeAt(t.length-1).toString(16)+" ":"\\"+t}E.escapeSelector=function(t){return(t+"").replace(N,F)};var k=v,D=h;!function(){var t,e,n,r,o,l,h,c,d,p,g=D,y=E.expando,_=0,v=0,x=tt(),b=tt(),w=tt(),A=tt(),S=function(t,e){return t===e&&(o=!0),0},T="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",N="(?:\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\[^\\r\\n\\f]|[\\w-]|[^\0-\\x7f])+",F="\\["+R+"*("+N+")(?:"+R+"*([*^$|!~]?=)"+R+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+R+"*\\]",O=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+F+")*)|.*)\\)|)",j=new RegExp(R+"+","g"),G=new RegExp("^"+R+"*,"+R+"*"),B=new RegExp("^"+R+"*([>+~]|"+R+")"+R+"*"),z=new RegExp(R+"|>"),q=new RegExp(O),U=new RegExp("^"+N+"$"),W={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N+"|[*])"),ATTR:new RegExp("^"+F),PSEUDO:new RegExp("^"+O),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+R+"*(even|odd|(([+-]|)(\\d*)n|)"+R+"*(?:([+-]|)"+R+"*(\\d+)|))"+R+"*\\)|)","i"),bool:new RegExp("^(?:"+T+")$","i"),needsContext:new RegExp("^"+R+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+R+"*((?:-\\d)?\\d*)"+R+"*\\)|)(?=[^-]|$)","i")},$=/^(?:input|select|textarea|button)$/i,V=/^h\d$/i,X=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,H=/[+~]/,Y=new RegExp("\\\\[\\da-fA-F]{1,6}"+R+"?|\\\\([^\\r\\n\\f])","g"),Z=function(t,e){var n="0x"+t.slice(1)-65536;return e||(n<0?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320))},K=function(){lt()},J=dt((function(t){return!0===t.disabled&&C(t,"fieldset")}),{dir:"parentNode",next:"legend"});try{g.apply(s=a.call(k.childNodes),k.childNodes),s[k.childNodes.length].nodeType}catch(t){g={apply:function(t,e){D.apply(t,a.call(e))},call:function(t){D.apply(t,a.call(arguments,1))}}}function Q(t,e,n,i){var r,s,o,a,h,u,f,p=e&&e.ownerDocument,_=e?e.nodeType:9;if(n=n||[],"string"!=typeof t||!t||1!==_&&9!==_&&11!==_)return n;if(!i&&(lt(e),e=e||l,c)){if(11!==_&&(h=X.exec(t)))if(r=h[1]){if(9===_){if(!(o=e.getElementById(r)))return n;if(o.id===r)return g.call(n,o),n}else if(p&&(o=p.getElementById(r))&&Q.contains(e,o)&&o.id===r)return g.call(n,o),n}else{if(h[2])return g.apply(n,e.getElementsByTagName(t)),n;if((r=h[3])&&e.getElementsByClassName)return g.apply(n,e.getElementsByClassName(r)),n}if(!(A[t+" "]||d&&d.test(t))){if(f=t,p=e,1===_&&(z.test(t)||B.test(t))){for((p=H.test(t)&&at(e.parentNode)||e)==e&&m.scope||((a=e.getAttribute("id"))?a=E.escapeSelector(a):e.setAttribute("id",a=y)),s=(u=ut(t)).length;s--;)u[s]=(a?"#"+a:":scope")+" "+ct(u[s]);f=u.join(",")}try{return g.apply(n,p.querySelectorAll(f)),n}catch(e){A(t,!0)}finally{a===y&&e.removeAttribute("id")}}}return _t(t.replace(I,"$1"),e,n,i)}function tt(){var t=[];return function n(i,r){return t.push(i+" ")>e.cacheLength&&delete n[t.shift()],n[i+" "]=r}}function et(t){return t[y]=!0,t}function nt(t){var e=l.createElement("fieldset");try{return!!t(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function it(t){return function(e){return C(e,"input")&&e.type===t}}function rt(t){return function(e){return(C(e,"input")||C(e,"button"))&&e.type===t}}function st(t){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===t:e.disabled===t:e.isDisabled===t||e.isDisabled!==!t&&J(e)===t:e.disabled===t:"label"in e&&e.disabled===t}}function ot(t){return et((function(e){return e=+e,et((function(n,i){for(var r,s=t([],n.length,e),o=s.length;o--;)n[r=s[o]]&&(n[r]=!(i[r]=n[r]))}))}))}function at(t){return t&&void 0!==t.getElementsByTagName&&t}function lt(t){var n,i=t?t.ownerDocument||t:k;return i!=l&&9===i.nodeType&&i.documentElement?(h=(l=i).documentElement,c=!E.isXMLDoc(l),p=h.matches||h.webkitMatchesSelector||h.msMatchesSelector,h.msMatchesSelector&&k!=l&&(n=l.defaultView)&&n.top!==n&&n.addEventListener("unload",K),m.getById=nt((function(t){return h.appendChild(t).id=E.expando,!l.getElementsByName||!l.getElementsByName(E.expando).length})),m.disconnectedMatch=nt((function(t){return p.call(t,"*")})),m.scope=nt((function(){return l.querySelectorAll(":scope")})),m.cssHas=nt((function(){try{return l.querySelector(":has(*,:jqfake)"),!1}catch(t){return!0}})),m.getById?(e.filter.ID=function(t){var e=t.replace(Y,Z);return function(t){return t.getAttribute("id")===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&c){var n=e.getElementById(t);return n?[n]:[]}}):(e.filter.ID=function(t){var e=t.replace(Y,Z);return function(t){var n=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}},e.find.ID=function(t,e){if(void 0!==e.getElementById&&c){var n,i,r,s=e.getElementById(t);if(s){if((n=s.getAttributeNode("id"))&&n.value===t)return[s];for(r=e.getElementsByName(t),i=0;s=r[i++];)if((n=s.getAttributeNode("id"))&&n.value===t)return[s]}return[]}}),e.find.TAG=function(t,e){return void 0!==e.getElementsByTagName?e.getElementsByTagName(t):e.querySelectorAll(t)},e.find.CLASS=function(t,e){if(void 0!==e.getElementsByClassName&&c)return e.getElementsByClassName(t)},d=[],nt((function(t){var e;h.appendChild(t).innerHTML="<a id='"+y+"' href='' disabled='disabled'></a><select id='"+y+"-\r\\' disabled='disabled'><option selected=''></option></select>",t.querySelectorAll("[selected]").length||d.push("\\["+R+"*(?:value|"+T+")"),t.querySelectorAll("[id~="+y+"-]").length||d.push("~="),t.querySelectorAll("a#"+y+"+*").length||d.push(".#.+[+~]"),t.querySelectorAll(":checked").length||d.push(":checked"),(e=l.createElement("input")).setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),h.appendChild(t).disabled=!0,2!==t.querySelectorAll(":disabled").length&&d.push(":enabled",":disabled"),(e=l.createElement("input")).setAttribute("name",""),t.appendChild(e),t.querySelectorAll("[name='']").length||d.push("\\["+R+"*name"+R+"*="+R+"*(?:''|\"\")")})),m.cssHas||d.push(":has"),d=d.length&&new RegExp(d.join("|")),S=function(t,e){if(t===e)return o=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n||(1&(n=(t.ownerDocument||t)==(e.ownerDocument||e)?t.compareDocumentPosition(e):1)||!m.sortDetached&&e.compareDocumentPosition(t)===n?t===l||t.ownerDocument==k&&Q.contains(k,t)?-1:e===l||e.ownerDocument==k&&Q.contains(k,e)?1:r?u.call(r,t)-u.call(r,e):0:4&n?-1:1)},l):l}for(t in Q.matches=function(t,e){return Q(t,null,null,e)},Q.matchesSelector=function(t,e){if(lt(t),c&&!A[e+" "]&&(!d||!d.test(e)))try{var n=p.call(t,e);if(n||m.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(t){A(e,!0)}return Q(e,l,null,[t]).length>0},Q.contains=function(t,e){return(t.ownerDocument||t)!=l&&lt(t),E.contains(t,e)},Q.attr=function(t,n){(t.ownerDocument||t)!=l&&lt(t);var i=e.attrHandle[n.toLowerCase()],r=i&&f.call(e.attrHandle,n.toLowerCase())?i(t,n,!c):void 0;return void 0!==r?r:t.getAttribute(n)},Q.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},E.uniqueSort=function(t){var e,n=[],i=0,s=0;if(o=!m.sortStable,r=!m.sortStable&&a.call(t,0),L.call(t,S),o){for(;e=t[s++];)e===t[s]&&(i=n.push(s));for(;i--;)P.call(t,n[i],1)}return r=null,t},E.fn.uniqueSort=function(){return this.pushStack(E.uniqueSort(a.apply(this)))},e=E.expr={cacheLength:50,createPseudo:et,match:W,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(Y,Z),t[3]=(t[3]||t[4]||t[5]||"").replace(Y,Z),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||Q.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&Q.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return W.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&q.test(n)&&(e=ut(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(Y,Z).toLowerCase();return"*"===t?function(){return!0}:function(t){return C(t,e)}},CLASS:function(t){var e=x[t+" "];return e||(e=new RegExp("(^|"+R+")"+t+"("+R+"|$)"))&&x(t,(function(t){return e.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")}))},ATTR:function(t,e,n){return function(i){var r=Q.attr(i,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&r.indexOf(n)>-1:"$="===e?n&&r.slice(-n.length)===n:"~="===e?(" "+r.replace(j," ")+" ").indexOf(n)>-1:"|="===e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(t,e,n,i,r){var s="nth"!==t.slice(0,3),o="last"!==t.slice(-4),a="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var h,u,c,d,f,p=s!==o?"nextSibling":"previousSibling",g=e.parentNode,m=a&&e.nodeName.toLowerCase(),v=!l&&!a,x=!1;if(g){if(s){for(;p;){for(c=e;c=c[p];)if(a?C(c,m):1===c.nodeType)return!1;f=p="only"===t&&!f&&"nextSibling"}return!0}if(f=[o?g.firstChild:g.lastChild],o&&v){for(x=(d=(h=(u=g[y]||(g[y]={}))[t]||[])[0]===_&&h[1])&&h[2],c=d&&g.childNodes[d];c=++d&&c&&c[p]||(x=d=0)||f.pop();)if(1===c.nodeType&&++x&&c===e){u[t]=[_,d,x];break}}else if(v&&(x=d=(h=(u=e[y]||(e[y]={}))[t]||[])[0]===_&&h[1]),!1===x)for(;(c=++d&&c&&c[p]||(x=d=0)||f.pop())&&(!(a?C(c,m):1===c.nodeType)||!++x||(v&&((u=c[y]||(c[y]={}))[t]=[_,x]),c!==e)););return(x-=r)===i||x%i==0&&x/i>=0}}},PSEUDO:function(t,n){var i,r=e.pseudos[t]||e.setFilters[t.toLowerCase()]||Q.error("unsupported pseudo: "+t);return r[y]?r(n):r.length>1?(i=[t,t,"",n],e.setFilters.hasOwnProperty(t.toLowerCase())?et((function(t,e){for(var i,s=r(t,n),o=s.length;o--;)t[i=u.call(t,s[o])]=!(e[i]=s[o])})):function(t){return r(t,0,i)}):r}},pseudos:{not:et((function(t){var e=[],n=[],i=yt(t.replace(I,"$1"));return i[y]?et((function(t,e,n,r){for(var s,o=i(t,null,r,[]),a=t.length;a--;)(s=o[a])&&(t[a]=!(e[a]=s))})):function(t,r,s){return e[0]=t,i(e,null,s,n),e[0]=null,!n.pop()}})),has:et((function(t){return function(e){return Q(t,e).length>0}})),contains:et((function(t){return t=t.replace(Y,Z),function(e){return(e.textContent||E.text(e)).indexOf(t)>-1}})),lang:et((function(t){return U.test(t||"")||Q.error("unsupported lang: "+t),t=t.replace(Y,Z).toLowerCase(),function(e){var n;do{if(n=c?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(n=n.toLowerCase())===t||0===n.indexOf(t+"-")}while((e=e.parentNode)&&1===e.nodeType);return!1}})),target:function(t){var e=i.location&&i.location.hash;return e&&e.slice(1)===t.id},root:function(t){return t===h},focus:function(t){return t===function(){try{return l.activeElement}catch(t){}}()&&l.hasFocus()&&!!(t.type||t.href||~t.tabIndex)},enabled:st(!1),disabled:st(!0),checked:function(t){return C(t,"input")&&!!t.checked||C(t,"option")&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!e.pseudos.empty(t)},header:function(t){return V.test(t.nodeName)},input:function(t){return $.test(t.nodeName)},button:function(t){return C(t,"input")&&"button"===t.type||C(t,"button")},text:function(t){var e;return C(t,"input")&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:ot((function(){return[0]})),last:ot((function(t,e){return[e-1]})),eq:ot((function(t,e,n){return[n<0?n+e:n]})),even:ot((function(t,e){for(var n=0;n<e;n+=2)t.push(n);return t})),odd:ot((function(t,e){for(var n=1;n<e;n+=2)t.push(n);return t})),lt:ot((function(t,e,n){var i;for(i=n<0?n+e:n>e?e:n;--i>=0;)t.push(i);return t})),gt:ot((function(t,e,n){for(var i=n<0?n+e:n;++i<e;)t.push(i);return t}))}},e.pseudos.nth=e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})e.pseudos[t]=it(t);for(t in{submit:!0,reset:!0})e.pseudos[t]=rt(t);function ht(){}function ut(t,n){var i,r,s,o,a,l,h,u=b[t+" "];if(u)return n?0:u.slice(0);for(a=t,l=[],h=e.preFilter;a;){for(o in i&&!(r=G.exec(a))||(r&&(a=a.slice(r[0].length)||a),l.push(s=[])),i=!1,(r=B.exec(a))&&(i=r.shift(),s.push({value:i,type:r[0].replace(I," ")}),a=a.slice(i.length)),e.filter)!(r=W[o].exec(a))||h[o]&&!(r=h[o](r))||(i=r.shift(),s.push({value:i,type:o,matches:r}),a=a.slice(i.length));if(!i)break}return n?a.length:a?Q.error(t):b(t,l).slice(0)}function ct(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e].value;return i}function dt(t,e,n){var i=e.dir,r=e.next,s=r||i,o=n&&"parentNode"===s,a=v++;return e.first?function(e,n,r){for(;e=e[i];)if(1===e.nodeType||o)return t(e,n,r);return!1}:function(e,n,l){var h,u,c=[_,a];if(l){for(;e=e[i];)if((1===e.nodeType||o)&&t(e,n,l))return!0}else for(;e=e[i];)if(1===e.nodeType||o)if(u=e[y]||(e[y]={}),r&&C(e,r))e=e[i]||e;else{if((h=u[s])&&h[0]===_&&h[1]===a)return c[2]=h[2];if(u[s]=c,c[2]=t(e,n,l))return!0}return!1}}function ft(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function pt(t,e,n,i,r){for(var s,o=[],a=0,l=t.length,h=null!=e;a<l;a++)(s=t[a])&&(n&&!n(s,i,r)||(o.push(s),h&&e.push(a)));return o}function gt(t,e,n,i,r,s){return i&&!i[y]&&(i=gt(i)),r&&!r[y]&&(r=gt(r,s)),et((function(s,o,a,l){var h,c,d,f,p=[],m=[],y=o.length,_=s||function(t,e,n){for(var i=0,r=e.length;i<r;i++)Q(t,e[i],n);return n}(e||"*",a.nodeType?[a]:a,[]),v=!t||!s&&e?_:pt(_,p,t,a,l);if(n?n(v,f=r||(s?t:y||i)?[]:o,a,l):f=v,i)for(h=pt(f,m),i(h,[],a,l),c=h.length;c--;)(d=h[c])&&(f[m[c]]=!(v[m[c]]=d));if(s){if(r||t){if(r){for(h=[],c=f.length;c--;)(d=f[c])&&h.push(v[c]=d);r(null,f=[],h,l)}for(c=f.length;c--;)(d=f[c])&&(h=r?u.call(s,d):p[c])>-1&&(s[h]=!(o[h]=d))}}else f=pt(f===o?f.splice(y,f.length):f),r?r(null,o,f,l):g.apply(o,f)}))}function mt(t){for(var i,r,s,o=t.length,a=e.relative[t[0].type],l=a||e.relative[" "],h=a?1:0,c=dt((function(t){return t===i}),l,!0),d=dt((function(t){return u.call(i,t)>-1}),l,!0),f=[function(t,e,r){var s=!a&&(r||e!=n)||((i=e).nodeType?c(t,e,r):d(t,e,r));return i=null,s}];h<o;h++)if(r=e.relative[t[h].type])f=[dt(ft(f),r)];else{if((r=e.filter[t[h].type].apply(null,t[h].matches))[y]){for(s=++h;s<o&&!e.relative[t[s].type];s++);return gt(h>1&&ft(f),h>1&&ct(t.slice(0,h-1).concat({value:" "===t[h-2].type?"*":""})).replace(I,"$1"),r,h<s&&mt(t.slice(h,s)),s<o&&mt(t=t.slice(s)),s<o&&ct(t))}f.push(r)}return ft(f)}function yt(t,i){var r,s=[],o=[],a=w[t+" "];if(!a){for(i||(i=ut(t)),r=i.length;r--;)(a=mt(i[r]))[y]?s.push(a):o.push(a);a=w(t,function(t,i){var r=i.length>0,s=t.length>0,o=function(o,a,h,u,d){var f,p,m,y=0,v="0",x=o&&[],b=[],w=n,A=o||s&&e.find.TAG("*",d),S=_+=null==w?1:Math.random()||.1,T=A.length;for(d&&(n=a==l||a||d);v!==T&&null!=(f=A[v]);v++){if(s&&f){for(p=0,a||f.ownerDocument==l||(lt(f),h=!c);m=t[p++];)if(m(f,a||l,h)){g.call(u,f);break}d&&(_=S)}r&&((f=!m&&f)&&y--,o&&x.push(f))}if(y+=v,r&&v!==y){for(p=0;m=i[p++];)m(x,b,a,h);if(o){if(y>0)for(;v--;)x[v]||b[v]||(b[v]=M.call(u));b=pt(b)}g.apply(u,b),d&&!o&&b.length>0&&y+i.length>1&&E.uniqueSort(u)}return d&&(_=S,n=w),x};return r?et(o):o}(o,s)),a.selector=t}return a}function _t(t,n,i,r){var s,o,a,l,h,u="function"==typeof t&&t,d=!r&&ut(t=u.selector||t);if(i=i||[],1===d.length){if((o=d[0]=d[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&9===n.nodeType&&c&&e.relative[o[1].type]){if(!(n=(e.find.ID(a.matches[0].replace(Y,Z),n)||[])[0]))return i;u&&(n=n.parentNode),t=t.slice(o.shift().value.length)}for(s=W.needsContext.test(t)?0:o.length;s--&&(a=o[s],!e.relative[l=a.type]);)if((h=e.find[l])&&(r=h(a.matches[0].replace(Y,Z),H.test(o[0].type)&&at(n.parentNode)||n))){if(o.splice(s,1),!(t=r.length&&ct(o)))return g.apply(i,r),i;break}}return(u||yt(t,d))(r,n,!c,i,!n||H.test(t)&&at(n.parentNode)||n),i}ht.prototype=e.filters=e.pseudos,e.setFilters=new ht,m.sortStable=y.split("").sort(S).join("")===y,lt(),m.sortDetached=nt((function(t){return 1&t.compareDocumentPosition(l.createElement("fieldset"))})),E.find=Q,E.expr[":"]=E.expr.pseudos,E.unique=E.uniqueSort,Q.compile=yt,Q.select=_t,Q.setDocument=lt,Q.tokenize=ut,Q.escape=E.escapeSelector,Q.getText=E.text,Q.isXML=E.isXMLDoc,Q.selectors=E.expr,Q.support=E.support,Q.uniqueSort=E.uniqueSort}();var O=function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&E(t).is(n))break;i.push(t)}return i},j=function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n},G=E.expr.match.needsContext,B=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i;function z(t,e,n){return y(e)?E.grep(t,(function(t,i){return!!e.call(t,i,t)!==n})):e.nodeType?E.grep(t,(function(t){return t===e!==n})):"string"!=typeof e?E.grep(t,(function(t){return u.call(e,t)>-1!==n})):E.filter(e,t,n)}E.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?E.find.matchesSelector(i,t)?[i]:[]:E.find.matches(t,E.grep(e,(function(t){return 1===t.nodeType})))},E.fn.extend({find:function(t){var e,n,i=this.length,r=this;if("string"!=typeof t)return this.pushStack(E(t).filter((function(){for(e=0;e<i;e++)if(E.contains(r[e],this))return!0})));for(n=this.pushStack([]),e=0;e<i;e++)E.find(t,r[e],n);return i>1?E.uniqueSort(n):n},filter:function(t){return this.pushStack(z(this,t||[],!1))},not:function(t){return this.pushStack(z(this,t||[],!0))},is:function(t){return!!z(this,"string"==typeof t&&G.test(t)?E(t):t||[],!1).length}});var q,U=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/;(E.fn.init=function(t,e,n){var i,r;if(!t)return this;if(n=n||q,"string"==typeof t){if(!(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:U.exec(t))||!i[1]&&e)return!e||e.jquery?(e||n).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof E?e[0]:e,E.merge(this,E.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:v,!0)),B.test(i[1])&&E.isPlainObject(e))for(i in e)y(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return(r=v.getElementById(i[2]))&&(this[0]=r,this.length=1),this}return t.nodeType?(this[0]=t,this.length=1,this):y(t)?void 0!==n.ready?n.ready(t):t(E):E.makeArray(t,this)}).prototype=E.fn,q=E(v);var W=/^(?:parents|prev(?:Until|All))/,$={children:!0,contents:!0,next:!0,prev:!0};function V(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}E.fn.extend({has:function(t){var e=E(t,this),n=e.length;return this.filter((function(){for(var t=0;t<n;t++)if(E.contains(this,e[t]))return!0}))},closest:function(t,e){var n,i=0,r=this.length,s=[],o="string"!=typeof t&&E(t);if(!G.test(t))for(;i<r;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:1===n.nodeType&&E.find.matchesSelector(n,t))){s.push(n);break}return this.pushStack(s.length>1?E.uniqueSort(s):s)},index:function(t){return t?"string"==typeof t?u.call(E(t),this[0]):u.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(E.uniqueSort(E.merge(this.get(),E(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),E.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return O(t,"parentNode")},parentsUntil:function(t,e,n){return O(t,"parentNode",n)},next:function(t){return V(t,"nextSibling")},prev:function(t){return V(t,"previousSibling")},nextAll:function(t){return O(t,"nextSibling")},prevAll:function(t){return O(t,"previousSibling")},nextUntil:function(t,e,n){return O(t,"nextSibling",n)},prevUntil:function(t,e,n){return O(t,"previousSibling",n)},siblings:function(t){return j((t.parentNode||{}).firstChild,t)},children:function(t){return j(t.firstChild)},contents:function(t){return null!=t.contentDocument&&o(t.contentDocument)?t.contentDocument:(C(t,"template")&&(t=t.content||t),E.merge([],t.childNodes))}},(function(t,e){E.fn[t]=function(n,i){var r=E.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=E.filter(i,r)),this.length>1&&($[t]||E.uniqueSort(r),W.test(t)&&r.reverse()),this.pushStack(r)}}));var X=/[^\x20\t\r\n\f]+/g;function H(t){return t}function Y(t){throw t}function Z(t,e,n,i){var r;try{t&&y(r=t.promise)?r.call(t).done(e).fail(n):t&&y(r=t.then)?r.call(t,e,n):e.apply(void 0,[t].slice(i))}catch(t){n.apply(void 0,[t])}}E.Callbacks=function(t){t="string"==typeof t?function(t){var e={};return E.each(t.match(X)||[],(function(t,n){e[n]=!0})),e}(t):E.extend({},t);var e,n,i,r,s=[],o=[],a=-1,l=function(){for(r=r||t.once,i=e=!0;o.length;a=-1)for(n=o.shift();++a<s.length;)!1===s[a].apply(n[0],n[1])&&t.stopOnFalse&&(a=s.length,n=!1);t.memory||(n=!1),e=!1,r&&(s=n?[]:"")},h={add:function(){return s&&(n&&!e&&(a=s.length-1,o.push(n)),function e(n){E.each(n,(function(n,i){y(i)?t.unique&&h.has(i)||s.push(i):i&&i.length&&"string"!==w(i)&&e(i)}))}(arguments),n&&!e&&l()),this},remove:function(){return E.each(arguments,(function(t,e){for(var n;(n=E.inArray(e,s,n))>-1;)s.splice(n,1),n<=a&&a--})),this},has:function(t){return t?E.inArray(t,s)>-1:s.length>0},empty:function(){return s&&(s=[]),this},disable:function(){return r=o=[],s=n="",this},disabled:function(){return!s},lock:function(){return r=o=[],n||e||(s=n=""),this},locked:function(){return!!r},fireWith:function(t,n){return r||(n=[t,(n=n||[]).slice?n.slice():n],o.push(n),e||l()),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!i}};return h},E.extend({Deferred:function(t){var e=[["notify","progress",E.Callbacks("memory"),E.Callbacks("memory"),2],["resolve","done",E.Callbacks("once memory"),E.Callbacks("once memory"),0,"resolved"],["reject","fail",E.Callbacks("once memory"),E.Callbacks("once memory"),1,"rejected"]],n="pending",r={state:function(){return n},always:function(){return s.done(arguments).fail(arguments),this},catch:function(t){return r.then(null,t)},pipe:function(){var t=arguments;return E.Deferred((function(n){E.each(e,(function(e,i){var r=y(t[i[4]])&&t[i[4]];s[i[1]]((function(){var t=r&&r.apply(this,arguments);t&&y(t.promise)?t.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[i[0]+"With"](this,r?[t]:arguments)}))})),t=null})).promise()},then:function(t,n,r){var s=0;function o(t,e,n,r){return function(){var a=this,l=arguments,h=function(){var i,h;if(!(t<s)){if((i=n.apply(a,l))===e.promise())throw new TypeError("Thenable self-resolution");h=i&&("object"==typeof i||"function"==typeof i)&&i.then,y(h)?r?h.call(i,o(s,e,H,r),o(s,e,Y,r)):(s++,h.call(i,o(s,e,H,r),o(s,e,Y,r),o(s,e,H,e.notifyWith))):(n!==H&&(a=void 0,l=[i]),(r||e.resolveWith)(a,l))}},u=r?h:function(){try{h()}catch(i){E.Deferred.exceptionHook&&E.Deferred.exceptionHook(i,u.error),t+1>=s&&(n!==Y&&(a=void 0,l=[i]),e.rejectWith(a,l))}};t?u():(E.Deferred.getErrorHook?u.error=E.Deferred.getErrorHook():E.Deferred.getStackHook&&(u.error=E.Deferred.getStackHook()),i.setTimeout(u))}}return E.Deferred((function(i){e[0][3].add(o(0,i,y(r)?r:H,i.notifyWith)),e[1][3].add(o(0,i,y(t)?t:H)),e[2][3].add(o(0,i,y(n)?n:Y))})).promise()},promise:function(t){return null!=t?E.extend(t,r):r}},s={};return E.each(e,(function(t,i){var o=i[2],a=i[5];r[i[1]]=o.add,a&&o.add((function(){n=a}),e[3-t][2].disable,e[3-t][3].disable,e[0][2].lock,e[0][3].lock),o.add(i[3].fire),s[i[0]]=function(){return s[i[0]+"With"](this===s?void 0:this,arguments),this},s[i[0]+"With"]=o.fireWith})),r.promise(s),t&&t.call(s,s),s},when:function(t){var e=arguments.length,n=e,i=Array(n),r=a.call(arguments),s=E.Deferred(),o=function(t){return function(n){i[t]=this,r[t]=arguments.length>1?a.call(arguments):n,--e||s.resolveWith(i,r)}};if(e<=1&&(Z(t,s.done(o(n)).resolve,s.reject,!e),"pending"===s.state()||y(r[n]&&r[n].then)))return s.then();for(;n--;)Z(r[n],o(n),s.reject);return s.promise()}});var K=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;E.Deferred.exceptionHook=function(t,e){i.console&&i.console.warn&&t&&K.test(t.name)&&i.console.warn("jQuery.Deferred exception: "+t.message,t.stack,e)},E.readyException=function(t){i.setTimeout((function(){throw t}))};var J=E.Deferred();function Q(){v.removeEventListener("DOMContentLoaded",Q),i.removeEventListener("load",Q),E.ready()}E.fn.ready=function(t){return J.then(t).catch((function(t){E.readyException(t)})),this},E.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--E.readyWait:E.isReady)||(E.isReady=!0,!0!==t&&--E.readyWait>0||J.resolveWith(v,[E]))}}),E.ready.then=J.then,"complete"===v.readyState||"loading"!==v.readyState&&!v.documentElement.doScroll?i.setTimeout(E.ready):(v.addEventListener("DOMContentLoaded",Q),i.addEventListener("load",Q));var tt=function(t,e,n,i,r,s,o){var a=0,l=t.length,h=null==n;if("object"===w(n))for(a in r=!0,n)tt(t,e,a,n[a],!0,s,o);else if(void 0!==i&&(r=!0,y(i)||(o=!0),h&&(o?(e.call(t,i),e=null):(h=e,e=function(t,e,n){return h.call(E(t),n)})),e))for(;a<l;a++)e(t[a],n,o?i:i.call(t[a],a,e(t[a],n)));return r?t:h?e.call(t):l?e(t[0],n):s},et=/^-ms-/,nt=/-([a-z])/g;function it(t,e){return e.toUpperCase()}function rt(t){return t.replace(et,"ms-").replace(nt,it)}var st=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};function ot(){this.expando=E.expando+ot.uid++}ot.uid=1,ot.prototype={cache:function(t){var e=t[this.expando];return e||(e={},st(t)&&(t.nodeType?t[this.expando]=e:Object.defineProperty(t,this.expando,{value:e,configurable:!0}))),e},set:function(t,e,n){var i,r=this.cache(t);if("string"==typeof e)r[rt(e)]=n;else for(i in e)r[rt(i)]=e[i];return r},get:function(t,e){return void 0===e?this.cache(t):t[this.expando]&&t[this.expando][rt(e)]},access:function(t,e,n){return void 0===e||e&&"string"==typeof e&&void 0===n?this.get(t,e):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i=t[this.expando];if(void 0!==i){if(void 0!==e){n=(e=Array.isArray(e)?e.map(rt):(e=rt(e))in i?[e]:e.match(X)||[]).length;for(;n--;)delete i[e[n]]}(void 0===e||E.isEmptyObject(i))&&(t.nodeType?t[this.expando]=void 0:delete t[this.expando])}},hasData:function(t){var e=t[this.expando];return void 0!==e&&!E.isEmptyObject(e)}};var at=new ot,lt=new ot,ht=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ut=/[A-Z]/g;function ct(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(ut,"-$&").toLowerCase(),"string"==typeof(n=t.getAttribute(i))){try{n=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:ht.test(t)?JSON.parse(t):t)}(n)}catch(t){}lt.set(t,e,n)}else n=void 0;return n}E.extend({hasData:function(t){return lt.hasData(t)||at.hasData(t)},data:function(t,e,n){return lt.access(t,e,n)},removeData:function(t,e){lt.remove(t,e)},_data:function(t,e,n){return at.access(t,e,n)},_removeData:function(t,e){at.remove(t,e)}}),E.fn.extend({data:function(t,e){var n,i,r,s=this[0],o=s&&s.attributes;if(void 0===t){if(this.length&&(r=lt.get(s),1===s.nodeType&&!at.get(s,"hasDataAttrs"))){for(n=o.length;n--;)o[n]&&0===(i=o[n].name).indexOf("data-")&&(i=rt(i.slice(5)),ct(s,i,r[i]));at.set(s,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each((function(){lt.set(this,t)})):tt(this,(function(e){var n;if(s&&void 0===e)return void 0!==(n=lt.get(s,t))||void 0!==(n=ct(s,t))?n:void 0;this.each((function(){lt.set(this,t,e)}))}),null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each((function(){lt.remove(this,t)}))}}),E.extend({queue:function(t,e,n){var i;if(t)return e=(e||"fx")+"queue",i=at.get(t,e),n&&(!i||Array.isArray(n)?i=at.access(t,e,E.makeArray(n)):i.push(n)),i||[]},dequeue:function(t,e){e=e||"fx";var n=E.queue(t,e),i=n.length,r=n.shift(),s=E._queueHooks(t,e);"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete s.stop,r.call(t,(function(){E.dequeue(t,e)}),s)),!i&&s&&s.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return at.get(t,n)||at.access(t,n,{empty:E.Callbacks("once memory").add((function(){at.remove(t,[e+"queue",n])}))})}}),E.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?E.queue(this[0],t):void 0===e?this:this.each((function(){var n=E.queue(this,t,e);E._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&E.dequeue(this,t)}))},dequeue:function(t){return this.each((function(){E.dequeue(this,t)}))},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=E.Deferred(),s=this,o=this.length,a=function(){--i||r.resolveWith(s,[s])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";o--;)(n=at.get(s[o],t+"queueHooks"))&&n.empty&&(i++,n.empty.add(a));return a(),r.promise(e)}});var dt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ft=new RegExp("^(?:([+-])=|)("+dt+")([a-z%]*)$","i"),pt=["Top","Right","Bottom","Left"],gt=v.documentElement,mt=function(t){return E.contains(t.ownerDocument,t)},yt={composed:!0};gt.getRootNode&&(mt=function(t){return E.contains(t.ownerDocument,t)||t.getRootNode(yt)===t.ownerDocument});var _t=function(t,e){return"none"===(t=e||t).style.display||""===t.style.display&&mt(t)&&"none"===E.css(t,"display")};function vt(t,e,n,i){var r,s,o=20,a=i?function(){return i.cur()}:function(){return E.css(t,e,"")},l=a(),h=n&&n[3]||(E.cssNumber[e]?"":"px"),u=t.nodeType&&(E.cssNumber[e]||"px"!==h&&+l)&&ft.exec(E.css(t,e));if(u&&u[3]!==h){for(l/=2,h=h||u[3],u=+l||1;o--;)E.style(t,e,u+h),(1-s)*(1-(s=a()/l||.5))<=0&&(o=0),u/=s;u*=2,E.style(t,e,u+h),n=n||[]}return n&&(u=+u||+l||0,r=n[1]?u+(n[1]+1)*n[2]:+n[2],i&&(i.unit=h,i.start=u,i.end=r)),r}var xt={};function bt(t){var e,n=t.ownerDocument,i=t.nodeName,r=xt[i];return r||(e=n.body.appendChild(n.createElement(i)),r=E.css(e,"display"),e.parentNode.removeChild(e),"none"===r&&(r="block"),xt[i]=r,r)}function wt(t,e){for(var n,i,r=[],s=0,o=t.length;s<o;s++)(i=t[s]).style&&(n=i.style.display,e?("none"===n&&(r[s]=at.get(i,"display")||null,r[s]||(i.style.display="")),""===i.style.display&&_t(i)&&(r[s]=bt(i))):"none"!==n&&(r[s]="none",at.set(i,"display",n)));for(s=0;s<o;s++)null!=r[s]&&(t[s].style.display=r[s]);return t}E.fn.extend({show:function(){return wt(this,!0)},hide:function(){return wt(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each((function(){_t(this)?E(this).show():E(this).hide()}))}});var At,St,Et=/^(?:checkbox|radio)$/i,Tt=/<([a-z][^\/\0>\x20\t\r\n\f]*)/i,Ct=/^$|^module$|\/(?:java|ecma)script/i;At=v.createDocumentFragment().appendChild(v.createElement("div")),(St=v.createElement("input")).setAttribute("type","radio"),St.setAttribute("checked","checked"),St.setAttribute("name","t"),At.appendChild(St),m.checkClone=At.cloneNode(!0).cloneNode(!0).lastChild.checked,At.innerHTML="<textarea>x</textarea>",m.noCloneChecked=!!At.cloneNode(!0).lastChild.defaultValue,At.innerHTML="<option></option>",m.option=!!At.lastChild;var Mt={thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};function Lt(t,e){var n;return n=void 0!==t.getElementsByTagName?t.getElementsByTagName(e||"*"):void 0!==t.querySelectorAll?t.querySelectorAll(e||"*"):[],void 0===e||e&&C(t,e)?E.merge([t],n):n}function Pt(t,e){for(var n=0,i=t.length;n<i;n++)at.set(t[n],"globalEval",!e||at.get(e[n],"globalEval"))}Mt.tbody=Mt.tfoot=Mt.colgroup=Mt.caption=Mt.thead,Mt.th=Mt.td,m.option||(Mt.optgroup=Mt.option=[1,"<select multiple='multiple'>","</select>"]);var Rt=/<|&#?\w+;/;function It(t,e,n,i,r){for(var s,o,a,l,h,u,c=e.createDocumentFragment(),d=[],f=0,p=t.length;f<p;f++)if((s=t[f])||0===s)if("object"===w(s))E.merge(d,s.nodeType?[s]:s);else if(Rt.test(s)){for(o=o||c.appendChild(e.createElement("div")),a=(Tt.exec(s)||["",""])[1].toLowerCase(),l=Mt[a]||Mt._default,o.innerHTML=l[1]+E.htmlPrefilter(s)+l[2],u=l[0];u--;)o=o.lastChild;E.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(e.createTextNode(s));for(c.textContent="",f=0;s=d[f++];)if(i&&E.inArray(s,i)>-1)r&&r.push(s);else if(h=mt(s),o=Lt(c.appendChild(s),"script"),h&&Pt(o),n)for(u=0;s=o[u++];)Ct.test(s.type||"")&&n.push(s);return c}var Nt=/^([^.]*)(?:\.(.+)|)/;function Ft(){return!0}function kt(){return!1}function Dt(t,e,n,i,r,s){var o,a;if("object"==typeof e){for(a in"string"!=typeof n&&(i=i||n,n=void 0),e)Dt(t,a,n,i,e[a],s);return t}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),!1===r)r=kt;else if(!r)return t;return 1===s&&(o=r,r=function(t){return E().off(t),o.apply(this,arguments)},r.guid=o.guid||(o.guid=E.guid++)),t.each((function(){E.event.add(this,e,r,i,n)}))}function Ot(t,e,n){n?(at.set(t,e,!1),E.event.add(t,e,{namespace:!1,handler:function(t){var n,i=at.get(this,e);if(1&t.isTrigger&&this[e]){if(i)(E.event.special[e]||{}).delegateType&&t.stopPropagation();else if(i=a.call(arguments),at.set(this,e,i),this[e](),n=at.get(this,e),at.set(this,e,!1),i!==n)return t.stopImmediatePropagation(),t.preventDefault(),n}else i&&(at.set(this,e,E.event.trigger(i[0],i.slice(1),this)),t.stopPropagation(),t.isImmediatePropagationStopped=Ft)}})):void 0===at.get(t,e)&&E.event.add(t,e,Ft)}E.event={global:{},add:function(t,e,n,i,r){var s,o,a,l,h,u,c,d,f,p,g,m=at.get(t);if(st(t))for(n.handler&&(n=(s=n).handler,r=s.selector),r&&E.find.matchesSelector(gt,r),n.guid||(n.guid=E.guid++),(l=m.events)||(l=m.events=Object.create(null)),(o=m.handle)||(o=m.handle=function(e){return void 0!==E&&E.event.triggered!==e.type?E.event.dispatch.apply(t,arguments):void 0}),h=(e=(e||"").match(X)||[""]).length;h--;)f=g=(a=Nt.exec(e[h])||[])[1],p=(a[2]||"").split(".").sort(),f&&(c=E.event.special[f]||{},f=(r?c.delegateType:c.bindType)||f,c=E.event.special[f]||{},u=E.extend({type:f,origType:g,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&E.expr.match.needsContext.test(r),namespace:p.join(".")},s),(d=l[f])||((d=l[f]=[]).delegateCount=0,c.setup&&!1!==c.setup.call(t,i,p,o)||t.addEventListener&&t.addEventListener(f,o)),c.add&&(c.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),E.event.global[f]=!0)},remove:function(t,e,n,i,r){var s,o,a,l,h,u,c,d,f,p,g,m=at.hasData(t)&&at.get(t);if(m&&(l=m.events)){for(h=(e=(e||"").match(X)||[""]).length;h--;)if(f=g=(a=Nt.exec(e[h])||[])[1],p=(a[2]||"").split(".").sort(),f){for(c=E.event.special[f]||{},d=l[f=(i?c.delegateType:c.bindType)||f]||[],a=a[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),o=s=d.length;s--;)u=d[s],!r&&g!==u.origType||n&&n.guid!==u.guid||a&&!a.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(s,1),u.selector&&d.delegateCount--,c.remove&&c.remove.call(t,u));o&&!d.length&&(c.teardown&&!1!==c.teardown.call(t,p,m.handle)||E.removeEvent(t,f,m.handle),delete l[f])}else for(f in l)E.event.remove(t,f+e[h],n,i,!0);E.isEmptyObject(l)&&at.remove(t,"handle events")}},dispatch:function(t){var e,n,i,r,s,o,a=new Array(arguments.length),l=E.event.fix(t),h=(at.get(this,"events")||Object.create(null))[l.type]||[],u=E.event.special[l.type]||{};for(a[0]=l,e=1;e<arguments.length;e++)a[e]=arguments[e];if(l.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,l)){for(o=E.event.handlers.call(this,l,h),e=0;(r=o[e++])&&!l.isPropagationStopped();)for(l.currentTarget=r.elem,n=0;(s=r.handlers[n++])&&!l.isImmediatePropagationStopped();)l.rnamespace&&!1!==s.namespace&&!l.rnamespace.test(s.namespace)||(l.handleObj=s,l.data=s.data,void 0!==(i=((E.event.special[s.origType]||{}).handle||s.handler).apply(r.elem,a))&&!1===(l.result=i)&&(l.preventDefault(),l.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,l),l.result}},handlers:function(t,e){var n,i,r,s,o,a=[],l=e.delegateCount,h=t.target;if(l&&h.nodeType&&!("click"===t.type&&t.button>=1))for(;h!==this;h=h.parentNode||this)if(1===h.nodeType&&("click"!==t.type||!0!==h.disabled)){for(s=[],o={},n=0;n<l;n++)void 0===o[r=(i=e[n]).selector+" "]&&(o[r]=i.needsContext?E(r,this).index(h)>-1:E.find(r,this,null,[h]).length),o[r]&&s.push(i);s.length&&a.push({elem:h,handlers:s})}return h=this,l<e.length&&a.push({elem:h,handlers:e.slice(l)}),a},addProp:function(t,e){Object.defineProperty(E.Event.prototype,t,{enumerable:!0,configurable:!0,get:y(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[t]},set:function(e){Object.defineProperty(this,t,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[E.expando]?t:new E.Event(t)},special:{load:{noBubble:!0},click:{setup:function(t){var e=this||t;return Et.test(e.type)&&e.click&&C(e,"input")&&Ot(e,"click",!0),!1},trigger:function(t){var e=this||t;return Et.test(e.type)&&e.click&&C(e,"input")&&Ot(e,"click"),!0},_default:function(t){var e=t.target;return Et.test(e.type)&&e.click&&C(e,"input")&&at.get(e,"click")||C(e,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},E.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n)},E.Event=function(t,e){if(!(this instanceof E.Event))return new E.Event(t,e);t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&!1===t.returnValue?Ft:kt,this.target=t.target&&3===t.target.nodeType?t.target.parentNode:t.target,this.currentTarget=t.currentTarget,this.relatedTarget=t.relatedTarget):this.type=t,e&&E.extend(this,e),this.timeStamp=t&&t.timeStamp||Date.now(),this[E.expando]=!0},E.Event.prototype={constructor:E.Event,isDefaultPrevented:kt,isPropagationStopped:kt,isImmediatePropagationStopped:kt,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=Ft,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=Ft,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=Ft,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},E.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,code:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:!0},E.event.addProp),E.each({focus:"focusin",blur:"focusout"},(function(t,e){function n(t){if(v.documentMode){var n=at.get(this,"handle"),i=E.event.fix(t);i.type="focusin"===t.type?"focus":"blur",i.isSimulated=!0,n(t),i.target===i.currentTarget&&n(i)}else E.event.simulate(e,t.target,E.event.fix(t))}E.event.special[t]={setup:function(){var i;if(Ot(this,t,!0),!v.documentMode)return!1;(i=at.get(this,e))||this.addEventListener(e,n),at.set(this,e,(i||0)+1)},trigger:function(){return Ot(this,t),!0},teardown:function(){var t;if(!v.documentMode)return!1;(t=at.get(this,e)-1)?at.set(this,e,t):(this.removeEventListener(e,n),at.remove(this,e))},_default:function(e){return at.get(e.target,t)},delegateType:e},E.event.special[e]={setup:function(){var i=this.ownerDocument||this.document||this,r=v.documentMode?this:i,s=at.get(r,e);s||(v.documentMode?this.addEventListener(e,n):i.addEventListener(t,n,!0)),at.set(r,e,(s||0)+1)},teardown:function(){var i=this.ownerDocument||this.document||this,r=v.documentMode?this:i,s=at.get(r,e)-1;s?at.set(r,e,s):(v.documentMode?this.removeEventListener(e,n):i.removeEventListener(t,n,!0),at.remove(r,e))}}})),E.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},(function(t,e){E.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=t.relatedTarget,r=t.handleObj;return i&&(i===this||E.contains(this,i))||(t.type=r.origType,n=r.handler.apply(this,arguments),t.type=e),n}}})),E.fn.extend({on:function(t,e,n,i){return Dt(this,t,e,n,i)},one:function(t,e,n,i){return Dt(this,t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,E(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return!1!==e&&"function"!=typeof e||(n=e,e=void 0),!1===n&&(n=kt),this.each((function(){E.event.remove(this,t,n,e)}))}});var jt=/<script|<style|<link/i,Gt=/checked\s*(?:[^=]|=\s*.checked.)/i,Bt=/^\s*<!\[CDATA\[|\]\]>\s*$/g;function zt(t,e){return C(t,"table")&&C(11!==e.nodeType?e:e.firstChild,"tr")&&E(t).children("tbody")[0]||t}function qt(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function Ut(t){return"true/"===(t.type||"").slice(0,5)?t.type=t.type.slice(5):t.removeAttribute("type"),t}function Wt(t,e){var n,i,r,s,o,a;if(1===e.nodeType){if(at.hasData(t)&&(a=at.get(t).events))for(r in at.remove(e,"handle events"),a)for(n=0,i=a[r].length;n<i;n++)E.event.add(e,r,a[r][n]);lt.hasData(t)&&(s=lt.access(t),o=E.extend({},s),lt.set(e,o))}}function $t(t,e){var n=e.nodeName.toLowerCase();"input"===n&&Et.test(t.type)?e.checked=t.checked:"input"!==n&&"textarea"!==n||(e.defaultValue=t.defaultValue)}function Vt(t,e,n,i){e=l(e);var r,s,o,a,h,u,c=0,d=t.length,f=d-1,p=e[0],g=y(p);if(g||d>1&&"string"==typeof p&&!m.checkClone&&Gt.test(p))return t.each((function(r){var s=t.eq(r);g&&(e[0]=p.call(this,r,s.html())),Vt(s,e,n,i)}));if(d&&(s=(r=It(e,t[0].ownerDocument,!1,t,i)).firstChild,1===r.childNodes.length&&(r=s),s||i)){for(a=(o=E.map(Lt(r,"script"),qt)).length;c<d;c++)h=r,c!==f&&(h=E.clone(h,!0,!0),a&&E.merge(o,Lt(h,"script"))),n.call(t[c],h,c);if(a)for(u=o[o.length-1].ownerDocument,E.map(o,Ut),c=0;c<a;c++)h=o[c],Ct.test(h.type||"")&&!at.access(h,"globalEval")&&E.contains(u,h)&&(h.src&&"module"!==(h.type||"").toLowerCase()?E._evalUrl&&!h.noModule&&E._evalUrl(h.src,{nonce:h.nonce||h.getAttribute("nonce")},u):b(h.textContent.replace(Bt,""),h,u))}return t}function Xt(t,e,n){for(var i,r=e?E.filter(e,t):t,s=0;null!=(i=r[s]);s++)n||1!==i.nodeType||E.cleanData(Lt(i)),i.parentNode&&(n&&mt(i)&&Pt(Lt(i,"script")),i.parentNode.removeChild(i));return t}E.extend({htmlPrefilter:function(t){return t},clone:function(t,e,n){var i,r,s,o,a=t.cloneNode(!0),l=mt(t);if(!(m.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||E.isXMLDoc(t)))for(o=Lt(a),i=0,r=(s=Lt(t)).length;i<r;i++)$t(s[i],o[i]);if(e)if(n)for(s=s||Lt(t),o=o||Lt(a),i=0,r=s.length;i<r;i++)Wt(s[i],o[i]);else Wt(t,a);return(o=Lt(a,"script")).length>0&&Pt(o,!l&&Lt(t,"script")),a},cleanData:function(t){for(var e,n,i,r=E.event.special,s=0;void 0!==(n=t[s]);s++)if(st(n)){if(e=n[at.expando]){if(e.events)for(i in e.events)r[i]?E.event.remove(n,i):E.removeEvent(n,i,e.handle);n[at.expando]=void 0}n[lt.expando]&&(n[lt.expando]=void 0)}}}),E.fn.extend({detach:function(t){return Xt(this,t,!0)},remove:function(t){return Xt(this,t)},text:function(t){return tt(this,(function(t){return void 0===t?E.text(this):this.empty().each((function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)}))}),null,t,arguments.length)},append:function(){return Vt(this,arguments,(function(t){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||zt(this,t).appendChild(t)}))},prepend:function(){return Vt(this,arguments,(function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=zt(this,t);e.insertBefore(t,e.firstChild)}}))},before:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this)}))},after:function(){return Vt(this,arguments,(function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)}))},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(E.cleanData(Lt(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null!=t&&t,e=null==e?t:e,this.map((function(){return E.clone(this,t,e)}))},html:function(t){return tt(this,(function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!jt.test(t)&&!Mt[(Tt.exec(t)||["",""])[1].toLowerCase()]){t=E.htmlPrefilter(t);try{for(;n<i;n++)1===(e=this[n]||{}).nodeType&&(E.cleanData(Lt(e,!1)),e.innerHTML=t);e=0}catch(t){}}e&&this.empty().append(t)}),null,t,arguments.length)},replaceWith:function(){var t=[];return Vt(this,arguments,(function(e){var n=this.parentNode;E.inArray(this,t)<0&&(E.cleanData(Lt(this)),n&&n.replaceChild(e,this))}),t)}}),E.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},(function(t,e){E.fn[t]=function(t){for(var n,i=[],r=E(t),s=r.length-1,o=0;o<=s;o++)n=o===s?this:this.clone(!0),E(r[o])[e](n),h.apply(i,n.get());return this.pushStack(i)}}));var Ht=new RegExp("^("+dt+")(?!px)[a-z%]+$","i"),Yt=/^--/,Zt=function(t){var e=t.ownerDocument.defaultView;return e&&e.opener||(e=i),e.getComputedStyle(t)},Kt=function(t,e,n){var i,r,s={};for(r in e)s[r]=t.style[r],t.style[r]=e[r];for(r in i=n.call(t),e)t.style[r]=s[r];return i},Jt=new RegExp(pt.join("|"),"i");function Qt(t,e,n){var i,r,s,o,a=Yt.test(e),l=t.style;return(n=n||Zt(t))&&(o=n.getPropertyValue(e)||n[e],a&&o&&(o=o.replace(I,"$1")||void 0),""!==o||mt(t)||(o=E.style(t,e)),!m.pixelBoxStyles()&&Ht.test(o)&&Jt.test(e)&&(i=l.width,r=l.minWidth,s=l.maxWidth,l.minWidth=l.maxWidth=l.width=o,o=n.width,l.width=i,l.minWidth=r,l.maxWidth=s)),void 0!==o?o+"":o}function te(t,e){return{get:function(){if(!t())return(this.get=e).apply(this,arguments);delete this.get}}}!function(){function t(){if(u){h.style.cssText="position:absolute;left:-11111px;width:60px;margin-top:1px;padding:0;border:0",u.style.cssText="position:relative;display:block;box-sizing:border-box;overflow:scroll;margin:auto;border:1px;padding:1px;width:60%;top:1%",gt.appendChild(h).appendChild(u);var t=i.getComputedStyle(u);n="1%"!==t.top,l=12===e(t.marginLeft),u.style.right="60%",o=36===e(t.right),r=36===e(t.width),u.style.position="absolute",s=12===e(u.offsetWidth/3),gt.removeChild(h),u=null}}function e(t){return Math.round(parseFloat(t))}var n,r,s,o,a,l,h=v.createElement("div"),u=v.createElement("div");u.style&&(u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",m.clearCloneStyle="content-box"===u.style.backgroundClip,E.extend(m,{boxSizingReliable:function(){return t(),r},pixelBoxStyles:function(){return t(),o},pixelPosition:function(){return t(),n},reliableMarginLeft:function(){return t(),l},scrollboxSize:function(){return t(),s},reliableTrDimensions:function(){var t,e,n,r;return null==a&&(t=v.createElement("table"),e=v.createElement("tr"),n=v.createElement("div"),t.style.cssText="position:absolute;left:-11111px;border-collapse:separate",e.style.cssText="box-sizing:content-box;border:1px solid",e.style.height="1px",n.style.height="9px",n.style.display="block",gt.appendChild(t).appendChild(e).appendChild(n),r=i.getComputedStyle(e),a=parseInt(r.height,10)+parseInt(r.borderTopWidth,10)+parseInt(r.borderBottomWidth,10)===e.offsetHeight,gt.removeChild(t)),a}}))}();var ee=["Webkit","Moz","ms"],ne=v.createElement("div").style,ie={};function re(t){var e=E.cssProps[t]||ie[t];return e||(t in ne?t:ie[t]=function(t){for(var e=t[0].toUpperCase()+t.slice(1),n=ee.length;n--;)if((t=ee[n]+e)in ne)return t}(t)||t)}var se=/^(none|table(?!-c[ea]).+)/,oe={position:"absolute",visibility:"hidden",display:"block"},ae={letterSpacing:"0",fontWeight:"400"};function le(t,e,n){var i=ft.exec(e);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):e}function he(t,e,n,i,r,s){var o="width"===e?1:0,a=0,l=0,h=0;if(n===(i?"border":"content"))return 0;for(;o<4;o+=2)"margin"===n&&(h+=E.css(t,n+pt[o],!0,r)),i?("content"===n&&(l-=E.css(t,"padding"+pt[o],!0,r)),"margin"!==n&&(l-=E.css(t,"border"+pt[o]+"Width",!0,r))):(l+=E.css(t,"padding"+pt[o],!0,r),"padding"!==n?l+=E.css(t,"border"+pt[o]+"Width",!0,r):a+=E.css(t,"border"+pt[o]+"Width",!0,r));return!i&&s>=0&&(l+=Math.max(0,Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-s-l-a-.5))||0),l+h}function ue(t,e,n){var i=Zt(t),r=(!m.boxSizingReliable()||n)&&"border-box"===E.css(t,"boxSizing",!1,i),s=r,o=Qt(t,e,i),a="offset"+e[0].toUpperCase()+e.slice(1);if(Ht.test(o)){if(!n)return o;o="auto"}return(!m.boxSizingReliable()&&r||!m.reliableTrDimensions()&&C(t,"tr")||"auto"===o||!parseFloat(o)&&"inline"===E.css(t,"display",!1,i))&&t.getClientRects().length&&(r="border-box"===E.css(t,"boxSizing",!1,i),(s=a in t)&&(o=t[a])),(o=parseFloat(o)||0)+he(t,e,n||(r?"border":"content"),s,i,o)+"px"}function ce(t,e,n,i,r){return new ce.prototype.init(t,e,n,i,r)}E.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=Qt(t,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,aspectRatio:!0,borderImageSlice:!0,columnCount:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,gridArea:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnStart:!0,gridRow:!0,gridRowEnd:!0,gridRowStart:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,scale:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeMiterlimit:!0,strokeOpacity:!0},cssProps:{},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,s,o,a=rt(e),l=Yt.test(e),h=t.style;if(l||(e=re(a)),o=E.cssHooks[e]||E.cssHooks[a],void 0===n)return o&&"get"in o&&void 0!==(r=o.get(t,!1,i))?r:h[e];"string"===(s=typeof n)&&(r=ft.exec(n))&&r[1]&&(n=vt(t,e,r),s="number"),null!=n&&n==n&&("number"!==s||l||(n+=r&&r[3]||(E.cssNumber[a]?"":"px")),m.clearCloneStyle||""!==n||0!==e.indexOf("background")||(h[e]="inherit"),o&&"set"in o&&void 0===(n=o.set(t,n,i))||(l?h.setProperty(e,n):h[e]=n))}},css:function(t,e,n,i){var r,s,o,a=rt(e);return Yt.test(e)||(e=re(a)),(o=E.cssHooks[e]||E.cssHooks[a])&&"get"in o&&(r=o.get(t,!0,n)),void 0===r&&(r=Qt(t,e,i)),"normal"===r&&e in ae&&(r=ae[e]),""===n||n?(s=parseFloat(r),!0===n||isFinite(s)?s||0:r):r}}),E.each(["height","width"],(function(t,e){E.cssHooks[e]={get:function(t,n,i){if(n)return!se.test(E.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?ue(t,e,i):Kt(t,oe,(function(){return ue(t,e,i)}))},set:function(t,n,i){var r,s=Zt(t),o=!m.scrollboxSize()&&"absolute"===s.position,a=(o||i)&&"border-box"===E.css(t,"boxSizing",!1,s),l=i?he(t,e,i,a,s):0;return a&&o&&(l-=Math.ceil(t["offset"+e[0].toUpperCase()+e.slice(1)]-parseFloat(s[e])-he(t,e,"border",!1,s)-.5)),l&&(r=ft.exec(n))&&"px"!==(r[3]||"px")&&(t.style[e]=n,n=E.css(t,e)),le(0,n,l)}}})),E.cssHooks.marginLeft=te(m.reliableMarginLeft,(function(t,e){if(e)return(parseFloat(Qt(t,"marginLeft"))||t.getBoundingClientRect().left-Kt(t,{marginLeft:0},(function(){return t.getBoundingClientRect().left})))+"px"})),E.each({margin:"",padding:"",border:"Width"},(function(t,e){E.cssHooks[t+e]={expand:function(n){for(var i=0,r={},s="string"==typeof n?n.split(" "):[n];i<4;i++)r[t+pt[i]+e]=s[i]||s[i-2]||s[0];return r}},"margin"!==t&&(E.cssHooks[t+e].set=le)})),E.fn.extend({css:function(t,e){return tt(this,(function(t,e,n){var i,r,s={},o=0;if(Array.isArray(e)){for(i=Zt(t),r=e.length;o<r;o++)s[e[o]]=E.css(t,e[o],!1,i);return s}return void 0!==n?E.style(t,e,n):E.css(t,e)}),t,e,arguments.length>1)}}),E.Tween=ce,ce.prototype={constructor:ce,init:function(t,e,n,i,r,s){this.elem=t,this.prop=n,this.easing=r||E.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=s||(E.cssNumber[n]?"":"px")},cur:function(){var t=ce.propHooks[this.prop];return t&&t.get?t.get(this):ce.propHooks._default.get(this)},run:function(t){var e,n=ce.propHooks[this.prop];return this.options.duration?this.pos=e=E.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):this.pos=e=t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):ce.propHooks._default.set(this),this}},ce.prototype.init.prototype=ce.prototype,ce.propHooks={_default:{get:function(t){var e;return 1!==t.elem.nodeType||null!=t.elem[t.prop]&&null==t.elem.style[t.prop]?t.elem[t.prop]:(e=E.css(t.elem,t.prop,""))&&"auto"!==e?e:0},set:function(t){E.fx.step[t.prop]?E.fx.step[t.prop](t):1!==t.elem.nodeType||!E.cssHooks[t.prop]&&null==t.elem.style[re(t.prop)]?t.elem[t.prop]=t.now:E.style(t.elem,t.prop,t.now+t.unit)}}},ce.propHooks.scrollTop=ce.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},E.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2},_default:"swing"},E.fx=ce.prototype.init,E.fx.step={};var de,fe,pe=/^(?:toggle|show|hide)$/,ge=/queueHooks$/;function me(){fe&&(!1===v.hidden&&i.requestAnimationFrame?i.requestAnimationFrame(me):i.setTimeout(me,E.fx.interval),E.fx.tick())}function ye(){return i.setTimeout((function(){de=void 0})),de=Date.now()}function _e(t,e){var n,i=0,r={height:t};for(e=e?1:0;i<4;i+=2-e)r["margin"+(n=pt[i])]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function ve(t,e,n){for(var i,r=(xe.tweeners[e]||[]).concat(xe.tweeners["*"]),s=0,o=r.length;s<o;s++)if(i=r[s].call(n,e,t))return i}function xe(t,e,n){var i,r,s=0,o=xe.prefilters.length,a=E.Deferred().always((function(){delete l.elem})),l=function(){if(r)return!1;for(var e=de||ye(),n=Math.max(0,h.startTime+h.duration-e),i=1-(n/h.duration||0),s=0,o=h.tweens.length;s<o;s++)h.tweens[s].run(i);return a.notifyWith(t,[h,i,n]),i<1&&o?n:(o||a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h]),!1)},h=a.promise({elem:t,props:E.extend({},e),opts:E.extend(!0,{specialEasing:{},easing:E.easing._default},n),originalProperties:e,originalOptions:n,startTime:de||ye(),duration:n.duration,tweens:[],createTween:function(e,n){var i=E.Tween(t,h.opts,e,n,h.opts.specialEasing[e]||h.opts.easing);return h.tweens.push(i),i},stop:function(e){var n=0,i=e?h.tweens.length:0;if(r)return this;for(r=!0;n<i;n++)h.tweens[n].run(1);return e?(a.notifyWith(t,[h,1,0]),a.resolveWith(t,[h,e])):a.rejectWith(t,[h,e]),this}}),u=h.props;for(!function(t,e){var n,i,r,s,o;for(n in t)if(r=e[i=rt(n)],s=t[n],Array.isArray(s)&&(r=s[1],s=t[n]=s[0]),n!==i&&(t[i]=s,delete t[n]),(o=E.cssHooks[i])&&"expand"in o)for(n in s=o.expand(s),delete t[i],s)n in t||(t[n]=s[n],e[n]=r);else e[i]=r}(u,h.opts.specialEasing);s<o;s++)if(i=xe.prefilters[s].call(h,t,u,h.opts))return y(i.stop)&&(E._queueHooks(h.elem,h.opts.queue).stop=i.stop.bind(i)),i;return E.map(u,ve,h),y(h.opts.start)&&h.opts.start.call(t,h),h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always),E.fx.timer(E.extend(l,{elem:t,anim:h,queue:h.opts.queue})),h}E.Animation=E.extend(xe,{tweeners:{"*":[function(t,e){var n=this.createTween(t,e);return vt(n.elem,t,ft.exec(e),n),n}]},tweener:function(t,e){y(t)?(e=t,t=["*"]):t=t.match(X);for(var n,i=0,r=t.length;i<r;i++)n=t[i],xe.tweeners[n]=xe.tweeners[n]||[],xe.tweeners[n].unshift(e)},prefilters:[function(t,e,n){var i,r,s,o,a,l,h,u,c="width"in e||"height"in e,d=this,f={},p=t.style,g=t.nodeType&&_t(t),m=at.get(t,"fxshow");for(i in n.queue||(null==(o=E._queueHooks(t,"fx")).unqueued&&(o.unqueued=0,a=o.empty.fire,o.empty.fire=function(){o.unqueued||a()}),o.unqueued++,d.always((function(){d.always((function(){o.unqueued--,E.queue(t,"fx").length||o.empty.fire()}))}))),e)if(r=e[i],pe.test(r)){if(delete e[i],s=s||"toggle"===r,r===(g?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;g=!0}f[i]=m&&m[i]||E.style(t,i)}if((l=!E.isEmptyObject(e))||!E.isEmptyObject(f))for(i in c&&1===t.nodeType&&(n.overflow=[p.overflow,p.overflowX,p.overflowY],null==(h=m&&m.display)&&(h=at.get(t,"display")),"none"===(u=E.css(t,"display"))&&(h?u=h:(wt([t],!0),h=t.style.display||h,u=E.css(t,"display"),wt([t]))),("inline"===u||"inline-block"===u&&null!=h)&&"none"===E.css(t,"float")&&(l||(d.done((function(){p.display=h})),null==h&&(u=p.display,h="none"===u?"":u)),p.display="inline-block")),n.overflow&&(p.overflow="hidden",d.always((function(){p.overflow=n.overflow[0],p.overflowX=n.overflow[1],p.overflowY=n.overflow[2]}))),l=!1,f)l||(m?"hidden"in m&&(g=m.hidden):m=at.access(t,"fxshow",{display:h}),s&&(m.hidden=!g),g&&wt([t],!0),d.done((function(){for(i in g||wt([t]),at.remove(t,"fxshow"),f)E.style(t,i,f[i])}))),l=ve(g?m[i]:0,i,d),i in m||(m[i]=l.start,g&&(l.end=l.start,l.start=0))}],prefilter:function(t,e){e?xe.prefilters.unshift(t):xe.prefilters.push(t)}}),E.speed=function(t,e,n){var i=t&&"object"==typeof t?E.extend({},t):{complete:n||!n&&e||y(t)&&t,duration:t,easing:n&&e||e&&!y(e)&&e};return E.fx.off?i.duration=0:"number"!=typeof i.duration&&(i.duration in E.fx.speeds?i.duration=E.fx.speeds[i.duration]:i.duration=E.fx.speeds._default),null!=i.queue&&!0!==i.queue||(i.queue="fx"),i.old=i.complete,i.complete=function(){y(i.old)&&i.old.call(this),i.queue&&E.dequeue(this,i.queue)},i},E.fn.extend({fadeTo:function(t,e,n,i){return this.filter(_t).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=E.isEmptyObject(t),s=E.speed(e,n,i),o=function(){var e=xe(this,E.extend({},t),s);(r||at.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===s.queue?this.each(o):this.queue(s.queue,o)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&this.queue(t||"fx",[]),this.each((function(){var e=!0,r=null!=t&&t+"queueHooks",s=E.timers,o=at.get(this);if(r)o[r]&&o[r].stop&&i(o[r]);else for(r in o)o[r]&&o[r].stop&&ge.test(r)&&i(o[r]);for(r=s.length;r--;)s[r].elem!==this||null!=t&&s[r].queue!==t||(s[r].anim.stop(n),e=!1,s.splice(r,1));!e&&n||E.dequeue(this,t)}))},finish:function(t){return!1!==t&&(t=t||"fx"),this.each((function(){var e,n=at.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],s=E.timers,o=i?i.length:0;for(n.finish=!0,E.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=s.length;e--;)s[e].elem===this&&s[e].queue===t&&(s[e].anim.stop(!0),s.splice(e,1));for(e=0;e<o;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish}))}}),E.each(["toggle","show","hide"],(function(t,e){var n=E.fn[e];E.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(_e(e,!0),t,i,r)}})),E.each({slideDown:_e("show"),slideUp:_e("hide"),slideToggle:_e("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},(function(t,e){E.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}})),E.timers=[],E.fx.tick=function(){var t,e=0,n=E.timers;for(de=Date.now();e<n.length;e++)(t=n[e])()||n[e]!==t||n.splice(e--,1);n.length||E.fx.stop(),de=void 0},E.fx.timer=function(t){E.timers.push(t),E.fx.start()},E.fx.interval=13,E.fx.start=function(){fe||(fe=!0,me())},E.fx.stop=function(){fe=null},E.fx.speeds={slow:600,fast:200,_default:400},E.fn.delay=function(t,e){return t=E.fx&&E.fx.speeds[t]||t,e=e||"fx",this.queue(e,(function(e,n){var r=i.setTimeout(e,t);n.stop=function(){i.clearTimeout(r)}}))},function(){var t=v.createElement("input"),e=v.createElement("select").appendChild(v.createElement("option"));t.type="checkbox",m.checkOn=""!==t.value,m.optSelected=e.selected,(t=v.createElement("input")).value="t",t.type="radio",m.radioValue="t"===t.value}();var be,we=E.expr.attrHandle;E.fn.extend({attr:function(t,e){return tt(this,E.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each((function(){E.removeAttr(this,t)}))}}),E.extend({attr:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return void 0===t.getAttribute?E.prop(t,e,n):(1===s&&E.isXMLDoc(t)||(r=E.attrHooks[e.toLowerCase()]||(E.expr.match.bool.test(e)?be:void 0)),void 0!==n?null===n?void E.removeAttr(t,e):r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:(t.setAttribute(e,n+""),n):r&&"get"in r&&null!==(i=r.get(t,e))?i:null==(i=E.find.attr(t,e))?void 0:i)},attrHooks:{type:{set:function(t,e){if(!m.radioValue&&"radio"===e&&C(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}},removeAttr:function(t,e){var n,i=0,r=e&&e.match(X);if(r&&1===t.nodeType)for(;n=r[i++];)t.removeAttribute(n)}}),be={set:function(t,e,n){return!1===e?E.removeAttr(t,n):t.setAttribute(n,n),n}},E.each(E.expr.match.bool.source.match(/\w+/g),(function(t,e){var n=we[e]||E.find.attr;we[e]=function(t,e,i){var r,s,o=e.toLowerCase();return i||(s=we[o],we[o]=r,r=null!=n(t,e,i)?o:null,we[o]=s),r}}));var Ae=/^(?:input|select|textarea|button)$/i,Se=/^(?:a|area)$/i;function Ee(t){return(t.match(X)||[]).join(" ")}function Te(t){return t.getAttribute&&t.getAttribute("class")||""}function Ce(t){return Array.isArray(t)?t:"string"==typeof t&&t.match(X)||[]}E.fn.extend({prop:function(t,e){return tt(this,E.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each((function(){delete this[E.propFix[t]||t]}))}}),E.extend({prop:function(t,e,n){var i,r,s=t.nodeType;if(3!==s&&8!==s&&2!==s)return 1===s&&E.isXMLDoc(t)||(e=E.propFix[e]||e,r=E.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]},propHooks:{tabIndex:{get:function(t){var e=E.find.attr(t,"tabindex");return e?parseInt(e,10):Ae.test(t.nodeName)||Se.test(t.nodeName)&&t.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),m.optSelected||(E.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(t){var e=t.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),E.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],(function(){E.propFix[this.toLowerCase()]=this})),E.fn.extend({addClass:function(t){var e,n,i,r,s,o;return y(t)?this.each((function(e){E(this).addClass(t.call(this,e,Te(this)))})):(e=Ce(t)).length?this.each((function(){if(i=Te(this),n=1===this.nodeType&&" "+Ee(i)+" "){for(s=0;s<e.length;s++)r=e[s],n.indexOf(" "+r+" ")<0&&(n+=r+" ");o=Ee(n),i!==o&&this.setAttribute("class",o)}})):this},removeClass:function(t){var e,n,i,r,s,o;return y(t)?this.each((function(e){E(this).removeClass(t.call(this,e,Te(this)))})):arguments.length?(e=Ce(t)).length?this.each((function(){if(i=Te(this),n=1===this.nodeType&&" "+Ee(i)+" "){for(s=0;s<e.length;s++)for(r=e[s];n.indexOf(" "+r+" ")>-1;)n=n.replace(" "+r+" "," ");o=Ee(n),i!==o&&this.setAttribute("class",o)}})):this:this.attr("class","")},toggleClass:function(t,e){var n,i,r,s,o=typeof t,a="string"===o||Array.isArray(t);return y(t)?this.each((function(n){E(this).toggleClass(t.call(this,n,Te(this),e),e)})):"boolean"==typeof e&&a?e?this.addClass(t):this.removeClass(t):(n=Ce(t),this.each((function(){if(a)for(s=E(this),r=0;r<n.length;r++)i=n[r],s.hasClass(i)?s.removeClass(i):s.addClass(i);else void 0!==t&&"boolean"!==o||((i=Te(this))&&at.set(this,"__className__",i),this.setAttribute&&this.setAttribute("class",i||!1===t?"":at.get(this,"__className__")||""))})))},hasClass:function(t){var e,n,i=0;for(e=" "+t+" ";n=this[i++];)if(1===n.nodeType&&(" "+Ee(Te(n))+" ").indexOf(e)>-1)return!0;return!1}});var Me=/\r/g;E.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=y(t),this.each((function(n){var r;1===this.nodeType&&(null==(r=i?t.call(this,n,E(this).val()):t)?r="":"number"==typeof r?r+="":Array.isArray(r)&&(r=E.map(r,(function(t){return null==t?"":t+""}))),(e=E.valHooks[this.type]||E.valHooks[this.nodeName.toLowerCase()])&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))}))):r?(e=E.valHooks[r.type]||E.valHooks[r.nodeName.toLowerCase()])&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:"string"==typeof(n=r.value)?n.replace(Me,""):null==n?"":n:void 0}}),E.extend({valHooks:{option:{get:function(t){var e=E.find.attr(t,"value");return null!=e?e:Ee(E.text(t))}},select:{get:function(t){var e,n,i,r=t.options,s=t.selectedIndex,o="select-one"===t.type,a=o?null:[],l=o?s+1:r.length;for(i=s<0?l:o?s:0;i<l;i++)if(((n=r[i]).selected||i===s)&&!n.disabled&&(!n.parentNode.disabled||!C(n.parentNode,"optgroup"))){if(e=E(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,s=E.makeArray(e),o=r.length;o--;)((i=r[o]).selected=E.inArray(E.valHooks.option.get(i),s)>-1)&&(n=!0);return n||(t.selectedIndex=-1),s}}}}),E.each(["radio","checkbox"],(function(){E.valHooks[this]={set:function(t,e){if(Array.isArray(e))return t.checked=E.inArray(E(t).val(),e)>-1}},m.checkOn||(E.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}));var Le=i.location,Pe={guid:Date.now()},Re=/\?/;E.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{e=(new i.DOMParser).parseFromString(t,"text/xml")}catch(t){}return n=e&&e.getElementsByTagName("parsererror")[0],e&&!n||E.error("Invalid XML: "+(n?E.map(n.childNodes,(function(t){return t.textContent})).join("\n"):t)),e};var Ie=/^(?:focusinfocus|focusoutblur)$/,Ne=function(t){t.stopPropagation()};E.extend(E.event,{trigger:function(t,e,n,r){var s,o,a,l,h,u,c,d,p=[n||v],g=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];if(o=d=a=n=n||v,3!==n.nodeType&&8!==n.nodeType&&!Ie.test(g+E.event.triggered)&&(g.indexOf(".")>-1&&(m=g.split("."),g=m.shift(),m.sort()),h=g.indexOf(":")<0&&"on"+g,(t=t[E.expando]?t:new E.Event(g,"object"==typeof t&&t)).isTrigger=r?2:3,t.namespace=m.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=n),e=null==e?[t]:E.makeArray(e,[t]),c=E.event.special[g]||{},r||!c.trigger||!1!==c.trigger.apply(n,e))){if(!r&&!c.noBubble&&!_(n)){for(l=c.delegateType||g,Ie.test(l+g)||(o=o.parentNode);o;o=o.parentNode)p.push(o),a=o;a===(n.ownerDocument||v)&&p.push(a.defaultView||a.parentWindow||i)}for(s=0;(o=p[s++])&&!t.isPropagationStopped();)d=o,t.type=s>1?l:c.bindType||g,(u=(at.get(o,"events")||Object.create(null))[t.type]&&at.get(o,"handle"))&&u.apply(o,e),(u=h&&o[h])&&u.apply&&st(o)&&(t.result=u.apply(o,e),!1===t.result&&t.preventDefault());return t.type=g,r||t.isDefaultPrevented()||c._default&&!1!==c._default.apply(p.pop(),e)||!st(n)||h&&y(n[g])&&!_(n)&&((a=n[h])&&(n[h]=null),E.event.triggered=g,t.isPropagationStopped()&&d.addEventListener(g,Ne),n[g](),t.isPropagationStopped()&&d.removeEventListener(g,Ne),E.event.triggered=void 0,a&&(n[h]=a)),t.result}},simulate:function(t,e,n){var i=E.extend(new E.Event,n,{type:t,isSimulated:!0});E.event.trigger(i,null,e)}}),E.fn.extend({trigger:function(t,e){return this.each((function(){E.event.trigger(t,e,this)}))},triggerHandler:function(t,e){var n=this[0];if(n)return E.event.trigger(t,e,n,!0)}});var Fe=/\[\]$/,ke=/\r?\n/g,De=/^(?:submit|button|image|reset|file)$/i,Oe=/^(?:input|select|textarea|keygen)/i;function je(t,e,n,i){var r;if(Array.isArray(e))E.each(e,(function(e,r){n||Fe.test(t)?i(t,r):je(t+"["+("object"==typeof r&&null!=r?e:"")+"]",r,n,i)}));else if(n||"object"!==w(e))i(t,e);else for(r in e)je(t+"["+r+"]",e[r],n,i)}E.param=function(t,e){var n,i=[],r=function(t,e){var n=y(e)?e():e;i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(null==n?"":n)};if(null==t)return"";if(Array.isArray(t)||t.jquery&&!E.isPlainObject(t))E.each(t,(function(){r(this.name,this.value)}));else for(n in t)je(n,t[n],e,r);return i.join("&")},E.fn.extend({serialize:function(){return E.param(this.serializeArray())},serializeArray:function(){return this.map((function(){var t=E.prop(this,"elements");return t?E.makeArray(t):this})).filter((function(){var t=this.type;return this.name&&!E(this).is(":disabled")&&Oe.test(this.nodeName)&&!De.test(t)&&(this.checked||!Et.test(t))})).map((function(t,e){var n=E(this).val();return null==n?null:Array.isArray(n)?E.map(n,(function(t){return{name:e.name,value:t.replace(ke,"\r\n")}})):{name:e.name,value:n.replace(ke,"\r\n")}})).get()}});var Ge=/%20/g,Be=/#.*$/,ze=/([?&])_=[^&]*/,qe=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ue=/^(?:GET|HEAD)$/,We=/^\/\//,$e={},Ve={},Xe="*/".concat("*"),He=v.createElement("a");function Ye(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,s=e.toLowerCase().match(X)||[];if(y(n))for(;i=s[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function Ze(t,e,n,i){var r={},s=t===Ve;function o(a){var l;return r[a]=!0,E.each(t[a]||[],(function(t,a){var h=a(e,n,i);return"string"!=typeof h||s||r[h]?s?!(l=h):void 0:(e.dataTypes.unshift(h),o(h),!1)})),l}return o(e.dataTypes[0])||!r["*"]&&o("*")}function Ke(t,e){var n,i,r=E.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&E.extend(!0,t,i),t}He.href=Le.href,E.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:Le.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(Le.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Xe,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":E.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?Ke(Ke(t,E.ajaxSettings),e):Ke(E.ajaxSettings,t)},ajaxPrefilter:Ye($e),ajaxTransport:Ye(Ve),ajax:function(t,e){"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,r,s,o,a,l,h,u,c,d,f=E.ajaxSetup({},e),p=f.context||f,g=f.context&&(p.nodeType||p.jquery)?E(p):E.event,m=E.Deferred(),y=E.Callbacks("once memory"),_=f.statusCode||{},x={},b={},w="canceled",A={readyState:0,getResponseHeader:function(t){var e;if(h){if(!o)for(o={};e=qe.exec(s);)o[e[1].toLowerCase()+" "]=(o[e[1].toLowerCase()+" "]||[]).concat(e[2]);e=o[t.toLowerCase()+" "]}return null==e?null:e.join(", ")},getAllResponseHeaders:function(){return h?s:null},setRequestHeader:function(t,e){return null==h&&(t=b[t.toLowerCase()]=b[t.toLowerCase()]||t,x[t]=e),this},overrideMimeType:function(t){return null==h&&(f.mimeType=t),this},statusCode:function(t){var e;if(t)if(h)A.always(t[A.status]);else for(e in t)_[e]=[_[e],t[e]];return this},abort:function(t){var e=t||w;return n&&n.abort(e),S(0,e),this}};if(m.promise(A),f.url=((t||f.url||Le.href)+"").replace(We,Le.protocol+"//"),f.type=e.method||e.type||f.method||f.type,f.dataTypes=(f.dataType||"*").toLowerCase().match(X)||[""],null==f.crossDomain){l=v.createElement("a");try{l.href=f.url,l.href=l.href,f.crossDomain=He.protocol+"//"+He.host!=l.protocol+"//"+l.host}catch(t){f.crossDomain=!0}}if(f.data&&f.processData&&"string"!=typeof f.data&&(f.data=E.param(f.data,f.traditional)),Ze($e,f,e,A),h)return A;for(c in(u=E.event&&f.global)&&0==E.active++&&E.event.trigger("ajaxStart"),f.type=f.type.toUpperCase(),f.hasContent=!Ue.test(f.type),r=f.url.replace(Be,""),f.hasContent?f.data&&f.processData&&0===(f.contentType||"").indexOf("application/x-www-form-urlencoded")&&(f.data=f.data.replace(Ge,"+")):(d=f.url.slice(r.length),f.data&&(f.processData||"string"==typeof f.data)&&(r+=(Re.test(r)?"&":"?")+f.data,delete f.data),!1===f.cache&&(r=r.replace(ze,"$1"),d=(Re.test(r)?"&":"?")+"_="+Pe.guid+++d),f.url=r+d),f.ifModified&&(E.lastModified[r]&&A.setRequestHeader("If-Modified-Since",E.lastModified[r]),E.etag[r]&&A.setRequestHeader("If-None-Match",E.etag[r])),(f.data&&f.hasContent&&!1!==f.contentType||e.contentType)&&A.setRequestHeader("Content-Type",f.contentType),A.setRequestHeader("Accept",f.dataTypes[0]&&f.accepts[f.dataTypes[0]]?f.accepts[f.dataTypes[0]]+("*"!==f.dataTypes[0]?", "+Xe+"; q=0.01":""):f.accepts["*"]),f.headers)A.setRequestHeader(c,f.headers[c]);if(f.beforeSend&&(!1===f.beforeSend.call(p,A,f)||h))return A.abort();if(w="abort",y.add(f.complete),A.done(f.success),A.fail(f.error),n=Ze(Ve,f,e,A)){if(A.readyState=1,u&&g.trigger("ajaxSend",[A,f]),h)return A;f.async&&f.timeout>0&&(a=i.setTimeout((function(){A.abort("timeout")}),f.timeout));try{h=!1,n.send(x,S)}catch(t){if(h)throw t;S(-1,t)}}else S(-1,"No Transport");function S(t,e,o,l){var c,d,v,x,b,w=e;h||(h=!0,a&&i.clearTimeout(a),n=void 0,s=l||"",A.readyState=t>0?4:0,c=t>=200&&t<300||304===t,o&&(x=function(t,e,n){for(var i,r,s,o,a=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in a)if(a[r]&&a[r].test(i)){l.unshift(r);break}if(l[0]in n)s=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){s=r;break}o||(o=r)}s=s||o}if(s)return s!==l[0]&&l.unshift(s),n[s]}(f,A,o)),!c&&E.inArray("script",f.dataTypes)>-1&&E.inArray("json",f.dataTypes)<0&&(f.converters["text script"]=function(){}),x=function(t,e,n,i){var r,s,o,a,l,h={},u=t.dataTypes.slice();if(u[1])for(o in t.converters)h[o.toLowerCase()]=t.converters[o];for(s=u.shift();s;)if(t.responseFields[s]&&(n[t.responseFields[s]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=s,s=u.shift())if("*"===s)s=l;else if("*"!==l&&l!==s){if(!(o=h[l+" "+s]||h["* "+s]))for(r in h)if((a=r.split(" "))[1]===s&&(o=h[l+" "+a[0]]||h["* "+a[0]])){!0===o?o=h[r]:!0!==h[r]&&(s=a[0],u.unshift(a[1]));break}if(!0!==o)if(o&&t.throws)e=o(e);else try{e=o(e)}catch(t){return{state:"parsererror",error:o?t:"No conversion from "+l+" to "+s}}}return{state:"success",data:e}}(f,x,A,c),c?(f.ifModified&&((b=A.getResponseHeader("Last-Modified"))&&(E.lastModified[r]=b),(b=A.getResponseHeader("etag"))&&(E.etag[r]=b)),204===t||"HEAD"===f.type?w="nocontent":304===t?w="notmodified":(w=x.state,d=x.data,c=!(v=x.error))):(v=w,!t&&w||(w="error",t<0&&(t=0))),A.status=t,A.statusText=(e||w)+"",c?m.resolveWith(p,[d,w,A]):m.rejectWith(p,[A,w,v]),A.statusCode(_),_=void 0,u&&g.trigger(c?"ajaxSuccess":"ajaxError",[A,f,c?d:v]),y.fireWith(p,[A,w]),u&&(g.trigger("ajaxComplete",[A,f]),--E.active||E.event.trigger("ajaxStop")))}return A},getJSON:function(t,e,n){return E.get(t,e,n,"json")},getScript:function(t,e){return E.get(t,void 0,e,"script")}}),E.each(["get","post"],(function(t,e){E[e]=function(t,n,i,r){return y(n)&&(r=r||i,i=n,n=void 0),E.ajax(E.extend({url:t,type:e,dataType:r,data:n,success:i},E.isPlainObject(t)&&t))}})),E.ajaxPrefilter((function(t){var e;for(e in t.headers)"content-type"===e.toLowerCase()&&(t.contentType=t.headers[e]||"")})),E._evalUrl=function(t,e,n){return E.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,converters:{"text script":function(){}},dataFilter:function(t){E.globalEval(t,e,n)}})},E.fn.extend({wrapAll:function(t){var e;return this[0]&&(y(t)&&(t=t.call(this[0])),e=E(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map((function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t})).append(this)),this},wrapInner:function(t){return y(t)?this.each((function(e){E(this).wrapInner(t.call(this,e))})):this.each((function(){var e=E(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)}))},wrap:function(t){var e=y(t);return this.each((function(n){E(this).wrapAll(e?t.call(this,n):t)}))},unwrap:function(t){return this.parent(t).not("body").each((function(){E(this).replaceWith(this.childNodes)})),this}}),E.expr.pseudos.hidden=function(t){return!E.expr.pseudos.visible(t)},E.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},E.ajaxSettings.xhr=function(){try{return new i.XMLHttpRequest}catch(t){}};var Je={0:200,1223:204},Qe=E.ajaxSettings.xhr();m.cors=!!Qe&&"withCredentials"in Qe,m.ajax=Qe=!!Qe,E.ajaxTransport((function(t){var e,n;if(m.cors||Qe&&!t.crossDomain)return{send:function(r,s){var o,a=t.xhr();if(a.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(o in t.xhrFields)a[o]=t.xhrFields[o];for(o in t.mimeType&&a.overrideMimeType&&a.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest"),r)a.setRequestHeader(o,r[o]);e=function(t){return function(){e&&(e=n=a.onload=a.onerror=a.onabort=a.ontimeout=a.onreadystatechange=null,"abort"===t?a.abort():"error"===t?"number"!=typeof a.status?s(0,"error"):s(a.status,a.statusText):s(Je[a.status]||a.status,a.statusText,"text"!==(a.responseType||"text")||"string"!=typeof a.responseText?{binary:a.response}:{text:a.responseText},a.getAllResponseHeaders()))}},a.onload=e(),n=a.onerror=a.ontimeout=e("error"),void 0!==a.onabort?a.onabort=n:a.onreadystatechange=function(){4===a.readyState&&i.setTimeout((function(){e&&n()}))},e=e("abort");try{a.send(t.hasContent&&t.data||null)}catch(t){if(e)throw t}},abort:function(){e&&e()}}})),E.ajaxPrefilter((function(t){t.crossDomain&&(t.contents.script=!1)})),E.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return E.globalEval(t),t}}}),E.ajaxPrefilter("script",(function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")})),E.ajaxTransport("script",(function(t){var e,n;if(t.crossDomain||t.scriptAttrs)return{send:function(i,r){e=E("<script>").attr(t.scriptAttrs||{}).prop({charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),v.head.appendChild(e[0])},abort:function(){n&&n()}}}));var tn,en=[],nn=/(=)\?(?=&|$)|\?\?/;E.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=en.pop()||E.expando+"_"+Pe.guid++;return this[t]=!0,t}}),E.ajaxPrefilter("json jsonp",(function(t,e,n){var r,s,o,a=!1!==t.jsonp&&(nn.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nn.test(t.data)&&"data");if(a||"jsonp"===t.dataTypes[0])return r=t.jsonpCallback=y(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,a?t[a]=t[a].replace(nn,"$1"+r):!1!==t.jsonp&&(t.url+=(Re.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return o||E.error(r+" was not called"),o[0]},t.dataTypes[0]="json",s=i[r],i[r]=function(){o=arguments},n.always((function(){void 0===s?E(i).removeProp(r):i[r]=s,t[r]&&(t.jsonpCallback=e.jsonpCallback,en.push(r)),o&&y(s)&&s(o[0]),o=s=void 0})),"script"})),m.createHTMLDocument=((tn=v.implementation.createHTMLDocument("").body).innerHTML="<form></form><form></form>",2===tn.childNodes.length),E.parseHTML=function(t,e,n){return"string"!=typeof t?[]:("boolean"==typeof e&&(n=e,e=!1),e||(m.createHTMLDocument?((i=(e=v.implementation.createHTMLDocument("")).createElement("base")).href=v.location.href,e.head.appendChild(i)):e=v),s=!n&&[],(r=B.exec(t))?[e.createElement(r[1])]:(r=It([t],e,s),s&&s.length&&E(s).remove(),E.merge([],r.childNodes)));var i,r,s},E.fn.load=function(t,e,n){var i,r,s,o=this,a=t.indexOf(" ");return a>-1&&(i=Ee(t.slice(a)),t=t.slice(0,a)),y(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),o.length>0&&E.ajax({url:t,type:r||"GET",dataType:"html",data:e}).done((function(t){s=arguments,o.html(i?E("<div>").append(E.parseHTML(t)).find(i):t)})).always(n&&function(t,e){o.each((function(){n.apply(this,s||[t.responseText,e,t])}))}),this},E.expr.pseudos.animated=function(t){return E.grep(E.timers,(function(e){return t===e.elem})).length},E.offset={setOffset:function(t,e,n){var i,r,s,o,a,l,h=E.css(t,"position"),u=E(t),c={};"static"===h&&(t.style.position="relative"),a=u.offset(),s=E.css(t,"top"),l=E.css(t,"left"),("absolute"===h||"fixed"===h)&&(s+l).indexOf("auto")>-1?(o=(i=u.position()).top,r=i.left):(o=parseFloat(s)||0,r=parseFloat(l)||0),y(e)&&(e=e.call(t,n,E.extend({},a))),null!=e.top&&(c.top=e.top-a.top+o),null!=e.left&&(c.left=e.left-a.left+r),"using"in e?e.using.call(t,c):u.css(c)}},E.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each((function(e){E.offset.setOffset(this,t,e)}));var e,n,i=this[0];return i?i.getClientRects().length?(e=i.getBoundingClientRect(),n=i.ownerDocument.defaultView,{top:e.top+n.pageYOffset,left:e.left+n.pageXOffset}):{top:0,left:0}:void 0},position:function(){if(this[0]){var t,e,n,i=this[0],r={top:0,left:0};if("fixed"===E.css(i,"position"))e=i.getBoundingClientRect();else{for(e=this.offset(),n=i.ownerDocument,t=i.offsetParent||n.documentElement;t&&(t===n.body||t===n.documentElement)&&"static"===E.css(t,"position");)t=t.parentNode;t&&t!==i&&1===t.nodeType&&((r=E(t).offset()).top+=E.css(t,"borderTopWidth",!0),r.left+=E.css(t,"borderLeftWidth",!0))}return{top:e.top-r.top-E.css(i,"marginTop",!0),left:e.left-r.left-E.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map((function(){for(var t=this.offsetParent;t&&"static"===E.css(t,"position");)t=t.offsetParent;return t||gt}))}}),E.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},(function(t,e){var n="pageYOffset"===e;E.fn[t]=function(i){return tt(this,(function(t,i,r){var s;if(_(t)?s=t:9===t.nodeType&&(s=t.defaultView),void 0===r)return s?s[e]:t[i];s?s.scrollTo(n?s.pageXOffset:r,n?r:s.pageYOffset):t[i]=r}),t,i,arguments.length)}})),E.each(["top","left"],(function(t,e){E.cssHooks[e]=te(m.pixelPosition,(function(t,n){if(n)return n=Qt(t,e),Ht.test(n)?E(t).position()[e]+"px":n}))})),E.each({Height:"height",Width:"width"},(function(t,e){E.each({padding:"inner"+t,content:e,"":"outer"+t},(function(n,i){E.fn[i]=function(r,s){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===s?"margin":"border");return tt(this,(function(e,n,r){var s;return _(e)?0===i.indexOf("outer")?e["inner"+t]:e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===r?E.css(e,n,a):E.style(e,n,r,a)}),e,o?r:void 0,o)}}))})),E.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],(function(t,e){E.fn[e]=function(t){return this.on(e,t)}})),E.fn.extend({bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)},hover:function(t,e){return this.on("mouseenter",t).on("mouseleave",e||t)}}),E.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),(function(t,e){E.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}));var rn=/^[\s\uFEFF\xA0]+|([^\s\uFEFF\xA0])[\s\uFEFF\xA0]+$/g;E.proxy=function(t,e){var n,i,r;if("string"==typeof e&&(n=t[e],e=t,t=n),y(t))return i=a.call(arguments,2),r=function(){return t.apply(e||this,i.concat(a.call(arguments)))},r.guid=t.guid=t.guid||E.guid++,r},E.holdReady=function(t){t?E.readyWait++:E.ready(!0)},E.isArray=Array.isArray,E.parseJSON=JSON.parse,E.nodeName=C,E.isFunction=y,E.isWindow=_,E.camelCase=rt,E.type=w,E.now=Date.now,E.isNumeric=function(t){var e=E.type(t);return("number"===e||"string"===e)&&!isNaN(t-parseFloat(t))},E.trim=function(t){return null==t?"":(t+"").replace(rn,"$1")},void 0===(n=function(){return E}.apply(e,[]))||(t.exports=n);var sn=i.jQuery,on=i.$;return E.noConflict=function(t){return i.$===E&&(i.$=on),t&&i.jQuery===E&&(i.jQuery=sn),E},void 0===r&&(i.jQuery=i.$=E),E}))},95702:function(t,e,n){"use strict";n.d(e,{B4:function(){return a},W8:function(){return s},hq:function(){return l},rT:function(){return r},tV:function(){return o}});var i=n(44090);function r(){return!0}function s(){return!1}function o(){}function a(t){let e,n,r;return function(){const s=Array.prototype.slice.call(arguments);return n&&this===r&&(0,i.aI)(s,n)||(r=this,n=s,e=t.apply(this,arguments)),e}}function l(t){return function(){let e;try{e=t()}catch(t){return Promise.reject(t)}return e instanceof Promise?e:Promise.resolve(e)}()}},95792:function(t,e,n){"use strict";n.d(e,{E:function(){return d},A:function(){return p}});var i=n(23463),r=n(16235),s=n(31141);function o(t,e,n,i,r){const o=[];let a=n,l=0,h=e.slice(n,2);for(;l<t&&a+r<i;){const[n,i]=h.slice(-2),u=e[a+r],c=e[a+r+1],d=Math.sqrt((u-n)*(u-n)+(c-i)*(c-i));if(l+=d,l>=t){const e=(t-l+d)/d,f=(0,s.Cc)(n,u,e),p=(0,s.Cc)(i,c,e);h.push(f,p),o.push(h),h=[f,p],l==t&&(a+=r),l=0}else if(l<t)h.push(e[a+r],e[a+r+1]),a+=r;else{const t=d-l,e=(0,s.Cc)(n,u,t/d),f=(0,s.Cc)(i,c,t/d);h.push(e,f),o.push(h),h=[e,f],l=0,a+=r}}return l>0&&o.push(h),o}function a(t,e,n,i,r){let s,o,a,l,h,u,c,d,f,p,g=n,m=n,y=0,_=0,v=n;for(o=n;o<i;o+=r){const n=e[o],i=e[o+1];void 0!==h&&(f=n-h,p=i-u,l=Math.sqrt(f*f+p*p),void 0!==c&&(_+=a,s=Math.acos((c*f+d*p)/(a*l)),s>t&&(_>y&&(y=_,g=v,m=o),_=0,v=o-r)),a=l,c=f,d=p),h=n,u=i}return _+=l,_>y?[v,o]:[g,m]}var l=n(37759),h=n(27678),u=n(17306),c=n(56037);const d={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class f extends u.A{constructor(t,e,n,i){super(t,e,n,i),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[h.qY]={fillStyle:h.qY},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,n){const i=this.textFillState_,s=this.textStrokeState_,l=this.textState_;if(""===this.text_||!l||!i&&!s)return;const u=this.coordinates;let d=u.length;const f=t.getType();let p=null,g=t.getStride();if("line"!==l.placement||"LineString"!=f&&"MultiLineString"!=f&&"Polygon"!=f&&"MultiPolygon"!=f){let i=l.overflow?null:[];switch(f){case"Point":case"MultiPoint":p=t.getFlatCoordinates();break;case"LineString":p=t.getFlatMidpoint();break;case"Circle":p=t.getCenter();break;case"MultiLineString":p=t.getFlatMidpoints(),g=2;break;case"Polygon":p=t.getFlatInteriorPoint(),l.overflow||i.push(p[2]/this.resolution),g=3;break;case"MultiPolygon":const e=t.getFlatInteriorPoints();p=[];for(let t=0,n=e.length;t<n;t+=3)l.overflow||i.push(e[t+2]/this.resolution),p.push(e[t],e[t+1]);if(0===p.length)return;g=2}const r=this.appendFlatPointCoordinates(p,g);if(r===d)return;if(i&&(r-d)/2!=p.length/g){let t=d/2;i=i.filter(((e,n)=>{const i=u[2*(t+n)]===p[n*g]&&u[2*(t+n)+1]===p[n*g+1];return i||--t,i}))}this.saveTextStates_();const s=l.backgroundFill?this.createFill(this.fillStyleToState(l.backgroundFill)):null,o=l.backgroundStroke?this.createStroke(this.strokeStyleToState(l.backgroundStroke)):null;this.beginGeometry(t,e,n);let a=l.padding;if(a!=h.Tq&&(l.scale[0]<0||l.scale[1]<0)){let t=l.padding[0],e=l.padding[1],n=l.padding[2],i=l.padding[3];l.scale[0]<0&&(e=-e,i=-i),l.scale[1]<0&&(t=-t,n=-n),a=[t,e,n,i]}const m=this.pixelRatio;this.instructions.push([c.Ay.DRAW_IMAGE,d,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,a==h.Tq?h.Tq:a.map((function(t){return t*m})),s,o,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);const y=1/m,_=s?s.slice(0):null;_&&(_[1]=h.qY),this.hitDetectionInstructions.push([c.Ay.DRAW_IMAGE,d,r,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,a,_,o,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?h.qY:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),this.endGeometry(e)}else{if(!(0,r.HY)(this.maxExtent,t.getExtent()))return;let i;if(p=t.getFlatCoordinates(),"LineString"==f)i=[p.length];else if("MultiLineString"==f)i=t.getEnds();else if("Polygon"==f)i=t.getEnds().slice(0,1);else if("MultiPolygon"==f){const e=t.getEndss();i=[];for(let t=0,n=e.length;t<n;++t)i.push(e[t][0])}this.beginGeometry(t,e,n);const s=l.repeat,h=s?void 0:l.textAlign;let c=0;for(let t=0,e=i.length;t<e;++t){let e;e=s?o(s*this.resolution,p,c,i[t],g):[p.slice(c,i[t])];for(let n=0,r=e.length;n<r;++n){const r=e[n];let s=0,o=r.length;if(null==h){const t=a(l.maxAngle,r,0,r.length,2);s=t[0],o=t[1]}for(let t=s;t<o;t+=g)u.push(r[t],r[t+1]);const f=u.length;c=i[t],this.drawChars_(d,f),d=f}}this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,n=this.textFillState_,i=this.strokeKey_;t&&(i in this.strokeStates||(this.strokeStates[i]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const r=this.textKey_;r in this.textStates||(this.textStates[r]={font:e.font,textAlign:e.textAlign||h.MY,justify:e.justify,textBaseline:e.textBaseline||h.M8,scale:e.scale});const s=this.fillKey_;n&&(s in this.fillStates||(this.fillStates[s]={fillStyle:n.fillStyle}))}drawChars_(t,e){const n=this.textStrokeState_,i=this.textState_,r=this.strokeKey_,s=this.textKey_,o=this.fillKey_;this.saveTextStates_();const a=this.pixelRatio,l=d[i.textBaseline],u=this.textOffsetY_*a,f=this.text_,p=n?n.lineWidth*Math.abs(i.scale[0])/2:0;this.instructions.push([c.Ay.DRAW_CHARS,t,e,l,i.overflow,o,i.maxAngle,a,u,r,p*a,f,s,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([c.Ay.DRAW_CHARS,t,e,l,i.overflow,o?h.qY:o,i.maxAngle,a,u,r,p*a,f,s,1/a,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let n,r,s;if(t){const e=t.getFill();e?(r=this.textFillState_,r||(r={},this.textFillState_=r),r.fillStyle=(0,i.F)(e.getColor()||h.qY)):(r=null,this.textFillState_=r);const o=t.getStroke();if(o){s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const t=o.getLineDash(),e=o.getLineDashOffset(),n=o.getWidth(),r=o.getMiterLimit();s.lineCap=o.getLineCap()||h._m,s.lineDash=t?t.slice():h.Oq,s.lineDashOffset=void 0===e?h.vk:e,s.lineJoin=o.getLineJoin()||h._K,s.lineWidth=void 0===n?h.aq:n,s.miterLimit=void 0===r?h.eL:r,s.strokeStyle=(0,i.F)(o.getColor()||h.NT)}else s=null,this.textStrokeState_=s;n=this.textState_;const a=t.getFont()||h.ZV;(0,h.fZ)(a);const u=t.getScaleArray();n.overflow=t.getOverflow(),n.font=a,n.maxAngle=t.getMaxAngle(),n.placement=t.getPlacement(),n.textAlign=t.getTextAlign(),n.repeat=t.getRepeat(),n.justify=t.getJustify(),n.textBaseline=t.getTextBaseline()||h.M8,n.backgroundFill=t.getBackgroundFill(),n.backgroundStroke=t.getBackgroundStroke(),n.padding=t.getPadding()||h.Tq,n.scale=void 0===u?[1,1]:u;const c=t.getOffsetX(),d=t.getOffsetY(),f=t.getRotateWithView(),p=t.getKeepUpright(),g=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===c?0:c,this.textOffsetY_=void 0===d?0:d,this.textRotateWithView_=void 0!==f&&f,this.textKeepUpright_=void 0===p||p,this.textRotation_=void 0===g?0:g,this.strokeKey_=s?("string"==typeof s.strokeStyle?s.strokeStyle:(0,l.v6)(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=n.font+n.scale+(n.textAlign||"?")+(n.repeat||"?")+(n.justify||"?")+(n.textBaseline||"?"),this.fillKey_=r&&r.fillStyle?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,l.v6)(r.fillStyle):""}else this.text_="";this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var p=f},95907:function(t,e,n){"use strict";n.d(e,{DT:function(){return h},FT:function(){return c},Wl:function(){return l},XM:function(){return u},cr:function(){return a},ew:function(){return o},j:function(){return s},oF:function(){return r}});const i="undefined"!=typeof navigator&&void 0!==navigator.userAgent?navigator.userAgent.toLowerCase():"",r=i.includes("safari")&&!i.includes("chrom")&&(i.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(i)),s=i.includes("webkit")&&!i.includes("edge"),o=i.includes("macintosh"),a="undefined"!=typeof devicePixelRatio?devicePixelRatio:1,l="undefined"!=typeof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas&&self instanceof WorkerGlobalScope,h="undefined"!=typeof Image&&Image.prototype.decode,u="function"==typeof createImageBitmap,c=function(){let t=!1;try{const e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("_",null,e),window.removeEventListener("_",null,e)}catch{}return t}()},96081:function(t,e,n){"use strict";n.d(e,{BV:function(){return l},KQ:function(){return c},XX:function(){return f},aY:function(){return d}});var i=n(69791),r=n(16235),s=n(31141),o=n(25231);let a;const l=[];function h(t,e,n,i,r){t.beginPath(),t.moveTo(0,0),t.lineTo(e,n),t.lineTo(i,r),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,i)+1,Math.max(n,r)),t.restore()}function u(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function c(t,e,n,i){const s=(0,o.pd)(n,e,t);let a=(0,o.hO)(e,i,n);const l=e.getMetersPerUnit();void 0!==l&&(a*=l);const h=t.getMetersPerUnit();void 0!==h&&(a/=h);const u=t.getExtent();if(!u||(0,r.Ym)(u,s)){const e=(0,o.hO)(t,a,s)/a;isFinite(e)&&e>0&&(a/=e)}return a}function d(t,e,n,i){const s=(0,r.q1)(n);let o=c(t,e,s,i);return(!isFinite(o)||o<=0)&&(0,r.sB)(n,(function(n){return o=c(t,e,n,i),isFinite(o)&&o>0})),o}function f(t,e,n,o,c,d,f,p,g,m,y,_,v,x){const b=(0,i.Y)(Math.round(n*t),Math.round(n*e),l);if(_||(b.imageSmoothingEnabled=!1),0===g.length)return b.canvas;function w(t){return Math.round(t*n)/n}b.scale(n,n),b.globalCompositeOperation="lighter";const A=(0,r.S5)();let S;g.forEach((function(t,e,n){(0,r.X$)(A,t.extent)}));const E=n/o,T=(_?1:1+Math.pow(2,-24))/E;if(!v||1!==g.length||0!==m){if(S=(0,i.Y)(Math.round((0,r.RG)(A)*E),Math.round((0,r.Oq)(A)*E),l),_||(S.imageSmoothingEnabled=!1),c&&x){const t=(c[0]-A[0])*E,e=-(c[3]-A[3])*E,n=(0,r.RG)(c)*E,i=(0,r.Oq)(c)*E;S.rect(t,e,n,i),S.clip()}g.forEach((function(t,e,n){if(t.image.width>0&&t.image.height>0){if(t.clipExtent){S.save();const e=(t.clipExtent[0]-A[0])*E,n=-(t.clipExtent[3]-A[3])*E,i=(0,r.RG)(t.clipExtent)*E,s=(0,r.Oq)(t.clipExtent)*E;S.rect(_?e:Math.round(e),_?n:Math.round(n),_?i:Math.round(e+i)-Math.round(e),_?s:Math.round(n+s)-Math.round(n)),S.clip()}const e=(t.extent[0]-A[0])*E,n=-(t.extent[3]-A[3])*E,i=(0,r.RG)(t.extent)*E,s=(0,r.Oq)(t.extent)*E;S.drawImage(t.image,m,m,t.image.width-2*m,t.image.height-2*m,_?e:Math.round(e),_?n:Math.round(n),_?i:Math.round(e+i)-Math.round(e),_?s:Math.round(n+s)-Math.round(n)),t.clipExtent&&S.restore()}}))}const C=(0,r.Py)(f);return p.getTriangles().forEach((function(t,e,n){const o=t.source,c=t.target;let f=o[0][0],p=o[0][1],m=o[1][0],y=o[1][1],v=o[2][0],x=o[2][1];const E=w((c[0][0]-C[0])/d),M=w(-(c[0][1]-C[1])/d),L=w((c[1][0]-C[0])/d),P=w(-(c[1][1]-C[1])/d),R=w((c[2][0]-C[0])/d),I=w(-(c[2][1]-C[1])/d),N=f,F=p;f=0,p=0,m-=N,y-=F,v-=N,x-=F;const k=[[m,y,0,0,L-E],[v,x,0,0,R-E],[0,0,m,y,P-M],[0,0,v,x,I-M]],D=(0,s.KU)(k);if(!D)return;if(b.save(),b.beginPath(),function(){if(void 0===a){const t=(0,i.Y)(6,6,l);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",h(t,4,5,4,0),h(t,4,5,0,5);const e=t.getImageData(0,0,3,3).data;a=u(e,0)||u(e,4)||u(e,8),(0,i.Yg)(t),l.push(t.canvas)}return a}()||!_){b.moveTo(L,P);const t=4,e=E-L,n=M-P;for(let i=0;i<t;i++)b.lineTo(L+w((i+1)*e/t),P+w(i*n/(t-1))),i!=t-1&&b.lineTo(L+w((i+1)*e/t),P+w((i+1)*n/(t-1)));b.lineTo(R,I)}else b.moveTo(L,P),b.lineTo(E,M),b.lineTo(R,I);let O;if(b.clip(),b.transform(D[0],D[2],D[1],D[3],E,M),b.translate(A[0]-N,A[3]-F),S)O=S.canvas,b.scale(T,-T);else{const t=g[0],e=t.extent;O=t.image,b.scale((0,r.RG)(e)/O.width,-(0,r.Oq)(e)/O.height)}b.drawImage(O,0,0),b.restore()})),S&&((0,i.Yg)(S),l.push(S.canvas)),y&&(b.save(),b.globalCompositeOperation="source-over",b.strokeStyle="black",b.lineWidth=1,p.getTriangles().forEach((function(t,e,n){const i=t.target,r=(i[0][0]-C[0])/d,s=-(i[0][1]-C[1])/d,o=(i[1][0]-C[0])/d,a=-(i[1][1]-C[1])/d,l=(i[2][0]-C[0])/d,h=-(i[2][1]-C[1])/d;b.beginPath(),b.moveTo(o,a),b.lineTo(r,s),b.lineTo(l,h),b.closePath(),b.stroke()})),b.restore()),b.canvas}},96256:function(t,e,n){"use strict";var i=n(48729),r=n(91108),s=n(99516),o=n(77691),a=n(29079),l=n(880);function h(t,e){const n=`\n    attribute vec2 ${a.eS.TEXTURE_COORD};\n    uniform mat4 ${a.gF.TILE_TRANSFORM};\n    uniform float ${a.gF.TEXTURE_PIXEL_WIDTH};\n    uniform float ${a.gF.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${a.gF.TEXTURE_RESOLUTION};\n    uniform float ${a.gF.TEXTURE_ORIGIN_X};\n    uniform float ${a.gF.TEXTURE_ORIGIN_Y};\n    uniform float ${a.gF.DEPTH};\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n\n    void main() {\n      v_textureCoord = ${a.eS.TEXTURE_COORD};\n      v_mapCoord = vec2(\n        ${a.gF.TEXTURE_ORIGIN_X} + ${a.gF.TEXTURE_RESOLUTION} * ${a.gF.TEXTURE_PIXEL_WIDTH} * v_textureCoord[0],\n        ${a.gF.TEXTURE_ORIGIN_Y} - ${a.gF.TEXTURE_RESOLUTION} * ${a.gF.TEXTURE_PIXEL_HEIGHT} * v_textureCoord[1]\n      );\n      gl_Position = ${a.gF.TILE_TRANSFORM} * vec4(${a.eS.TEXTURE_COORD}, ${a.gF.DEPTH}, 1.0);\n    }\n  `,s={...(0,r.z0)(),bandCount:e},l=[];if(void 0!==t.color){const e=(0,o.s2)(s,t.color,i.mE);l.push(`color = ${e};`)}if(void 0!==t.contrast){const e=(0,o.s2)(s,t.contrast,i.wl);l.push(`color.rgb = clamp((${e} + 1.0) * color.rgb - (${e} / 2.0), vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.exposure){const e=(0,o.s2)(s,t.exposure,i.wl);l.push(`color.rgb = clamp((${e} + 1.0) * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}if(void 0!==t.saturation){const e=(0,o.s2)(s,t.saturation,i.wl);l.push(`\n      float saturation = ${e} + 1.0;\n      float sr = (1.0 - saturation) * 0.2126;\n      float sg = (1.0 - saturation) * 0.7152;\n      float sb = (1.0 - saturation) * 0.0722;\n      mat3 saturationMatrix = mat3(\n        sr + saturation, sr, sr,\n        sg, sg + saturation, sg,\n        sb, sb, sb + saturation\n      );\n      color.rgb = clamp(saturationMatrix * color.rgb, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));\n    `)}if(void 0!==t.gamma){const e=(0,o.s2)(s,t.gamma,i.wl);l.push(`color.rgb = pow(color.rgb, vec3(1.0 / ${e}));`)}if(void 0!==t.brightness){const e=(0,o.s2)(s,t.brightness,i.wl);l.push(`color.rgb = clamp(color.rgb + ${e}, vec3(0.0, 0.0, 0.0), vec3(1.0, 1.0, 1.0));`)}const h={},u=Object.keys(s.variables).length;if(u>1&&!t.variables)throw new Error(`Missing variables in style (expected ${s.variables})`);for(let e=0;e<u;++e){const n=s.variables[Object.keys(s.variables)[e]];if(!(n.name in t.variables))throw new Error(`Missing '${n.name}' in style variables`);h[(0,r.Sl)(n.name)]=function(){let e=t.variables[n.name];return"string"==typeof e&&(e=(0,r.Lm)(e)),void 0!==e?e:-9999999}}const c=Object.keys(h).map((function(t){return`uniform float ${t};`})),d=Math.ceil(e/4);c.push(`uniform sampler2D ${a.gF.TILE_TEXTURE_ARRAY}[${d}];`),s.paletteTextures&&c.push(`uniform sampler2D ${r.uZ}[${s.paletteTextures.length}];`);const f=Object.keys(s.functions).map((function(t){return s.functions[t]}));return{vertexShader:n,fragmentShader:`\n    #ifdef GL_FRAGMENT_PRECISION_HIGH\n    precision highp float;\n    #else\n    precision mediump float;\n    #endif\n\n    varying vec2 v_textureCoord;\n    varying vec2 v_mapCoord;\n    uniform vec4 ${a.gF.RENDER_EXTENT};\n    uniform float ${a.gF.TRANSITION_ALPHA};\n    uniform float ${a.gF.TEXTURE_PIXEL_WIDTH};\n    uniform float ${a.gF.TEXTURE_PIXEL_HEIGHT};\n    uniform float ${a.gF.RESOLUTION};\n    uniform float ${a.gF.ZOOM};\n\n    ${c.join("\n")}\n\n    ${f.join("\n")}\n\n    void main() {\n      if (\n        v_mapCoord[0] < ${a.gF.RENDER_EXTENT}[0] ||\n        v_mapCoord[1] < ${a.gF.RENDER_EXTENT}[1] ||\n        v_mapCoord[0] > ${a.gF.RENDER_EXTENT}[2] ||\n        v_mapCoord[1] > ${a.gF.RENDER_EXTENT}[3]\n      ) {\n        discard;\n      }\n\n      vec4 color = texture2D(${a.gF.TILE_TEXTURE_ARRAY}[0],  v_textureCoord);\n\n      ${l.join("\n")}\n\n      gl_FragColor = color;\n      gl_FragColor.rgb *= gl_FragColor.a;\n      gl_FragColor *= ${a.gF.TRANSITION_ALPHA};\n    }`,uniforms:h,paletteTextures:s.paletteTextures}}class u extends l.A{constructor(t){const e=(t=t?Object.assign({},t):{}).style||{};delete t.style,super(t),this.sources_=t.sources,this.renderedSource_=null,this.renderedResolution_=NaN,this.style_=e,this.styleVariables_=this.style_.variables||{},this.handleSourceUpdate_(),this.addChangeListener(s.A.SOURCE,this.handleSourceUpdate_)}getSources(t,e){const n=this.getSource();return this.sources_?"function"==typeof this.sources_?this.sources_(t,e):this.sources_:n?[n]:[]}getRenderSource(){return this.renderedSource_||this.getSource()}getSourceState(){const t=this.getRenderSource();return t?t.getState():"undefined"}handleSourceUpdate_(){this.hasRenderer()&&this.getRenderer().clearCache();const t=this.getSource();if(t)if("loading"===t.getState()){const e=()=>{"ready"===t.getState()&&(t.removeEventListener("change",e),this.setStyle(this.style_))};t.addEventListener("change",e)}else this.setStyle(this.style_)}getSourceBandCount_(){const t=Number.MAX_SAFE_INTEGER,e=this.getSources([-t,-t,t,t],t);return e&&e.length&&"bandCount"in e[0]?e[0].bandCount:4}createRenderer(){const t=h(this.style_,this.getSourceBandCount_());return new a.Ay(this,{vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,cacheSize:this.getCacheSize(),paletteTextures:t.paletteTextures})}renderSources(t,e){const n=this.getRenderer();let i;for(let r=0,s=e.length;r<s;++r)this.renderedSource_=e[r],n.prepareFrame(t)&&(i=n.renderFrame(t));return i}render(t,e){this.rendered=!0;const n=t.viewState,i=this.getSources(t.extent,n.resolution);let r=!0;for(let t=0,e=i.length;t<e;++t){const e=i[t],n=e.getState();if("loading"==n){const t=()=>{"ready"==e.getState()&&(e.removeEventListener("change",t),this.changed())};e.addEventListener("change",t)}r=r&&"ready"==n}const s=this.renderSources(t,i);if(this.getRenderer().renderComplete&&r)return this.renderedResolution_=n.resolution,s;if(this.renderedResolution_>.5*n.resolution){const e=this.getSources(t.extent,this.renderedResolution_).filter((t=>!i.includes(t)));if(e.length>0)return this.renderSources(t,e)}return s}setStyle(t){if(this.styleVariables_=t.variables||{},this.style_=t,this.hasRenderer()){const t=h(this.style_,this.getSourceBandCount_());this.getRenderer().reset({vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms,paletteTextures:t.paletteTextures}),this.changed()}}updateStyleVariables(t){Object.assign(this.styleVariables_,t),this.changed()}}u.prototype.dispose,e.A=u},96469:function(t,e,n){"use strict";var i=n(92814),r=n(98267),s=n(6778);class o extends r.A{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,format:t.format,overlaps:t.overlaps,projection:t.projection,tileClass:t.tileClass,transition:t.transition,wrapX:t.wrapX,zDirection:t.zDirection,state:"loading"});const e={url:t.url,projection:this.getProjection(),mediaType:t.mediaType,supportedMediaTypes:t.format.supportedMediaTypes,context:t.context||null,collections:t.collections};(0,s.h2)(e).then(this.handleTileSetInfo_.bind(this)).catch(this.handleError_.bind(this))}handleTileSetInfo_(t){this.tileGrid=t.grid,this.projection=t.projection,this.setTileUrlFunction(t.urlFunction,t.urlTemplate),this.setState("ready")}handleError_(t){(0,i.z3)(t),this.setState("error")}}e.A=o},96479:function(t,e){"use strict";e.A={ADD:"add",REMOVE:"remove"}},96728:function(t,e,n){"use strict";n.d(e,{dn:function(){return h},p0:function(){return l},v7:function(){return u}});var i=n(16235),r=n(37759),s=n(99518),o=n(26238);class a extends s.A{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return(0,i.Vy)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return(0,r.b0)()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=h(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){(0,r.b0)()}setLayout(t,e,n){let i;if(t)i=h(t);else{for(let t=0;t<n;++t){if(0===e.length)return this.layout="XY",void(this.stride=2);e=e[0]}i=e.length,t=l(i)}this.layout=t,this.stride=i}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();(0,o.e$)(n,0,n.length,i,t,e,n),this.changed()}}scale(t,e,n){void 0===e&&(e=t),n||(n=(0,i.q1)(this.getExtent()));const r=this.getFlatCoordinates();if(r){const i=this.getStride();(0,o.hs)(r,0,r.length,i,t,e,n,r),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const i=this.getStride();(0,o.Tl)(n,0,n.length,i,t,e,n),this.changed()}}}function l(t){let e;return 2==t?e="XY":3==t?e="XYZ":4==t&&(e="XYZM"),e}function h(t){let e;return"XY"==t?e=2:"XYZ"==t||"XYM"==t?e=3:"XYZM"==t&&(e=4),e}function u(t,e,n){const i=t.getFlatCoordinates();if(!i)return null;const r=t.getStride();return(0,o.Rc)(i,0,i.length,r,e,n)}e.Ay=a},97266:function(t,e,n){"use strict";n.d(e,{W:function(){return f}});var i=n(14390),r=n(30942),s=n(69791),o=n(16235),a=n(3974),l=n(45342),h=n(80547),u=n(69606),c=n(16649),d=n(38376);class f extends i.A{constructor(t,e,n,i,r,s,o){super(e,n,i,r,s,o),this.zoomifyImage_=null,this.tileSize_=t}getImage(){if(this.zoomifyImage_)return this.zoomifyImage_;const t=super.getImage();if(this.state==r.A.LOADED){const e=this.tileSize_;if(t.width==e[0]&&t.height==e[1])return this.zoomifyImage_=t,t;const n=(0,s.Y)(e[0],e[1]);return n.drawImage(t,0,0),this.zoomifyImage_=n.canvas,n.canvas}return t}}class p extends d.A{constructor(t){const e=t.size,n=void 0!==t.tierSizeCalculation?t.tierSizeCalculation:"default",i=t.tilePixelRatio||1,r=e[0],s=e[1],d=[],p=t.tileSize||h.R;let g=p*i;switch(n){case"default":for(;r>g||s>g;)d.push([Math.ceil(r/g),Math.ceil(s/g)]),g+=g;break;case"truncated":let t=r,e=s;for(;t>g||e>g;)d.push([Math.ceil(t/g),Math.ceil(e/g)]),t>>=1,e>>=1;break;default:throw new Error("Unknown `tierSizeCalculation` configured")}d.push([1,1]),d.reverse();const m=[i],y=[0];for(let t=1,e=d.length;t<e;t++)m.push(i<<t),y.push(d[t-1][0]*d[t-1][1]+y[t-1]);m.reverse();const _=new l.A({tileSize:p,extent:t.extent||[0,-s,r,0],resolutions:m});let v=t.url;!v||v.includes("{TileGroup}")||v.includes("{tileIndex}")||(v+="{TileGroup}/{z}-{x}-{y}.jpg");const x=(0,c.Uu)(v);let b=p*i;const w=(0,u.FD)(x.map((function(t){return function(e,n,i){if(!e)return;const r=e[0],s=e[1],o=e[2],a=s+o*d[r][0],l={z:r,x:s,y:o,tileIndex:a,TileGroup:"TileGroup"+((a+y[r])/b|0)};return t.replace(/\{(\w+?)\}/g,(function(t,e){return l[e]}))}}))),A=f.bind(null,(0,a.xq)(p*i));super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,tilePixelRatio:i,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:A,tileGrid:_,tileUrlFunction:w,transition:t.transition}),this.zDirection=t.zDirection;const S=w(_.getTileCoordForCoordAndResolution((0,o.q1)(_.getExtent()),m[m.length-1]),1,null),E=new Image;E.addEventListener("error",(()=>{b=p,this.changed()})),E.src=S}}e.A=p},97642:function(t){function e(t,e,n){const i=new RegExp(e).exec(t.slice(n));return i?n+i.index:-1}t.exports=e,t.exports.default=e},98267:function(t,e,n){"use strict";n.d(e,{A:function(){return A},Y:function(){return S}});var i=n(30942),r=n(37751),s=n(69791),o=n(37759);const a=[];class l extends r.A{constructor(t,e,n,i,r){super(t,e,{transition:0}),this.context_=null,this.executorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=i.bind(void 0,this),this.removeSourceTiles_=r,this.wrappedTileCoord=n}getContext(){return this.context_||(this.context_=(0,s.Y)(1,1,a)),this.context_}hasContext(){return!!this.context_}getImage(){return this.hasContext()?this.getContext().canvas:null}getReplayState(t){const e=(0,o.v6)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){this.context_&&((0,s.Yg)(this.context_),a.push(this.context_.canvas),this.context_=null),this.removeSourceTiles_(this),this.sourceTiles.length=0,super.release()}}var h=l,u=n(684),c=n(42484),d=n(22685),f=n(16235),p=n(87598),g=n(45090),m=n(25231),y=n(3974),_=n(45342),v=n(80547),x=n(10135),b=n(33772);class w extends b.A{constructor(t){const e=t.projection||"EPSG:3857",n=t.extent||(0,x.kZ)(e),i=t.tileGrid||(0,x.EN)({extent:n,maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512});super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,projection:e,state:t.state,tileGrid:i,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:S,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.tileKeysBySourceTileUrl_={},this.sourceTiles_={},this.overlaps_=null==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:u.A,this.tileGrids_={}}getOverlaps(){return this.overlaps_}getSourceTiles(t,e,n){if(n.getState()===i.A.IDLE){n.setState(i.A.LOADING);const r=n.wrappedTileCoord,s=this.getTileGridForProjection(e),o=s.getTileCoordExtent(r),a=r[0],l=s.getResolution(a);(0,f.r)(o,-l,o);const h=this.tileGrid,u=h.getExtent();u&&(0,f._N)(o,u,o);const c=h.getZForResolution(l,this.zDirection);h.forEachTileCoord(o,c,(r=>{const s=this.tileUrlFunction(r,t,e);this.sourceTiles_[s]||(this.sourceTiles_[s]=new this.tileClass(r,s?i.A.IDLE:i.A.EMPTY,s,this.format_,this.tileLoadFunction));const o=this.sourceTiles_[s];n.sourceTiles.push(o),this.tileKeysBySourceTileUrl_[s]||(this.tileKeysBySourceTileUrl_[s]=[]),this.tileKeysBySourceTileUrl_[s].push(n.getKey());const a=o.getState();if(a<i.A.LOADED){const t=e=>{this.handleTileChange(e);const r=o.getState();if(r===i.A.LOADED||r===i.A.ERROR){const e=o.getKey();e in n.errorTileKeys?o.getState()===i.A.LOADED&&delete n.errorTileKeys[e]:n.loadingSourceTiles--,r===i.A.ERROR?n.errorTileKeys[e]=!0:o.removeEventListener(d.A.CHANGE,t),0===n.loadingSourceTiles&&n.setState((0,g.p)(n.errorTileKeys)?i.A.LOADED:i.A.ERROR)}};o.addEventListener(d.A.CHANGE,t),n.loadingSourceTiles++}a===i.A.IDLE&&(o.extent=h.getTileCoordExtent(r),o.projection=e,o.resolution=h.getResolution(r[0]),o.load())})),n.loadingSourceTiles||n.setState(n.sourceTiles.some((t=>t.getState()===i.A.ERROR))?i.A.ERROR:i.A.LOADED)}return n.sourceTiles}removeSourceTiles(t){const e=t.getKey(),n=t.sourceTiles;for(let t=0,i=n.length;t<i;++t){const i=n[t].getTileUrl();if(!this.tileKeysBySourceTileUrl_[i])return;const r=this.tileKeysBySourceTileUrl_[i].indexOf(e);-1!==r&&(this.tileKeysBySourceTileUrl_[i].splice(r,1),0===this.tileKeysBySourceTileUrl_[i].length&&(delete this.tileKeysBySourceTileUrl_[i],delete this.sourceTiles_[i]))}}getTile(t,e,n,r,s){const o=[t,e,n];let a=this.getTileCoordForTileUrlFunction(o,s);const l=this.getTileGrid().getExtent(),u=this.getTileGridForProjection(s);if(a&&l){const e=u.getTileCoordExtent(a);(0,f.r)(e,-u.getResolution(t),e),(0,f.HY)(l,e)||(a=null)}let c=!0;if(null!==a){const e=this.tileGrid,n=u.getResolution(t),i=e.getZForResolution(n,1),o=u.getTileCoordExtent(a);(0,f.r)(o,-n,o),e.forEachTileCoord(o,i,(t=>{c=c&&!this.tileUrlFunction(t,r,s)}))}const d=new h(o,c?i.A.EMPTY:i.A.IDLE,a,this.getSourceTiles.bind(this,r,s),this.removeSourceTiles.bind(this));return d.key=this.getKey(),d}getTileGridForProjection(t){const e=t.getCode();let n=this.tileGrids_[e];if(!n){const i=this.getProjection();(0,c.v)(null===i||(0,m.tI)(i,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection.");const r=this.tileGrid,s=r.getResolutions().slice(),o=s.map((function(t,e){return r.getOrigin(e)})),a=s.map((function(t,e){return r.getTileSize(e)})),l=v.L+1;for(let t=s.length;t<l;++t)s.push(s[t-1]/2),o.push(o[t-1]),a.push(a[t-1]);n=new _.A({extent:r.getExtent(),origins:o,resolutions:s,tileSizes:a}),this.tileGrids_[e]=n}return n}getTilePixelRatio(t){return t}getTilePixelSize(t,e,n){const i=this.getTileGridForProjection(n),r=(0,y.xq)(i.getTileSize(t),this.tmpSize);return[Math.round(r[0]*e),Math.round(r[1]*e)]}setOverlaps(t){this.overlaps_=t,this.changed()}}var A=w;function S(t,e){t.setLoader((function(n,i,r){(0,p.m8)(e,t.getFormat(),n,i,r,t.onLoad.bind(t),t.onError.bind(t))}))}},98384:function(t,e,n){"use strict";n.d(e,{J:function(){return s},p:function(){return o}});var i=n(44090),r=n(90405);function s(t,e,n,s,o,a,l){let h,u,c,d,f,p,g;const m=o[a+1],y=[];for(let i=0,r=n.length;i<r;++i){const r=n[i];for(d=t[r-s],p=t[r-s+1],h=e;h<r;h+=s)f=t[h],g=t[h+1],(m<=p&&g<=m||p<=m&&m<=g)&&(c=(m-p)/(g-p)*(f-d)+d,y.push(c)),d=f,p=g}let _=NaN,v=-1/0;for(y.sort(i.V_),d=y[0],h=1,u=y.length;h<u;++h){f=y[h];const i=Math.abs(f-d);i>v&&(c=(d+f)/2,(0,r.zb)(t,e,n,s,c,m)&&(_=c,v=i)),d=f}return isNaN(_)&&(_=o[a]),l?(l.push(_,m,v),l):[_,m,v]}function o(t,e,n,i,r){let o=[];for(let a=0,l=n.length;a<l;++a){const l=n[a];o=s(t,e,l,i,r,2*a,o),e=l[l.length-1]}return o}},99110:function(t,e,n){"use strict";n.d(e,{i:function(){return p}});var i=n(73887),r=n(96479),s=n(75738),o=n(42484),a=n(18381),l=n(22685),h=n(92662),u=n(16235),c=n(45090),d=n(37759),f=n(90324);class p extends a.Ay{constructor(t,e){super(t),this.layer=e}}const g="layers";class m extends f.A{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let n=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(g,this.handleLayersChanged_),n?Array.isArray(n)?n=new i.A(n.slice(),{unique:!0}):(0,o.v)("function"==typeof n.getArray,"Expected `layers` to be an array or a `Collection`"):n=new i.A(void 0,{unique:!0}),this.setLayers(n)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(h.JH),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push((0,h.KT)(t,r.A.ADD,this.handleLayersAdd_,this),(0,h.KT)(t,r.A.REMOVE,this.handleLayersRemove_,this));for(const t in this.listenerKeys_)this.listenerKeys_[t].forEach(h.JH);(0,c.I)(this.listenerKeys_);const e=t.getArray();for(let t=0,n=e.length;t<n;t++){const n=e[t];this.registerLayerListeners_(n),this.dispatchEvent(new p("addlayer",n))}this.changed()}registerLayerListeners_(t){const e=[(0,h.KT)(t,s.A.PROPERTYCHANGE,this.handleLayerChange_,this),(0,h.KT)(t,l.A.CHANGE,this.handleLayerChange_,this)];t instanceof m&&e.push((0,h.KT)(t,"addlayer",this.handleLayerGroupAdd_,this),(0,h.KT)(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[(0,d.v6)(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new p("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new p("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new p("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,n=(0,d.v6)(e);this.listenerKeys_[n].forEach(h.JH),delete this.listenerKeys_[n],this.dispatchEvent(new p("removelayer",e)),this.changed()}getLayers(){return this.get(g)}setLayers(t){const e=this.getLayers();if(e){const t=e.getArray();for(let e=0,n=t.length;e<n;++e)this.dispatchEvent(new p("removelayer",t[e]))}this.set(g,t)}getLayersArray(t){return t=void 0!==t?t:[],this.getLayers().forEach((function(e){e.getLayersArray(t)})),t}getLayerStatesArray(t){const e=void 0!==t?t:[],n=e.length;this.getLayers().forEach((function(t){t.getLayerStatesArray(e)}));const i=this.getLayerState();let r=i.zIndex;t||void 0!==i.zIndex||(r=0);for(let t=n,s=e.length;t<s;t++){const n=e[t];n.opacity*=i.opacity,n.visible=n.visible&&i.visible,n.maxResolution=Math.min(n.maxResolution,i.maxResolution),n.minResolution=Math.max(n.minResolution,i.minResolution),n.minZoom=Math.max(n.minZoom,i.minZoom),n.maxZoom=Math.min(n.maxZoom,i.maxZoom),void 0!==i.extent&&(void 0!==n.extent?n.extent=(0,u._N)(n.extent,i.extent):n.extent=i.extent),void 0===n.zIndex&&(n.zIndex=r)}return e}getSourceState(){return"ready"}}e.A=m},99157:function(t,e,n){"use strict";n.d(e,{A:function(){return h},z:function(){return u}});var i=n(30942),r=n(22685),s=n(42484),o=n(45090);const a=1/0;var l=class{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,(0,o.I)(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,n=t[0];1==t.length?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const i=this.keyFunction_(n);return delete this.queuedElements_[i],n}enqueue(t){(0,s.v)(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=a&&(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0)}getCount(){return this.elements_.length}getLeftChildIndex_(t){return 2*t+1}getRightChildIndex_(t){return 2*t+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return 0===this.elements_.length}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,n=this.priorities_,i=e.length,r=e[t],s=n[t],o=t;for(;t<i>>1;){const r=this.getLeftChildIndex_(t),s=this.getRightChildIndex_(t),o=s<i&&n[s]<n[r]?s:r;e[t]=e[o],n[t]=n[o],t=o}e[t]=r,n[t]=s,this.siftDown_(o,t)}siftDown_(t,e){const n=this.elements_,i=this.priorities_,r=n[e],s=i[e];for(;e>t;){const t=this.getParentIndex_(e);if(!(i[t]>s))break;n[e]=n[t],i[e]=i[t],e=t}n[e]=r,i[e]=s}reprioritize(){const t=this.priorityFunction_,e=this.elements_,n=this.priorities_;let i=0;const r=e.length;let s,o,l;for(o=0;o<r;++o)s=e[o],l=t(s),l==a?delete this.queuedElements_[this.keyFunction_(s)]:(n[i]=l,e[i++]=s);e.length=i,n.length=i,this.heapify_()}};var h=class extends l{constructor(t,e){super((e=>t.apply(null,e)),(t=>t[0].getKey())),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);if(e){t[0].addEventListener(r.A.CHANGE,this.boundHandleTileChange_)}return e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,n=e.getState();if(n===i.A.LOADED||n===i.A.ERROR||n===i.A.EMPTY){n!==i.A.ERROR&&e.removeEventListener(r.A.CHANGE,this.boundHandleTileChange_);const t=e.getKey();t in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[t],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let n=0;for(;this.tilesLoading_<t&&n<e&&this.getCount()>0;){const t=this.dequeue()[0],e=t.getKey();t.getState()!==i.A.IDLE||e in this.tilesLoadingKeys_||(this.tilesLoadingKeys_[e]=!0,++this.tilesLoading_,++n,t.load())}}};function u(t,e,n,i,r){if(!t||!(n in t.wantedTiles))return a;if(!t.wantedTiles[n][e.getKey()])return a;const s=t.viewState.center,o=i[0]-s[0],l=i[1]-s[1];return 65536*Math.log(r)+Math.sqrt(o*o+l*l)/r}},99516:function(t,e){"use strict";e.A={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"}},99518:function(t,e,n){"use strict";var i=n(70192),r=n(16235),s=n(95702),o=n(25231),a=n(12911),l=n(37759),h=n(26238);const u=(0,a.vt)(),c=[NaN,NaN];class d extends i.A{constructor(){super(),this.extent_=(0,r.S5)(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=(0,s.B4)(((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const i=this.clone();return i.applyTransform(n),i.getSimplifiedGeometry(e)}))}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return(0,l.b0)()}closestPointXY(t,e,n,i){return(0,l.b0)()}containsXY(t,e){return 0===this.closestPointXY(t,e,c,Number.MIN_VALUE)}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return(0,l.b0)()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const t=this.computeExtent(this.extent_);(isNaN(t[0])||isNaN(t[1]))&&(0,r.aZ)(t),this.extentRevision_=this.getRevision()}return(0,r.$u)(this.extent_,t)}rotate(t,e){(0,l.b0)()}scale(t,e,n){(0,l.b0)()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return(0,l.b0)()}getType(){return(0,l.b0)()}applyTransform(t){(0,l.b0)()}intersectsExtent(t){return(0,l.b0)()}translate(t,e){(0,l.b0)()}transform(t,e){const n=(0,o.Jt)(t),i="tile-pixels"==n.getUnits()?function(t,i,s){const l=n.getExtent(),c=n.getWorldExtent(),d=(0,r.Oq)(c)/(0,r.Oq)(l);(0,a.Zz)(u,c[0],c[3],d,-d,0,0,0);const f=(0,h.Rc)(t,0,t.length,s,u,i),p=(0,o.RG)(n,e);return p?p(f,f,s):f}:(0,o.RG)(n,e);return this.applyTransform(i),this}}e.A=d},99602:function(t,e,n){"use strict";var i=n(37759),r=n(37246);e.A=class{read(t){if(!t)return null;if("string"==typeof t){const e=(0,r.qg)(t);return this.readFromDocument(e)}return(0,r.wz)(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(t){(0,i.b0)()}}}},s={};function o(t){var e=s[t];if(void 0!==e)return e.exports;var n=s[t]={id:t,loaded:!1,exports:{}};return r[t].call(n.exports,n,n.exports,o),n.loaded=!0,n.exports}o.m=r,t=[],o.O=function(e,n,i,r){if(!n){var s=1/0;for(u=0;u<t.length;u++){n=t[u][0],i=t[u][1],r=t[u][2];for(var a=!0,l=0;l<n.length;l++)(!1&r||s>=r)&&Object.keys(o.O).every((function(t){return o.O[t](n[l])}))?n.splice(l--,1):(a=!1,r<s&&(s=r));if(a){t.splice(u--,1);var h=i();void 0!==h&&(e=h)}}return e}r=r||0;for(var u=t.length;u>0&&t[u-1][2]>r;u--)t[u]=t[u-1];t[u]=[n,i,r]},n=Object.getPrototypeOf?function(t){return Object.getPrototypeOf(t)}:function(t){return t.__proto__},o.t=function(t,i){if(1&i&&(t=this(t)),8&i)return t;if("object"==typeof t&&t){if(4&i&&t.__esModule)return t;if(16&i&&"function"==typeof t.then)return t}var r=Object.create(null);o.r(r);var s={};e=e||[null,n({}),n([]),n(n)];for(var a=2&i&&t;"object"==typeof a&&!~e.indexOf(a);a=n(a))Object.getOwnPropertyNames(a).forEach((function(e){s[e]=function(){return t[e]}}));return s.default=function(){return t},o.d(r,s),r},o.d=function(t,e){for(var n in e)o.o(e,n)&&!o.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},o.f={},o.e=function(t){return Promise.all(Object.keys(o.f).reduce((function(e,n){return o.f[n](t,e),e}),[]))},o.u=function(t){return t+".js"},o.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i={},o.l=function(t,e,n,r){if(i[t])i[t].push(e);else{var s,a;if(void 0!==n)for(var l=document.getElementsByTagName("script"),h=0;h<l.length;h++){var u=l[h];if(u.getAttribute("src")==t){s=u;break}}s||(a=!0,(s=document.createElement("script")).charset="utf-8",s.timeout=120,o.nc&&s.setAttribute("nonce",o.nc),s.src=t),i[t]=[e];var c=function(e,n){s.onerror=s.onload=null,clearTimeout(d);var r=i[t];if(delete i[t],s.parentNode&&s.parentNode.removeChild(s),r&&r.forEach((function(t){return t(n)})),e)return e(n)},d=setTimeout(c.bind(null,void 0,{type:"timeout",target:s}),12e4);s.onerror=c.bind(null,s.onerror),s.onload=c.bind(null,s.onload),a&&document.head.appendChild(s)}},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t},function(){var t;o.g.importScripts&&(t=o.g.location+"");var e=o.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var n=e.getElementsByTagName("script");if(n.length)for(var i=n.length-1;i>-1&&(!t||!/^http(s?):/.test(t));)t=n[i--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),o.p=t}(),function(){var t={2076:0};o.f.j=function(e,n){var i=o.o(t,e)?t[e]:void 0;if(0!==i)if(i)n.push(i[2]);else{var r=new Promise((function(n,r){i=t[e]=[n,r]}));n.push(i[2]=r);var s=o.p+o.u(e),a=new Error;o.l(s,(function(n){if(o.o(t,e)&&(0!==(i=t[e])&&(t[e]=void 0),i)){var r=n&&("load"===n.type?"missing":n.type),s=n&&n.target&&n.target.src;a.message="Loading chunk "+e+" failed.\n("+r+": "+s+")",a.name="ChunkLoadError",a.type=r,a.request=s,i[1](a)}}),"chunk-"+e,e)}},o.O.j=function(e){return 0===t[e]};var e=function(e,n){var i,r,s=n[0],a=n[1],l=n[2],h=0;if(s.some((function(e){return 0!==t[e]}))){for(i in a)o.o(a,i)&&(o.m[i]=a[i]);if(l)var u=l(o)}for(e&&e(n);h<s.length;h++)r=s[h],o.o(t,r)&&t[r]&&t[r][0](),t[r]=0;return o.O(u)},n=self.webpackChunk=self.webpackChunk||[];n.forEach(e.bind(null,0)),n.push=e.bind(null,n.push.bind(n))}()}();
//# sourceMappingURL=common.js.map