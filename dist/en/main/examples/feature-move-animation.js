"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4090],{13791:function(e,t,r){var o=r(51541),n=r(41564),a=r(87240),i=r(77833),s=r(96728);function c(e,t,r,o,n,a){void 0!==n?a=void 0!==a?a:0:(n=[],a=0);let i=t;for(;i<r;){const t=e[i++];n[a++]=e[i++],n[a++]=t;for(let t=2;t<o;++t)n[a++]=e[i++]}return n.length=a,n}var u=r(25231),l=r(72961),m=r(92656);class y extends m.A{constructor(e){super(),e=e||{},this.dataProjection=(0,u.Jt)("EPSG:4326"),this.factor_=e.factor?e.factor:1e5,this.geometryLayout_=e.geometryLayout?e.geometryLayout:"XY"}readFeatureFromText(e,t){const r=this.readGeometryFromText(e,t);return new o.A(r)}readFeaturesFromText(e,t){return[this.readFeatureFromText(e,t)]}readGeometryFromText(e,t){const r=(0,s.dn)(this.geometryLayout_),o=function(e,t,r){r=r||1e5;const o=new Array(t).fill(0),n=d(e);for(let e=0,a=n.length;e<a;)for(let a=0;a<t;++a,++e)o[a]+=n[e],n[e]=o[a]/r;return n}(e,r,this.factor_);c(o,0,o.length,r,o);const n=new i.A(o,this.geometryLayout_);return(0,l.hX)(n,!1,this.adaptOptions(t))}writeFeatureText(e,t){const r=e.getGeometry();if(r)return this.writeGeometryText(r,t);throw new Error("Expected `feature` to have a geometry")}writeFeaturesText(e,t){return this.writeFeatureText(e[0],t)}writeGeometryText(e,t){const r=(e=(0,l.hX)(e,!0,this.adaptOptions(t))).getFlatCoordinates(),o=e.getStride();return c(r,0,r.length,o,r),function(e,t,r){r=r||1e5;const o=new Array(t).fill(0);for(let n=0,a=e.length;n<a;)for(let a=0;a<t;++a,++n){const t=e[n]*r,i=t<0?Math.ceil(t-.5):Math.round(t),s=i-o[a];o[a]=i,e[n]=s}return h(e)}(r,o,this.factor_)}}function h(e){for(let t=0,r=e.length;t<r;++t){const r=e[t];e[t]=r<0?~(r<<1):r<<1}return function(e){let t="";for(let r=0,o=e.length;r<o;++r)t+=f(e[r]);return t}(e)}function d(e){const t=function(e){const t=[];let r=0,o=0;for(let n=0,a=e.length;n<a;++n){const a=e.charCodeAt(n)-63;r|=(31&a)<<o,a<32?(t.push(r),r=0,o=0):o+=5}return t}(e);for(let e=0,r=t.length;e<r;++e){const r=t[e];t[e]=1&r?~(r>>1):r>>1}return t}function f(e){let t,r="";for(;e>=32;)t=63+(32|31&e),r+=String.fromCharCode(t),e>>=5;return t=e+63,r+=String.fromCharCode(t),r}var g=y,w=r(40878),p=r(12185),A=r(23986),x=r(66267),k=r(15264),C=r(29810),G=r(21133),F=r(38276),T=r(75052),S=r(44689),_=r(88292);const v=new n.A({target:document.getElementById("map"),view:new a.Ay({center:[-5639523.95,-3501274.52],zoom:10,minZoom:2,maxZoom:19}),layers:[new p.A({source:new k.A({attributions:'<a href="https://www.maptiler.com/copyright/" target="_blank">&copy; MapTiler</a> <a href="https://www.openstreetmap.org/copyright" target="_blank">&copy; OpenStreetMap contributors</a>',url:"https://api.maptiler.com/maps/hybrid/{z}/{x}/{y}.jpg?key=get_your_own_D6rA4zTHduk6KOKTXzGB",tileSize:512})})]});fetch("data/polyline/route.json").then((function(e){e.json().then((function(e){const t=e.routes[0].geometry,r=new g({factor:1e6}).readGeometry(t,{dataProjection:"EPSG:4326",featureProjection:"EPSG:3857"}),n=new o.A({type:"route",geometry:r}),a=new o.A({type:"icon",geometry:new w.A(r.getFirstCoordinate())}),i=new o.A({type:"icon",geometry:new w.A(r.getLastCoordinate())}),s=a.getGeometry().clone(),c=new o.A({type:"geoMarker",geometry:s}),u={route:new _.Ay({stroke:new S.A({width:6,color:[237,212,0,.8]})}),icon:new _.Ay({image:new T.A({anchor:[.5,1],src:"data/icon.png"})}),geoMarker:new _.Ay({image:new G.A({radius:7,fill:new F.A({color:"black"}),stroke:new S.A({color:"white",width:2})})})},l=new A.A({source:new C.A({features:[n,c,a,i]}),style:function(e){return u[e.get("type")]}});v.addLayer(l);const m=document.getElementById("speed"),y=document.getElementById("start-animation");let h,d=!1,f=0;function p(e){const t=Number(m.value),o=e.frameState.time;f=(f+t*(o-h)/1e6)%2,h=o;const n=r.getCoordinateAt(f>1?2-f:f);s.setCoordinates(n);const a=(0,x.r2)(e);a.setStyle(u.geoMarker),a.drawGeometry(s),v.render()}y.addEventListener("click",(function(){d?(d=!1,y.textContent="Start Animation",c.setGeometry(s),l.un("postrender",p)):(d=!0,h=Date.now(),y.textContent="Stop Animation",l.on("postrender",p),c.setGeometry(null))}))}))}))}},function(e){var t;t=13791,e(e.s=t)}]);
//# sourceMappingURL=feature-move-animation.js.map