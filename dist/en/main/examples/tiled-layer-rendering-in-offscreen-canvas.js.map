{"version":3,"file":"tiled-layer-rendering-in-offscreen-canvas.js","mappings":"2IAKA,MAAMA,EAAS,ICLA,WACb,OAAO,IAAIC,OAAO,IAA0B,6DAC9C,EDKMC,EAAY,GAElB,IAAIC,EAAA,EAAI,CACNC,OAAQ,CACN,IAAIC,EAAA,EAAU,CACZC,OAAQ,IAAIC,EAAA,EAAgB,CAC1BC,SAAU,IACVC,OAAQ,CAACC,EAAGC,EAAGC,IACN,IAAIC,SAASC,IAClB,MAAMC,EAAW,KACf,MAAMC,EAAgB,EAAEC,MAAOC,SAAQC,iBACrC,GAAe,aAAXD,EACF,OAEFlB,EAAOoB,oBAAoB,UAAWJ,GACtCF,EAAQK,GACRjB,EAAUmB,QACV,MAAMC,EAAepB,EAAU,GAC/BoB,KAAgB,EAElBtB,EAAOuB,iBAAiB,UAAWP,GACnChB,EAAOwB,YAAY,CAACN,OAAQ,SAAUO,KAAM,CAACf,EAAGC,EAAGC,IAAI,EAEhC,IAArBV,EAAUwB,QACZX,IAEFb,EAAUyB,KAAKZ,EAAS,IAG5Ba,aAAc,CACZ,2GAKRC,OAAQ,MACRC,KAAM,IAAIC,EAAA,GAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,K","sources":["webpack:///./tiled-layer-rendering-in-offscreen-canvas.js","webpack:///./tiled-layer-rendering-in-offscreen-canvas.worker.js"],"sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport ImageTileSource from '../src/ol/source/ImageTile.js';\nimport Worker from 'worker-loader!./tiled-layer-rendering-in-offscreen-canvas.worker.js'; //eslint-disable-line\nconst worker = new Worker();\n\nconst tileQueue = [];\n\nnew Map({\n  layers: [\n    new TileLayer({\n      source: new ImageTileSource({\n        tileSize: 512,\n        loader: (z, x, y) => {\n          return new Promise((resolve) => {\n            const loadTile = () => {\n              const handleMessage = ({data: {action, imageData}}) => {\n                if (action !== 'rendered') {\n                  return;\n                }\n                worker.removeEventListener('message', handleMessage);\n                resolve(imageData);\n                tileQueue.shift();\n                const loadNextTile = tileQueue[0];\n                loadNextTile?.();\n              };\n              worker.addEventListener('message', handleMessage);\n              worker.postMessage({action: 'render', tile: [z, x, y]});\n            };\n            if (tileQueue.length === 0) {\n              loadTile();\n            }\n            tileQueue.push(loadTile);\n          });\n        },\n        attributions: [\n          '<a href=\"https://www.openstreetmap.org/copyright\" target=\"_blank\">Â© OpenStreetMap contributors</a>',\n        ],\n      }),\n    }),\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  }),\n});\n","export default function Worker_fn() {\n  return new Worker(__webpack_public_path__ + \"tiled-layer-rendering-in-offscreen-canvas.worker.worker.js\");\n}\n"],"names":["worker","Worker","tileQueue","Map","layers","Tile","source","ImageTile","tileSize","loader","z","x","y","Promise","resolve","loadTile","handleMessage","data","action","imageData","removeEventListener","shift","loadNextTile","addEventListener","postMessage","tile","length","push","attributions","target","view","View","center","zoom"],"sourceRoot":""}