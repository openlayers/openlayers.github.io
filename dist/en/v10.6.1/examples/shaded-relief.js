"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[2784],{53675:function(t,e,n){var a=n(41564),o=n(87240),r=n(47085),s=n(12185),i=n(15264),u=n(28e3),c=n(54272);const h=new i.A({url:"https://s3.amazonaws.com/elevation-tiles-prod/terrarium/{z}/{x}/{y}.png",maxZoom:15,attributions:'<a href="https://github.com/tilezen/joerd/blob/master/docs/attribution.md" target="_blank">Data sources and attribution</a>'}),l=new c.Ay({sources:[h],operationType:"image",operation:function(t,e){const n=t[0],a=n.width,o=n.height,r=n.data,s=new Uint8ClampedArray(r.length),i=2*e.resolution,u=a-1,c=o-1,h=[0,0,0,0],l=2*Math.PI,d=Math.PI/2,m=Math.PI*e.sunEl/180,p=Math.PI*e.sunAz/180,f=Math.cos(m),w=Math.sin(m);let v,b,g,M,A,y,z,E,I,k,x,P,C,T,B;function j(t){return 256*t[0]+t[1]+t[2]/256-32768}for(b=0;b<=c;++b)for(A=0===b?0:b-1,y=b===c?c:b+1,v=0;v<=u;++v)g=0===v?0:v-1,M=v===u?u:v+1,z=4*(b*a+g),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],E=e.vert*j(h),z=4*(b*a+M),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],I=e.vert*j(h),k=(I-E)/i,z=4*(A*a+v),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],E=e.vert*j(h),z=4*(y*a+v),h[0]=r[z],h[1]=r[z+1],h[2]=r[z+2],h[3]=r[z+3],I=e.vert*j(h),x=(I-E)/i,P=Math.atan(Math.sqrt(k*k+x*x)),C=Math.atan2(x,-k),C=C<0?d-C:C>d?l-C+d:d-C,T=w*Math.cos(P)+f*Math.sin(P)*Math.cos(p-C),z=4*(b*a+v),B=255*T,s[z]=B,s[z+1]=B,s[z+2]=B,s[z+3]=r[z+3];return{data:s,width:a,height:o,colorSpace:"srgb"}}}),d=(new a.A({target:"map",layers:[new s.A({source:new u.A}),new r.A({opacity:.3,source:l})],view:new o.Ay({center:[-13615645,4497969],zoom:13})}),{});["vert","sunEl","sunAz"].forEach((function(t){const e=document.getElementById(t),n=document.getElementById(t+"Out");e.addEventListener("input",(function(){n.innerText=e.value,l.changed()})),n.innerText=e.value,d[t]=e})),l.on("beforeoperations",(function(t){const e=t.data;e.resolution=t.resolution;for(const t in d)e[t]=Number(d[t].value)}))}},function(t){var e;e=53675,t(t.s=e)}]);
//# sourceMappingURL=shaded-relief.js.map