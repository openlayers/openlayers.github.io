{"version":3,"file":"wind-arrows.js","mappings":"6OAcA,MAAMA,EAAQ,IAAI,IAAa,CAC7BC,OAAQ,EACRC,OAAQ,EACRC,OAAQ,IAAI,IAAO,CACjBC,MAAO,EACPC,MAAO,UAETC,gBAAgB,IAGZC,EAAO,IAAI,IAAa,CAC5BN,OAAQ,EACRC,OAAQ,EACRM,KAAM,IAAI,IAAK,CACbH,MAAO,UAETC,gBAAgB,IAGZG,EAAS,CAAC,IAAI,KAAM,CAACC,MAAOV,IAAS,IAAI,KAAM,CAACU,MAAOH,KAEvDI,EAAS,IAAI,IAAa,CAC9BC,aACE,iFAGEC,EAAM,IAAI,IAAI,CAClBC,OAAQ,CACN,IAAI,IAAU,CACZH,OAAQ,IAAI,MAEd,IAAI,IAAY,CACdA,OAAQA,EACRI,MAAO,SAAUC,GACf,MAAMC,EAAOD,EAAQE,IAAI,QAEnBC,GAAUF,EAAKG,IAAM,KAAOC,KAAKC,GAAM,IACvCC,EAAQN,EAAKO,MAAQ,GAQ3B,OAPAxB,EAAMyB,SAAS,CAAC,EAAGF,IACnBvB,EAAM0B,YAAYP,GAClBZ,EAAKoB,gBAAgB,CACnB,EACApB,EAAKqB,YAAc,EAAI5B,EAAM4B,YAAcL,IAE7ChB,EAAKmB,YAAYP,GACVV,CACT,KAGJoB,OAAQ,MACRC,KAAM,IAAI,KAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,MAIVC,MAAM,iCACHC,MAAK,SAAUC,GACd,OAAOA,EAASC,MAClB,IACCF,MAAK,SAAUG,GACd,MAAMC,EAAW,GACjBD,EAAKE,KAAKC,SAAQ,SAAUC,GAC1B,MAAMzB,EAAU,IAAI,IAClB,IAAI,KAAM,QAAW,CAACyB,EAAOC,MAAMC,IAAKF,EAAOC,MAAME,QAEvD5B,EAAQ6B,cAAcJ,GACtBH,EAASQ,KAAK9B,EAChB,IACAL,EAAOoC,YAAYT,GACnBzB,EAAImC,UAAUC,IAAItC,EAAOuC,YAC3B,G","sources":["webpack:///./wind-arrows.js"],"sourcesContent":["import Feature from '../src/ol/Feature.js';\nimport Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport Point from '../src/ol/geom/Point.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport {fromLonLat} from '../src/ol/proj.js';\nimport OSM from '../src/ol/source/OSM.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport Fill from '../src/ol/style/Fill.js';\nimport RegularShape from '../src/ol/style/RegularShape.js';\nimport Stroke from '../src/ol/style/Stroke.js';\nimport Style from '../src/ol/style/Style.js';\n\nconst shaft = new RegularShape({\n  points: 2,\n  radius: 5,\n  stroke: new Stroke({\n    width: 2,\n    color: 'black',\n  }),\n  rotateWithView: true,\n});\n\nconst head = new RegularShape({\n  points: 3,\n  radius: 5,\n  fill: new Fill({\n    color: 'black',\n  }),\n  rotateWithView: true,\n});\n\nconst styles = [new Style({image: shaft}), new Style({image: head})];\n\nconst source = new VectorSource({\n  attributions:\n    'Weather data by <a href=\"https://openweathermap.org/current\">OpenWeather</a>',\n});\n\nconst map = new Map({\n  layers: [\n    new TileLayer({\n      source: new OSM(),\n    }),\n    new VectorLayer({\n      source: source,\n      style: function (feature) {\n        const wind = feature.get('wind');\n        // rotate arrow away from wind origin\n        const angle = ((wind.deg - 180) * Math.PI) / 180;\n        const scale = wind.speed / 10;\n        shaft.setScale([1, scale]);\n        shaft.setRotation(angle);\n        head.setDisplacement([\n          0,\n          head.getRadius() / 2 + shaft.getRadius() * scale,\n        ]);\n        head.setRotation(angle);\n        return styles;\n      },\n    }),\n  ],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n  }),\n});\n\nfetch('data/openweather/weather.json')\n  .then(function (response) {\n    return response.json();\n  })\n  .then(function (data) {\n    const features = [];\n    data.list.forEach(function (report) {\n      const feature = new Feature(\n        new Point(fromLonLat([report.coord.lon, report.coord.lat])),\n      );\n      feature.setProperties(report);\n      features.push(feature);\n    });\n    source.addFeatures(features);\n    map.getView().fit(source.getExtent());\n  });\n"],"names":["shaft","points","radius","stroke","width","color","rotateWithView","head","fill","styles","image","source","attributions","map","layers","style","feature","wind","get","angle","deg","Math","PI","scale","speed","setScale","setRotation","setDisplacement","getRadius","target","view","center","zoom","fetch","then","response","json","data","features","list","forEach","report","coord","lon","lat","setProperties","push","addFeatures","getView","fit","getExtent"],"sourceRoot":""}