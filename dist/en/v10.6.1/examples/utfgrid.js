"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5586],{63765:function(t,e,i){var s=i(41564),n=i(93595),o=i(87240),r=i(12185),a=i(14407),h=i(37751),l=i(30942),d=i(22685),c=i(92662),u=i(16235),_=i(31516),p=i(25231),g=i(38993),m=i(62994),E=i(10135),f=i(69606),v=i(28025);class A extends h.A{constructor(t,e,i,s,n,o){super(t,e),this.src_=i,this.extent_=s,this.preemptive_=n,this.grid_=null,this.keys_=null,this.data_=null,this.jsonp_=o}getImage(){return null}getData(t){if(!this.grid_||!this.keys_)return null;const e=(t[0]-this.extent_[0])/(this.extent_[2]-this.extent_[0]),i=(t[1]-this.extent_[1])/(this.extent_[3]-this.extent_[1]),s=this.grid_[Math.floor((1-i)*this.grid_.length)];if("string"!=typeof s)return null;let n=s.charCodeAt(Math.floor(e*s.length));n>=93&&n--,n>=35&&n--,n-=32;let o=null;if(n in this.keys_){const t=this.keys_[n];o=this.data_&&t in this.data_?this.data_[t]:t}return o}forDataAtCoordinate(t,e,i){this.state==l.A.EMPTY&&!0===i?(this.state=l.A.IDLE,(0,c.Jz)(this,d.A.CHANGE,(i=>{e(this.getData(t))})),this.loadInternal_()):!0===i?setTimeout((()=>{e(this.getData(t))}),0):e(this.getData(t))}getKey(){return this.src_}handleError_(){this.state=l.A.ERROR,this.changed()}handleLoad_(t){this.grid_=t.grid,this.keys_=t.keys,this.data_=t.data,this.state=l.A.LOADED,this.changed()}loadInternal_(){if(this.state==l.A.IDLE)if(this.state=l.A.LOADING,this.jsonp_)(0,_.FQ)(this.src_,this.handleLoad_.bind(this),this.handleError_.bind(this));else{const t=new XMLHttpRequest;t.addEventListener("load",this.onXHRLoad_.bind(this)),t.addEventListener("error",this.onXHRError_.bind(this)),t.open("GET",this.src_),t.send()}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch{return void this.handleError_()}this.handleLoad_(t)}else this.handleError_()}onXHRError_(t){this.handleError_()}load(){this.preemptive_?this.loadInternal_():this.setState(l.A.EMPTY)}}class T extends v.A{constructor(t){if(super({projection:(0,p.Jt)("EPSG:3857"),state:"loading",wrapX:void 0===t.wrapX||t.wrapX,zDirection:t.zDirection}),this.preemptive_=void 0===t.preemptive||t.preemptive,this.tileUrlFunction_=f.lg,this.template_=void 0,this.jsonp_=t.jsonp||!1,this.tileCache_=new g.A(512),t.url)if(this.jsonp_)(0,_.FQ)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{const e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}else{if(!t.tileJSON)throw new Error("Either `url` or `tileJSON` options must be provided");this.handleTileJSONResponse(t.tileJSON)}}onXHRLoad_(t){const e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch{return void this.handleTileJSONError()}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTemplate(){return this.template_}forDataAtCoordinateAndResolution(t,e,i,s){if(this.tileGrid){const n=this.tileGrid.getZForResolution(e,this.zDirection),o=this.tileGrid.getTileCoordForCoordAndZ(t,n),r=this.getTile(o[0],o[1],o[2],1,this.getProjection());r.getState()==l.A.IDLE&&r.load(),r.forDataAtCoordinate(t,i,s)}else!0===s?setTimeout((function(){i(null)}),0):i(null)}handleTileJSONError(){this.setState("error")}handleTileJSONResponse(t){const e=(0,p.Jt)("EPSG:4326"),i=this.getProjection();let s;if(void 0!==t.bounds){const n=(0,p.FO)(e,i);s=(0,u.NW)(t.bounds,n)}const n=(0,E.kZ)(i),o=t.minzoom||0,r=t.maxzoom||22,a=(0,E.EN)({extent:n,maxZoom:r,minZoom:o});this.tileGrid=a,this.template_=t.template;const h=t.grids;if(h){if(this.tileUrlFunction_=(0,f.Qz)(h,a),t.attribution){const e=void 0!==s?s:n;this.setAttributions((function(i){return(0,u.HY)(e,i.extent)?[t.attribution]:null}))}this.setState("ready")}else this.setState("error")}getTile(t,e,i,s,n){const o=[t,e,i],r=this.getTileCoordForTileUrlFunction(o,n),a=this.tileUrlFunction_(r,s,n),h=`${this.getKey()},${(0,m.dp)(t,e,i)}`;if(this.tileCache_.containsKey(h))return this.tileCache_.get(h);this.tileCache_.expireCache();const d=new A(o,void 0!==a?l.A.IDLE:l.A.EMPTY,void 0!==a?a:"",this.tileGrid.getTileCoordExtent(o),this.preemptive_,this.jsonp_);return this.tileCache_.set(h,d),d}}var y=T;const b="pk.eyJ1IjoiYWhvY2V2YXIiLCJhIjoiY2t0cGdwMHVnMGdlbzMxbDhwazBic2xrNSJ9.WbcTL9uj8JPAsnT9mgb7oQ",x=new r.A({source:new a.A({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+b})}),L=new y({url:"https://api.tiles.mapbox.com/v4/mapbox.geography-class.json?secure&access_token="+b}),S=new r.A({source:L}),w=new o.Ay({center:[0,0],zoom:1}),J=document.getElementById("map"),R=new s.A({layers:[x,S],target:J,view:w}),C=document.getElementById("country-info"),D=document.getElementById("country-flag"),N=document.getElementById("country-name"),O=new n.A({element:C,offset:[15,15],stopEvent:!1});R.addOverlay(O);const I=function(t){const e=w.getResolution();L.forDataAtCoordinateAndResolution(t,e,(function(e){J.style.cursor=e?"pointer":"",e&&(D.src="data:image/png;base64,"+e.flag_png,N.innerHTML=e.admin),O.setPosition(e?t:void 0)}))};R.on("pointermove",(function(t){if(t.dragging)return;const e=R.getEventCoordinate(t.originalEvent);I(e)})),R.on("click",(function(t){I(t.coordinate)}))}},function(t){var e;e=63765,t(t.s=e)}]);
//# sourceMappingURL=utfgrid.js.map