{"version":3,"file":"pmtiles-image.js","mappings":"kKAOA,UAEA,MAAMA,EAAQ,IAAI,KAChB,gEAgBF,MAAMC,EAAS,IAAI,IAAO,CACxB,YAAMC,CAAOC,EAAGC,EAAGC,GAAG,OAACC,IACrB,MAAMC,QAAiBP,EAAMQ,OAAOL,EAAGC,EAAGC,EAAGC,GACvCG,EAAO,IAAIC,KAAK,CAACH,EAASI,OAC1BC,EAAMC,IAAIC,gBAAgBL,GAC1BM,QAdV,SAAmBH,GACjB,OAAO,IAAII,SAAQ,CAACC,EAASC,KAC3B,MAAMC,EAAM,IAAIC,MAChBD,EAAIE,iBAAiB,QAAQ,IAAMJ,EAAQE,KAC3CA,EAAIE,iBAAiB,SAAS,IAAMH,EAAO,IAAII,MAAM,kBACrDH,EAAIP,IAAMA,CAAG,GAEjB,CAOwBW,CAAUX,GAE9B,OADAC,IAAIW,gBAAgBZ,GACbG,CACT,EACAU,aACE,yQAGQ,IAAI,IAAI,CAClBC,OAAQ,CAAC,IAAI,IAAM,CAACzB,YACpB0B,OAAQ,MACRC,KAAM,IAAI,KAAK,CACbC,OAAQ,CAAC,EAAG,GACZC,KAAM,EACNC,QAAS,K","sources":["webpack:///./pmtiles-image.js"],"sourcesContent":["import {PMTiles} from 'pmtiles';\nimport Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport Layer from '../src/ol/layer/WebGLTile.js';\nimport {useGeographic} from '../src/ol/proj.js';\nimport Source from '../src/ol/source/ImageTile.js';\n\nuseGeographic();\n\nconst tiles = new PMTiles(\n  'https://pmtiles.io/stamen_toner(raster)CC-BY+ODbL_z3.pmtiles',\n);\n\n/**\n * @param {string} src The image source URL.\n * @return {Promise<HTMLImageElement>} Resolves with the loaded image.\n */\nfunction loadImage(src) {\n  return new Promise((resolve, reject) => {\n    const img = new Image();\n    img.addEventListener('load', () => resolve(img));\n    img.addEventListener('error', () => reject(new Error('load failed')));\n    img.src = src;\n  });\n}\n\nconst source = new Source({\n  async loader(z, x, y, {signal}) {\n    const response = await tiles.getZxy(z, x, y, signal);\n    const blob = new Blob([response.data]);\n    const src = URL.createObjectURL(blob);\n    const image = await loadImage(src);\n    URL.revokeObjectURL(src);\n    return image;\n  },\n  attributions:\n    'Map tiles by <a href=\"http://stamen.com\">Stamen Design</a>, under <a href=\"http://creativecommons.org/licenses/by/4.0\">CC BY 4.0</a>. Data by <a href=\"http://openstreetmap.org\">OpenStreetMap</a>, under <a href=\"http://www.openstreetmap.org/copyright\">ODbL</a>.',\n});\n\nconst map = new Map({\n  layers: [new Layer({source})],\n  target: 'map',\n  view: new View({\n    center: [0, 0],\n    zoom: 2,\n    maxZoom: 4,\n  }),\n});\n"],"names":["tiles","source","loader","z","x","y","signal","response","getZxy","blob","Blob","data","src","URL","createObjectURL","image","Promise","resolve","reject","img","Image","addEventListener","Error","loadImage","revokeObjectURL","attributions","layers","target","view","center","zoom","maxZoom"],"sourceRoot":""}