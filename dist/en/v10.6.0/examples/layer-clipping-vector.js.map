{"version":3,"file":"layer-clipping-vector.js","mappings":"iOAcA,MAAMA,EAAa,IAAI,IAAU,CAC/BC,UAAW,QACXC,OAAQ,IAAI,IAAW,CACrBC,MAAO,mBAILC,EAAO,IAAI,IAAU,CACzBF,OAAQ,IAAI,MAGRG,EAAY,IAAI,IAAY,CAChCC,MAAO,KACPJ,OAAQ,IAAI,IAAa,CACvBK,IAAK,qCACLC,OAAQ,IAAI,QAKhBH,EAAUI,YAAYC,GAAG,cAAc,WACrCN,EAAKO,UAAUN,EAAUI,YAAYG,YACvC,IAEA,MAAMN,EAAQ,IAAI,KAAM,CACtBO,KAAM,IAAI,IAAK,CACbC,MAAO,YAIXV,EAAKM,GAAG,cAAc,SAAUK,GAC9B,MAAMC,GAAgB,QAAiBD,GACvCA,EAAEE,QAAQC,yBAA2B,iBACrCb,EAAUI,YAAYU,gBAAe,SAAUC,GAC7CJ,EAAcK,YAAYD,EAASd,EACrC,IACAS,EAAEE,QAAQC,yBAA2B,aACvC,IAEY,IAAI,IAAI,CAClBI,OAAQ,CAACtB,EAAYI,EAAMC,GAC3BkB,OAAQ,MACRC,KAAM,IAAI,KAAK,CACbC,QAAQ,QAAW,CAAC,KAAM,QAC1BC,KAAM,K","sources":["webpack:///./layer-clipping-vector.js"],"sourcesContent":["import Map from '../src/ol/Map.js';\nimport View from '../src/ol/View.js';\nimport GeoJSON from '../src/ol/format/GeoJSON.js';\nimport TileLayer from '../src/ol/layer/Tile.js';\nimport VectorLayer from '../src/ol/layer/Vector.js';\nimport {fromLonLat} from '../src/ol/proj.js';\nimport {getVectorContext} from '../src/ol/render.js';\nimport OSM from '../src/ol/source/OSM.js';\nimport StadiaMaps from '../src/ol/source/StadiaMaps.js';\nimport VectorSource from '../src/ol/source/Vector.js';\nimport Fill from '../src/ol/style/Fill.js';\nimport Style from '../src/ol/style/Style.js';\n\n//A distinct className is required to use another canvas for the background\nconst background = new TileLayer({\n  className: 'toner',\n  source: new StadiaMaps({\n    layer: 'stamen_toner',\n  }),\n});\n\nconst base = new TileLayer({\n  source: new OSM(),\n});\n\nconst clipLayer = new VectorLayer({\n  style: null,\n  source: new VectorSource({\n    url: './data/geojson/switzerland.geojson',\n    format: new GeoJSON(),\n  }),\n});\n\n//Giving the clipped layer an extent is necessary to avoid rendering when the feature is outside the viewport\nclipLayer.getSource().on('addfeature', function () {\n  base.setExtent(clipLayer.getSource().getExtent());\n});\n\nconst style = new Style({\n  fill: new Fill({\n    color: 'black',\n  }),\n});\n\nbase.on('postrender', function (e) {\n  const vectorContext = getVectorContext(e);\n  e.context.globalCompositeOperation = 'destination-in';\n  clipLayer.getSource().forEachFeature(function (feature) {\n    vectorContext.drawFeature(feature, style);\n  });\n  e.context.globalCompositeOperation = 'source-over';\n});\n\nconst map = new Map({\n  layers: [background, base, clipLayer],\n  target: 'map',\n  view: new View({\n    center: fromLonLat([8.23, 46.86]),\n    zoom: 7,\n  }),\n});\n"],"names":["background","className","source","layer","base","clipLayer","style","url","format","getSource","on","setExtent","getExtent","fill","color","e","vectorContext","context","globalCompositeOperation","forEachFeature","feature","drawFeature","layers","target","view","center","zoom"],"sourceRoot":""}