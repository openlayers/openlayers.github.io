"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[9800],{34451:function(e,t,n){var o=n(51541),r=n(41564),s=n(87240),a=n(16235),i=n(77833),c=n(12185),f=n(23986),h=n(66267),l=n(9226),g=n(29810),u=n(44689),w=n(88292);const d=new c.A({source:new l.A({layer:"stamen_toner"})}),m=new r.A({layers:[d],target:"map",view:new s.Ay({center:[-11e6,46e5],zoom:2})}),y=new w.Ay({stroke:new u.A({color:"#EAE911",width:2})}),A=new g.A({attributions:'Flight data by <a href="https://openflights.org/data.html">OpenFlights</a>,',loader:function(){fetch("data/openflights/flights.json").then((function(e){return e.json()})).then((function(e){const t=e.flights;for(let e=0;e<t.length;e++){const n=t[e],r=n[0],s=n[1],a=new arc.GreatCircle({x:r[1],y:r[0]},{x:s[1],y:s[0]}).Arc(100,{offset:10}),c=[];a.geometries.forEach((function(e){const t=new i.A(e.coords);t.transform("EPSG:4326","EPSG:3857"),c.push(new o.A({geometry:t,finished:!1}))})),C(c,50*e)}d.on("postrender",E)}))}}),p=new f.A({source:A,style:function(e){return e.get("finished")?y:null}});m.addLayer(p);const G=.02;function E(e){const t=(0,h.r2)(e),n=e.frameState;t.setStyle(y);const o=A.getFeatures();for(let e=0;e<o.length;e++){const r=o[e];if(!r.get("finished")){const e=r.getGeometry().getCoordinates(),o=n.time-r.get("start");if(o>=0){const n=o*G;n>=e.length&&r.set("finished",!0);const s=Math.min(n,e.length),c=new i.A(e.slice(0,s)),f=(0,a.RG)(m.getView().getProjection().getExtent()),h=Math.floor(m.getView().getCenter()[0]/f);c.translate(h*f,0),t.drawGeometry(c),c.translate(f,0),t.drawGeometry(c)}}}m.render()}function C(e,t){window.setTimeout((function(){let t=Date.now();e.forEach((function(e){e.set("start",t),A.addFeature(e);const n=(e.getGeometry().getCoordinates().length-1)/G;t+=n}))}),t)}}},function(e){var t;t=34451,e(e.s=t)}]);
//# sourceMappingURL=flight-animation.js.map