"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[5242],{96309:function(e,t,n){var o=n(51541),r=n(41564),a=n(87240),i=n(17534),s=n(77833),c=n(40878),l=n(12185),u=n(23986),d=n(66267),g=n(28e3),w=n(29810),f=n(21133),m=n(38276),p=n(44689),y=n(88292);const h={"Clement Latour":"rgba(0, 0, 255, 0.7)","Damien de Baesnt":"rgba(0, 215, 255, 0.7)","Sylvain Dhonneur":"rgba(0, 165, 255, 0.7)","Tom Payne":"rgba(0, 255, 255, 0.7)","Ulrich Prinz":"rgba(0, 215, 255, 0.7)"},A={},C=new w.A,b=["data/igc/Clement-Latour.igc","data/igc/Damien-de-Baenst.igc","data/igc/Sylvain-Dhonneur.igc","data/igc/Tom-Payne.igc","data/igc/Ulrich-Prinz.igc"];function v(e,t){const n=new XMLHttpRequest;n.open("GET",e),n.onload=function(){t(n.responseText)},n.send()}const T=new i.A;for(let e=0;e<b.length;++e)v(b[e],(function(e){const t=T.readFeatures(e,{featureProjection:"EPSG:3857"});C.addFeatures(t)}));const k={start:1/0,stop:-1/0,duration:0};C.on("addfeature",(function(e){const t=e.feature.getGeometry();k.start=Math.min(k.start,t.getFirstCoordinate()[2]),k.stop=Math.max(k.stop,t.getLastCoordinate()[2]),k.duration=k.stop-k.start}));const L=new u.A({source:C,style:function(e){const t=h[e.get("PLT")];let n=A[t];return n||(n=new y.Ay({stroke:new p.A({color:t,width:3})}),A[t]=n),n}}),P=new r.A({layers:[new l.A({source:new g.A({attributions:['All maps Â© <a href="https://www.opencyclemap.org/">OpenCycleMap</a>',g.o],url:"https://{a-c}.tile.thunderforest.com/cycle/{z}/{x}/{y}.png?apikey=0e6fc415256d4fbb9b5166a718591d71"})}),L],target:"map",view:new a.Ay({center:[703365.7089403362,5714629.865071137],zoom:9})});let E=null,G=null;const M=function(e){const t=C.getClosestFeatureToCoordinate(e),n=document.getElementById("info");if(null===t)E=null,G=null,n.innerHTML="&nbsp;";else{const o=t.getGeometry().getClosestPoint(e);null===E?E=new c.A(o):E.setCoordinates(o);const r=new Date(1e3*o[2]);n.innerHTML=t.get("PLT")+" ("+r.toUTCString()+")";const a=[e,[o[0],o[1]]];null===G?G=new s.A(a):G.setCoordinates(a)}P.render()};P.on("pointermove",(function(e){if(e.dragging)return;const t=P.getEventCoordinate(e.originalEvent);M(t)})),P.on("click",(function(e){M(e.coordinate)}));const F=new p.A({color:"rgba(255,0,0,0.9)",width:1}),S=new y.Ay({stroke:F,image:new f.A({radius:5,fill:null,stroke:F})});L.on("postrender",(function(e){const t=(0,d.r2)(e);t.setStyle(S),null!==E&&t.drawGeometry(E),null!==G&&t.drawGeometry(G)}));const D=new u.A({source:new w.A,map:P,style:new y.Ay({image:new f.A({radius:5,fill:new m.A({color:"rgba(255,0,0,0.9)"})})})}),z=document.getElementById("time");z.addEventListener("input",(function(){const e=parseInt(z.value,10)/100,t=k.start+k.duration*e;C.forEachFeature((function(e){const n=e.getGeometry().getCoordinateAtM(t,!0);let r=e.get("highlight");void 0===r?(r=new o.A(new c.A(n)),e.set("highlight",r),D.getSource().addFeature(r)):r.getGeometry().setCoordinates(n)})),P.render()}))}},function(e){var t;t=96309,e(e.s=t)}]);
//# sourceMappingURL=igc.js.map