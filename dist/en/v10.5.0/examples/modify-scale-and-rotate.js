"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[4348],{45335:function(e,t,n){var o=n(41564),r=n(87240),i=n(38808),c=n(16235),s=n(7535),a=n(40878),f=n(9444),u=n(74676),m=n(22514),y=n(12185),g=n(23986),d=n(28e3),l=n(29810),w=n(21133),A=n(38276),h=n(44689),p=n(88292);const G=new y.A({source:new d.A}),C=new l.A,E=new p.Ay({geometry:function(e){const t=e.get("modifyGeometry");return t?t.geometry:e.getGeometry()},fill:new A.A({color:"rgba(255, 255, 255, 0.2)"}),stroke:new h.A({color:"#ffcc33",width:2}),image:new w.A({radius:7,fill:new A.A({color:"#ffcc33"})})});function M(e){let t,n,o;const r=e.getType();if("Polygon"===r){let o=0,r=0,i=0;n=e.getCoordinates()[0].slice(1),n.forEach((function(e){o+=e[0],r+=e[1],i++})),t=[o/i,r/i]}else"LineString"===r?(t=e.getCoordinateAt(.5),n=e.getCoordinates()):t=(0,c.q1)(e.getExtent());let i;return n?(i=n.map((function(e){const n=e[0]-t[0],o=e[1]-t[1];return n*n+o*o})),o=Math.sqrt(Math.max.apply(Math,i))/3):o=Math.max((0,c.RG)(e.getExtent()),(0,c.Oq)(e.getExtent()))/3,{center:t,coordinates:n,minRadius:o,sqDistances:i}}const k=new g.A({source:C,style:function(e){const t=[E],n=e.get("modifyGeometry"),o=M(n?n.geometry:e.getGeometry()),r=o.center;if(r){t.push(new p.Ay({geometry:new a.A(r),image:new w.A({radius:4,fill:new A.A({color:"#ff3333"})})}));const e=o.coordinates;if(e){const n=o.minRadius,r=o.sqDistances,i=n*n,c=e.filter((function(e,t){return r[t]>i}));t.push(new p.Ay({geometry:new s.A(c),image:new w.A({radius:4,fill:new A.A({color:"#33cc33"})})}))}}return t}}),q=new o.A({layers:[G,k],target:"map",view:new r.Ay({center:[-11e6,46e5],zoom:4})}),v=new u.A({source:C}).getOverlay().getStyleFunction(),x=new u.A({source:C,condition:function(e){return(0,i.fs)(e)&&!(0,i.k5)(e)},deleteCondition:i.Zm,insertVertexCondition:i.Zm,style:function(e,t){return e.get("features").forEach((function(t){const n=t.get("modifyGeometry");if(n){const t=e.getGeometry().getCoordinates();let o=n.point;if(!o){o=t,n.point=o,n.geometry0=n.geometry;const e=M(n.geometry0);n.center=e.center,n.minRadius=e.minRadius}const r=n.center,i=n.minRadius;let c,s;c=o[0]-r[0],s=o[1]-r[1];const a=Math.sqrt(c*c+s*s);if(a>i){const e=Math.atan2(s,c);c=t[0]-r[0],s=t[1]-r[1];const o=Math.sqrt(c*c+s*s);if(o>0){const t=Math.atan2(s,c),i=n.geometry0.clone();i.scale(o/a,void 0,r),i.rotate(t-e,r),n.geometry=i}}}})),v(e,t)}});let R;x.on("modifystart",(function(e){e.features.forEach((function(e){e.set("modifyGeometry",{geometry:e.getGeometry().clone()},!0)}))})),x.on("modifyend",(function(e){e.features.forEach((function(e){const t=e.get("modifyGeometry");t&&(e.setGeometry(t.geometry),e.unset("modifyGeometry",!0))}))})),q.addInteraction(x),q.addInteraction(new m.A({condition:function(e){return(0,i.fs)(e)&&(0,i.k5)(e)},layers:[k]}));const I=document.getElementById("type");function b(){R=new f.Ay({source:C,type:I.value}),q.addInteraction(R)}I.onchange=function(){q.removeInteraction(R),b()},b()}},function(e){var t;t=45335,e(e.s=t)}]);
//# sourceMappingURL=modify-scale-and-rotate.js.map