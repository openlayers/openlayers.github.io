"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[7922],{74846:function(e,t,i){var s=i(41564),o=i(87240),n=i(73988),r=i(76825),a=i(96256),c=i(94679),h=i(16235),l=i(25231),p=i(10135),u=i(38376);class g extends u.A{constructor(e){const t=!!e.highDpi;super({attributionsCollapsible:e.attributionsCollapsible,cacheSize:e.cacheSize,crossOrigin:"anonymous",interpolate:e.interpolate,projection:"EPSG:3857",reprojectionErrorThreshold:e.reprojectionErrorThreshold,state:"loading",tileLoadFunction:e.tileLoadFunction,tilePixelRatio:t?2:1,wrapX:void 0===e.wrapX||e.wrapX,transition:e.transition,zDirection:e.zDirection}),this.apiKey_=e.key,this.error_=null;const i={mapType:e.mapType||"roadmap",language:e.language||"en-US",region:e.region||"US"};e.imageFormat&&(i.imageFormat=e.imageFormat),e.scale&&(i.scale=e.scale),t&&(i.highDpi=!0),e.layerTypes&&(i.layerTypes=e.layerTypes),e.styles&&(i.styles=e.styles),!0===e.overlay&&(i.overlay=!0),e.apiOptions&&(i.apiOptions=e.apiOptions),this.sessionTokenRequest_=i,this.sessionTokenValue_,this.sessionRefreshId_,this.previousViewportAttribution_,this.previousViewportExtent_,this.createSession_()}getError(){return this.error_}fetchSessionToken(e,t){return fetch(e,t)}async createSession_(){const e="https://tile.googleapis.com/v1/createSession?key="+this.apiKey_,t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(this.sessionTokenRequest_)},i=await this.fetchSessionToken(e,t);if(!i.ok){try{const e=await i.json();this.error_=new Error(e.error.message)}catch{this.error_=new Error("Error fetching session token")}return void this.setState("error")}const s=await i.json(),o=this.getTilePixelRatio(1),n=[s.tileWidth/o,s.tileHeight/o];this.tileGrid=(0,p.EN)({extent:(0,p.kZ)(this.getProjection()),maxZoom:22,tileSize:n});const r=s.session;this.sessionTokenValue_=r;const a=this.apiKey_;this.tileUrlFunction=function(e,t,i){return`https://tile.googleapis.com/v1/2dtiles/${e[0]}/${e[1]}/${e[2]}?session=${r}&key=${a}`};const c=1e3*parseInt(s.expiry,10),h=Math.max(c-Date.now()-6e4,1);this.sessionRefreshId_=setTimeout((()=>this.createSession_()),h),this.setAttributions(this.fetchAttributions_.bind(this)),this.setState("ready")}async fetchAttributions_(e){if(e.viewHints[c.A.ANIMATING]||e.viewHints[c.A.INTERACTING]||e.animate)return this.previousViewportAttribution_;const[t,i]=(0,l.WP)((0,h.R)(e.extent),e.viewState.projection),[s,o]=(0,l.WP)((0,h.WU)(e.extent),e.viewState.projection),n=`zoom=${this.getTileGrid().getZForResolution(e.viewState.resolution,this.zDirection)}&north=${o}&south=${i}&east=${s}&west=${t}`;if(this.previousViewportExtent_==n)return this.previousViewportAttribution_;this.previousViewportExtent_=n;const r=`https://tile.googleapis.com/tile/v1/viewport?session=${this.sessionTokenValue_}&key=${this.apiKey_}&${n}`;return this.previousViewportAttribution_=await fetch(r).then((e=>e.json())).then((e=>e.copyright)),this.previousViewportAttribution_}disposeInternal(){clearTimeout(this.sessionRefreshId_),super.disposeInternal()}}var y=g;document.getElementById("key-form").addEventListener("submit",(e=>{!function(e){const t=new y({key:e,scale:"scaleFactor2x",highDpi:!0});t.on("change",(()=>{"error"===t.getState()&&alert(t.getError())}));class i extends n.A{constructor(){const e=document.createElement("img");e.style.pointerEvents="none",e.style.position="absolute",e.style.bottom="5px",e.style.left="5px",e.src="https://developers.google.com/static/maps/documentation/images/google_on_white.png",super({element:e})}}new s.A({layers:[new a.A({source:t})],controls:(0,r.N)().extend([new i]),target:"map",view:new o.Ay({center:[0,0],zoom:2})})}(e.target.elements.key.value)}))}},function(e){var t;t=74846,e(e.s=t)}]);
//# sourceMappingURL=google.js.map