"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[8615],{87896:function(e,t,n){var a=n(41564),i=n(87240),o=n(5596),r=n(36804),s=n(31716);var l=n(10135),c=n(12911);const d=new function(){return new Worker(n.p+"offscreen-canvas.worker.worker.js")};let m,u,p,g,w,f;function h(){if(w){const e=f.viewState,t=w.viewState,n=e.center,a=e.resolution,i=e.rotation,o=t.center,r=t.resolution,s=t.rotation,l=(0,c.vt)();i||(0,c.Zz)(l,(o[0]-n[0])/a,(n[1]-o[1])/a,r/a,r/a,i-s,0,0),u.style.transform=(0,c.dI)(l)}}const y=new a.A({layers:[new r.A({render:function(e){return m||(m=document.createElement("div"),m.style.position="absolute",m.style.width="100%",m.style.height="100%",u=document.createElement("div"),u.style.position="absolute",u.style.width="100%",u.style.height="100%",m.appendChild(u),p=document.createElement("canvas"),p.style.position="absolute",p.style.left="0",p.style.transformOrigin="top left",u.appendChild(p)),f=e,h(),g?e.animate=!0:(g=!0,d.postMessage({action:"render",frameState:{layerIndex:0,wantedTiles:{},usedTiles:{},viewHints:e.viewHints.slice(0),postRenderFunctions:[],viewState:{center:e.viewState.center.slice(0),resolution:e.viewState.resolution,rotation:e.viewState.rotation,zoom:e.viewState.zoom},pixelRatio:e.pixelRatio,size:e.size.slice(0),extent:e.extent.slice(0),coordinateToPixelTransform:e.coordinateToPixelTransform.slice(0),pixelToCoordinateTransform:e.pixelToCoordinateTransform.slice(0),layerStatesArray:e.layerStatesArray.map((e=>({zIndex:e.zIndex,visible:e.visible,extent:e.extent,maxResolution:e.maxResolution,minResolution:e.minResolution,managed:e.managed})))}})),m},source:new s.A({attributions:['<a href="https://www.maptiler.com/copyright/" target="_blank">© MapTiler</a>','<a href="https://www.openstreetmap.org/copyright" target="_blank">© OpenStreetMap contributors</a>']})})],target:"map",view:new i.Ay({resolutions:(0,l.EN)({tileSize:512}).getResolutions(),center:[0,0],zoom:2})});y.addControl(new o.A);let v=!0;y.getTargetElement().addEventListener("pointerleave",(()=>{v=!0,S([])})),y.on("pointermove",(function(e){e.dragging||(v=!1,d.postMessage({action:"requestFeatures",pixel:e.pixel}))})),d.addEventListener("message",(e=>{if("loadImage"===e.data.action){const t=new Image;t.crossOrigin="anonymous",t.addEventListener("load",(function(){createImageBitmap(t,0,0,t.width,t.height).then((t=>{d.postMessage({action:"imageLoaded",image:t,src:e.data.src},[t])}))})),t.src=e.data.src}else"getFeatures"===e.data.action?S(e.data.features):"requestRender"===e.data.action?y.render():p&&"rendered"===e.data.action&&(requestAnimationFrame((function(){const t=e.data.imageData;p.width=t.width,p.height=t.height,p.getContext("2d").drawImage(t,0,0),p.style.transform=e.data.transform,w=e.data.frameState,h()})),g=!1)}));const x=document.getElementById("info");function S(e){if(0==e.length||v)return x.innerText="",void(x.style.opacity="0");const t=e.map((e=>Object.keys(e).filter((e=>!e.includes(":"))).reduce(((t,n)=>(t[n]=e[n],t)),{})));x.innerText=JSON.stringify(t,null,2),x.style.opacity="1"}}},function(e){var t;t=87896,e(e.s=t)}]);
//# sourceMappingURL=offscreen-canvas.js.map